(self["webpackChunkexpense_tracker2"]=self["webpackChunkexpense_tracker2"]||[]).push([[998],{4444:function(t,e,n){"use strict";n.d(e,{BH:function(){return b},G6:function(){return C},L:function(){return c},LL:function(){return D},Pz:function(){return v},Sg:function(){return w},UG:function(){return T},ZB:function(){return h},ZR:function(){return M},aH:function(){return y},b$:function(){return k},eu:function(){return O},hl:function(){return A},jU:function(){return S},m9:function(){return H},ne:function(){return G},pd:function(){return z},r3:function(){return R},ru:function(){return I},tV:function(){return l},uI:function(){return _},vZ:function(){return j},w1:function(){return E},xO:function(){return U},xb:function(){return F},z$:function(){return x},zd:function(){return V}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):55296===(64512&s)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},s=function(t){const e=[];let n=0,i=0;while(n<t.length){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],c=((7&s)<<18|(63&r)<<12|(63&o)<<6|63&a)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(1023&c))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return e.join("")},r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const e=t[s],r=s+1<t.length,o=r?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,l=e>>2,h=(3&e)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):s(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const e=n[t.charAt(s++)],r=s<t.length,a=r?n[t.charAt(s)]:0;++s;const c=s<t.length,l=c?n[t.charAt(s)]:64;++s;const h=s<t.length,u=h?n[t.charAt(s)]:64;if(++s,null==e||null==a||null==l||null==u)throw new o;const d=e<<2|a>>4;if(i.push(d),64!==l){const t=a<<4&240|l>>2;if(i.push(t),64!==u){const t=l<<6&192|u;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(t){const e=i(t);return r.encodeByteArray(e,!0)},c=function(t){return a(t).replace(/\./g,"")},l=function(t){try{return r.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&u(n)&&(t[n]=h(t[n],e[n]));return t}function u(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f=()=>d().__FIREBASE_DEFAULTS__,p=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",BASE_URL:"/expense-tracker2/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},g=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&l(t[1]);return e&&JSON.parse(e)},m=()=>{try{return f()||p()||g()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},y=()=>{var t;return null===(t=m())||void 0===t?void 0:t.config},v=t=>{var e;return null===(e=m())||void 0===e?void 0:e[`_${t}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[c(JSON.stringify(n)),c(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function _(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function T(){var t;const e=null===(t=m())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function S(){return"object"===typeof self&&self.self===self}function I(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function k(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function E(){const t=x();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return!T()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A(){try{return"object"===typeof indexedDB}catch(t){return!1}}function O(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const P="FirebaseError";class M extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=P,Object.setPrototypeOf(this,M.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],r=s?L(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`,a=new M(i,o,n);return a}}function L(t,e){return t.replace(N,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}const N=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function F(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const n=t[s],r=e[s];if(B(n)&&B(r)){if(!j(n,r))return!1}else if(n!==r)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function B(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function U(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function V(t){const e={},n=t.replace(/^\?/,"").split("&");return n.forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function z(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e){const n=new $(t,e);return n.subscribe.bind(n)}class ${constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=q(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=W),void 0===i.error&&(i.error=W),void 0===i.complete&&(i.complete=W);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),s}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function q(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}function W(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(t){return t&&t._delegate?t._delegate:t}},2262:function(t,e,n){"use strict";n.d(e,{Bj:function(){return r},Fl:function(){return qt},IU:function(){return Ot},Jd:function(){return S},PG:function(){return kt},SU:function(){return Vt},Um:function(){return Tt},WL:function(){return Gt},X$:function(){return C},X3:function(){return At},XI:function(){return jt},Xl:function(){return Pt},dq:function(){return Rt},iH:function(){return Ft},j:function(){return k},lk:function(){return I},nZ:function(){return a},qj:function(){return _t},qq:function(){return w},yT:function(){return Ct}});var i=n(3577);let s;class r{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=s,!t&&s&&(this.index=(s.scopes||(s.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=s;try{return s=this,t()}finally{s=e}}else 0}on(){s=this}off(){s=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function o(t,e=s){e&&e.active&&e.effects.push(t)}function a(){return s}const c=t=>{const e=new Set(t);return e.w=0,e.n=0,e},l=t=>(t.w&g)>0,h=t=>(t.n&g)>0,u=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=g},d=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const s=e[i];l(s)&&!h(s)?s.delete(t):e[n++]=s,s.w&=~g,s.n&=~g}e.length=n}},f=new WeakMap;let p=0,g=1;const m=30;let y;const v=Symbol(""),b=Symbol("");class w{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,o(this,n)}run(){if(!this.active)return this.fn();let t=y,e=_;while(t){if(t===this)return;t=t.parent}try{return this.parent=y,y=this,_=!0,g=1<<++p,p<=m?u(this):x(this),this.fn()}finally{p<=m&&d(this),g=1<<--p,y=this.parent,_=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){y===this?this.deferStop=!0:this.active&&(x(this),this.onStop&&this.onStop(),this.active=!1)}}function x(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let _=!0;const T=[];function S(){T.push(_),_=!1}function I(){const t=T.pop();_=void 0===t||t}function k(t,e,n){if(_&&y){let e=f.get(t);e||f.set(t,e=new Map);let i=e.get(n);i||e.set(n,i=c());const s=void 0;E(i,s)}}function E(t,e){let n=!1;p<=m?h(t)||(t.n|=g,n=!l(t)):n=!t.has(y),n&&(t.add(y),y.deps.push(t))}function C(t,e,n,s,r,o){const a=f.get(t);if(!a)return;let l=[];if("clear"===e)l=[...a.values()];else if("length"===n&&(0,i.kJ)(t)){const t=Number(s);a.forEach(((e,n)=>{("length"===n||n>=t)&&l.push(e)}))}else switch(void 0!==n&&l.push(a.get(n)),e){case"add":(0,i.kJ)(t)?(0,i.S0)(n)&&l.push(a.get("length")):(l.push(a.get(v)),(0,i._N)(t)&&l.push(a.get(b)));break;case"delete":(0,i.kJ)(t)||(l.push(a.get(v)),(0,i._N)(t)&&l.push(a.get(b)));break;case"set":(0,i._N)(t)&&l.push(a.get(v));break}if(1===l.length)l[0]&&A(l[0]);else{const t=[];for(const e of l)e&&t.push(...e);A(c(t))}}function A(t,e){const n=(0,i.kJ)(t)?t:[...t];for(const i of n)i.computed&&O(i,e);for(const i of n)i.computed||O(i,e)}function O(t,e){(t!==y||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const P=(0,i.fY)("__proto__,__v_isRef,__isVue"),M=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(i.yk)),D=B(),L=B(!1,!0),N=B(!0),R=F();function F(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Ot(this);for(let e=0,s=this.length;e<s;e++)k(n,"get",e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(Ot)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){S();const n=Ot(this)[e].apply(this,t);return I(),n}})),t}function j(t){const e=Ot(this);return k(e,"has",t),e.hasOwnProperty(t)}function B(t=!1,e=!1){return function(n,s,r){if("__v_isReactive"===s)return!t;if("__v_isReadonly"===s)return t;if("__v_isShallow"===s)return e;if("__v_raw"===s&&r===(t?e?bt:vt:e?yt:mt).get(n))return n;const o=(0,i.kJ)(n);if(!t){if(o&&(0,i.RI)(R,s))return Reflect.get(R,s,r);if("hasOwnProperty"===s)return j}const a=Reflect.get(n,s,r);return((0,i.yk)(s)?M.has(s):P(s))?a:(t||k(n,"get",s),e?a:Rt(a)?o&&(0,i.S0)(s)?a:a.value:(0,i.Kn)(a)?t?St(a):_t(a):a)}}const U=z(),V=z(!0);function z(t=!1){return function(e,n,s,r){let o=e[n];if(Et(o)&&Rt(o)&&!Rt(s))return!1;if(!t&&(Ct(s)||Et(s)||(o=Ot(o),s=Ot(s)),!(0,i.kJ)(e)&&Rt(o)&&!Rt(s)))return o.value=s,!0;const a=(0,i.kJ)(e)&&(0,i.S0)(n)?Number(n)<e.length:(0,i.RI)(e,n),c=Reflect.set(e,n,s,r);return e===Ot(r)&&(a?(0,i.aU)(s,o)&&C(e,"set",n,s,o):C(e,"add",n,s)),c}}function G(t,e){const n=(0,i.RI)(t,e),s=t[e],r=Reflect.deleteProperty(t,e);return r&&n&&C(t,"delete",e,void 0,s),r}function $(t,e){const n=Reflect.has(t,e);return(0,i.yk)(e)&&M.has(e)||k(t,"has",e),n}function q(t){return k(t,"iterate",(0,i.kJ)(t)?"length":v),Reflect.ownKeys(t)}const W={get:D,set:U,deleteProperty:G,has:$,ownKeys:q},H={get:N,set(t,e){return!0},deleteProperty(t,e){return!0}},K=(0,i.l7)({},W,{get:L,set:V}),X=t=>t,Y=t=>Reflect.getPrototypeOf(t);function Q(t,e,n=!1,i=!1){t=t["__v_raw"];const s=Ot(t),r=Ot(e);n||(e!==r&&k(s,"get",e),k(s,"get",r));const{has:o}=Y(s),a=i?X:n?Dt:Mt;return o.call(s,e)?a(t.get(e)):o.call(s,r)?a(t.get(r)):void(t!==s&&t.get(e))}function J(t,e=!1){const n=this["__v_raw"],i=Ot(n),s=Ot(t);return e||(t!==s&&k(i,"has",t),k(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Z(t,e=!1){return t=t["__v_raw"],!e&&k(Ot(t),"iterate",v),Reflect.get(t,"size",t)}function tt(t){t=Ot(t);const e=Ot(this),n=Y(e),i=n.has.call(e,t);return i||(e.add(t),C(e,"add",t,t)),this}function et(t,e){e=Ot(e);const n=Ot(this),{has:s,get:r}=Y(n);let o=s.call(n,t);o||(t=Ot(t),o=s.call(n,t));const a=r.call(n,t);return n.set(t,e),o?(0,i.aU)(e,a)&&C(n,"set",t,e,a):C(n,"add",t,e),this}function nt(t){const e=Ot(this),{has:n,get:i}=Y(e);let s=n.call(e,t);s||(t=Ot(t),s=n.call(e,t));const r=i?i.call(e,t):void 0,o=e.delete(t);return s&&C(e,"delete",t,void 0,r),o}function it(){const t=Ot(this),e=0!==t.size,n=void 0,i=t.clear();return e&&C(t,"clear",void 0,void 0,n),i}function st(t,e){return function(n,i){const s=this,r=s["__v_raw"],o=Ot(r),a=e?X:t?Dt:Mt;return!t&&k(o,"iterate",v),r.forEach(((t,e)=>n.call(i,a(t),a(e),s)))}}function rt(t,e,n){return function(...s){const r=this["__v_raw"],o=Ot(r),a=(0,i._N)(o),c="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,h=r[t](...s),u=n?X:e?Dt:Mt;return!e&&k(o,"iterate",l?b:v),{next(){const{value:t,done:e}=h.next();return e?{value:t,done:e}:{value:c?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function ot(t){return function(...e){return"delete"!==t&&this}}function at(){const t={get(t){return Q(this,t)},get size(){return Z(this)},has:J,add:tt,set:et,delete:nt,clear:it,forEach:st(!1,!1)},e={get(t){return Q(this,t,!1,!0)},get size(){return Z(this)},has:J,add:tt,set:et,delete:nt,clear:it,forEach:st(!1,!0)},n={get(t){return Q(this,t,!0)},get size(){return Z(this,!0)},has(t){return J.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:st(!0,!1)},i={get(t){return Q(this,t,!0,!0)},get size(){return Z(this,!0)},has(t){return J.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:st(!0,!0)},s=["keys","values","entries",Symbol.iterator];return s.forEach((s=>{t[s]=rt(s,!1,!1),n[s]=rt(s,!0,!1),e[s]=rt(s,!1,!0),i[s]=rt(s,!0,!0)})),[t,n,e,i]}const[ct,lt,ht,ut]=at();function dt(t,e){const n=e?t?ut:ht:t?lt:ct;return(e,s,r)=>"__v_isReactive"===s?!t:"__v_isReadonly"===s?t:"__v_raw"===s?e:Reflect.get((0,i.RI)(n,s)&&s in e?n:e,s,r)}const ft={get:dt(!1,!1)},pt={get:dt(!1,!0)},gt={get:dt(!0,!1)};const mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,bt=new WeakMap;function wt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:wt((0,i.W7)(t))}function _t(t){return Et(t)?t:It(t,!1,W,ft,mt)}function Tt(t){return It(t,!1,K,pt,yt)}function St(t){return It(t,!0,H,gt,vt)}function It(t,e,n,s,r){if(!(0,i.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=r.get(t);if(o)return o;const a=xt(t);if(0===a)return t;const c=new Proxy(t,2===a?s:n);return r.set(t,c),c}function kt(t){return Et(t)?kt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Et(t){return!(!t||!t["__v_isReadonly"])}function Ct(t){return!(!t||!t["__v_isShallow"])}function At(t){return kt(t)||Et(t)}function Ot(t){const e=t&&t["__v_raw"];return e?Ot(e):t}function Pt(t){return(0,i.Nj)(t,"__v_skip",!0),t}const Mt=t=>(0,i.Kn)(t)?_t(t):t,Dt=t=>(0,i.Kn)(t)?St(t):t;function Lt(t){_&&y&&(t=Ot(t),E(t.dep||(t.dep=c())))}function Nt(t,e){t=Ot(t);const n=t.dep;n&&A(n)}function Rt(t){return!(!t||!0!==t.__v_isRef)}function Ft(t){return Bt(t,!1)}function jt(t){return Bt(t,!0)}function Bt(t,e){return Rt(t)?t:new Ut(t,e)}class Ut{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Ot(t),this._value=e?t:Mt(t)}get value(){return Lt(this),this._value}set value(t){const e=this.__v_isShallow||Ct(t)||Et(t);t=e?t:Ot(t),(0,i.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Mt(t),Nt(this,t))}}function Vt(t){return Rt(t)?t.value:t}const zt={get:(t,e,n)=>Vt(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return Rt(s)&&!Rt(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function Gt(t){return kt(t)?t:new Proxy(t,zt)}class $t{constructor(t,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new w(t,(()=>{this._dirty||(this._dirty=!0,Nt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const t=Ot(this);return Lt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function qt(t,e,n=!1){let s,r;const o=(0,i.mf)(t);o?(s=t,r=i.dG):(s=t.get,r=t.set);const a=new $t(s,r,o||!r,n);return a}},6252:function(t,e,n){"use strict";n.d(e,{$d:function(){return o},Cn:function(){return R},FN:function(){return vn},Fl:function(){return Fn},HY:function(){return Re},JJ:function(){return le},Ko:function(){return jt},P$:function(){return st},Q6:function(){return ht},U2:function(){return ot},Uk:function(){return on},Us:function(){return Oe},Wm:function(){return en},Y3:function(){return v},Y8:function(){return tt},YP:function(){return H},_:function(){return tn},aZ:function(){return ut},dD:function(){return N},f3:function(){return he},h:function(){return jn},iD:function(){return He},ic:function(){return kt},j4:function(){return Ke},kq:function(){return cn},nJ:function(){return nt},nK:function(){return lt},uE:function(){return an},up:function(){return Lt},w5:function(){return F},wg:function(){return ze},wy:function(){return J}});var i=n(2262),s=n(3577);function r(t,e,n,i){let s;try{s=i?t(...i):t()}catch(r){a(r,e,n)}return s}function o(t,e,n,i){if((0,s.mf)(t)){const o=r(t,e,n,i);return o&&(0,s.tI)(o)&&o.catch((t=>{a(t,e,n)})),o}const c=[];for(let s=0;s<t.length;s++)c.push(o(t[s],e,n,i));return c}function a(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const s=e.proxy,o=n;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,s,o))return;i=i.parent}const a=e.appContext.config.errorHandler;if(a)return void r(a,null,10,[t,s,o])}c(t,n,s,i)}function c(t,e,n,i=!0){console.error(t)}let l=!1,h=!1;const u=[];let d=0;const f=[];let p=null,g=0;const m=Promise.resolve();let y=null;function v(t){const e=y||m;return t?e.then(this?t.bind(this):t):e}function b(t){let e=d+1,n=u.length;while(e<n){const i=e+n>>>1,s=k(u[i]);s<t?e=i+1:n=i}return e}function w(t){u.length&&u.includes(t,l&&t.allowRecurse?d+1:d)||(null==t.id?u.push(t):u.splice(b(t.id),0,t),x())}function x(){l||h||(h=!0,y=m.then(C))}function _(t){const e=u.indexOf(t);e>d&&u.splice(e,1)}function T(t){(0,s.kJ)(t)?f.push(...t):p&&p.includes(t,t.allowRecurse?g+1:g)||f.push(t),x()}function S(t,e=(l?d+1:0)){for(0;e<u.length;e++){const t=u[e];t&&t.pre&&(u.splice(e,1),e--,t())}}function I(t){if(f.length){const t=[...new Set(f)];if(f.length=0,p)return void p.push(...t);for(p=t,p.sort(((t,e)=>k(t)-k(e))),g=0;g<p.length;g++)p[g]();p=null,g=0}}const k=t=>null==t.id?1/0:t.id,E=(t,e)=>{const n=k(t)-k(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function C(t){h=!1,l=!0,u.sort(E);s.dG;try{for(d=0;d<u.length;d++){const t=u[d];t&&!1!==t.active&&r(t,null,14)}}finally{d=0,u.length=0,I(t),l=!1,y=null,(u.length||f.length)&&C(t)}}function A(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||s.kT;let r=n;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in i){const t=`${"modelValue"===c?"model":c}Modifiers`,{number:e,trim:o}=i[t]||s.kT;o&&(r=n.map((t=>(0,s.HD)(t)?t.trim():t))),e&&(r=n.map(s.h5))}let l;let h=i[l=(0,s.hR)(e)]||i[l=(0,s.hR)((0,s._A)(e))];!h&&a&&(h=i[l=(0,s.hR)((0,s.rs)(e))]),h&&o(h,t,6,r);const u=i[l+"Once"];if(u){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,o(u,t,6,r)}}function O(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(void 0!==r)return r;const o=t.emits;let a={},c=!1;if(!(0,s.mf)(t)){const i=t=>{const n=O(t,e,!0);n&&(c=!0,(0,s.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return o||c?((0,s.kJ)(o)?o.forEach((t=>a[t]=null)):(0,s.l7)(a,o),(0,s.Kn)(t)&&i.set(t,a),a):((0,s.Kn)(t)&&i.set(t,null),null)}function P(t,e){return!(!t||!(0,s.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,s.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,s.RI)(t,(0,s.rs)(e))||(0,s.RI)(t,e))}let M=null,D=null;function L(t){const e=M;return M=t,D=t&&t.type.__scopeId||null,e}function N(t){D=t}function R(){D=null}function F(t,e=M,n){if(!e)return t;if(t._n)return t;const i=(...n)=>{i._d&&qe(-1);const s=L(e);let r;try{r=t(...n)}finally{L(s),i._d&&qe(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function j(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:o,propsOptions:[c],slots:l,attrs:h,emit:u,render:d,renderCache:f,data:p,setupState:g,ctx:m,inheritAttrs:y}=t;let v,b;const w=L(t);try{if(4&n.shapeFlag){const t=r||i;v=ln(d.call(t,t,f,o,g,p,m)),b=h}else{const t=e;0,v=ln(t.length>1?t(o,{attrs:h,slots:l,emit:u}):t(o,null)),b=e.props?h:B(h)}}catch(_){Ue.length=0,a(_,t,1),v=en(je)}let x=v;if(b&&!1!==y){const t=Object.keys(b),{shapeFlag:e}=x;t.length&&7&e&&(c&&t.some(s.tR)&&(b=U(b,c)),x=rn(x,b))}return n.dirs&&(x=rn(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),v=x,L(w),v}const B=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,s.F7)(n))&&((e||(e={}))[n]=t[n]);return e},U=(t,e)=>{const n={};for(const i in t)(0,s.tR)(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function V(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:c}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!s&&!a||a&&a.$stable)||i!==o&&(i?!o||z(i,o,l):!!o);if(1024&c)return!0;if(16&c)return i?z(i,o,l):!!o;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==i[n]&&!P(l,n))return!0}}return!1}function z(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!P(n,r))return!0}return!1}function G({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const $=t=>t.__isSuspense;function q(t,e){e&&e.pendingBranch?(0,s.kJ)(t)?e.effects.push(...t):e.effects.push(t):T(t)}const W={};function H(t,e,n){return K(t,e,n)}function K(t,e,{immediate:n,deep:a,flush:c,onTrack:l,onTrigger:h}=s.kT){var u;const d=(0,i.nZ)()===(null==(u=yn)?void 0:u.scope)?yn:null;let f,p,g=!1,m=!1;if((0,i.dq)(t)?(f=()=>t.value,g=(0,i.yT)(t)):(0,i.PG)(t)?(f=()=>t,a=!0):(0,s.kJ)(t)?(m=!0,g=t.some((t=>(0,i.PG)(t)||(0,i.yT)(t))),f=()=>t.map((t=>(0,i.dq)(t)?t.value:(0,i.PG)(t)?Q(t):(0,s.mf)(t)?r(t,d,2):void 0))):f=(0,s.mf)(t)?e?()=>r(t,d,2):()=>{if(!d||!d.isUnmounted)return p&&p(),o(t,d,3,[v])}:s.dG,e&&a){const t=f;f=()=>Q(t())}let y,v=t=>{p=T.onStop=()=>{r(t,d,4)}};if(En){if(v=s.dG,e?n&&o(e,d,3,[f(),m?[]:void 0,v]):f(),"sync"!==c)return s.dG;{const t=Un();y=t.__watcherHandles||(t.__watcherHandles=[])}}let b=m?new Array(t.length).fill(W):W;const x=()=>{if(T.active)if(e){const t=T.run();(a||g||(m?t.some(((t,e)=>(0,s.aU)(t,b[e]))):(0,s.aU)(t,b)))&&(p&&p(),o(e,d,3,[t,b===W?void 0:m&&b[0]===W?[]:b,v]),b=t)}else T.run()};let _;x.allowRecurse=!!e,"sync"===c?_=x:"post"===c?_=()=>Ae(x,d&&d.suspense):(x.pre=!0,d&&(x.id=d.uid),_=()=>w(x));const T=new i.qq(f,_);e?n?x():b=T.run():"post"===c?Ae(T.run.bind(T),d&&d.suspense):T.run();const S=()=>{T.stop(),d&&d.scope&&(0,s.Od)(d.scope.effects,T)};return y&&y.push(S),S}function X(t,e,n){const i=this.proxy,r=(0,s.HD)(t)?t.includes(".")?Y(i,t):()=>i[t]:t.bind(i,i);let o;(0,s.mf)(e)?o=e:(o=e.handler,n=e);const a=yn;_n(this);const c=K(r,o.bind(i),n);return a?_n(a):Tn(),c}function Y(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Q(t,e){if(!(0,s.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,i.dq)(t))Q(t.value,e);else if((0,s.kJ)(t))for(let n=0;n<t.length;n++)Q(t[n],e);else if((0,s.DM)(t)||(0,s._N)(t))t.forEach((t=>{Q(t,e)}));else if((0,s.PO)(t))for(const n in t)Q(t[n],e);return t}function J(t,e){const n=M;if(null===n)return t;const i=Ln(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,n,a,c=s.kT]=e[o];t&&((0,s.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&Q(n),r.push({dir:t,instance:i,value:n,oldValue:void 0,arg:a,modifiers:c}))}return t}function Z(t,e,n,s){const r=t.dirs,a=e&&e.dirs;for(let c=0;c<r.length;c++){const l=r[c];a&&(l.oldValue=a[c].value);let h=l.dir[s];h&&((0,i.Jd)(),o(h,n,8,[t.el,l,t,e]),(0,i.lk)())}}function tt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return St((()=>{t.isMounted=!0})),Et((()=>{t.isUnmounting=!0})),t}const et=[Function,Array],nt={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:et,onEnter:et,onAfterEnter:et,onEnterCancelled:et,onBeforeLeave:et,onLeave:et,onAfterLeave:et,onLeaveCancelled:et,onBeforeAppear:et,onAppear:et,onAfterAppear:et,onAppearCancelled:et},it={name:"BaseTransition",props:nt,setup(t,{slots:e}){const n=vn(),s=tt();let r;return()=>{const o=e.default&&ht(e.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){let t=!1;for(const e of o)if(e.type!==je){0,a=e,t=!0;break}}const c=(0,i.IU)(t),{mode:l}=c;if(s.isLeaving)return at(a);const h=ct(a);if(!h)return at(a);const u=ot(h,c,s,n);lt(h,u);const d=n.subTree,f=d&&ct(d);let p=!1;const{getTransitionKey:g}=h.type;if(g){const t=g();void 0===r?r=t:t!==r&&(r=t,p=!0)}if(f&&f.type!==je&&(!Ye(h,f)||p)){const t=ot(f,c,s,n);if(lt(f,t),"out-in"===l)return s.isLeaving=!0,t.afterLeave=()=>{s.isLeaving=!1,!1!==n.update.active&&n.update()},at(a);"in-out"===l&&h.type!==je&&(t.delayLeave=(t,e,n)=>{const i=rt(s,f);i[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return a}}},st=it;function rt(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function ot(t,e,n,i){const{appear:r,mode:a,persisted:c=!1,onBeforeEnter:l,onEnter:h,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:y,onAppear:v,onAfterAppear:b,onAppearCancelled:w}=e,x=String(t.key),_=rt(n,t),T=(t,e)=>{t&&o(t,i,9,e)},S=(t,e)=>{const n=e[1];T(t,e),(0,s.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},I={mode:a,persisted:c,beforeEnter(e){let i=l;if(!n.isMounted){if(!r)return;i=y||l}e._leaveCb&&e._leaveCb(!0);const s=_[x];s&&Ye(t,s)&&s.el._leaveCb&&s.el._leaveCb(),T(i,[e])},enter(t){let e=h,i=u,s=d;if(!n.isMounted){if(!r)return;e=v||h,i=b||u,s=w||d}let o=!1;const a=t._enterCb=e=>{o||(o=!0,T(e?s:i,[t]),I.delayedLeave&&I.delayedLeave(),t._enterCb=void 0)};e?S(e,[t,a]):a()},leave(e,i){const s=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return i();T(f,[e]);let r=!1;const o=e._leaveCb=n=>{r||(r=!0,i(),T(n?m:g,[e]),e._leaveCb=void 0,_[s]===t&&delete _[s])};_[s]=t,p?S(p,[e,o]):o()},clone(t){return ot(t,e,n,i)}};return I}function at(t){if(ft(t))return t=rn(t),t.children=null,t}function ct(t){return ft(t)?t.children?t.children[0]:void 0:t}function lt(t,e){6&t.shapeFlag&&t.component?lt(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ht(t,e=!1,n){let i=[],s=0;for(let r=0;r<t.length;r++){let o=t[r];const a=null==n?o.key:String(n)+String(null!=o.key?o.key:r);o.type===Re?(128&o.patchFlag&&s++,i=i.concat(ht(o.children,e,a))):(e||o.type!==je)&&i.push(null!=a?rn(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function ut(t,e){return(0,s.mf)(t)?(()=>(0,s.l7)({name:t.name},e,{setup:t}))():t}const dt=t=>!!t.type.__asyncLoader;const ft=t=>t.type.__isKeepAlive;RegExp,RegExp;function pt(t,e){return(0,s.kJ)(t)?t.some((t=>pt(t,e))):(0,s.HD)(t)?t.split(",").includes(e):!!(0,s.Kj)(t)&&t.test(e)}function gt(t,e){yt(t,"a",e)}function mt(t,e){yt(t,"da",e)}function yt(t,e,n=yn){const i=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(xt(e,i,n),n){let t=n.parent;while(t&&t.parent)ft(t.parent.vnode)&&vt(i,e,n,t),t=t.parent}}function vt(t,e,n,i){const r=xt(e,t,i,!0);Ct((()=>{(0,s.Od)(i[e],r)}),n)}function bt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function wt(t){return 128&t.shapeFlag?t.ssContent:t}function xt(t,e,n=yn,s=!1){if(n){const r=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...s)=>{if(n.isUnmounted)return;(0,i.Jd)(),_n(n);const r=o(e,n,t,s);return Tn(),(0,i.lk)(),r});return s?r.unshift(a):r.push(a),a}}const _t=t=>(e,n=yn)=>(!En||"sp"===t)&&xt(t,((...t)=>e(...t)),n),Tt=_t("bm"),St=_t("m"),It=_t("bu"),kt=_t("u"),Et=_t("bum"),Ct=_t("um"),At=_t("sp"),Ot=_t("rtg"),Pt=_t("rtc");function Mt(t,e=yn){xt("ec",t,e)}const Dt="components";function Lt(t,e){return Rt(Dt,t,!0,e)||t}const Nt=Symbol.for("v-ndc");function Rt(t,e,n=!0,i=!1){const r=M||yn;if(r){const n=r.type;if(t===Dt){const t=Nn(n,!1);if(t&&(t===e||t===(0,s._A)(e)||t===(0,s.kC)((0,s._A)(e))))return n}const o=Ft(r[t]||n[t],e)||Ft(r.appContext[t],e);return!o&&i?n:o}}function Ft(t,e){return t&&(t[e]||t[(0,s._A)(e)]||t[(0,s.kC)((0,s._A)(e))])}function jt(t,e,n,i){let r;const o=n&&n[i];if((0,s.kJ)(t)||(0,s.HD)(t)){r=new Array(t.length);for(let n=0,i=t.length;n<i;n++)r[n]=e(t[n],n,void 0,o&&o[n])}else if("number"===typeof t){0,r=new Array(t);for(let n=0;n<t;n++)r[n]=e(n+1,n,void 0,o&&o[n])}else if((0,s.Kn)(t))if(t[Symbol.iterator])r=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const s=n[i];r[i]=e(t[s],s,i,o&&o[i])}}else r=[];return n&&(n[i]=r),r}const Bt=t=>t?Sn(t)?Ln(t)||t.proxy:Bt(t.parent):null,Ut=(0,s.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bt(t.parent),$root:t=>Bt(t.root),$emit:t=>t.emit,$options:t=>Xt(t),$forceUpdate:t=>t.f||(t.f=()=>w(t.update)),$nextTick:t=>t.n||(t.n=v.bind(t.proxy)),$watch:t=>X.bind(t)}),Vt=(t,e)=>t!==s.kT&&!t.__isScriptSetup&&(0,s.RI)(t,e),zt={get({_:t},e){const{ctx:n,setupState:r,data:o,props:a,accessCache:c,type:l,appContext:h}=t;let u;if("$"!==e[0]){const i=c[e];if(void 0!==i)switch(i){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(Vt(r,e))return c[e]=1,r[e];if(o!==s.kT&&(0,s.RI)(o,e))return c[e]=2,o[e];if((u=t.propsOptions[0])&&(0,s.RI)(u,e))return c[e]=3,a[e];if(n!==s.kT&&(0,s.RI)(n,e))return c[e]=4,n[e];$t&&(c[e]=0)}}const d=Ut[e];let f,p;return d?("$attrs"===e&&(0,i.j)(t,"get",e),d(t)):(f=l.__cssModules)&&(f=f[e])?f:n!==s.kT&&(0,s.RI)(n,e)?(c[e]=4,n[e]):(p=h.config.globalProperties,(0,s.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:i,setupState:r,ctx:o}=t;return Vt(r,e)?(r[e]=n,!0):i!==s.kT&&(0,s.RI)(i,e)?(i[e]=n,!0):!(0,s.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:o}},a){let c;return!!n[a]||t!==s.kT&&(0,s.RI)(t,a)||Vt(e,a)||(c=o[0])&&(0,s.RI)(c,a)||(0,s.RI)(i,a)||(0,s.RI)(Ut,a)||(0,s.RI)(r.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,s.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Gt(t){return(0,s.kJ)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let $t=!0;function qt(t){const e=Xt(t),n=t.proxy,r=t.ctx;$t=!1,e.beforeCreate&&Ht(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:l,provide:h,inject:u,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:m,activated:y,deactivated:v,beforeDestroy:b,beforeUnmount:w,destroyed:x,unmounted:_,render:T,renderTracked:S,renderTriggered:I,errorCaptured:k,serverPrefetch:E,expose:C,inheritAttrs:A,components:O,directives:P,filters:M}=e,D=null;if(u&&Wt(u,r,D),c)for(const i in c){const t=c[i];(0,s.mf)(t)&&(r[i]=t.bind(n))}if(o){0;const e=o.call(n,n);0,(0,s.Kn)(e)&&(t.data=(0,i.qj)(e))}if($t=!0,a)for(const i in a){const t=a[i],e=(0,s.mf)(t)?t.bind(n,n):(0,s.mf)(t.get)?t.get.bind(n,n):s.dG;0;const o=!(0,s.mf)(t)&&(0,s.mf)(t.set)?t.set.bind(n):s.dG,c=Fn({get:e,set:o});Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(l)for(const i in l)Kt(l[i],r,n,i);if(h){const t=(0,s.mf)(h)?h.call(n):h;Reflect.ownKeys(t).forEach((e=>{le(e,t[e])}))}function L(t,e){(0,s.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&Ht(d,t,"c"),L(Tt,f),L(St,p),L(It,g),L(kt,m),L(gt,y),L(mt,v),L(Mt,k),L(Pt,S),L(Ot,I),L(Et,w),L(Ct,_),L(At,E),(0,s.kJ)(C))if(C.length){const e=t.exposed||(t.exposed={});C.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===s.dG&&(t.render=T),null!=A&&(t.inheritAttrs=A),O&&(t.components=O),P&&(t.directives=P)}function Wt(t,e,n=s.dG){(0,s.kJ)(t)&&(t=te(t));for(const r in t){const n=t[r];let o;o=(0,s.Kn)(n)?"default"in n?he(n.from||r,n.default,!0):he(n.from||r):he(n),(0,i.dq)(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[r]=o}}function Ht(t,e,n){o((0,s.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Kt(t,e,n,i){const r=i.includes(".")?Y(n,i):()=>n[i];if((0,s.HD)(t)){const n=e[t];(0,s.mf)(n)&&H(r,n)}else if((0,s.mf)(t))H(r,t.bind(n));else if((0,s.Kn)(t))if((0,s.kJ)(t))t.forEach((t=>Kt(t,e,n,i)));else{const i=(0,s.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,s.mf)(i)&&H(r,i,t)}else 0}function Xt(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,c=o.get(e);let l;return c?l=c:r.length||n||i?(l={},r.length&&r.forEach((t=>Yt(l,t,a,!0))),Yt(l,e,a)):l=e,(0,s.Kn)(e)&&o.set(e,l),l}function Yt(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&Yt(t,r,n,!0),s&&s.forEach((e=>Yt(t,e,n,!0)));for(const o in e)if(i&&"expose"===o);else{const i=Qt[o]||n&&n[o];t[o]=i?i(t[o],e[o]):e[o]}return t}const Qt={data:Jt,props:ie,emits:ie,methods:ne,computed:ne,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:ne,directives:ne,watch:se,provide:Jt,inject:Zt};function Jt(t,e){return e?t?function(){return(0,s.l7)((0,s.mf)(t)?t.call(this,this):t,(0,s.mf)(e)?e.call(this,this):e)}:e:t}function Zt(t,e){return ne(te(t),te(e))}function te(t){if((0,s.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ee(t,e){return t?[...new Set([].concat(t,e))]:e}function ne(t,e){return t?(0,s.l7)(Object.create(null),t,e):e}function ie(t,e){return t?(0,s.kJ)(t)&&(0,s.kJ)(e)?[...new Set([...t,...e])]:(0,s.l7)(Object.create(null),Gt(t),Gt(null!=e?e:{})):e}function se(t,e){if(!t)return e;if(!e)return t;const n=(0,s.l7)(Object.create(null),t);for(const i in e)n[i]=ee(t[i],e[i]);return n}function re(){return{app:null,config:{isNativeTag:s.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oe=0;function ae(t,e){return function(n,i=null){(0,s.mf)(n)||(n=(0,s.l7)({},n)),null==i||(0,s.Kn)(i)||(i=null);const r=re();const o=new Set;let a=!1;const c=r.app={_uid:oe++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:Vn,get config(){return r.config},set config(t){0},use(t,...e){return o.has(t)||(t&&(0,s.mf)(t.install)?(o.add(t),t.install(c,...e)):(0,s.mf)(t)&&(o.add(t),t(c,...e))),c},mixin(t){return r.mixins.includes(t)||r.mixins.push(t),c},component(t,e){return e?(r.components[t]=e,c):r.components[t]},directive(t,e){return e?(r.directives[t]=e,c):r.directives[t]},mount(s,o,l){if(!a){0;const h=en(n,i);return h.appContext=r,o&&e?e(h,s):t(h,s,l),a=!0,c._container=s,s.__vue_app__=c,Ln(h.component)||h.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(t,e){return r.provides[t]=e,c},runWithContext(t){ce=c;try{return t()}finally{ce=null}}};return c}}let ce=null;function le(t,e){if(yn){let n=yn.provides;const i=yn.parent&&yn.parent.provides;i===n&&(n=yn.provides=Object.create(i)),n[t]=e}else 0}function he(t,e,n=!1){const i=yn||M;if(i||ce){const r=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ce._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&(0,s.mf)(e)?e.call(i&&i.proxy):e}else 0}function ue(t,e,n,r=!1){const o={},a={};(0,s.Nj)(a,Qe,1),t.propsDefaults=Object.create(null),fe(t,e,o,a);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);n?t.props=r?o:(0,i.Um)(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function de(t,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,l=(0,i.IU)(o),[h]=t.propsOptions;let u=!1;if(!(r||c>0)||16&c){let i;fe(t,e,o,a)&&(u=!0);for(const r in l)e&&((0,s.RI)(e,r)||(i=(0,s.rs)(r))!==r&&(0,s.RI)(e,i))||(h?!n||void 0===n[r]&&void 0===n[i]||(o[r]=pe(h,l,r,void 0,t,!0)):delete o[r]);if(a!==l)for(const t in a)e&&(0,s.RI)(e,t)||(delete a[t],u=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){let r=n[i];if(P(t.emitsOptions,r))continue;const c=e[r];if(h)if((0,s.RI)(a,r))c!==a[r]&&(a[r]=c,u=!0);else{const e=(0,s._A)(r);o[e]=pe(h,l,e,c,t,!1)}else c!==a[r]&&(a[r]=c,u=!0)}}u&&(0,i.X$)(t,"set","$attrs")}function fe(t,e,n,r){const[o,a]=t.propsOptions;let c,l=!1;if(e)for(let i in e){if((0,s.Gg)(i))continue;const h=e[i];let u;o&&(0,s.RI)(o,u=(0,s._A)(i))?a&&a.includes(u)?(c||(c={}))[u]=h:n[u]=h:P(t.emitsOptions,i)||i in r&&h===r[i]||(r[i]=h,l=!0)}if(a){const e=(0,i.IU)(n),r=c||s.kT;for(let i=0;i<a.length;i++){const c=a[i];n[c]=pe(o,e,c,r[c],t,!(0,s.RI)(r,c))}}return l}function pe(t,e,n,i,r,o){const a=t[n];if(null!=a){const t=(0,s.RI)(a,"default");if(t&&void 0===i){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,s.mf)(t)){const{propsDefaults:s}=r;n in s?i=s[n]:(_n(r),i=s[n]=t.call(null,e),Tn())}else i=t}a[0]&&(o&&!t?i=!1:!a[1]||""!==i&&i!==(0,s.rs)(n)||(i=!0))}return i}function ge(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const o=t.props,a={},c=[];let l=!1;if(!(0,s.mf)(t)){const i=t=>{l=!0;const[n,i]=ge(t,e,!0);(0,s.l7)(a,n),i&&c.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!o&&!l)return(0,s.Kn)(t)&&i.set(t,s.Z6),s.Z6;if((0,s.kJ)(o))for(let u=0;u<o.length;u++){0;const t=(0,s._A)(o[u]);me(t)&&(a[t]=s.kT)}else if(o){0;for(const t in o){const e=(0,s._A)(t);if(me(e)){const n=o[t],i=a[e]=(0,s.kJ)(n)||(0,s.mf)(n)?{type:n}:(0,s.l7)({},n);if(i){const t=be(Boolean,i.type),n=be(String,i.type);i[0]=t>-1,i[1]=n<0||t<n,(t>-1||(0,s.RI)(i,"default"))&&c.push(e)}}}}const h=[a,c];return(0,s.Kn)(t)&&i.set(t,h),h}function me(t){return"$"!==t[0]}function ye(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function ve(t,e){return ye(t)===ye(e)}function be(t,e){return(0,s.kJ)(e)?e.findIndex((e=>ve(e,t))):(0,s.mf)(e)&&ve(e,t)?0:-1}const we=t=>"_"===t[0]||"$stable"===t,xe=t=>(0,s.kJ)(t)?t.map(ln):[ln(t)],_e=(t,e,n)=>{if(e._n)return e;const i=F(((...t)=>xe(e(...t))),n);return i._c=!1,i},Te=(t,e,n)=>{const i=t._ctx;for(const r in t){if(we(r))continue;const n=t[r];if((0,s.mf)(n))e[r]=_e(r,n,i);else if(null!=n){0;const t=xe(n);e[r]=()=>t}}},Se=(t,e)=>{const n=xe(e);t.slots.default=()=>n},Ie=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,i.IU)(e),(0,s.Nj)(e,"_",n)):Te(e,t.slots={})}else t.slots={},e&&Se(t,e);(0,s.Nj)(t.slots,Qe,1)},ke=(t,e,n)=>{const{vnode:i,slots:r}=t;let o=!0,a=s.kT;if(32&i.shapeFlag){const t=e._;t?n&&1===t?o=!1:((0,s.l7)(r,e),n||1!==t||delete r._):(o=!e.$stable,Te(e,r)),a=e}else e&&(Se(t,e),a={default:1});if(o)for(const s in r)we(s)||s in a||delete r[s]};function Ee(t,e,n,o,a=!1){if((0,s.kJ)(t))return void t.forEach(((t,i)=>Ee(t,e&&((0,s.kJ)(e)?e[i]:e),n,o,a)));if(dt(o)&&!a)return;const c=4&o.shapeFlag?Ln(o.component)||o.component.proxy:o.el,l=a?null:c,{i:h,r:u}=t;const d=e&&e.r,f=h.refs===s.kT?h.refs={}:h.refs,p=h.setupState;if(null!=d&&d!==u&&((0,s.HD)(d)?(f[d]=null,(0,s.RI)(p,d)&&(p[d]=null)):(0,i.dq)(d)&&(d.value=null)),(0,s.mf)(u))r(u,h,12,[l,f]);else{const e=(0,s.HD)(u),r=(0,i.dq)(u);if(e||r){const i=()=>{if(t.f){const n=e?(0,s.RI)(p,u)?p[u]:f[u]:u.value;a?(0,s.kJ)(n)&&(0,s.Od)(n,c):(0,s.kJ)(n)?n.includes(c)||n.push(c):e?(f[u]=[c],(0,s.RI)(p,u)&&(p[u]=f[u])):(u.value=[c],t.k&&(f[t.k]=u.value))}else e?(f[u]=l,(0,s.RI)(p,u)&&(p[u]=l)):r&&(u.value=l,t.k&&(f[t.k]=l))};l?(i.id=-1,Ae(i,n)):i()}else 0}}function Ce(){}const Ae=q;function Oe(t){return Pe(t)}function Pe(t,e){Ce();const n=(0,s.E9)();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:c,createText:l,createComment:h,setText:u,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=s.dG,insertStaticContent:m}=t,y=(t,e,n,i=null,s=null,r=null,o=!1,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!Ye(t,e)&&(i=J(t),H(t,s,r,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:h,shapeFlag:u}=e;switch(l){case Fe:v(t,e,n,i);break;case je:b(t,e,n,i);break;case Be:null==t&&x(e,n,i,o);break;case Re:L(t,e,n,i,s,r,o,a,c);break;default:1&u?E(t,e,n,i,s,r,o,a,c):6&u?N(t,e,n,i,s,r,o,a,c):(64&u||128&u)&&l.process(t,e,n,i,s,r,o,a,c,et)}null!=h&&s&&Ee(h,t&&t.ref,r,e||t,!e)},v=(t,e,n,i)=>{if(null==t)r(e.el=l(e.children),n,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},b=(t,e,n,i)=>{null==t?r(e.el=h(e.children||""),n,i):e.el=t.el},x=(t,e,n,i)=>{[t.el,t.anchor]=m(t.children,e,n,i,t.el,t.anchor)},T=({el:t,anchor:e},n,i)=>{let s;while(t&&t!==e)s=p(t),r(t,n,i),t=s;r(e,n,i)},k=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),o(t),t=n;o(e)},E=(t,e,n,i,s,r,o,a,c)=>{o=o||"svg"===e.type,null==t?C(e,n,i,s,r,o,a,c):P(t,e,s,r,o,a,c)},C=(t,e,n,i,o,l,h,u)=>{let f,p;const{type:g,props:m,shapeFlag:y,transition:v,dirs:b}=t;if(f=t.el=c(t.type,l,m&&m.is,m),8&y?d(f,t.children):16&y&&O(t.children,f,null,i,o,l&&"foreignObject"!==g,h,u),b&&Z(t,null,i,"created"),A(f,t,t.scopeId,h,i),m){for(const e in m)"value"===e||(0,s.Gg)(e)||a(f,e,null,m[e],l,t.children,i,o,Q);"value"in m&&a(f,"value",null,m.value),(p=m.onVnodeBeforeMount)&&fn(p,i,t)}b&&Z(t,null,i,"beforeMount");const w=(!o||o&&!o.pendingBranch)&&v&&!v.persisted;w&&v.beforeEnter(f),r(f,e,n),((p=m&&m.onVnodeMounted)||w||b)&&Ae((()=>{p&&fn(p,i,t),w&&v.enter(f),b&&Z(t,null,i,"mounted")}),o)},A=(t,e,n,i,s)=>{if(n&&g(t,n),i)for(let r=0;r<i.length;r++)g(t,i[r]);if(s){let n=s.subTree;if(e===n){const e=s.vnode;A(t,e,e.scopeId,e.slotScopeIds,s.parent)}}},O=(t,e,n,i,s,r,o,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=a?hn(t[l]):ln(t[l]);y(null,c,e,n,i,s,r,o,a)}},P=(t,e,n,i,r,o,c)=>{const l=e.el=t.el;let{patchFlag:h,dynamicChildren:u,dirs:f}=e;h|=16&t.patchFlag;const p=t.props||s.kT,g=e.props||s.kT;let m;n&&Me(n,!1),(m=g.onVnodeBeforeUpdate)&&fn(m,n,e,t),f&&Z(e,t,n,"beforeUpdate"),n&&Me(n,!0);const y=r&&"foreignObject"!==e.type;if(u?M(t.dynamicChildren,u,l,n,i,y,o):c||z(t,e,l,null,n,i,y,o,!1),h>0){if(16&h)D(l,e,p,g,n,i,r);else if(2&h&&p.class!==g.class&&a(l,"class",null,g.class,r),4&h&&a(l,"style",p.style,g.style,r),8&h){const s=e.dynamicProps;for(let e=0;e<s.length;e++){const o=s[e],c=p[o],h=g[o];h===c&&"value"!==o||a(l,o,c,h,r,t.children,n,i,Q)}}1&h&&t.children!==e.children&&d(l,e.children)}else c||null!=u||D(l,e,p,g,n,i,r);((m=g.onVnodeUpdated)||f)&&Ae((()=>{m&&fn(m,n,e,t),f&&Z(e,t,n,"updated")}),i)},M=(t,e,n,i,s,r,o)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],h=c.el&&(c.type===Re||!Ye(c,l)||70&c.shapeFlag)?f(c.el):n;y(c,l,h,null,i,s,r,o,!0)}},D=(t,e,n,i,r,o,c)=>{if(n!==i){if(n!==s.kT)for(const l in n)(0,s.Gg)(l)||l in i||a(t,l,n[l],null,c,e.children,r,o,Q);for(const l in i){if((0,s.Gg)(l))continue;const h=i[l],u=n[l];h!==u&&"value"!==l&&a(t,l,u,h,c,e.children,r,o,Q)}"value"in i&&a(t,"value",n.value,i.value)}},L=(t,e,n,i,s,o,a,c,h)=>{const u=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(r(u,n,i),r(d,n,i),O(e.children,n,d,s,o,a,c,h)):f>0&&64&f&&p&&t.dynamicChildren?(M(t.dynamicChildren,p,n,s,o,a,c),(null!=e.key||s&&e===s.subTree)&&De(t,e,!0)):z(t,e,n,d,s,o,a,c,h)},N=(t,e,n,i,s,r,o,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?s.ctx.activate(e,n,i,o,c):R(e,n,i,s,r,o,c):F(t,e,c)},R=(t,e,n,i,s,r,o)=>{const a=t.component=mn(t,i,s);if(ft(t)&&(a.ctx.renderer=et),Cn(a),a.asyncDep){if(s&&s.registerDep(a,B),!t.el){const t=a.subTree=en(je);b(null,t,e,n)}}else B(a,t,e,n,s,r,o)},F=(t,e,n)=>{const i=e.component=t.component;if(V(t,e,n)){if(i.asyncDep&&!i.asyncResolved)return void U(i,e,n);i.next=e,_(i.update),i.update()}else e.el=t.el,i.vnode=e},B=(t,e,n,r,o,a,c)=>{const l=()=>{if(t.isMounted){let e,{next:n,bu:i,u:r,parent:l,vnode:h}=t,u=n;0,Me(t,!1),n?(n.el=h.el,U(t,n,c)):n=h,i&&(0,s.ir)(i),(e=n.props&&n.props.onVnodeBeforeUpdate)&&fn(e,l,n,h),Me(t,!0);const d=j(t);0;const p=t.subTree;t.subTree=d,y(p,d,f(p.el),J(p),t,o,a),n.el=d.el,null===u&&G(t,d.el),r&&Ae(r,o),(e=n.props&&n.props.onVnodeUpdated)&&Ae((()=>fn(e,l,n,h)),o)}else{let i;const{el:c,props:l}=e,{bm:h,m:u,parent:d}=t,f=dt(e);if(Me(t,!1),h&&(0,s.ir)(h),!f&&(i=l&&l.onVnodeBeforeMount)&&fn(i,d,e),Me(t,!0),c&&it){const n=()=>{t.subTree=j(t),it(c,t.subTree,t,o,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const i=t.subTree=j(t);0,y(null,i,n,r,t,o,a),e.el=i.el}if(u&&Ae(u,o),!f&&(i=l&&l.onVnodeMounted)){const t=e;Ae((()=>fn(i,d,t)),o)}(256&e.shapeFlag||d&&dt(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&Ae(t.a,o),t.isMounted=!0,e=n=r=null}},h=t.effect=new i.qq(l,(()=>w(u)),t.scope),u=t.update=()=>h.run();u.id=t.uid,Me(t,!0),u()},U=(t,e,n)=>{e.component=t;const s=t.vnode.props;t.vnode=e,t.next=null,de(t,e.props,s,n),ke(t,e.children,n),(0,i.Jd)(),S(),(0,i.lk)()},z=(t,e,n,i,s,r,o,a,c=!1)=>{const l=t&&t.children,h=t?t.shapeFlag:0,u=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void q(l,u,n,i,s,r,o,a,c);if(256&f)return void $(l,u,n,i,s,r,o,a,c)}8&p?(16&h&&Q(l,s,r),u!==l&&d(n,u)):16&h?16&p?q(l,u,n,i,s,r,o,a,c):Q(l,s,r,!0):(8&h&&d(n,""),16&p&&O(u,n,i,s,r,o,a,c))},$=(t,e,n,i,r,o,a,c,l)=>{t=t||s.Z6,e=e||s.Z6;const h=t.length,u=e.length,d=Math.min(h,u);let f;for(f=0;f<d;f++){const i=e[f]=l?hn(e[f]):ln(e[f]);y(t[f],i,n,null,r,o,a,c,l)}h>u?Q(t,r,o,!0,!1,d):O(e,n,i,r,o,a,c,l,d)},q=(t,e,n,i,r,o,a,c,l)=>{let h=0;const u=e.length;let d=t.length-1,f=u-1;while(h<=d&&h<=f){const i=t[h],s=e[h]=l?hn(e[h]):ln(e[h]);if(!Ye(i,s))break;y(i,s,n,null,r,o,a,c,l),h++}while(h<=d&&h<=f){const i=t[d],s=e[f]=l?hn(e[f]):ln(e[f]);if(!Ye(i,s))break;y(i,s,n,null,r,o,a,c,l),d--,f--}if(h>d){if(h<=f){const t=f+1,s=t<u?e[t].el:i;while(h<=f)y(null,e[h]=l?hn(e[h]):ln(e[h]),n,s,r,o,a,c,l),h++}}else if(h>f)while(h<=d)H(t[h],r,o,!0),h++;else{const p=h,g=h,m=new Map;for(h=g;h<=f;h++){const t=e[h]=l?hn(e[h]):ln(e[h]);null!=t.key&&m.set(t.key,h)}let v,b=0;const w=f-g+1;let x=!1,_=0;const T=new Array(w);for(h=0;h<w;h++)T[h]=0;for(h=p;h<=d;h++){const i=t[h];if(b>=w){H(i,r,o,!0);continue}let s;if(null!=i.key)s=m.get(i.key);else for(v=g;v<=f;v++)if(0===T[v-g]&&Ye(i,e[v])){s=v;break}void 0===s?H(i,r,o,!0):(T[s-g]=h+1,s>=_?_=s:x=!0,y(i,e[s],n,null,r,o,a,c,l),b++)}const S=x?Le(T):s.Z6;for(v=S.length-1,h=w-1;h>=0;h--){const t=g+h,s=e[t],d=t+1<u?e[t+1].el:i;0===T[h]?y(null,s,n,d,r,o,a,c,l):x&&(v<0||h!==S[v]?W(s,n,d,2):v--)}}},W=(t,e,n,i,s=null)=>{const{el:o,type:a,transition:c,children:l,shapeFlag:h}=t;if(6&h)return void W(t.component.subTree,e,n,i);if(128&h)return void t.suspense.move(e,n,i);if(64&h)return void a.move(t,e,n,et);if(a===Re){r(o,e,n);for(let t=0;t<l.length;t++)W(l[t],e,n,i);return void r(t.anchor,e,n)}if(a===Be)return void T(t,e,n);const u=2!==i&&1&h&&c;if(u)if(0===i)c.beforeEnter(o),r(o,e,n),Ae((()=>c.enter(o)),s);else{const{leave:t,delayLeave:i,afterLeave:s}=c,a=()=>r(o,e,n),l=()=>{t(o,(()=>{a(),s&&s()}))};i?i(o,a,l):l()}else r(o,e,n)},H=(t,e,n,i=!1,s=!1)=>{const{type:r,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:h,patchFlag:u,dirs:d}=t;if(null!=a&&Ee(a,null,n,t,!0),256&h)return void e.ctx.deactivate(t);const f=1&h&&d,p=!dt(t);let g;if(p&&(g=o&&o.onVnodeBeforeUnmount)&&fn(g,e,t),6&h)Y(t.component,n,i);else{if(128&h)return void t.suspense.unmount(n,i);f&&Z(t,null,e,"beforeUnmount"),64&h?t.type.remove(t,e,n,s,et,i):l&&(r!==Re||u>0&&64&u)?Q(l,e,n,!1,!0):(r===Re&&384&u||!s&&16&h)&&Q(c,e,n),i&&K(t)}(p&&(g=o&&o.onVnodeUnmounted)||f)&&Ae((()=>{g&&fn(g,e,t),f&&Z(t,null,e,"unmounted")}),n)},K=t=>{const{type:e,el:n,anchor:i,transition:s}=t;if(e===Re)return void X(n,i);if(e===Be)return void k(t);const r=()=>{o(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&t.shapeFlag&&s&&!s.persisted){const{leave:e,delayLeave:i}=s,o=()=>e(n,r);i?i(t.el,r,o):o()}else r()},X=(t,e)=>{let n;while(t!==e)n=p(t),o(t),t=n;o(e)},Y=(t,e,n)=>{const{bum:i,scope:r,update:o,subTree:a,um:c}=t;i&&(0,s.ir)(i),r.stop(),o&&(o.active=!1,H(a,t,e,n)),c&&Ae(c,e),Ae((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Q=(t,e,n,i=!1,s=!1,r=0)=>{for(let o=r;o<t.length;o++)H(t[o],e,n,i,s)},J=t=>6&t.shapeFlag?J(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),tt=(t,e,n)=>{null==t?e._vnode&&H(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),S(),I(),e._vnode=t},et={p:y,um:H,m:W,r:K,mt:R,mc:O,pc:z,pbc:M,n:J,o:t};let nt,it;return e&&([nt,it]=e(et)),{render:tt,hydrate:nt,createApp:ae(tt,nt)}}function Me({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function De(t,e,n=!1){const i=t.children,r=e.children;if((0,s.kJ)(i)&&(0,s.kJ)(r))for(let s=0;s<i.length;s++){const t=i[s];let e=r[s];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=r[s]=hn(r[s]),e.el=t.el),n||De(t,e)),e.type===Fe&&(e.el=t.el)}}function Le(t){const e=t.slice(),n=[0];let i,s,r,o,a;const c=t.length;for(i=0;i<c;i++){const c=t[i];if(0!==c){if(s=n[n.length-1],t[s]<c){e[i]=s,n.push(i);continue}r=0,o=n.length-1;while(r<o)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}r=n.length,o=n[r-1];while(r-- >0)n[r]=o,o=e[o];return n}const Ne=t=>t.__isTeleport;const Re=Symbol.for("v-fgt"),Fe=Symbol.for("v-txt"),je=Symbol.for("v-cmt"),Be=Symbol.for("v-stc"),Ue=[];let Ve=null;function ze(t=!1){Ue.push(Ve=t?null:[])}function Ge(){Ue.pop(),Ve=Ue[Ue.length-1]||null}let $e=1;function qe(t){$e+=t}function We(t){return t.dynamicChildren=$e>0?Ve||s.Z6:null,Ge(),$e>0&&Ve&&Ve.push(t),t}function He(t,e,n,i,s,r){return We(tn(t,e,n,i,s,r,!0))}function Ke(t,e,n,i,s){return We(en(t,e,n,i,s,!0))}function Xe(t){return!!t&&!0===t.__v_isVNode}function Ye(t,e){return t.type===e.type&&t.key===e.key}const Qe="__vInternal",Je=({key:t})=>null!=t?t:null,Ze=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,s.HD)(t)||(0,i.dq)(t)||(0,s.mf)(t)?{i:M,r:t,k:e,f:!!n}:t:null);function tn(t,e=null,n=null,i=0,r=null,o=(t===Re?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Je(e),ref:e&&Ze(e),scopeId:D,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:M};return c?(un(l,n),128&o&&t.normalize(l)):n&&(l.shapeFlag|=(0,s.HD)(n)?8:16),$e>0&&!a&&Ve&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Ve.push(l),l}const en=nn;function nn(t,e=null,n=null,r=0,o=null,a=!1){if(t&&t!==Nt||(t=je),Xe(t)){const i=rn(t,e,!0);return n&&un(i,n),$e>0&&!a&&Ve&&(6&i.shapeFlag?Ve[Ve.indexOf(t)]=i:Ve.push(i)),i.patchFlag|=-2,i}if(Rn(t)&&(t=t.__vccOpts),e){e=sn(e);let{class:t,style:n}=e;t&&!(0,s.HD)(t)&&(e.class=(0,s.C_)(t)),(0,s.Kn)(n)&&((0,i.X3)(n)&&!(0,s.kJ)(n)&&(n=(0,s.l7)({},n)),e.style=(0,s.j5)(n))}const c=(0,s.HD)(t)?1:$(t)?128:Ne(t)?64:(0,s.Kn)(t)?4:(0,s.mf)(t)?2:0;return tn(t,e,n,r,o,c,a,!0)}function sn(t){return t?(0,i.X3)(t)||Qe in t?(0,s.l7)({},t):t:null}function rn(t,e,n=!1){const{props:i,ref:r,patchFlag:o,children:a}=t,c=e?dn(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Je(c),ref:e&&e.ref?n&&r?(0,s.kJ)(r)?r.concat(Ze(e)):[r,Ze(e)]:Ze(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Re?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&rn(t.ssContent),ssFallback:t.ssFallback&&rn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l}function on(t=" ",e=0){return en(Fe,null,t,e)}function an(t,e){const n=en(Be,null,t);return n.staticCount=e,n}function cn(t="",e=!1){return e?(ze(),Ke(je,null,t)):en(je,null,t)}function ln(t){return null==t||"boolean"===typeof t?en(je):(0,s.kJ)(t)?en(Re,null,t.slice()):"object"===typeof t?hn(t):en(Fe,null,String(t))}function hn(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:rn(t)}function un(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if((0,s.kJ)(e))n=16;else if("object"===typeof e){if(65&i){const n=e.default;return void(n&&(n._c&&(n._d=!1),un(t,n()),n._c&&(n._d=!0)))}{n=32;const i=e._;i||Qe in e?3===i&&M&&(1===M.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=M}}else(0,s.mf)(e)?(e={default:e,_ctx:M},n=32):(e=String(e),64&i?(n=16,e=[on(e)]):n=8);t.children=e,t.shapeFlag|=n}function dn(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=(0,s.C_)([e.class,i.class]));else if("style"===t)e.style=(0,s.j5)([e.style,i.style]);else if((0,s.F7)(t)){const n=e[t],r=i[t];!r||n===r||(0,s.kJ)(n)&&n.includes(r)||(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}function fn(t,e,n,i=null){o(t,e,7,[n,i])}const pn=re();let gn=0;function mn(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||pn,a={uid:gn++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ge(r,o),emitsOptions:O(r,o),emit:null,emitted:null,propsDefaults:s.kT,inheritAttrs:r.inheritAttrs,ctx:s.kT,data:s.kT,props:s.kT,attrs:s.kT,slots:s.kT,refs:s.kT,setupState:s.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=A.bind(null,a),t.ce&&t.ce(a),a}let yn=null;const vn=()=>yn||M;let bn,wn,xn="__VUE_INSTANCE_SETTERS__";(wn=(0,s.E9)()[xn])||(wn=(0,s.E9)()[xn]=[]),wn.push((t=>yn=t)),bn=t=>{wn.length>1?wn.forEach((e=>e(t))):wn[0](t)};const _n=t=>{bn(t),t.scope.on()},Tn=()=>{yn&&yn.scope.off(),bn(null)};function Sn(t){return 4&t.vnode.shapeFlag}let In,kn,En=!1;function Cn(t,e=!1){En=e;const{props:n,children:i}=t.vnode,s=Sn(t);ue(t,n,s,e),Ie(t,i);const r=s?An(t,e):void 0;return En=!1,r}function An(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,i.Xl)(new Proxy(t.ctx,zt));const{setup:o}=n;if(o){const n=t.setupContext=o.length>1?Dn(t):null;_n(t),(0,i.Jd)();const c=r(o,t,0,[t.props,n]);if((0,i.lk)(),Tn(),(0,s.tI)(c)){if(c.then(Tn,Tn),e)return c.then((n=>{On(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=c}else On(t,c,e)}else Pn(t,e)}function On(t,e,n){(0,s.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,s.Kn)(e)&&(t.setupState=(0,i.WL)(e)),Pn(t,n)}function Pn(t,e,n){const r=t.type;if(!t.render){if(!e&&In&&!r.render){const e=r.template||Xt(t).template;if(e){0;const{isCustomElement:n,compilerOptions:i}=t.appContext.config,{delimiters:o,compilerOptions:a}=r,c=(0,s.l7)((0,s.l7)({isCustomElement:n,delimiters:o},i),a);r.render=In(e,c)}}t.render=r.render||s.dG,kn&&kn(t)}_n(t),(0,i.Jd)(),qt(t),(0,i.lk)(),Tn()}function Mn(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,i.j)(t,"get","$attrs"),e[n]}}))}function Dn(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return Mn(t)},slots:t.slots,emit:t.emit,expose:e}}function Ln(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,i.WL)((0,i.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in Ut?Ut[n](t):void 0},has(t,e){return e in t||e in Ut}}))}function Nn(t,e=!0){return(0,s.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Rn(t){return(0,s.mf)(t)&&"__vccOpts"in t}const Fn=(t,e)=>(0,i.Fl)(t,e,En);function jn(t,e,n){const i=arguments.length;return 2===i?(0,s.Kn)(e)&&!(0,s.kJ)(e)?Xe(e)?en(t,null,[e]):en(t,e):en(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Xe(n)&&(n=[n]),en(t,e,n))}const Bn=Symbol.for("v-scx"),Un=()=>{{const t=he(Bn);return t}};const Vn="3.3.2"},9963:function(t,e,n){"use strict";n.d(e,{bM:function(){return lt},iM:function(){return pt},nr:function(){return ct},ri:function(){return vt}});var i=n(3577),s=n(6252),r=n(2262);const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),l={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e?a.createElementNS(o,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&i&&null!=i.multiple&&s.setAttribute("multiple",i.multiple),s},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling)){while(1)if(e.insertBefore(s.cloneNode(!0),n),s===r||!(s=s.nextSibling))break}else{c.innerHTML=i?`<svg>${t}</svg>`:t;const s=c.content;if(i){const t=s.firstChild;while(t.firstChild)s.appendChild(t.firstChild);s.removeChild(t)}e.insertBefore(s,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function h(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function u(t,e,n){const s=t.style,r=(0,i.HD)(n);if(n&&!r){if(e&&!(0,i.HD)(e))for(const t in e)null==n[t]&&f(s,t,"");for(const t in n)f(s,t,n[t])}else{const i=s.display;r?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const d=/\s*!important$/;function f(t,e,n){if((0,i.kJ)(n))n.forEach((n=>f(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=m(t,e);d.test(n)?t.setProperty((0,i.rs)(s),n.replace(d,""),"important"):t[s]=n}}const p=["Webkit","Moz","ms"],g={};function m(t,e){const n=g[e];if(n)return n;let s=(0,i._A)(e);if("filter"!==s&&s in t)return g[e]=s;s=(0,i.kC)(s);for(let i=0;i<p.length;i++){const n=p[i]+s;if(n in t)return g[e]=n}return e}const y="http://www.w3.org/1999/xlink";function v(t,e,n,s,r){if(s&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(y,e.slice(6,e.length)):t.setAttributeNS(y,e,n);else{const s=(0,i.Pq)(e);null==n||s&&!(0,i.yA)(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function b(t,e,n,s,r,o,a){if("innerHTML"===e||"textContent"===e)return s&&a(s,r,o),void(t[e]=null==n?"":n);const c=t.tagName;if("value"===e&&"PROGRESS"!==c&&!c.includes("-")){t._value=n;const i="OPTION"===c?t.getAttribute("value"):t.value,s=null==n?"":n;return i!==s&&(t.value=s),void(null==n&&t.removeAttribute(e))}let l=!1;if(""===n||null==n){const s=typeof t[e];"boolean"===s?n=(0,i.yA)(n):null==n&&"string"===s?(n="",l=!0):"number"===s&&(n=0,l=!0)}try{t[e]=n}catch(h){0}l&&t.removeAttribute(e)}function w(t,e,n,i){t.addEventListener(e,n,i)}function x(t,e,n,i){t.removeEventListener(e,n,i)}function _(t,e,n,i,s=null){const r=t._vei||(t._vei={}),o=r[e];if(i&&o)o.value=i;else{const[n,a]=S(e);if(i){const o=r[e]=C(i,s);w(t,n,o,a)}else o&&(x(t,n,o,a),r[e]=void 0)}}const T=/(?:Once|Passive|Capture)$/;function S(t){let e;if(T.test(t)){let n;e={};while(n=t.match(T))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,i.rs)(t.slice(2));return[n,e]}let I=0;const k=Promise.resolve(),E=()=>I||(k.then((()=>I=0)),I=Date.now());function C(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,s.$d)(A(t,n.value),e,5,[t])};return n.value=t,n.attached=E(),n}function A(t,e){if((0,i.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const O=/^on[a-z]/,P=(t,e,n,s,r=!1,o,a,c,l)=>{"class"===e?h(t,s,r):"style"===e?u(t,n,s):(0,i.F7)(e)?(0,i.tR)(e)||_(t,e,n,s,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):M(t,e,s,r))?b(t,e,s,o,a,c,l):("true-value"===e?t._trueValue=s:"false-value"===e&&(t._falseValue=s),v(t,e,s,r))};function M(t,e,n,s){return s?"innerHTML"===e||"textContent"===e||!!(e in t&&O.test(e)&&(0,i.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!O.test(e)||!(0,i.HD)(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const D="transition",L="animation",N=(t,{slots:e})=>(0,s.h)(s.P$,U(t),e);N.displayName="Transition";const R={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},F=N.props=(0,i.l7)({},s.nJ,R),j=(t,e=[])=>{(0,i.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},B=t=>!!t&&((0,i.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function U(t){const e={};for(const i in t)i in R||(e[i]=t[i]);if(!1===t.css)return e;const{name:n="v",type:s,duration:r,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:h=a,appearToClass:u=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=V(r),m=g&&g[0],y=g&&g[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:w,onLeave:x,onLeaveCancelled:_,onBeforeAppear:T=v,onAppear:S=b,onAppearCancelled:I=w}=e,k=(t,e,n)=>{$(t,e?u:c),$(t,e?h:a),n&&n()},E=(t,e)=>{t._isLeaving=!1,$(t,d),$(t,p),$(t,f),e&&e()},C=t=>(e,n)=>{const i=t?S:b,r=()=>k(e,t,n);j(i,[e,r]),q((()=>{$(e,t?l:o),G(e,t?u:c),B(i)||H(e,s,m,r)}))};return(0,i.l7)(e,{onBeforeEnter(t){j(v,[t]),G(t,o),G(t,a)},onBeforeAppear(t){j(T,[t]),G(t,l),G(t,h)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>E(t,e);G(t,d),Q(),G(t,f),q((()=>{t._isLeaving&&($(t,d),G(t,p),B(x)||H(t,s,y,n))})),j(x,[t,n])},onEnterCancelled(t){k(t,!1),j(w,[t])},onAppearCancelled(t){k(t,!0),j(I,[t])},onLeaveCancelled(t){E(t),j(_,[t])}})}function V(t){if(null==t)return null;if((0,i.Kn)(t))return[z(t.enter),z(t.leave)];{const e=z(t);return[e,e]}}function z(t){const e=(0,i.He)(t);return e}function G(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function $(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function q(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let W=0;function H(t,e,n,i){const s=t._endId=++W,r=()=>{s===t._endId&&i()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:c}=K(t,e);if(!o)return i();const l=o+"end";let h=0;const u=()=>{t.removeEventListener(l,d),r()},d=e=>{e.target===t&&++h>=c&&u()};setTimeout((()=>{h<c&&u()}),a+1),t.addEventListener(l,d)}function K(t,e){const n=window.getComputedStyle(t),i=t=>(n[t]||"").split(", "),s=i(`${D}Delay`),r=i(`${D}Duration`),o=X(s,r),a=i(`${L}Delay`),c=i(`${L}Duration`),l=X(a,c);let h=null,u=0,d=0;e===D?o>0&&(h=D,u=o,d=r.length):e===L?l>0&&(h=L,u=l,d=c.length):(u=Math.max(o,l),h=u>0?o>l?D:L:null,d=h?h===D?r.length:c.length:0);const f=h===D&&/\b(transform|all)(,|$)/.test(i(`${D}Property`).toString());return{type:h,timeout:u,propCount:d,hasTransform:f}}function X(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>Y(e)+Y(t[n]))))}function Y(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Q(){return document.body.offsetHeight}const J=new WeakMap,Z=new WeakMap,tt={name:"TransitionGroup",props:(0,i.l7)({},F,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,s.FN)(),i=(0,s.Y8)();let o,a;return(0,s.ic)((()=>{if(!o.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!st(o[0].el,n.vnode.el,e))return;o.forEach(et),o.forEach(nt);const i=o.filter(it);Q(),i.forEach((t=>{const n=t.el,i=n.style;G(n,e),i.transform=i.webkitTransform=i.transitionDuration="";const s=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",s),n._moveCb=null,$(n,e))};n.addEventListener("transitionend",s)}))})),()=>{const c=(0,r.IU)(t),l=U(c);let h=c.tag||s.HY;o=a,a=e.default?(0,s.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,s.nK)(e,(0,s.U2)(e,l,i,n))}if(o)for(let t=0;t<o.length;t++){const e=o[t];(0,s.nK)(e,(0,s.U2)(e,l,i,n)),J.set(e,e.el.getBoundingClientRect())}return(0,s.Wm)(h,null,a)}}};tt.props;function et(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function nt(t){Z.set(t,t.el.getBoundingClientRect())}function it(t){const e=J.get(t),n=Z.get(t),i=e.left-n.left,s=e.top-n.top;if(i||s){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${i}px,${s}px)`,e.transitionDuration="0s",t}}function st(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&i.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&i.classList.add(t))),i.style.display="none";const s=1===e.nodeType?e:e.parentNode;s.appendChild(i);const{hasTransform:r}=K(i);return s.removeChild(i),r}const rt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,i.kJ)(e)?t=>(0,i.ir)(e,t):e};function ot(t){t.target.composing=!0}function at(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ct={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t._assign=rt(r);const o=s||r.props&&"number"===r.props.type;w(t,e?"change":"input",(e=>{if(e.target.composing)return;let s=t.value;n&&(s=s.trim()),o&&(s=(0,i.h5)(s)),t._assign(s)})),n&&w(t,"change",(()=>{t.value=t.value.trim()})),e||(w(t,"compositionstart",ot),w(t,"compositionend",at),w(t,"change",at))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:r}},o){if(t._assign=rt(o),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(s&&t.value.trim()===e)return;if((r||"number"===t.type)&&(0,i.h5)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const lt={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=(0,i.DM)(e);w(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,i.h5)(ut(t)):ut(t)));t._assign(t.multiple?r?new Set(e):e:e[0])})),t._assign=rt(s)},mounted(t,{value:e}){ht(t,e)},beforeUpdate(t,e,n){t._assign=rt(n)},updated(t,{value:e}){ht(t,e)}};function ht(t,e){const n=t.multiple;if(!n||(0,i.kJ)(e)||(0,i.DM)(e)){for(let s=0,r=t.options.length;s<r;s++){const r=t.options[s],o=ut(r);if(n)(0,i.kJ)(e)?r.selected=(0,i.hq)(e,o)>-1:r.selected=e.has(o);else if((0,i.WV)(ut(r),e))return void(t.selectedIndex!==s&&(t.selectedIndex=s))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function ut(t){return"_value"in t?t._value:t.value}const dt=["ctrl","shift","alt","meta"],ft={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>dt.some((n=>t[`${n}Key`]&&!e.includes(n)))},pt=(t,e)=>(n,...i)=>{for(let t=0;t<e.length;t++){const i=ft[e[t]];if(i&&i(n,e))return}return t(n,...i)};const gt=(0,i.l7)({patchProp:P},l);let mt;function yt(){return mt||(mt=(0,s.Us)(gt))}const vt=(...t)=>{const e=yt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const s=bt(t);if(!s)return;const r=e._component;(0,i.mf)(r)||r.render||r.template||(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function bt(t){if((0,i.HD)(t)){const e=document.querySelector(t);return e}return t}},3577:function(t,e,n){"use strict";function i(t,e){const n=Object.create(null),i=t.split(",");for(let s=0;s<i.length;s++)n[i[s]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}n.d(e,{C_:function(){return J},DM:function(){return y},E9:function(){return $},F7:function(){return l},Gg:function(){return O},HD:function(){return x},He:function(){return z},Kj:function(){return b},Kn:function(){return T},NO:function(){return a},Nj:function(){return U},Od:function(){return d},PO:function(){return C},Pq:function(){return tt},RI:function(){return p},S0:function(){return A},W7:function(){return E},WV:function(){return it},Z6:function(){return r},_A:function(){return D},_N:function(){return m},aU:function(){return j},dG:function(){return o},e1:function(){return W},fY:function(){return i},h5:function(){return V},hR:function(){return F},hq:function(){return st},ir:function(){return B},j5:function(){return H},kC:function(){return R},kJ:function(){return g},kT:function(){return s},l7:function(){return u},mf:function(){return w},rs:function(){return N},tI:function(){return S},tR:function(){return h},yA:function(){return et},yk:function(){return _},zw:function(){return rt}});const s={},r=[],o=()=>{},a=()=>!1,c=/^on[^a-z]/,l=t=>c.test(t),h=t=>t.startsWith("onUpdate:"),u=Object.assign,d=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},f=Object.prototype.hasOwnProperty,p=(t,e)=>f.call(t,e),g=Array.isArray,m=t=>"[object Map]"===k(t),y=t=>"[object Set]"===k(t),v=t=>"[object Date]"===k(t),b=t=>"[object RegExp]"===k(t),w=t=>"function"===typeof t,x=t=>"string"===typeof t,_=t=>"symbol"===typeof t,T=t=>null!==t&&"object"===typeof t,S=t=>T(t)&&w(t.then)&&w(t.catch),I=Object.prototype.toString,k=t=>I.call(t),E=t=>k(t).slice(8,-1),C=t=>"[object Object]"===k(t),A=t=>x(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,O=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},M=/-(\w)/g,D=P((t=>t.replace(M,((t,e)=>e?e.toUpperCase():"")))),L=/\B([A-Z])/g,N=P((t=>t.replace(L,"-$1").toLowerCase())),R=P((t=>t.charAt(0).toUpperCase()+t.slice(1))),F=P((t=>t?`on${R(t)}`:"")),j=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},U=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},V=t=>{const e=parseFloat(t);return isNaN(e)?t:e},z=t=>{const e=x(t)?Number(t):NaN;return isNaN(e)?t:e};let G;const $=()=>G||(G="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const q="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",W=i(q);function H(t){if(g(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=x(i)?Q(i):H(i);if(s)for(const t in s)e[t]=s[t]}return e}return x(t)||T(t)?t:void 0}const K=/;(?![^(]*\))/g,X=/:([^]+)/,Y=new RegExp("\\/\\*.*?\\*\\/","gs");function Q(t){const e={};return t.replace(Y,"").split(K).forEach((t=>{if(t){const n=t.split(X);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function J(t){let e="";if(x(t))e=t;else if(g(t))for(let n=0;n<t.length;n++){const i=J(t[n]);i&&(e+=i+" ")}else if(T(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Z="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tt=i(Z);function et(t){return!!t||""===t}function nt(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=it(t[i],e[i]);return n}function it(t,e){if(t===e)return!0;let n=v(t),i=v(e);if(n||i)return!(!n||!i)&&t.getTime()===e.getTime();if(n=_(t),i=_(e),n||i)return t===e;if(n=g(t),i=g(e),n||i)return!(!n||!i)&&nt(t,e);if(n=T(t),i=T(e),n||i){if(!n||!i)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const n in t){const i=t.hasOwnProperty(n),s=e.hasOwnProperty(n);if(i&&!s||!i&&s||!it(t[n],e[n]))return!1}}return String(t)===String(e)}function st(t,e){return t.findIndex((t=>it(t,e)))}const rt=t=>x(t)?t:null==t?"":g(t)||T(t)&&(t.toString===I||!w(t.toString))?JSON.stringify(t,ot,2):String(t),ot=(t,e)=>e&&e.__v_isRef?ot(t,e.value):m(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:y(e)?{[`Set(${e.size})`]:[...e.values()]}:!T(e)||g(e)||C(e)?e:String(e)},8877:function(t,e,n){"use strict";var i={};n.r(i),n.d(i,{afterMain:function(){return T},afterRead:function(){return w},afterWrite:function(){return k},applyStyles:function(){return N},arrow:function(){return at},auto:function(){return c},basePlacements:function(){return l},beforeMain:function(){return x},beforeRead:function(){return v},beforeWrite:function(){return S},bottom:function(){return r},clippingParents:function(){return d},computeStyles:function(){return ft},createPopper:function(){return he},createPopperBase:function(){return ce},createPopperLite:function(){return de},detectOverflow:function(){return Lt},end:function(){return u},eventListeners:function(){return mt},flip:function(){return jt},hide:function(){return zt},left:function(){return a},main:function(){return _},modifierPhases:function(){return E},offset:function(){return qt},placements:function(){return y},popper:function(){return p},popperGenerator:function(){return ae},popperOffsets:function(){return Ht},preventOverflow:function(){return Yt},read:function(){return b},reference:function(){return g},right:function(){return o},start:function(){return h},top:function(){return s},variationPlacements:function(){return m},viewport:function(){return f},write:function(){return I}});var s="top",r="bottom",o="right",a="left",c="auto",l=[s,r,o,a],h="start",u="end",d="clippingParents",f="viewport",p="popper",g="reference",m=l.reduce((function(t,e){return t.concat([e+"-"+h,e+"-"+u])}),[]),y=[].concat(l,[c]).reduce((function(t,e){return t.concat([e,e+"-"+h,e+"-"+u])}),[]),v="beforeRead",b="read",w="afterRead",x="beforeMain",_="main",T="afterMain",S="beforeWrite",I="write",k="afterWrite",E=[v,b,w,x,_,T,S,I,k];function C(t){return t?(t.nodeName||"").toLowerCase():null}function A(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function O(t){var e=A(t).Element;return t instanceof e||t instanceof Element}function P(t){var e=A(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function M(t){if("undefined"===typeof ShadowRoot)return!1;var e=A(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function D(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];P(s)&&C(s)&&(Object.assign(s.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))}function L(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],s=e.attributes[t]||{},r=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),o=r.reduce((function(t,e){return t[e]="",t}),{});P(i)&&C(i)&&(Object.assign(i.style,o),Object.keys(s).forEach((function(t){i.removeAttribute(t)})))}))}}var N={name:"applyStyles",enabled:!0,phase:"write",fn:D,effect:L,requires:["computeStyles"]};function R(t){return t.split("-")[0]}var F=Math.max,j=Math.min,B=Math.round;function U(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function V(){return!/^((?!chrome|android).)*safari/i.test(U())}function z(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),s=1,r=1;e&&P(t)&&(s=t.offsetWidth>0&&B(i.width)/t.offsetWidth||1,r=t.offsetHeight>0&&B(i.height)/t.offsetHeight||1);var o=O(t)?A(t):window,a=o.visualViewport,c=!V()&&n,l=(i.left+(c&&a?a.offsetLeft:0))/s,h=(i.top+(c&&a?a.offsetTop:0))/r,u=i.width/s,d=i.height/r;return{width:u,height:d,top:h,right:l+u,bottom:h+d,left:l,x:l,y:h}}function G(t){var e=z(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function $(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&M(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function q(t){return A(t).getComputedStyle(t)}function W(t){return["table","td","th"].indexOf(C(t))>=0}function H(t){return((O(t)?t.ownerDocument:t.document)||window.document).documentElement}function K(t){return"html"===C(t)?t:t.assignedSlot||t.parentNode||(M(t)?t.host:null)||H(t)}function X(t){return P(t)&&"fixed"!==q(t).position?t.offsetParent:null}function Y(t){var e=/firefox/i.test(U()),n=/Trident/i.test(U());if(n&&P(t)){var i=q(t);if("fixed"===i.position)return null}var s=K(t);M(s)&&(s=s.host);while(P(s)&&["html","body"].indexOf(C(s))<0){var r=q(s);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return s;s=s.parentNode}return null}function Q(t){var e=A(t),n=X(t);while(n&&W(n)&&"static"===q(n).position)n=X(n);return n&&("html"===C(n)||"body"===C(n)&&"static"===q(n).position)?e:n||Y(t)||e}function J(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Z(t,e,n){return F(t,j(e,n))}function tt(t,e,n){var i=Z(t,e,n);return i>n?n:i}function et(){return{top:0,right:0,bottom:0,left:0}}function nt(t){return Object.assign({},et(),t)}function it(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var st=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,nt("number"!==typeof t?t:it(t,l))};function rt(t){var e,n=t.state,i=t.name,c=t.options,l=n.elements.arrow,h=n.modifiersData.popperOffsets,u=R(n.placement),d=J(u),f=[a,o].indexOf(u)>=0,p=f?"height":"width";if(l&&h){var g=st(c.padding,n),m=G(l),y="y"===d?s:a,v="y"===d?r:o,b=n.rects.reference[p]+n.rects.reference[d]-h[d]-n.rects.popper[p],w=h[d]-n.rects.reference[d],x=Q(l),_=x?"y"===d?x.clientHeight||0:x.clientWidth||0:0,T=b/2-w/2,S=g[y],I=_-m[p]-g[v],k=_/2-m[p]/2+T,E=Z(S,k,I),C=d;n.modifiersData[i]=(e={},e[C]=E,e.centerOffset=E-k,e)}}function ot(t){var e=t.state,n=t.options,i=n.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!==typeof s||(s=e.elements.popper.querySelector(s),s))&&$(e.elements.popper,s)&&(e.elements.arrow=s)}var at={name:"arrow",enabled:!0,phase:"main",fn:rt,effect:ot,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ct(t){return t.split("-")[1]}var lt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ht(t,e){var n=t.x,i=t.y,s=e.devicePixelRatio||1;return{x:B(n*s)/s||0,y:B(i*s)/s||0}}function ut(t){var e,n=t.popper,i=t.popperRect,c=t.placement,l=t.variation,h=t.offsets,d=t.position,f=t.gpuAcceleration,p=t.adaptive,g=t.roundOffsets,m=t.isFixed,y=h.x,v=void 0===y?0:y,b=h.y,w=void 0===b?0:b,x="function"===typeof g?g({x:v,y:w}):{x:v,y:w};v=x.x,w=x.y;var _=h.hasOwnProperty("x"),T=h.hasOwnProperty("y"),S=a,I=s,k=window;if(p){var E=Q(n),C="clientHeight",O="clientWidth";if(E===A(n)&&(E=H(n),"static"!==q(E).position&&"absolute"===d&&(C="scrollHeight",O="scrollWidth")),c===s||(c===a||c===o)&&l===u){I=r;var P=m&&E===k&&k.visualViewport?k.visualViewport.height:E[C];w-=P-i.height,w*=f?1:-1}if(c===a||(c===s||c===r)&&l===u){S=o;var M=m&&E===k&&k.visualViewport?k.visualViewport.width:E[O];v-=M-i.width,v*=f?1:-1}}var D,L=Object.assign({position:d},p&&lt),N=!0===g?ht({x:v,y:w},A(n)):{x:v,y:w};return v=N.x,w=N.y,f?Object.assign({},L,(D={},D[I]=T?"0":"",D[S]=_?"0":"",D.transform=(k.devicePixelRatio||1)<=1?"translate("+v+"px, "+w+"px)":"translate3d("+v+"px, "+w+"px, 0)",D)):Object.assign({},L,(e={},e[I]=T?w+"px":"",e[S]=_?v+"px":"",e.transform="",e))}function dt(t){var e=t.state,n=t.options,i=n.gpuAcceleration,s=void 0===i||i,r=n.adaptive,o=void 0===r||r,a=n.roundOffsets,c=void 0===a||a,l={placement:R(e.placement),variation:ct(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ut(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ut(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var ft={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dt,data:{}},pt={passive:!0};function gt(t){var e=t.state,n=t.instance,i=t.options,s=i.scroll,r=void 0===s||s,o=i.resize,a=void 0===o||o,c=A(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&l.forEach((function(t){t.addEventListener("scroll",n.update,pt)})),a&&c.addEventListener("resize",n.update,pt),function(){r&&l.forEach((function(t){t.removeEventListener("scroll",n.update,pt)})),a&&c.removeEventListener("resize",n.update,pt)}}var mt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gt,data:{}},yt={left:"right",right:"left",bottom:"top",top:"bottom"};function vt(t){return t.replace(/left|right|bottom|top/g,(function(t){return yt[t]}))}var bt={start:"end",end:"start"};function wt(t){return t.replace(/start|end/g,(function(t){return bt[t]}))}function xt(t){var e=A(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function _t(t){return z(H(t)).left+xt(t).scrollLeft}function Tt(t,e){var n=A(t),i=H(t),s=n.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,c=0;if(s){r=s.width,o=s.height;var l=V();(l||!l&&"fixed"===e)&&(a=s.offsetLeft,c=s.offsetTop)}return{width:r,height:o,x:a+_t(t),y:c}}function St(t){var e,n=H(t),i=xt(t),s=null==(e=t.ownerDocument)?void 0:e.body,r=F(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=F(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+_t(t),c=-i.scrollTop;return"rtl"===q(s||n).direction&&(a+=F(n.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:c}}function It(t){var e=q(t),n=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function kt(t){return["html","body","#document"].indexOf(C(t))>=0?t.ownerDocument.body:P(t)&&It(t)?t:kt(K(t))}function Et(t,e){var n;void 0===e&&(e=[]);var i=kt(t),s=i===(null==(n=t.ownerDocument)?void 0:n.body),r=A(i),o=s?[r].concat(r.visualViewport||[],It(i)?i:[]):i,a=e.concat(o);return s?a:a.concat(Et(K(o)))}function Ct(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function At(t,e){var n=z(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ot(t,e,n){return e===f?Ct(Tt(t,n)):O(e)?At(e,n):Ct(St(H(t)))}function Pt(t){var e=Et(K(t)),n=["absolute","fixed"].indexOf(q(t).position)>=0,i=n&&P(t)?Q(t):t;return O(i)?e.filter((function(t){return O(t)&&$(t,i)&&"body"!==C(t)})):[]}function Mt(t,e,n,i){var s="clippingParents"===e?Pt(t):[].concat(e),r=[].concat(s,[n]),o=r[0],a=r.reduce((function(e,n){var s=Ot(t,n,i);return e.top=F(s.top,e.top),e.right=j(s.right,e.right),e.bottom=j(s.bottom,e.bottom),e.left=F(s.left,e.left),e}),Ot(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Dt(t){var e,n=t.reference,i=t.element,c=t.placement,l=c?R(c):null,d=c?ct(c):null,f=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2;switch(l){case s:e={x:f,y:n.y-i.height};break;case r:e={x:f,y:n.y+n.height};break;case o:e={x:n.x+n.width,y:p};break;case a:e={x:n.x-i.width,y:p};break;default:e={x:n.x,y:n.y}}var g=l?J(l):null;if(null!=g){var m="y"===g?"height":"width";switch(d){case h:e[g]=e[g]-(n[m]/2-i[m]/2);break;case u:e[g]=e[g]+(n[m]/2-i[m]/2);break;default:}}return e}function Lt(t,e){void 0===e&&(e={});var n=e,i=n.placement,a=void 0===i?t.placement:i,c=n.strategy,h=void 0===c?t.strategy:c,u=n.boundary,m=void 0===u?d:u,y=n.rootBoundary,v=void 0===y?f:y,b=n.elementContext,w=void 0===b?p:b,x=n.altBoundary,_=void 0!==x&&x,T=n.padding,S=void 0===T?0:T,I=nt("number"!==typeof S?S:it(S,l)),k=w===p?g:p,E=t.rects.popper,C=t.elements[_?k:w],A=Mt(O(C)?C:C.contextElement||H(t.elements.popper),m,v,h),P=z(t.elements.reference),M=Dt({reference:P,element:E,strategy:"absolute",placement:a}),D=Ct(Object.assign({},E,M)),L=w===p?D:P,N={top:A.top-L.top+I.top,bottom:L.bottom-A.bottom+I.bottom,left:A.left-L.left+I.left,right:L.right-A.right+I.right},R=t.modifiersData.offset;if(w===p&&R){var F=R[a];Object.keys(N).forEach((function(t){var e=[o,r].indexOf(t)>=0?1:-1,n=[s,r].indexOf(t)>=0?"y":"x";N[t]+=F[n]*e}))}return N}function Nt(t,e){void 0===e&&(e={});var n=e,i=n.placement,s=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,h=void 0===c?y:c,u=ct(i),d=u?a?m:m.filter((function(t){return ct(t)===u})):l,f=d.filter((function(t){return h.indexOf(t)>=0}));0===f.length&&(f=d);var p=f.reduce((function(e,n){return e[n]=Lt(t,{placement:n,boundary:s,rootBoundary:r,padding:o})[R(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}function Rt(t){if(R(t)===c)return[];var e=vt(t);return[wt(t),e,wt(e)]}function Ft(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var l=n.mainAxis,u=void 0===l||l,d=n.altAxis,f=void 0===d||d,p=n.fallbackPlacements,g=n.padding,m=n.boundary,y=n.rootBoundary,v=n.altBoundary,b=n.flipVariations,w=void 0===b||b,x=n.allowedAutoPlacements,_=e.options.placement,T=R(_),S=T===_,I=p||(S||!w?[vt(_)]:Rt(_)),k=[_].concat(I).reduce((function(t,n){return t.concat(R(n)===c?Nt(e,{placement:n,boundary:m,rootBoundary:y,padding:g,flipVariations:w,allowedAutoPlacements:x}):n)}),[]),E=e.rects.reference,C=e.rects.popper,A=new Map,O=!0,P=k[0],M=0;M<k.length;M++){var D=k[M],L=R(D),N=ct(D)===h,F=[s,r].indexOf(L)>=0,j=F?"width":"height",B=Lt(e,{placement:D,boundary:m,rootBoundary:y,altBoundary:v,padding:g}),U=F?N?o:a:N?r:s;E[j]>C[j]&&(U=vt(U));var V=vt(U),z=[];if(u&&z.push(B[L]<=0),f&&z.push(B[U]<=0,B[V]<=0),z.every((function(t){return t}))){P=D,O=!1;break}A.set(D,z)}if(O)for(var G=w?3:1,$=function(t){var e=k.find((function(e){var n=A.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return P=e,"break"},q=G;q>0;q--){var W=$(q);if("break"===W)break}e.placement!==P&&(e.modifiersData[i]._skip=!0,e.placement=P,e.reset=!0)}}var jt={name:"flip",enabled:!0,phase:"main",fn:Ft,requiresIfExists:["offset"],data:{_skip:!1}};function Bt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ut(t){return[s,o,r,a].some((function(e){return t[e]>=0}))}function Vt(t){var e=t.state,n=t.name,i=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=Lt(e,{elementContext:"reference"}),a=Lt(e,{altBoundary:!0}),c=Bt(o,i),l=Bt(a,s,r),h=Ut(c),u=Ut(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}var zt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vt};function Gt(t,e,n){var i=R(t),r=[a,s].indexOf(i)>=0?-1:1,c="function"===typeof n?n(Object.assign({},e,{placement:t})):n,l=c[0],h=c[1];return l=l||0,h=(h||0)*r,[a,o].indexOf(i)>=0?{x:h,y:l}:{x:l,y:h}}function $t(t){var e=t.state,n=t.options,i=t.name,s=n.offset,r=void 0===s?[0,0]:s,o=y.reduce((function(t,n){return t[n]=Gt(n,e.rects,r),t}),{}),a=o[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[i]=o}var qt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:$t};function Wt(t){var e=t.state,n=t.name;e.modifiersData[n]=Dt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Ht={name:"popperOffsets",enabled:!0,phase:"read",fn:Wt,data:{}};function Kt(t){return"x"===t?"y":"x"}function Xt(t){var e=t.state,n=t.options,i=t.name,c=n.mainAxis,l=void 0===c||c,u=n.altAxis,d=void 0!==u&&u,f=n.boundary,p=n.rootBoundary,g=n.altBoundary,m=n.padding,y=n.tether,v=void 0===y||y,b=n.tetherOffset,w=void 0===b?0:b,x=Lt(e,{boundary:f,rootBoundary:p,padding:m,altBoundary:g}),_=R(e.placement),T=ct(e.placement),S=!T,I=J(_),k=Kt(I),E=e.modifiersData.popperOffsets,C=e.rects.reference,A=e.rects.popper,O="function"===typeof w?w(Object.assign({},e.rects,{placement:e.placement})):w,P="number"===typeof O?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,D={x:0,y:0};if(E){if(l){var L,N="y"===I?s:a,B="y"===I?r:o,U="y"===I?"height":"width",V=E[I],z=V+x[N],$=V-x[B],q=v?-A[U]/2:0,W=T===h?C[U]:A[U],H=T===h?-A[U]:-C[U],K=e.elements.arrow,X=v&&K?G(K):{width:0,height:0},Y=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:et(),nt=Y[N],it=Y[B],st=Z(0,C[U],X[U]),rt=S?C[U]/2-q-st-nt-P.mainAxis:W-st-nt-P.mainAxis,ot=S?-C[U]/2+q+st+it+P.mainAxis:H+st+it+P.mainAxis,at=e.elements.arrow&&Q(e.elements.arrow),lt=at?"y"===I?at.clientTop||0:at.clientLeft||0:0,ht=null!=(L=null==M?void 0:M[I])?L:0,ut=V+rt-ht-lt,dt=V+ot-ht,ft=Z(v?j(z,ut):z,V,v?F($,dt):$);E[I]=ft,D[I]=ft-V}if(d){var pt,gt="x"===I?s:a,mt="x"===I?r:o,yt=E[k],vt="y"===k?"height":"width",bt=yt+x[gt],wt=yt-x[mt],xt=-1!==[s,a].indexOf(_),_t=null!=(pt=null==M?void 0:M[k])?pt:0,Tt=xt?bt:yt-C[vt]-A[vt]-_t+P.altAxis,St=xt?yt+C[vt]+A[vt]-_t-P.altAxis:wt,It=v&&xt?tt(Tt,yt,St):Z(v?Tt:bt,yt,v?St:wt);E[k]=It,D[k]=It-yt}e.modifiersData[i]=D}}var Yt={name:"preventOverflow",enabled:!0,phase:"main",fn:Xt,requiresIfExists:["offset"]};function Qt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Jt(t){return t!==A(t)&&P(t)?Qt(t):xt(t)}function Zt(t){var e=t.getBoundingClientRect(),n=B(e.width)/t.offsetWidth||1,i=B(e.height)/t.offsetHeight||1;return 1!==n||1!==i}function te(t,e,n){void 0===n&&(n=!1);var i=P(e),s=P(e)&&Zt(e),r=H(e),o=z(t,s,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!n)&&(("body"!==C(e)||It(r))&&(a=Jt(e)),P(e)?(c=z(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):r&&(c.x=_t(r))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function ee(t){var e=new Map,n=new Set,i=[];function s(t){n.add(t.name);var r=[].concat(t.requires||[],t.requiresIfExists||[]);r.forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&s(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||s(t)})),i}function ne(t){var e=ee(t);return E.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}function ie(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function se(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var re={placement:"bottom",modifiers:[],strategy:"absolute"};function oe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function ae(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,s=e.defaultOptions,r=void 0===s?re:s;return function(t,e,n){void 0===n&&(n=r);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},re,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},o=[],a=!1,c={state:s,setOptions:function(n){var o="function"===typeof n?n(s.options):n;h(),s.options=Object.assign({},r,s.options,o),s.scrollParents={reference:O(t)?Et(t):t.contextElement?Et(t.contextElement):[],popper:Et(e)};var a=ne(se([].concat(i,s.options.modifiers)));return s.orderedModifiers=a.filter((function(t){return t.enabled})),l(),c.update()},forceUpdate:function(){if(!a){var t=s.elements,e=t.reference,n=t.popper;if(oe(e,n)){s.rects={reference:te(e,Q(n),"fixed"===s.options.strategy),popper:G(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<s.orderedModifiers.length;i++)if(!0!==s.reset){var r=s.orderedModifiers[i],o=r.fn,l=r.options,h=void 0===l?{}:l,u=r.name;"function"===typeof o&&(s=o({state:s,options:h,name:u,instance:c})||s)}else s.reset=!1,i=-1}}},update:ie((function(){return new Promise((function(t){c.forceUpdate(),t(s)}))})),destroy:function(){h(),a=!0}};if(!oe(t,e))return c;function l(){s.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"===typeof r){var a=r({state:s,name:e,instance:c,options:i}),l=function(){};o.push(a||l)}}))}function h(){o.forEach((function(t){return t()})),o=[]}return c.setOptions(n).then((function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var ce=ae(),le=[mt,Ht,ft,N,qt,jt,Yt,at,zt],he=ae({defaultModifiers:le}),ue=[mt,Ht,ft,N],de=ae({defaultModifiers:ue});
/*!
  * Bootstrap v5.3.0 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const fe=new Map,pe={set(t,e,n){fe.has(t)||fe.set(t,new Map);const i=fe.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get(t,e){return fe.has(t)&&fe.get(t).get(e)||null},remove(t,e){if(!fe.has(t))return;const n=fe.get(t);n.delete(e),0===n.size&&fe.delete(t)}},ge=1e6,me=1e3,ye="transitionend",ve=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),be=t=>null===t||void 0===t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),we=t=>{do{t+=Math.floor(Math.random()*ge)}while(document.getElementById(t));return t},xe=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),s=Number.parseFloat(n);return i||s?(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*me):0},_e=t=>{t.dispatchEvent(new Event(ye))},Te=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),Se=t=>Te(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(ve(t)):null,Ie=t=>{if(!Te(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},ke=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),Ee=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Ee(t.parentNode):null},Ce=()=>{},Ae=t=>{t.offsetHeight},Oe=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Pe=[],Me=t=>{"loading"===document.readyState?(Pe.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of Pe)t()})),Pe.push(t)):t()},De=()=>"rtl"===document.documentElement.dir,Le=t=>{Me((()=>{const e=Oe();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}}))},Ne=(t,e=[],n=t)=>"function"===typeof t?t(...e):n,Re=(t,e,n=!0)=>{if(!n)return void Ne(t);const i=5,s=xe(e)+i;let r=!1;const o=({target:n})=>{n===e&&(r=!0,e.removeEventListener(ye,o),Ne(t))};e.addEventListener(ye,o),setTimeout((()=>{r||_e(e)}),s)},Fe=(t,e,n,i)=>{const s=t.length;let r=t.indexOf(e);return-1===r?!n&&i?t[s-1]:t[0]:(r+=n?1:-1,i&&(r=(r+s)%s),t[Math.max(0,Math.min(r,s-1))])},je=/[^.]*(?=\..*)\.|.*/,Be=/\..*/,Ue=/::\d+$/,Ve={};let ze=1;const Ge={mouseenter:"mouseover",mouseleave:"mouseout"},$e=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function qe(t,e){return e&&`${e}::${ze++}`||t.uidEvent||ze++}function We(t){const e=qe(t);return t.uidEvent=e,Ve[e]=Ve[e]||{},Ve[e]}function He(t,e){return function n(i){return nn(i,{delegateTarget:t}),n.oneOff&&en.off(t,i.type,e),e.apply(t,[i])}}function Ke(t,e,n){return function i(s){const r=t.querySelectorAll(e);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return nn(s,{delegateTarget:o}),i.oneOff&&en.off(t,s.type,e,n),n.apply(o,[s])}}function Xe(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function Ye(t,e,n){const i="string"===typeof e,s=i?n:e||n;let r=tn(t);return $e.has(r)||(r=t),[i,s,r]}function Qe(t,e,n,i,s){if("string"!==typeof e||!t)return;let[r,o,a]=Ye(e,n,i);if(e in Ge){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};o=t(o)}const c=We(t),l=c[a]||(c[a]={}),h=Xe(l,o,r?n:null);if(h)return void(h.oneOff=h.oneOff&&s);const u=qe(o,e.replace(je,"")),d=r?Ke(t,n,o):He(t,o);d.delegationSelector=r?n:null,d.callable=o,d.oneOff=s,d.uidEvent=u,l[u]=d,t.addEventListener(a,d,r)}function Je(t,e,n,i,s){const r=Xe(e[n],i,s);r&&(t.removeEventListener(n,r,Boolean(s)),delete e[n][r.uidEvent])}function Ze(t,e,n,i){const s=e[n]||{};for(const[r,o]of Object.entries(s))r.includes(i)&&Je(t,e,n,o.callable,o.delegationSelector)}function tn(t){return t=t.replace(Be,""),Ge[t]||t}const en={on(t,e,n,i){Qe(t,e,n,i,!1)},one(t,e,n,i){Qe(t,e,n,i,!0)},off(t,e,n,i){if("string"!==typeof e||!t)return;const[s,r,o]=Ye(e,n,i),a=o!==e,c=We(t),l=c[o]||{},h=e.startsWith(".");if("undefined"===typeof r){if(h)for(const n of Object.keys(c))Ze(t,c,n,e.slice(1));for(const[n,i]of Object.entries(l)){const s=n.replace(Ue,"");a&&!e.includes(s)||Je(t,c,o,i.callable,i.delegationSelector)}}else{if(!Object.keys(l).length)return;Je(t,c,o,r,s?n:null)}},trigger(t,e,n){if("string"!==typeof e||!t)return null;const i=Oe(),s=tn(e),r=e!==s;let o=null,a=!0,c=!0,l=!1;r&&i&&(o=i.Event(e,n),i(t).trigger(o),a=!o.isPropagationStopped(),c=!o.isImmediatePropagationStopped(),l=o.isDefaultPrevented());const h=nn(new Event(e,{bubbles:a,cancelable:!0}),n);return l&&h.preventDefault(),c&&t.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function nn(t,e={}){for(const[i,s]of Object.entries(e))try{t[i]=s}catch(n){Object.defineProperty(t,i,{configurable:!0,get(){return s}})}return t}function sn(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function rn(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const on={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${rn(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${rn(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=sn(t.dataset[i])}return e},getDataAttribute(t,e){return sn(t.getAttribute(`data-bs-${rn(e)}`))}};class an{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Te(e)?on.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...Te(e)?on.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,i]of Object.entries(e)){const e=t[n],s=Te(e)?"element":be(e);if(!new RegExp(i).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${s}" but expected type "${i}".`)}}}const cn="5.3.0";class ln extends an{constructor(t,e){super(),t=Se(t),t&&(this._element=t,this._config=this._getConfig(e),pe.set(this._element,this.constructor.DATA_KEY,this))}dispose(){pe.remove(this._element,this.constructor.DATA_KEY),en.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){Re(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return pe.get(Se(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return cn}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const hn=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return ve(e)},un={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const n=[];let i=t.parentNode.closest(e);while(i)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;while(n){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;while(n){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!ke(t)&&Ie(t)))},getSelectorFromElement(t){const e=hn(t);return e&&un.findOne(e)?e:null},getElementFromSelector(t){const e=hn(t);return e?un.findOne(e):null},getMultipleElementsFromSelector(t){const e=hn(t);return e?un.find(e):[]}},dn=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;en.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),ke(this))return;const s=un.getElementFromSelector(this)||this.closest(`.${i}`),r=t.getOrCreateInstance(s);r[e]()}))},fn="alert",pn="bs.alert",gn=`.${pn}`,mn=`close${gn}`,yn=`closed${gn}`,vn="fade",bn="show";class wn extends ln{static get NAME(){return fn}close(){const t=en.trigger(this._element,mn);if(t.defaultPrevented)return;this._element.classList.remove(bn);const e=this._element.classList.contains(vn);this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),en.trigger(this._element,yn),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=wn.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}dn(wn,"close"),Le(wn);const xn="button",_n="bs.button",Tn=`.${_n}`,Sn=".data-api",In="active",kn='[data-bs-toggle="button"]',En=`click${Tn}${Sn}`;class Cn extends ln{static get NAME(){return xn}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(In))}static jQueryInterface(t){return this.each((function(){const e=Cn.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}en.on(document,En,kn,(t=>{t.preventDefault();const e=t.target.closest(kn),n=Cn.getOrCreateInstance(e);n.toggle()})),Le(Cn);const An="swipe",On=".bs.swipe",Pn=`touchstart${On}`,Mn=`touchmove${On}`,Dn=`touchend${On}`,Ln=`pointerdown${On}`,Nn=`pointerup${On}`,Rn="touch",Fn="pen",jn="pointer-event",Bn=40,Un={endCallback:null,leftCallback:null,rightCallback:null},Vn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class zn extends an{constructor(t,e){super(),this._element=t,t&&zn.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Un}static get DefaultType(){return Vn}static get NAME(){return An}dispose(){en.off(this._element,On)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ne(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Bn)return;const e=t/this._deltaX;this._deltaX=0,e&&Ne(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(en.on(this._element,Ln,(t=>this._start(t))),en.on(this._element,Nn,(t=>this._end(t))),this._element.classList.add(jn)):(en.on(this._element,Pn,(t=>this._start(t))),en.on(this._element,Mn,(t=>this._move(t))),en.on(this._element,Dn,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Fn||t.pointerType===Rn)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Gn="carousel",$n="bs.carousel",qn=`.${$n}`,Wn=".data-api",Hn="ArrowLeft",Kn="ArrowRight",Xn=500,Yn="next",Qn="prev",Jn="left",Zn="right",ti=`slide${qn}`,ei=`slid${qn}`,ni=`keydown${qn}`,ii=`mouseenter${qn}`,si=`mouseleave${qn}`,ri=`dragstart${qn}`,oi=`load${qn}${Wn}`,ai=`click${qn}${Wn}`,ci="carousel",li="active",hi="slide",ui="carousel-item-end",di="carousel-item-start",fi="carousel-item-next",pi="carousel-item-prev",gi=".active",mi=".carousel-item",yi=gi+mi,vi=".carousel-item img",bi=".carousel-indicators",wi="[data-bs-slide], [data-bs-slide-to]",xi='[data-bs-ride="carousel"]',_i={[Hn]:Zn,[Kn]:Jn},Ti={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Si={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ii extends ln{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=un.findOne(bi,this._element),this._addEventListeners(),this._config.ride===ci&&this.cycle()}static get Default(){return Ti}static get DefaultType(){return Si}static get NAME(){return Gn}next(){this._slide(Yn)}nextWhenVisible(){!document.hidden&&Ie(this._element)&&this.next()}prev(){this._slide(Qn)}pause(){this._isSliding&&_e(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?en.one(this._element,ei,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void en.one(this._element,ei,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?Yn:Qn;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&en.on(this._element,ni,(t=>this._keydown(t))),"hover"===this._config.pause&&(en.on(this._element,ii,(()=>this.pause())),en.on(this._element,si,(()=>this._maybeEnableCycle()))),this._config.touch&&zn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of un.find(vi,this._element))en.on(n,ri,(t=>t.preventDefault()));const t=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),Xn+this._config.interval))},e={leftCallback:()=>this._slide(this._directionToOrder(Jn)),rightCallback:()=>this._slide(this._directionToOrder(Zn)),endCallback:t};this._swipeHelper=new zn(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=_i[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=un.findOne(gi,this._indicatorsElement);e.classList.remove(li),e.removeAttribute("aria-current");const n=un.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(li),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===Yn,s=e||Fe(this._getItems(),n,i,this._config.wrap);if(s===n)return;const r=this._getItemIndex(s),o=e=>en.trigger(this._element,e,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:r}),a=o(ti);if(a.defaultPrevented)return;if(!n||!s)return;const c=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(r),this._activeElement=s;const l=i?di:ui,h=i?fi:pi;s.classList.add(h),Ae(s),n.classList.add(l),s.classList.add(l);const u=()=>{s.classList.remove(l,h),s.classList.add(li),n.classList.remove(li,h,l),this._isSliding=!1,o(ei)};this._queueCallback(u,n,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(hi)}_getActive(){return un.findOne(yi,this._element)}_getItems(){return un.find(mi,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return De()?t===Jn?Qn:Yn:t===Jn?Yn:Qn}_orderToDirection(t){return De()?t===Qn?Jn:Zn:t===Qn?Zn:Jn}static jQueryInterface(t){return this.each((function(){const e=Ii.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}en.on(document,ai,wi,(function(t){const e=un.getElementFromSelector(this);if(!e||!e.classList.contains(ci))return;t.preventDefault();const n=Ii.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===on.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),en.on(window,oi,(()=>{const t=un.find(xi);for(const e of t)Ii.getOrCreateInstance(e)})),Le(Ii);const ki="collapse",Ei="bs.collapse",Ci=`.${Ei}`,Ai=".data-api",Oi=`show${Ci}`,Pi=`shown${Ci}`,Mi=`hide${Ci}`,Di=`hidden${Ci}`,Li=`click${Ci}${Ai}`,Ni="show",Ri="collapse",Fi="collapsing",ji="collapsed",Bi=`:scope .${Ri} .${Ri}`,Ui="collapse-horizontal",Vi="width",zi="height",Gi=".collapse.show, .collapse.collapsing",$i='[data-bs-toggle="collapse"]',qi={parent:null,toggle:!0},Wi={parent:"(null|element)",toggle:"boolean"};class Hi extends ln{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=un.find($i);for(const i of n){const t=un.getSelectorFromElement(i),e=un.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return qi}static get DefaultType(){return Wi}static get NAME(){return ki}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Gi).filter((t=>t!==this._element)).map((t=>Hi.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=en.trigger(this._element,Oi);if(e.defaultPrevented)return;for(const o of t)o.hide();const n=this._getDimension();this._element.classList.remove(Ri),this._element.classList.add(Fi),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Fi),this._element.classList.add(Ri,Ni),this._element.style[n]="",en.trigger(this._element,Pi)},s=n[0].toUpperCase()+n.slice(1),r=`scroll${s}`;this._queueCallback(i,this._element,!0),this._element.style[n]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const t=en.trigger(this._element,Mi);if(t.defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ae(this._element),this._element.classList.add(Fi),this._element.classList.remove(Ri,Ni);for(const i of this._triggerArray){const t=un.getElementFromSelector(i);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Fi),this._element.classList.add(Ri),en.trigger(this._element,Di)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Ni)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=Se(t.parent),t}_getDimension(){return this._element.classList.contains(Ui)?Vi:zi}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren($i);for(const e of t){const t=un.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=un.find(Bi,this._config.parent);return un.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(ji,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=Hi.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}en.on(document,Li,$i,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of un.getMultipleElementsFromSelector(this))Hi.getOrCreateInstance(e,{toggle:!1}).toggle()})),Le(Hi);const Ki="dropdown",Xi="bs.dropdown",Yi=`.${Xi}`,Qi=".data-api",Ji="Escape",Zi="Tab",ts="ArrowUp",es="ArrowDown",ns=2,is=`hide${Yi}`,ss=`hidden${Yi}`,rs=`show${Yi}`,os=`shown${Yi}`,as=`click${Yi}${Qi}`,cs=`keydown${Yi}${Qi}`,ls=`keyup${Yi}${Qi}`,hs="show",us="dropup",ds="dropend",fs="dropstart",ps="dropup-center",gs="dropdown-center",ms='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ys=`${ms}.${hs}`,vs=".dropdown-menu",bs=".navbar",ws=".navbar-nav",xs=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",_s=De()?"top-end":"top-start",Ts=De()?"top-start":"top-end",Ss=De()?"bottom-end":"bottom-start",Is=De()?"bottom-start":"bottom-end",ks=De()?"left-start":"right-start",Es=De()?"right-start":"left-start",Cs="top",As="bottom",Os={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ps={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ms extends ln{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=un.next(this._element,vs)[0]||un.prev(this._element,vs)[0]||un.findOne(vs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Os}static get DefaultType(){return Ps}static get NAME(){return Ki}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ke(this._element)||this._isShown())return;const t={relatedTarget:this._element},e=en.trigger(this._element,rs,t);if(!e.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(ws))for(const t of[].concat(...document.body.children))en.on(t,"mouseover",Ce);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(hs),this._element.classList.add(hs),en.trigger(this._element,os,t)}}hide(){if(ke(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){const e=en.trigger(this._element,is,t);if(!e.defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))en.off(t,"mouseover",Ce);this._popper&&this._popper.destroy(),this._menu.classList.remove(hs),this._element.classList.remove(hs),this._element.setAttribute("aria-expanded","false"),on.removeDataAttribute(this._menu,"popper"),en.trigger(this._element,ss,t)}}_getConfig(t){if(t=super._getConfig(t),"object"===typeof t.reference&&!Te(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ki.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if("undefined"===typeof i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:Te(this._config.reference)?t=Se(this._config.reference):"object"===typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=he(t,this._menu,e)}_isShown(){return this._menu.classList.contains(hs)}_getPlacement(){const t=this._parent;if(t.classList.contains(ds))return ks;if(t.classList.contains(fs))return Es;if(t.classList.contains(ps))return Cs;if(t.classList.contains(gs))return As;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains(us)?e?Ts:_s:e?Is:Ss}_detectNavbar(){return null!==this._element.closest(bs)}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(on.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ne(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=un.find(xs,this._menu).filter((t=>Ie(t)));n.length&&Fe(n,e,t===es,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Ms.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t.button===ns||"keyup"===t.type&&t.key!==Zi)return;const e=un.find(ys);for(const n of e){const e=Ms.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),s=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!s||"outside"===e._config.autoClose&&s)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&t.key===Zi||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const r={relatedTarget:e._element};"click"===t.type&&(r.clickEvent=t),e._completeHide(r)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===Ji,i=[ts,es].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const s=this.matches(ms)?this:un.prev(this,ms)[0]||un.next(this,ms)[0]||un.findOne(ms,t.delegateTarget.parentNode),r=Ms.getOrCreateInstance(s);if(i)return t.stopPropagation(),r.show(),void r._selectMenuItem(t);r._isShown()&&(t.stopPropagation(),r.hide(),s.focus())}}en.on(document,cs,ms,Ms.dataApiKeydownHandler),en.on(document,cs,vs,Ms.dataApiKeydownHandler),en.on(document,as,Ms.clearMenus),en.on(document,ls,Ms.clearMenus),en.on(document,as,ms,(function(t){t.preventDefault(),Ms.getOrCreateInstance(this).toggle()})),Le(Ms);const Ds="backdrop",Ls="fade",Ns="show",Rs=`mousedown.bs.${Ds}`,Fs={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},js={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Bs extends an{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Fs}static get DefaultType(){return js}static get NAME(){return Ds}show(t){if(!this._config.isVisible)return void Ne(t);this._append();const e=this._getElement();this._config.isAnimated&&Ae(e),e.classList.add(Ns),this._emulateAnimation((()=>{Ne(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Ns),this._emulateAnimation((()=>{this.dispose(),Ne(t)}))):Ne(t)}dispose(){this._isAppended&&(en.off(this._element,Rs),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Ls),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Se(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),en.on(t,Rs,(()=>{Ne(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){Re(t,this._getElement(),this._config.isAnimated)}}const Us="focustrap",Vs="bs.focustrap",zs=`.${Vs}`,Gs=`focusin${zs}`,$s=`keydown.tab${zs}`,qs="Tab",Ws="forward",Hs="backward",Ks={autofocus:!0,trapElement:null},Xs={autofocus:"boolean",trapElement:"element"};class Ys extends an{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ks}static get DefaultType(){return Xs}static get NAME(){return Us}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),en.off(document,zs),en.on(document,Gs,(t=>this._handleFocusin(t))),en.on(document,$s,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,en.off(document,zs))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=un.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Hs?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===qs&&(this._lastTabNavDirection=t.shiftKey?Hs:Ws)}}const Qs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Js=".sticky-top",Zs="padding-right",tr="margin-right";class er{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Zs,(e=>e+t)),this._setElementAttributes(Qs,Zs,(e=>e+t)),this._setElementAttributes(Js,tr,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Zs),this._resetElementAttributes(Qs,Zs),this._resetElementAttributes(Js,tr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth(),s=t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const s=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(s))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&on.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=t=>{const n=on.getDataAttribute(t,e);null!==n?(on.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(Te(t))e(t);else for(const n of un.find(t,this._element))e(n)}}const nr="modal",ir="bs.modal",sr=`.${ir}`,rr=".data-api",or="Escape",ar=`hide${sr}`,cr=`hidePrevented${sr}`,lr=`hidden${sr}`,hr=`show${sr}`,ur=`shown${sr}`,dr=`resize${sr}`,fr=`click.dismiss${sr}`,pr=`mousedown.dismiss${sr}`,gr=`keydown.dismiss${sr}`,mr=`click${sr}${rr}`,yr="modal-open",vr="fade",br="show",wr="modal-static",xr=".modal.show",_r=".modal-dialog",Tr=".modal-body",Sr='[data-bs-toggle="modal"]',Ir={backdrop:!0,focus:!0,keyboard:!0},kr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Er extends ln{constructor(t,e){super(t,e),this._dialog=un.findOne(_r,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new er,this._addEventListeners()}static get Default(){return Ir}static get DefaultType(){return kr}static get NAME(){return nr}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=en.trigger(this._element,hr,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(yr),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;const t=en.trigger(this._element,ar);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(br),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){en.off(window,sr),en.off(this._dialog,sr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Bs({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ys({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=un.findOne(Tr,this._dialog);e&&(e.scrollTop=0),Ae(this._element),this._element.classList.add(br);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,en.trigger(this._element,ur,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){en.on(this._element,gr,(t=>{t.key===or&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),en.on(window,dr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),en.on(this._element,pr,(t=>{en.one(this._element,fr,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(yr),this._resetAdjustments(),this._scrollBar.reset(),en.trigger(this._element,lr)}))}_isAnimated(){return this._element.classList.contains(vr)}_triggerBackdropTransition(){const t=en.trigger(this._element,cr);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(wr)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(wr),this._queueCallback((()=>{this._element.classList.remove(wr),this._queueCallback((()=>{this._element.style.overflowY=n}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=De()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=De()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Er.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}en.on(document,mr,Sr,(function(t){const e=un.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),en.one(e,hr,(t=>{t.defaultPrevented||en.one(e,lr,(()=>{Ie(this)&&this.focus()}))}));const n=un.findOne(xr);n&&Er.getInstance(n).hide();const i=Er.getOrCreateInstance(e);i.toggle(this)})),dn(Er),Le(Er);const Cr="offcanvas",Ar="bs.offcanvas",Or=`.${Ar}`,Pr=".data-api",Mr=`load${Or}${Pr}`,Dr="Escape",Lr="show",Nr="showing",Rr="hiding",Fr="offcanvas-backdrop",jr=".offcanvas.show",Br=`show${Or}`,Ur=`shown${Or}`,Vr=`hide${Or}`,zr=`hidePrevented${Or}`,Gr=`hidden${Or}`,$r=`resize${Or}`,qr=`click${Or}${Pr}`,Wr=`keydown.dismiss${Or}`,Hr='[data-bs-toggle="offcanvas"]',Kr={backdrop:!0,keyboard:!0,scroll:!1},Xr={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Yr extends ln{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Kr}static get DefaultType(){return Xr}static get NAME(){return Cr}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;const e=en.trigger(this._element,Br,{relatedTarget:t});if(e.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new er).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Nr);const n=()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Lr),this._element.classList.remove(Nr),en.trigger(this._element,Ur,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown)return;const t=en.trigger(this._element,Vr);if(t.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Rr),this._backdrop.hide();const e=()=>{this._element.classList.remove(Lr,Rr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new er).reset(),en.trigger(this._element,Gr)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{"static"!==this._config.backdrop?this.hide():en.trigger(this._element,zr)},e=Boolean(this._config.backdrop);return new Bs({className:Fr,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new Ys({trapElement:this._element})}_addEventListeners(){en.on(this._element,Wr,(t=>{t.key===Dr&&(this._config.keyboard?this.hide():en.trigger(this._element,zr))}))}static jQueryInterface(t){return this.each((function(){const e=Yr.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}en.on(document,qr,Hr,(function(t){const e=un.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),ke(this))return;en.one(e,Gr,(()=>{Ie(this)&&this.focus()}));const n=un.findOne(jr);n&&n!==e&&Yr.getInstance(n).hide();const i=Yr.getOrCreateInstance(e);i.toggle(this)})),en.on(window,Mr,(()=>{for(const t of un.find(jr))Yr.getOrCreateInstance(t).show()})),en.on(window,$r,(()=>{for(const t of un.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&Yr.getOrCreateInstance(t).hide()})),dn(Yr),Le(Yr);const Qr=/^aria-[\w-]*$/i,Jr={"*":["class","dir","id","lang","role",Qr],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Zr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),to=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,eo=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!Zr.has(n)||Boolean(to.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))};function no(t,e,n){if(!t.length)return t;if(n&&"function"===typeof n)return n(t);const i=new window.DOMParser,s=i.parseFromString(t,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const t=o.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){o.remove();continue}const n=[].concat(...o.attributes),i=[].concat(e["*"]||[],e[t]||[]);for(const e of n)eo(e,i)||o.removeAttribute(e.nodeName)}return s.body.innerHTML}const io="TemplateFactory",so={allowList:Jr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ro={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},oo={entry:"(string|element|function|null)",selector:"(string|element)"};class ao extends an{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return so}static get DefaultType(){return ro}static get NAME(){return io}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,s]of Object.entries(this._config.content))this._setContent(t,s,i);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},oo)}_setContent(t,e,n){const i=un.findOne(n,t);i&&(e=this._resolvePossibleFunction(e),e?Te(e)?this._putElementInTemplate(Se(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?no(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ne(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const co="tooltip",lo=new Set(["sanitize","allowList","sanitizeFn"]),ho="fade",uo="modal",fo="show",po=".tooltip-inner",go=`.${uo}`,mo="hide.bs.modal",yo="hover",vo="focus",bo="click",wo="manual",xo="hide",_o="hidden",To="show",So="shown",Io="inserted",ko="click",Eo="focusin",Co="focusout",Ao="mouseenter",Oo="mouseleave",Po={AUTO:"auto",TOP:"top",RIGHT:De()?"left":"right",BOTTOM:"bottom",LEFT:De()?"right":"left"},Mo={allowList:Jr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Do={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Lo extends ln{constructor(t,e){if("undefined"===typeof i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Mo}static get DefaultType(){return Do}static get NAME(){return co}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),en.off(this._element.closest(go),mo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=en.trigger(this._element,this.constructor.eventName(To)),e=Ee(this._element),n=(e||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),en.trigger(this._element,this.constructor.eventName(Io))),this._popper=this._createPopper(i),i.classList.add(fo),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))en.on(o,"mouseover",Ce);const r=()=>{en.trigger(this._element,this.constructor.eventName(So)),!1===this._isHovered&&this._leave(),this._isHovered=!1};this._queueCallback(r,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const t=en.trigger(this._element,this.constructor.eventName(xo));if(t.defaultPrevented)return;const e=this._getTipElement();if(e.classList.remove(fo),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))en.off(i,"mouseover",Ce);this._activeTrigger[bo]=!1,this._activeTrigger[vo]=!1,this._activeTrigger[yo]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),en.trigger(this._element,this.constructor.eventName(_o)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(ho,fo),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=we(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(ho),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ao({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[po]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ho)}_isShown(){return this.tip&&this.tip.classList.contains(fo)}_createPopper(t){const e=Ne(this._config.placement,[this,t,this._element]),n=Po[e.toUpperCase()];return he(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Ne(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...Ne(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)en.on(this._element,this.constructor.eventName(ko),this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e.toggle()}));else if(e!==wo){const t=e===yo?this.constructor.eventName(Ao):this.constructor.eventName(Eo),n=e===yo?this.constructor.eventName(Oo):this.constructor.eventName(Co);en.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?vo:yo]=!0,e._enter()})),en.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?vo:yo]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},en.on(this._element.closest(go),mo,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=on.getDataAttributes(this._element);for(const n of Object.keys(e))lo.has(n)&&delete e[n];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:Se(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=Lo.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Le(Lo);const No="popover",Ro=".popover-header",Fo=".popover-body",jo={...Lo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Bo={...Lo.DefaultType,content:"(null|string|element|function)"};class Uo extends Lo{static get Default(){return jo}static get DefaultType(){return Bo}static get NAME(){return No}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ro]:this._getTitle(),[Fo]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=Uo.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Le(Uo);const Vo="scrollspy",zo="bs.scrollspy",Go=`.${zo}`,$o=".data-api",qo=`activate${Go}`,Wo=`click${Go}`,Ho=`load${Go}${$o}`,Ko="dropdown-item",Xo="active",Yo='[data-bs-spy="scroll"]',Qo="[href]",Jo=".nav, .list-group",Zo=".nav-link",ta=".nav-item",ea=".list-group-item",na=`${Zo}, ${ta} > ${Zo}, ${ea}`,ia=".dropdown",sa=".dropdown-toggle",ra={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},oa={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class aa extends ln{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ra}static get DefaultType(){return oa}static get NAME(){return Vo}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Se(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(en.off(this._config.target,Wo),en.on(this._config.target,Wo,Qo,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,s=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const r of t){if(!r.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(r));continue}const t=r.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&t){if(n(r),!i)return}else s||t||n(r)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=un.find(Qo,this._config.target);for(const e of t){if(!e.hash||ke(e))continue;const t=un.findOne(decodeURI(e.hash),this._element);Ie(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Xo),this._activateParents(t),en.trigger(this._element,qo,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Ko))un.findOne(sa,t.closest(ia)).classList.add(Xo);else for(const e of un.parents(t,Jo))for(const t of un.prev(e,na))t.classList.add(Xo)}_clearActiveClass(t){t.classList.remove(Xo);const e=un.find(`${Qo}.${Xo}`,t);for(const n of e)n.classList.remove(Xo)}static jQueryInterface(t){return this.each((function(){const e=aa.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}en.on(window,Ho,(()=>{for(const t of un.find(Yo))aa.getOrCreateInstance(t)})),Le(aa);const ca="tab",la="bs.tab",ha=`.${la}`,ua=`hide${ha}`,da=`hidden${ha}`,fa=`show${ha}`,pa=`shown${ha}`,ga=`click${ha}`,ma=`keydown${ha}`,ya=`load${ha}`,va="ArrowLeft",ba="ArrowRight",wa="ArrowUp",xa="ArrowDown",_a="active",Ta="fade",Sa="show",Ia="dropdown",ka=".dropdown-toggle",Ea=".dropdown-menu",Ca=":not(.dropdown-toggle)",Aa='.list-group, .nav, [role="tablist"]',Oa=".nav-item, .list-group-item",Pa=`.nav-link${Ca}, .list-group-item${Ca}, [role="tab"]${Ca}`,Ma='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Da=`${Pa}, ${Ma}`,La=`.${_a}[data-bs-toggle="tab"], .${_a}[data-bs-toggle="pill"], .${_a}[data-bs-toggle="list"]`;class Na extends ln{constructor(t){super(t),this._parent=this._element.closest(Aa),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),en.on(this._element,ma,(t=>this._keydown(t))))}static get NAME(){return ca}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?en.trigger(e,ua,{relatedTarget:t}):null,i=en.trigger(t,fa,{relatedTarget:e});i.defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(_a),this._activate(un.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),en.trigger(t,pa,{relatedTarget:e})):t.classList.add(Sa)};this._queueCallback(n,t,t.classList.contains(Ta))}_deactivate(t,e){if(!t)return;t.classList.remove(_a),t.blur(),this._deactivate(un.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),en.trigger(t,da,{relatedTarget:e})):t.classList.remove(Sa)};this._queueCallback(n,t,t.classList.contains(Ta))}_keydown(t){if(![va,ba,wa,xa].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[ba,xa].includes(t.key),n=Fe(this._getChildren().filter((t=>!ke(t))),t.target,e,!0);n&&(n.focus({preventScroll:!0}),Na.getOrCreateInstance(n).show())}_getChildren(){return un.find(Da,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=un.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(Ia))return;const i=(t,i)=>{const s=un.findOne(t,n);s&&s.classList.toggle(i,e)};i(ka,_a),i(Ea,Sa),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(_a)}_getInnerElement(t){return t.matches(Da)?t:un.findOne(Da,t)}_getOuterElement(t){return t.closest(Oa)||t}static jQueryInterface(t){return this.each((function(){const e=Na.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}en.on(document,ga,Ma,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),ke(this)||Na.getOrCreateInstance(this).show()})),en.on(window,ya,(()=>{for(const t of un.find(La))Na.getOrCreateInstance(t)})),Le(Na);const Ra="toast",Fa="bs.toast",ja=`.${Fa}`,Ba=`mouseover${ja}`,Ua=`mouseout${ja}`,Va=`focusin${ja}`,za=`focusout${ja}`,Ga=`hide${ja}`,$a=`hidden${ja}`,qa=`show${ja}`,Wa=`shown${ja}`,Ha="fade",Ka="hide",Xa="show",Ya="showing",Qa={animation:"boolean",autohide:"boolean",delay:"number"},Ja={animation:!0,autohide:!0,delay:5e3};class Za extends ln{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ja}static get DefaultType(){return Qa}static get NAME(){return Ra}show(){const t=en.trigger(this._element,qa);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Ha);const e=()=>{this._element.classList.remove(Ya),en.trigger(this._element,Wa),this._maybeScheduleHide()};this._element.classList.remove(Ka),Ae(this._element),this._element.classList.add(Xa,Ya),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=en.trigger(this._element,Ga);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(Ka),this._element.classList.remove(Ya,Xa),en.trigger(this._element,$a)};this._element.classList.add(Ya),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Xa),super.dispose()}isShown(){return this._element.classList.contains(Xa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){en.on(this._element,Ba,(t=>this._onInteraction(t,!0))),en.on(this._element,Ua,(t=>this._onInteraction(t,!1))),en.on(this._element,Va,(t=>this._onInteraction(t,!0))),en.on(this._element,za,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Za.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}dn(Za),Le(Za)},9662:function(t,e,n){var i=n(614),s=n(6330),r=TypeError;t.exports=function(t){if(i(t))return t;throw r(s(t)+" is not a function")}},9670:function(t,e,n){var i=n(111),s=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw r(s(t)+" is not an object")}},1318:function(t,e,n){var i=n(5656),s=n(1400),r=n(6244),o=function(t){return function(e,n,o){var a,c=i(e),l=r(c),h=s(o,l);if(t&&n!=n){while(l>h)if(a=c[h++],a!=a)return!0}else for(;l>h;h++)if((t||h in c)&&c[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},3658:function(t,e,n){"use strict";var i=n(9781),s=n(3157),r=TypeError,o=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(s(t)&&!o(t,"length").writable)throw r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4326:function(t,e,n){var i=n(1702),s=i({}.toString),r=i("".slice);t.exports=function(t){return r(s(t),8,-1)}},9920:function(t,e,n){var i=n(2597),s=n(3887),r=n(1236),o=n(3070);t.exports=function(t,e,n){for(var a=s(e),c=o.f,l=r.f,h=0;h<a.length;h++){var u=a[h];i(t,u)||n&&i(n,u)||c(t,u,l(e,u))}}},8880:function(t,e,n){var i=n(9781),s=n(3070),r=n(9114);t.exports=i?function(t,e,n){return s.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},8052:function(t,e,n){var i=n(614),s=n(3070),r=n(6339),o=n(3072);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(i(n)&&r(n,l,a),a.global)c?t[e]=n:o(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(h){}c?t[e]=n:s.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){var i=n(7854),s=Object.defineProperty;t.exports=function(t,e){try{s(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9781:function(t,e,n){var i=n(7293);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var i=n(7854),s=n(111),r=i.document,o=s(r)&&s(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},7207:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var i,s,r=n(7854),o=n(8113),a=r.process,c=r.Deno,l=a&&a.versions||c&&c.version,h=l&&l.v8;h&&(i=h.split("."),s=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(s=+i[1]))),t.exports=s},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var i=n(7854),s=n(1236).f,r=n(8880),o=n(8052),a=n(3072),c=n(9920),l=n(4705);t.exports=function(t,e){var n,h,u,d,f,p,g=t.target,m=t.global,y=t.stat;if(h=m?i:y?i[g]||a(g,{}):(i[g]||{}).prototype,h)for(u in e){if(f=e[u],t.dontCallGetSet?(p=s(h,u),d=p&&p.value):d=h[u],n=l(m?u:g+(y?".":"#")+u,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&r(f,"sham",!0),o(h,u,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},4374:function(t,e,n){var i=n(7293);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var i=n(4374),s=Function.prototype.call;t.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},6530:function(t,e,n){var i=n(9781),s=n(2597),r=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=s(r,"name"),c=a&&"something"===function(){}.name,l=a&&(!i||i&&o(r,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},1702:function(t,e,n){var i=n(4374),s=Function.prototype,r=s.call,o=i&&s.bind.bind(r,r);t.exports=i?o:function(t){return function(){return r.apply(t,arguments)}}},5005:function(t,e,n){var i=n(7854),s=n(614),r=function(t){return s(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(i[t]):i[t]&&i[t][e]}},8173:function(t,e,n){var i=n(9662),s=n(8554);t.exports=function(t,e){var n=t[e];return s(n)?void 0:i(n)}},7854:function(t,e,n){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){var i=n(1702),s=n(7908),r=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(s(t),e)}},3501:function(t){t.exports={}},4664:function(t,e,n){var i=n(9781),s=n(7293),r=n(317);t.exports=!i&&!s((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var i=n(1702),s=n(7293),r=n(4326),o=Object,a=i("".split);t.exports=s((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?a(t,""):o(t)}:o},2788:function(t,e,n){var i=n(1702),s=n(614),r=n(5465),o=i(Function.toString);s(r.inspectSource)||(r.inspectSource=function(t){return o(t)}),t.exports=r.inspectSource},9909:function(t,e,n){var i,s,r,o=n(4811),a=n(7854),c=n(111),l=n(8880),h=n(2597),u=n(5465),d=n(6200),f=n(3501),p="Object already initialized",g=a.TypeError,m=a.WeakMap,y=function(t){return r(t)?s(t):i(t,{})},v=function(t){return function(e){var n;if(!c(e)||(n=s(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}};if(o||u.state){var b=u.state||(u.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,i=function(t,e){if(b.has(t))throw g(p);return e.facade=t,b.set(t,e),e},s=function(t){return b.get(t)||{}},r=function(t){return b.has(t)}}else{var w=d("state");f[w]=!0,i=function(t,e){if(h(t,w))throw g(p);return e.facade=t,l(t,w,e),e},s=function(t){return h(t,w)?t[w]:{}},r=function(t){return h(t,w)}}t.exports={set:i,get:s,has:r,enforce:y,getterFor:v}},3157:function(t,e,n){var i=n(4326);t.exports=Array.isArray||function(t){return"Array"==i(t)}},614:function(t,e,n){var i=n(4154),s=i.all;t.exports=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===s}:function(t){return"function"==typeof t}},4705:function(t,e,n){var i=n(7293),s=n(614),r=/#|\.prototype\./,o=function(t,e){var n=c[a(t)];return n==h||n!=l&&(s(e)?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",h=o.POLYFILL="P";t.exports=o},8554:function(t){t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){var i=n(614),s=n(4154),r=s.all;t.exports=s.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===r}:function(t){return"object"==typeof t?null!==t:i(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var i=n(5005),s=n(614),r=n(7976),o=n(3307),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return s(e)&&r(e.prototype,a(t))}},6244:function(t,e,n){var i=n(7466);t.exports=function(t){return i(t.length)}},6339:function(t,e,n){var i=n(1702),s=n(7293),r=n(614),o=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),h=n(9909),u=h.enforce,d=h.get,f=String,p=Object.defineProperty,g=i("".slice),m=i("".replace),y=i([].join),v=a&&!s((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&o(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(s){}var i=u(t);return o(i,"source")||(i.source=y(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return r(this)&&d(this).source||l(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},3070:function(t,e,n){var i=n(9781),s=n(4664),r=n(3353),o=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",d="configurable",f="writable";e.f=i?r?function(t,e,n){if(o(t),e=a(e),o(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=h(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:u in n?n[u]:i[u],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(o(t),e=a(e),o(n),s)try{return l(t,e,n)}catch(i){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var i=n(9781),s=n(6916),r=n(5296),o=n(9114),a=n(5656),c=n(4948),l=n(2597),h=n(4664),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=a(t),e=c(e),h)try{return u(t,e)}catch(n){}if(l(t,e))return o(!s(r.f,t,e),t[e])}},8006:function(t,e,n){var i=n(6324),s=n(748),r=s.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},7976:function(t,e,n){var i=n(1702);t.exports=i({}.isPrototypeOf)},6324:function(t,e,n){var i=n(1702),s=n(2597),r=n(5656),o=n(1318).indexOf,a=n(3501),c=i([].push);t.exports=function(t,e){var n,i=r(t),l=0,h=[];for(n in i)!s(a,n)&&s(i,n)&&c(h,n);while(e.length>l)s(i,n=e[l++])&&(~o(h,n)||c(h,n));return h}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!n.call({1:2},1);e.f=s?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},2140:function(t,e,n){var i=n(6916),s=n(614),r=n(111),o=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&s(n=t.toString)&&!r(a=i(n,t)))return a;if(s(n=t.valueOf)&&!r(a=i(n,t)))return a;if("string"!==e&&s(n=t.toString)&&!r(a=i(n,t)))return a;throw o("Can't convert object to primitive value")}},3887:function(t,e,n){var i=n(5005),s=n(1702),r=n(8006),o=n(5181),a=n(9670),c=s([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(a(t)),n=o.f;return n?c(e,n(t)):e}},4488:function(t,e,n){var i=n(8554),s=TypeError;t.exports=function(t){if(i(t))throw s("Can't call method on "+t);return t}},6200:function(t,e,n){var i=n(2309),s=n(9711),r=i("keys");t.exports=function(t){return r[t]||(r[t]=s(t))}},5465:function(t,e,n){var i=n(7854),s=n(3072),r="__core-js_shared__",o=i[r]||s(r,{});t.exports=o},2309:function(t,e,n){var i=n(1913),s=n(5465);(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:i?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){var i=n(7392),s=n(7293),r=n(7854),o=r.String;t.exports=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol();return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},1400:function(t,e,n){var i=n(9303),s=Math.max,r=Math.min;t.exports=function(t,e){var n=i(t);return n<0?s(n+e,0):r(n,e)}},5656:function(t,e,n){var i=n(8361),s=n(4488);t.exports=function(t){return i(s(t))}},9303:function(t,e,n){var i=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},7466:function(t,e,n){var i=n(9303),s=Math.min;t.exports=function(t){return t>0?s(i(t),9007199254740991):0}},7908:function(t,e,n){var i=n(4488),s=Object;t.exports=function(t){return s(i(t))}},7593:function(t,e,n){var i=n(6916),s=n(111),r=n(2190),o=n(8173),a=n(2140),c=n(5112),l=TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!s(t)||r(t))return t;var n,c=o(t,h);if(c){if(void 0===e&&(e="default"),n=i(c,t,e),!s(n)||r(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){var i=n(7593),s=n(2190);t.exports=function(t){var e=i(t,"string");return s(e)?e:e+""}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){var i=n(1702),s=0,r=Math.random(),o=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++s+r,36)}},3307:function(t,e,n){var i=n(6293);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var i=n(9781),s=n(7293);t.exports=i&&s((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,n){var i=n(7854),s=n(614),r=i.WeakMap;t.exports=s(r)&&/native code/.test(String(r))},5112:function(t,e,n){var i=n(7854),s=n(2309),r=n(2597),o=n(9711),a=n(6293),c=n(3307),l=i.Symbol,h=s("wks"),u=c?l["for"]||l:l&&l.withoutSetter||o;t.exports=function(t){return r(h,t)||(h[t]=a&&r(l,t)?l[t]:u("Symbol."+t)),h[t]}},7658:function(t,e,n){"use strict";var i=n(2109),s=n(7908),r=n(6244),o=n(3658),a=n(7207),c=n(7293),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},u=l||!h();i({target:"Array",proto:!0,arity:1,forced:u},{push:function(t){var e=s(this),n=r(e),i=arguments.length;a(n+i);for(var c=0;c<i;c++)e[n]=arguments[c],n++;return o(e,n),n}})},8840:function(t,e,n){"use strict";var i;(function(s,r){t.exports?(r["default"]=r,t.exports=s.document?r(s):r):(i=function(){return r(s)}.call(e,n,e,t),void 0===i||(t.exports=i))})("undefined"!==typeof window?window:this,(function(t){function e(e,n,i,s){e.hasOwnProperty(n)||(e[n]=s.apply(null,i),"function"===typeof CustomEvent&&t.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:n,module:e[n]}})))}var n={};return e(n,"Core/Globals.js",[],(function(){var e;return function(e){e.SVG_NS="http://www.w3.org/2000/svg",e.product="Highcharts",e.version="11.0.1",e.win="undefined"!==typeof t?t:{},e.doc=e.win.document,e.svg=e.doc&&e.doc.createElementNS&&!!e.doc.createElementNS(e.SVG_NS,"svg").createSVGRect,e.userAgent=e.win.navigator&&e.win.navigator.userAgent||"",e.isChrome=-1!==e.userAgent.indexOf("Chrome"),e.isFirefox=-1!==e.userAgent.indexOf("Firefox"),e.isMS=/(edge|msie|trident)/i.test(e.userAgent)&&!e.win.opera,e.isSafari=!e.isChrome&&-1!==e.userAgent.indexOf("Safari"),e.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(e.userAgent),e.isWebKit=-1!==e.userAgent.indexOf("AppleWebKit"),e.deg2rad=2*Math.PI/360,e.hasBidiBug=e.isFirefox&&4>parseInt(e.userAgent.split("Firefox/")[1],10),e.hasTouch=!!e.win.TouchEvent,e.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],e.noop=function(){},e.supportsPassiveEvents=function(){let t=!1;if(!e.isMS){const n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.win.addEventListener&&e.win.removeEventListener&&(e.win.addEventListener("testPassive",e.noop,n),e.win.removeEventListener("testPassive",e.noop,n))}return t}(),e.charts=[],e.dateFormats={},e.seriesTypes={},e.symbolSizes={},e.chartCount=0}(e||(e={})),e})),e(n,"Core/Utilities.js",[n["Core/Globals.js"]],(function(t){function e(n,i,s,r){const o=i?"Highcharts error":"Highcharts warning";32===n&&(n=`${o}: Deprecated member`);const a=l(n);let c=a?`${o} #${n}: www.highcharts.com/errors/${n}/`:n.toString();if("undefined"!==typeof r){let t="";a&&(c+="?"),v(r,(function(e,n){t+=`\n - ${n}: ${e}`,a&&(c+=encodeURI(n)+"="+encodeURI(e))})),c+=t}w(t,"displayError",{chart:s,code:n,message:c,params:r},(function(){if(i)throw Error(c);T.console&&-1===e.messages.indexOf(c)&&console.warn(c)})),e.messages.push(c)}function n(t,e){const i={};return v(t,(function(s,r){o(t[r],!0)&&!t.nodeType&&e[r]?(s=n(t[r],e[r]),Object.keys(s).length&&(i[r]=s)):(o(t[r])||t[r]!==e[r]||r in t&&!(r in e))&&(i[r]=t[r])})),i}function i(t,e){return parseInt(t,e||10)}function s(t){return"string"===typeof t}function r(t){return t=Object.prototype.toString.call(t),"[object Array]"===t||"[object Array Iterator]"===t}function o(t,e){return!!t&&"object"===typeof t&&(!e||!r(t))}function a(t){return o(t)&&"number"===typeof t.nodeType}function c(t){const e=t&&t.constructor;return!(!o(t,!0)||a(t)||!e||!e.name||"Object"===e.name)}function l(t){return"number"===typeof t&&!isNaN(t)&&1/0>t&&-1/0<t}function h(t){return"undefined"!==typeof t&&null!==t}function u(t,e,n){const i=s(e)&&!h(n);let r;const o=(e,n)=>{h(e)?t.setAttribute(n,e):i?(r=t.getAttribute(n))||"class"!==n||(r=t.getAttribute(n+"Name")):t.removeAttribute(n)};return s(e)?o(n,e):v(e,o),r}function d(t,e){let n;for(n in t||(t={}),e)t[n]=e[n];return t}function f(){const t=arguments,e=t.length;for(let n=0;n<e;n++){const e=t[n];if("undefined"!==typeof e&&null!==e)return e}}function p(e,n){t.isMS&&!t.svg&&n&&h(n.opacity)&&(n.filter=`alpha(opacity=${100*n.opacity})`),d(e.style,n)}function g(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function m(t,e){return 1e14<t?t:parseFloat(t.toPrecision(e||14))}function y(t,e,n){let s;return"width"===e?(e=Math.min(t.offsetWidth,t.scrollWidth),n=t.getBoundingClientRect&&t.getBoundingClientRect().width,n<e&&n>=e-1&&(e=Math.floor(n)),Math.max(0,e-(y(t,"padding-left",!0)||0)-(y(t,"padding-right",!0)||0))):"height"===e?Math.max(0,Math.min(t.offsetHeight,t.scrollHeight)-(y(t,"padding-top",!0)||0)-(y(t,"padding-bottom",!0)||0)):((t=T.getComputedStyle(t,void 0))&&(s=t.getPropertyValue(e),f(n,"opacity"!==e)&&(s=i(s))),s)}function v(t,e,n){for(const i in t)Object.hasOwnProperty.call(t,i)&&e.call(n||t[i],t[i],i,t)}function b(t,e,n){function i(e,n){const i=t.removeEventListener;i&&i.call(t,e,n,!1)}function s(n){let s,r;t.nodeName&&(e?(s={},s[e]=!0):s=n,v(s,(function(t,e){if(n[e])for(r=n[e].length;r--;)i(e,n[e][r].fn)})))}var r="function"===typeof t&&t.prototype||t;if(Object.hasOwnProperty.call(r,"hcEvents")){const t=r.hcEvents;e?(r=t[e]||[],n?(t[e]=r.filter((function(t){return n!==t.fn})),i(e,n)):(s(t),t[e]=[])):(s(t),delete r.hcEvents)}}function w(e,n,i,s){if(i=i||{},_.createEvent&&(e.dispatchEvent||e.fireEvent&&e!==t)){var r=_.createEvent("Events");r.initEvent(n,!0,!0),i=d(r,i),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent(n,i)}else if(e.hcEvents){i.target||d(i,{preventDefault:function(){i.defaultPrevented=!0},target:e,type:n}),r=[];let t=e,s=!1;for(;t.hcEvents;)Object.hasOwnProperty.call(t,"hcEvents")&&t.hcEvents[n]&&(r.length&&(s=!0),r.unshift.apply(r,t.hcEvents[n])),t=Object.getPrototypeOf(t);s&&r.sort(((t,e)=>t.order-e.order)),r.forEach((t=>{!1===t.fn.call(e,i)&&i.preventDefault()}))}s&&!i.defaultPrevented&&s.call(e,i)}const{charts:x,doc:_,win:T}=t;(e||(e={})).messages=[],Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)};var S=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){let n;const i=t.length;for(n=0;n<i;n++)if(e(t[n],n))return t[n]};let I;v({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},(function(n,i){t[i]=function(t){return e(32,!1,void 0,{[`Highcharts.${i}`]:`use Array.${n}`}),Array.prototype[n].apply(t,[].slice.call(arguments,1))}}));const k=function(){const t=Math.random().toString(36).substring(2,9)+"-";let e=0;return function(){return"highcharts-"+(I?"":t)+e++}}();return T.jQuery&&(T.jQuery.fn.highcharts=function(){const e=[].slice.call(arguments);if(this[0])return e[0]?(new(t[s(e[0])?e.shift():"Chart"])(this[0],e[0],e[1]),this):x[u(this[0],"data-highcharts-chart")]}),S={addEvent:function(e,n,i,s={}){var r="function"===typeof e&&e.prototype||e;Object.hasOwnProperty.call(r,"hcEvents")||(r.hcEvents={}),r=r.hcEvents,t.Point&&e instanceof t.Point&&e.series&&e.series.chart&&(e.series.chart.runTrackerClick=!0);const o=e.addEventListener;return o&&o.call(e,n,i,!!t.supportsPassiveEvents&&{passive:void 0===s.passive?-1!==n.indexOf("touch"):s.passive,capture:!1}),r[n]||(r[n]=[]),r[n].push({fn:i,order:"number"===typeof s.order?s.order:1/0}),r[n].sort(((t,e)=>t.order-e.order)),function(){b(e,n,i)}},arrayMax:function(t){let e=t.length,n=t[0];for(;e--;)t[e]>n&&(n=t[e]);return n},arrayMin:function(t){let e=t.length,n=t[0];for(;e--;)t[e]<n&&(n=t[e]);return n},attr:u,clamp:function(t,e,n){return t>e?t<n?t:n:e},cleanRecursively:n,clearTimeout:function(t){h(t)&&clearTimeout(t)},correctFloat:m,createElement:function(t,e,n,i,s){return t=_.createElement(t),e&&d(t,e),s&&p(t,{padding:"0",border:"none",margin:"0"}),n&&p(t,n),i&&i.appendChild(t),t},css:p,defined:h,destroyObjectProperties:function(t,e){v(t,(function(n,i){n&&n!==e&&n.destroy&&n.destroy(),delete t[i]}))},discardElement:function(t){t&&t.parentElement&&t.parentElement.removeChild(t)},erase:function(t,e){let n=t.length;for(;n--;)if(t[n]===e){t.splice(n,1);break}},error:e,extend:d,extendClass:function(t,e){const n=function(){};return n.prototype=new t,d(n.prototype,e),n},find:S,fireEvent:w,getMagnitude:g,getNestedProperty:function(t,e){for(t=t.split(".");t.length&&h(e);){const n=t.shift();if("undefined"===typeof n||"__proto__"===n)return;if(e=e[n],!h(e)||"function"===typeof e||"number"===typeof e.nodeType||e===T)return}return e},getStyle:y,inArray:function(t,n,i){return e(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),n.indexOf(t,i)},isArray:r,isClass:c,isDOMElement:a,isFunction:function(t){return"function"===typeof t},isNumber:l,isObject:o,isString:s,keys:function(t){return e(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(t)},merge:function(){let t,e=arguments,n={};const i=function(t,e){return"object"!==typeof t&&(t={}),v(e,(function(n,s){"__proto__"!==s&&"constructor"!==s&&(!o(n,!0)||c(n)||a(n)?t[s]=e[s]:t[s]=i(t[s]||{},n))})),t};!0===e[0]&&(n=e[1],e=Array.prototype.slice.call(e,2));const s=e.length;for(t=0;t<s;t++)n=i(n,e[t]);return n},normalizeTickInterval:function(t,e,n,i,s){let r=t;n=f(n,g(t));const o=t/n;for(e||(e=s?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===i&&(1===n?e=e.filter((function(t){return 0===t%1})):.1>=n&&(e=[1/n]))),i=0;i<e.length&&(r=e[i],!(s&&r*n>=t||!s&&o<=(e[i]+(e[i+1]||e[i]))/2));i++);return m(r*n,-Math.round(Math.log(.001)/Math.LN10))},objectEach:v,offset:function(t){const e=_.documentElement;return t=t.parentElement||t.parentNode?t.getBoundingClientRect():{top:0,left:0,width:0,height:0},{top:t.top+(T.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(T.pageXOffset||e.scrollLeft)-(e.clientLeft||0),width:t.width,height:t.height}},pad:function(t,e,n){return Array((e||2)+1-String(t).replace("-","").length).join(n||"0")+t},pick:f,pInt:i,pushUnique:function(t,e){return 0>t.indexOf(e)&&!!t.push(e)},relativeLength:function(t,e,n){return/%$/.test(t)?e*parseFloat(t)/100+(n||0):parseFloat(t)},removeEvent:b,splat:function(t){return r(t)?t:[t]},stableSort:function(t,e){const n=t.length;let i,s;for(s=0;s<n;s++)t[s].safeI=s;for(t.sort((function(t,n){return i=e(t,n),0===i?t.safeI-n.safeI:i})),s=0;s<n;s++)delete t[s].safeI},syncTimeout:function(t,e,n){return 0<e?setTimeout(t,e,n):(t.call(0,n),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:k,useSerialIds:function(t){return I=f(t,I)},wrap:function(t,e,n){const i=t[e];t[e]=function(){const t=arguments,e=this;return n.apply(this,[function(){return i.apply(e,arguments.length?arguments:t)}].concat([].slice.call(arguments)))}}},S})),e(n,"Core/Chart/ChartDefaults.js",[],(function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},reflow:!0,type:"line",zoomBySingleTouch:!1,zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}})),e(n,"Core/Color/Color.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e){const{isNumber:n,merge:i,pInt:s}=e;class r{static parse(t){return t?new r(t):r.None}constructor(e){this.rgba=[NaN,NaN,NaN,NaN],this.input=e;const n=t.Color;if(n&&n!==r)return new n(e);this.init(e)}init(t){let e,n;if("object"===typeof t&&"undefined"!==typeof t.stops)this.stops=t.stops.map((t=>new r(t[1])));else if("string"===typeof t){if(this.input=t=r.names[t.toLowerCase()]||t,"#"===t.charAt(0)){var i=t.length,s=parseInt(t.substr(1),16);7===i?e=[(16711680&s)>>16,(65280&s)>>8,255&s,1]:4===i&&(e=[(3840&s)>>4|(3840&s)>>8,(240&s)>>4|240&s,(15&s)<<4|15&s,1])}if(!e)for(s=r.parsers.length;s--&&!e;)n=r.parsers[s],(i=n.regex.exec(t))&&(e=n.parse(i))}e&&(this.rgba=e)}get(t){const e=this.input,s=this.rgba;if("object"===typeof e&&"undefined"!==typeof this.stops){const n=i(e);return n.stops=[].slice.call(n.stops),this.stops.forEach(((e,i)=>{n.stops[i]=[n.stops[i][0],e.get(t)]})),n}return s&&n(s[0])?"rgb"===t||!t&&1===s[3]?"rgb("+s[0]+","+s[1]+","+s[2]+")":"a"===t?`${s[3]}`:"rgba("+s.join(",")+")":e}brighten(t){const e=this.rgba;if(this.stops)this.stops.forEach((function(e){e.brighten(t)}));else if(n(t)&&0!==t)for(let n=0;3>n;n++)e[n]+=s(255*t),0>e[n]&&(e[n]=0),255<e[n]&&(e[n]=255);return this}setOpacity(t){return this.rgba[3]=t,this}tweenTo(t,e){const i=this.rgba,s=t.rgba;return n(i[0])&&n(s[0])?(t=1!==s[3]||1!==i[3],(t?"rgba(":"rgb(")+Math.round(s[0]+(i[0]-s[0])*(1-e))+","+Math.round(s[1]+(i[1]-s[1])*(1-e))+","+Math.round(s[2]+(i[2]-s[2])*(1-e))+(t?","+(s[3]+(i[3]-s[3])*(1-e)):"")+")"):t.input||"none"}}return r.names={white:"#ffffff",black:"#000000"},r.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[s(t[1]),s(t[2]),s(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[s(t[1]),s(t[2]),s(t[3]),1]}}],r.None=new r(""),r})),e(n,"Core/Color/Palettes.js",[],(function(){return{colors:"#2caffe #544fc5 #00e272 #fe6a35 #6b8abc #d568fb #2ee0ca #fa4b42 #feb56a #91e8e1".split(" ")}})),e(n,"Core/Time.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e){const{win:n}=t,{defined:i,error:s,extend:r,isObject:o,merge:a,objectEach:c,pad:l,pick:h,splat:u,timeUnits:d}=e,f=t.isSafari&&n.Intl&&n.Intl.DateTimeFormat.prototype.formatRange,p=t.isSafari&&n.Intl&&!n.Intl.DateTimeFormat.prototype.formatRange;class g{constructor(t){this.options={},this.variableTimezone=this.useUTC=!1,this.Date=n.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(t)}get(t,e){if(this.variableTimezone||this.timezoneOffset){const n=e.getTime(),i=n-this.getTimezoneOffset(e);return e.setTime(i),t=e["getUTC"+t](),e.setTime(n),t}return this.useUTC?e["getUTC"+t]():e["get"+t]()}set(t,e,n){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===t||"Seconds"===t||"Minutes"===t&&0===this.getTimezoneOffset(e)%36e5)return e["setUTC"+t](n);var i=this.getTimezoneOffset(e);return i=e.getTime()-i,e.setTime(i),e["setUTC"+t](n),t=this.getTimezoneOffset(e),i=e.getTime()+t,e.setTime(i)}return this.useUTC||f&&"FullYear"===t?e["setUTC"+t](n):e["set"+t](n)}update(t={}){const e=h(t.useUTC,!0);this.options=t=a(!0,this.options,t),this.Date=t.Date||n.Date||Date,this.timezoneOffset=(this.useUTC=e)&&t.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=e&&!(!t.getTimezoneOffset&&!t.timezone)}makeTime(t,e,n,i,s,r){let o,a,c;return this.useUTC?(o=this.Date.UTC.apply(0,arguments),a=this.getTimezoneOffset(o),o+=a,c=this.getTimezoneOffset(o),a!==c?o+=c-a:a-36e5!==this.getTimezoneOffset(o-36e5)||p||(o-=36e5)):o=new this.Date(t,e,h(n,1),h(i,0),h(s,0),h(r,0)).getTime(),o}timezoneOffsetFunction(){const t=this,e=this.options,i=e.getTimezoneOffset,r=e.moment||n.moment;if(!this.useUTC)return function(t){return 6e4*new Date(t.toString()).getTimezoneOffset()};if(e.timezone){if(r)return function(t){return 6e4*-r.tz(t,e.timezone).utcOffset()};s(25)}return this.useUTC&&i?function(t){return 6e4*i(t.valueOf())}:function(){return 6e4*(t.timezoneOffset||0)}}dateFormat(e,n,s){if(!i(n)||isNaN(n))return t.defaultOptions.lang&&t.defaultOptions.lang.invalidDate||"";e=h(e,"%Y-%m-%d %H:%M:%S");const o=this;var a=new this.Date(n);const u=this.get("Hours",a),d=this.get("Day",a),f=this.get("Date",a),p=this.get("Month",a),g=this.get("FullYear",a),m=t.defaultOptions.lang,y=m&&m.weekdays,v=m&&m.shortWeekdays;return a=r({a:v?v[d]:y[d].substr(0,3),A:y[d],d:l(f),e:l(f,2," "),w:d,b:m.shortMonths[p],B:m.months[p],m:l(p+1),o:p+1,y:g.toString().substr(2,2),Y:g,H:l(u),k:u,I:l(u%12||12),l:u%12||12,M:l(this.get("Minutes",a)),p:12>u?"AM":"PM",P:12>u?"am":"pm",S:l(a.getSeconds()),L:l(Math.floor(n%1e3),3)},t.dateFormats),c(a,(function(t,i){for(;-1!==e.indexOf("%"+i);)e=e.replace("%"+i,"function"===typeof t?t.call(o,n):t)})),s?e.substr(0,1).toUpperCase()+e.substr(1):e}resolveDTLFormat(t){return o(t,!0)?t:(t=u(t),{main:t[0],from:t[1],to:t[2]})}getTimeTicks(t,e,n,s){const o=this,a=[],c={};var l=new o.Date(e);const u=t.unitRange,f=t.count||1;let p;if(s=h(s,1),i(e)){if(o.set("Milliseconds",l,u>=d.second?0:f*Math.floor(o.get("Milliseconds",l)/f)),u>=d.second&&o.set("Seconds",l,u>=d.minute?0:f*Math.floor(o.get("Seconds",l)/f)),u>=d.minute&&o.set("Minutes",l,u>=d.hour?0:f*Math.floor(o.get("Minutes",l)/f)),u>=d.hour&&o.set("Hours",l,u>=d.day?0:f*Math.floor(o.get("Hours",l)/f)),u>=d.day&&o.set("Date",l,u>=d.month?1:Math.max(1,f*Math.floor(o.get("Date",l)/f))),u>=d.month){o.set("Month",l,u>=d.year?0:f*Math.floor(o.get("Month",l)/f));var g=o.get("FullYear",l)}u>=d.year&&o.set("FullYear",l,g-g%f),u===d.week&&(g=o.get("Day",l),o.set("Date",l,o.get("Date",l)-g+s+(g<s?-7:0))),g=o.get("FullYear",l),s=o.get("Month",l);const t=o.get("Date",l),r=o.get("Hours",l);for(e=l.getTime(),!o.variableTimezone&&o.useUTC||!i(n)||(p=n-e>4*d.month||o.getTimezoneOffset(e)!==o.getTimezoneOffset(n)),e=l.getTime(),l=1;e<n;)a.push(e),e=u===d.year?o.makeTime(g+l*f,0):u===d.month?o.makeTime(g,s+l*f):!p||u!==d.day&&u!==d.week?p&&u===d.hour&&1<f?o.makeTime(g,s,t,r+l*f):e+u*f:o.makeTime(g,s,t+l*f*(u===d.day?1:7)),l++;a.push(e),u<=d.hour&&1e4>a.length&&a.forEach((function(t){0===t%18e5&&"000000000"===o.dateFormat("%H%M%S%L",t)&&(c[t]="day")}))}return a.info=r(t,{higherRanks:c,totalRange:u*f}),a}getDateFormat(t,e,n,i){const s=this.dateFormat("%m-%d %H:%M:%S.%L",e),r={millisecond:15,second:12,minute:9,hour:6,day:3};let o,a="millisecond";for(o in d){if(t===d.week&&+this.dateFormat("%w",e)===n&&"00:00:00.000"===s.substr(6)){o="week";break}if(d[o]>t){o=a;break}if(r[o]&&s.substr(r[o])!=="01-01 00:00:00.000".substr(r[o]))break;"week"!==o&&(a=o)}return this.resolveDTLFormat(i[o]).main}}return g})),e(n,"Core/Defaults.js",[n["Core/Chart/ChartDefaults.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Color/Palettes.js"],n["Core/Time.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r){const{isTouchDevice:o,svg:a}=n,{merge:c}=r,l={colors:i.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:t,title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:a,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %e %b, %H:%M:%S.%L",second:"%A, %e %b, %H:%M:%S",minute:"%A, %e %b, %H:%M",hour:"%A, %e %b, %H:%M",day:"%A, %e %b %Y",week:"Week from %A, %e %b %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:o?25:10,headerFormat:'<span style="font-size: 0.8em">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}"></span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}};l.chart.styledMode=!1;const h=new s(l.time);return t={defaultOptions:l,defaultTime:h,getOptions:function(){return l},setOptions:function(t){return c(!0,l,t),(t.time||t.global)&&(n.time?n.time.update(c(l.global,l.time,t.global,t.time)):n.time=h),l}},t})),e(n,"Core/Animation/Fx.js",[n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n){const{parse:i}=t,{win:s}=e,{isNumber:r,objectEach:o}=n;class a{constructor(t,e,n){this.pos=NaN,this.options=e,this.elem=t,this.prop=n}dSetter(){var t=this.paths;const e=t&&t[0];t=t&&t[1];const n=this.now||0;let i=[];if(1!==n&&e&&t)if(e.length===t.length&&1>n)for(let s=0;s<t.length;s++){const o=e[s],a=t[s],c=[];for(let t=0;t<a.length;t++){const e=o[t],i=a[t];r(e)&&r(i)&&("A"!==a[0]||4!==t&&5!==t)?c[t]=e+n*(i-e):c[t]=i}i.push(c)}else i=t;else i=this.toD||[];this.elem.attr("d",i,void 0,!0)}update(){const t=this.elem,e=this.prop,n=this.now,i=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,n,null,!0):t.style[e]=n+this.unit,i&&i.call(t,n,this)}run(t,e,n){const i=this,r=i.options,o=function(t){return!o.stopped&&i.step(t)},c=s.requestAnimationFrame||function(t){setTimeout(t,13)},l=function(){for(let t=0;t<a.timers.length;t++)a.timers[t]()||a.timers.splice(t--,1);a.timers.length&&c(l)};t!==e||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=t,this.end=e,this.unit=n,this.now=this.start,this.pos=0,o.elem=this.elem,o.prop=this.prop,o()&&1===a.timers.push(o)&&c(l)):(delete r.curAnim[this.prop],r.complete&&0===Object.keys(r.curAnim).length&&r.complete.call(this.elem))}step(t){const e=+new Date,n=this.options,i=this.elem,s=n.complete,r=n.duration,a=n.curAnim;let c;return i.attr&&!i.element?t=!1:t||e>=r+this.startTime?(this.now=this.end,this.pos=1,this.update(),c=a[this.prop]=!0,o(a,(function(t){!0!==t&&(c=!1)})),c&&s&&s.call(i),t=!1):(this.pos=n.easing((e-this.startTime)/r),this.now=this.start+(this.end-this.start)*this.pos,this.update(),t=!0),t}initPath(t,e,n){function i(t,e){for(;t.length<u;){var n=t[0];const i=e[u-t.length];i&&"M"===n[0]&&(t[0]="C"===i[0]?["C",n[1],n[2],n[1],n[2],n[1],n[2]]:["L",n[1],n[2]]),t.unshift(n),c&&(n=t.pop(),t.push(t[t.length-1],n))}}function s(t,e){for(;t.length<u;)if(e=t[Math.floor(t.length/l)-1].slice(),"C"===e[0]&&(e[1]=e[5],e[2]=e[6]),c){const n=t[Math.floor(t.length/l)].slice();t.splice(t.length/2,0,e,n)}else t.push(e)}const o=t.startX,a=t.endX;n=n.slice();const c=t.isArea,l=c?2:1;let h,u,d;if(e=e&&e.slice(),!e)return[n,n];if(o&&a&&a.length){for(t=0;t<o.length;t++){if(o[t]===a[0]){h=t;break}if(o[0]===a[a.length-o.length+t]){h=t,d=!0;break}if(o[o.length-1]===a[a.length-o.length+t]){h=o.length-t;break}}"undefined"===typeof h&&(e=[])}return e.length&&r(h)&&(u=n.length+h*l,d?(i(e,n),s(n,e)):(i(n,e),s(e,n))),[e,n]}fillSetter(){a.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,i(this.start).tweenTo(i(this.end),this.pos),void 0,!0)}}return a.timers=[],a})),e(n,"Core/Animation/AnimationUtilities.js",[n["Core/Animation/Fx.js"],n["Core/Utilities.js"]],(function(t,e){function n(t){return c(t)?l({duration:500,defer:0},t):{duration:t?500:0,defer:0}}function i(e,n){let i=t.timers.length;for(;i--;)t.timers[i].elem!==e||n&&n!==t.timers[i].prop||(t.timers[i].stopped=!0)}const{defined:s,getStyle:r,isArray:o,isNumber:a,isObject:c,merge:l,objectEach:h,pick:u}=e;return{animate:function(e,n,s){let u,d,f,p,g="";c(s)||(p=arguments,s={duration:p[2],easing:p[3],complete:p[4]}),a(s.duration)||(s.duration=400),s.easing="function"===typeof s.easing?s.easing:Math[s.easing]||Math.easeInOutSine,s.curAnim=l(n),h(n,(function(a,c){i(e,c),f=new t(e,s,c),d=void 0,"d"===c&&o(n.d)?(f.paths=f.initPath(e,e.pathArray,n.d),f.toD=n.d,u=0,d=1):e.attr?u=e.attr(c):(u=parseFloat(r(e,c))||0,"opacity"!==c&&(g="px")),d||(d=a),"string"===typeof d&&d.match("px")&&(d=d.replace(/px/g,"")),f.run(u,d,g)}))},animObject:n,getDeferredAnimation:function(t,e,i){const r=n(e);let o=0,a=0;return(i?[i]:t.series).forEach((t=>{t=n(t.options.animation),o=e&&s(e.defer)?r.defer:Math.max(o,t.duration+t.defer),a=Math.min(r.duration,t.duration)})),t.renderer.forExport&&(o=0),{defer:Math.max(0,o-a),duration:Math.min(o,a)}},setAnimation:function(t,e){e.renderer.globalAnimation=u(t,e.options.chart.animation,!0)},stop:i}})),e(n,"Core/Renderer/HTML/AST.js",[n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e){const{SVG_NS:n,win:i}=t,{attr:s,createElement:r,css:o,error:a,isFunction:c,isString:l,objectEach:h,splat:u}=e;({trustedTypes:e}=i);const d=e&&c(e.createPolicy)&&e.createPolicy("highcharts",{createHTML:t=>t});e=d?d.createHTML(""):"";try{var f=!!(new DOMParser).parseFromString(e,"text/html")}catch(m){f=!1}const p=f;class g{static filterUserAttributes(t){return h(t,((e,n)=>{let i=!0;-1===g.allowedAttributes.indexOf(n)&&(i=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(n)&&(i=l(e)&&g.allowedReferences.some((t=>0===e.indexOf(t)))),i||(a(33,!1,void 0,{"Invalid attribute in config":`${n}`}),delete t[n]),l(e)&&t[n]&&(t[n]=e.replace(/</g,"&lt;"))})),t}static parseStyle(t){return t.split(";").reduce(((t,e)=>{e=e.split(":").map((t=>t.trim()));const n=e.shift();return n&&e.length&&(t[n.replace(/-([a-z])/g,(t=>t[1].toUpperCase()))]=e.join(":")),t}),{})}static setElementHTML(t,e){t.innerHTML=g.emptyHTML,e&&new g(e).addToDOM(t)}constructor(t){this.nodes="string"===typeof t?this.parseMarkup(t):t}addToDOM(e){function i(e,r){let c;return u(e).forEach((function(e){var l=e.tagName;const u=e.textContent?t.doc.createTextNode(e.textContent):void 0,d=g.bypassHTMLFiltering;let f;if(l)if("#text"===l)f=u;else if(-1!==g.allowedTags.indexOf(l)||d){l=t.doc.createElementNS("svg"===l?n:r.namespaceURI||n,l);const a=e.attributes||{};h(e,(function(t,e){"tagName"!==e&&"attributes"!==e&&"children"!==e&&"style"!==e&&"textContent"!==e&&(a[e]=t)})),s(l,d?a:g.filterUserAttributes(a)),e.style&&o(l,e.style),u&&l.appendChild(u),i(e.children||[],l),f=l}else a(33,!1,void 0,{"Invalid tagName in config":l});f&&r.appendChild(f),c=f})),c}return i(this.nodes,e)}parseMarkup(t){const e=[];if(t=t.trim().replace(/ style=(["'])/g," data-style=$1"),p)t=(new DOMParser).parseFromString(d?d.createHTML(t):t,"text/html");else{const e=r("div");e.innerHTML=t,t={body:e}}const n=(t,e)=>{var i=t.nodeName.toLowerCase();const s={tagName:i};if("#text"===i&&(s.textContent=t.textContent||""),i=t.attributes){const t={};[].forEach.call(i,(e=>{"data-style"===e.name?s.style=g.parseStyle(e.value):t[e.name]=e.value})),s.attributes=t}if(t.childNodes.length){const e=[];[].forEach.call(t.childNodes,(t=>{n(t,e)})),e.length&&(s.children=e)}e.push(s)};return[].forEach.call(t.body.childNodes,(t=>n(t,e))),e}}return g.allowedAttributes="alt aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill flood-color flood-opacity height href id in markerHeight markerWidth offset opacity orient padding paddingLeft paddingRight patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style tableValues result rowspan summary target tabindex text-align text-anchor textAnchor textLength title type valign width x x1 x2 xlink:href y y1 y2 zIndex".split(" "),g.allowedReferences="https:// http:// mailto: / ../ ./ #".split(" "),g.allowedTags="a abbr b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feDropShadow feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text textPath thead title tbody tspan td th tr u ul #text".split(" "),g.emptyHTML=e,g.bypassHTMLFiltering=!1,g})),e(n,"Core/FormatUtilities.js",[n["Core/Defaults.js"],n["Core/Utilities.js"]],(function(t,e){function n(t,e,n,s){t=+t||0,e=+e;const r=i.lang;var l=(t.toString().split(".")[1]||"").split("e")[0].length;const h=t.toString().split("e"),u=e;if(-1===e)e=Math.min(l,20);else if(o(e)){if(e&&h[1]&&0>h[1]){var d=e+ +h[1];0<=d?(h[0]=(+h[0]).toExponential(d).split("e")[0],e=d):(h[0]=h[0].split(".")[0]||0,t=20>e?(h[0]*Math.pow(10,h[1])).toFixed(e):0,h[1]=0)}}else e=2;d=(Math.abs(h[1]?h[0]:t)+Math.pow(10,-Math.max(e,l)-1)).toFixed(e),l=String(c(d));const f=3<l.length?l.length%3:0;return n=a(n,r.decimalPoint),s=a(s,r.thousandsSep),t=(0>t?"-":"")+(f?l.substr(0,f)+s:""),t=0>+h[1]&&!u?"0":t+l.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+s),e&&(t+=n+d.slice(-e)),h[1]&&0!==+t&&(t+="e"+h[1]),t}const{defaultOptions:i,defaultTime:s}=t,{getNestedProperty:r,isNumber:o,pick:a,pInt:c}=e;return{dateFormat:function(t,e,n){return s.dateFormat(t,e,n)},format:function(t,e,o){var a="{";let c,l=!1;const h=/f$/,u=/\.([0-9])/,d=i.lang,f=o&&o.time||s;o=o&&o.numberFormatter||n;const p=[];for(;t;){if(c=t.indexOf(a),-1===c)break;var g=t.slice(0,c);if(l){if(g=g.split(":"),a=r(g.shift()||"",e),g.length&&"number"===typeof a)if(g=g.join(":"),h.test(g)){const t=parseInt((g.match(u)||["","-1"])[1],10);null!==a&&(a=o(a,t,d.decimalPoint,-1<g.indexOf(",")?d.thousandsSep:""))}else a=f.dateFormat(g,a);p.push(a)}else p.push(g);t=t.slice(c+1),a=(l=!l)?"}":"{"}return p.push(t),p.join("")},numberFormat:n}})),e(n,"Core/Renderer/RendererUtilities.js",[n["Core/Utilities.js"]],(function(t){const{clamp:e,pick:n,stableSort:i}=t;var s;return function(t){function s(t,r,o){const a=t;var c=a.reducedLen||r,l=(t,e)=>(e.rank||0)-(t.rank||0);const h=(t,e)=>t.target-e.target;let u,d=!0,f=[],p=0;for(u=t.length;u--;)p+=t[u].size;if(p>c){for(i(t,l),p=u=0;p<=c;)p+=t[u].size,u++;f=t.splice(u-1,t.length)}for(i(t,h),t=t.map((t=>({size:t.size,targets:[t.target],align:n(t.align,.5)})));d;){for(u=t.length;u--;)c=t[u],l=(Math.min.apply(0,c.targets)+Math.max.apply(0,c.targets))/2,c.pos=e(l-c.size*c.align,0,r-c.size);for(u=t.length,d=!1;u--;)0<u&&t[u-1].pos+t[u-1].size>t[u].pos&&(t[u-1].size+=t[u].size,t[u-1].targets=t[u-1].targets.concat(t[u].targets),t[u-1].align=.5,t[u-1].pos+t[u-1].size>r&&(t[u-1].pos=r-t[u-1].size),t.splice(u,1),d=!0)}return a.push.apply(a,f),u=0,t.some((t=>{let e=0;return(t.targets||[]).some((()=>(a[u].pos=t.pos+e,"undefined"!==typeof o&&Math.abs(a[u].pos-a[u].target)>o?(a.slice(0,u+1).forEach((t=>delete t.pos)),a.reducedLen=(a.reducedLen||r)-.1*r,a.reducedLen>.1*r&&s(a,r,o),!0):(e+=a[u].size,u++,!1))))})),i(a,h),a}t.distribute=s}(s||(s={})),s})),e(n,"Core/Renderer/SVG/SVGElement.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n,i){const{animate:s,animObject:r,stop:o}=t,{deg2rad:a,doc:c,svg:l,SVG_NS:h,win:u}=n,{addEvent:d,attr:f,createElement:p,css:g,defined:m,erase:y,extend:v,fireEvent:b,isArray:w,isFunction:x,isObject:_,isString:T,merge:S,objectEach:I,pick:k,pInt:E,syncTimeout:C,uniqueKey:A}=i;class O{constructor(){this.element=void 0,this.onEvents={},this.opacity=1,this.renderer=void 0,this.SVG_NS=h}_defaultGetter(t){return t=k(this[t+"Value"],this[t],this.element?this.element.getAttribute(t):null,0),/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t}_defaultSetter(t,e,n){n.setAttribute(e,t)}add(t){const e=this.renderer,n=this.element;let i;return t&&(this.parentGroup=t),"undefined"!==typeof this.textStr&&"text"===this.element.nodeName&&e.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(i=this.zIndexSetter()),i||(t?t.element:e.box).appendChild(n),this.onAdd&&this.onAdd(),this}addClass(t,e){const n=e?"":this.attr("class")||"";return t=(t||"").split(/ /g).reduce((function(t,e){return-1===n.indexOf(e)&&t.push(e),t}),n?[n]:[]).join(" "),t!==n&&this.attr("class",t),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(t,e,n){const i={};var s,r=this.renderer,o=r.alignedObjects;let a,c;t?(this.alignOptions=t,this.alignByTranslate=e,(!n||T(n))&&(this.alignTo=s=n||"renderer",y(o,this),o.push(this),n=void 0)):(t=this.alignOptions,e=this.alignByTranslate,s=this.alignTo),n=k(n,r[s],"scrollablePlotBox"===s?r.plotBox:void 0,r),s=t.align;const l=t.verticalAlign;return r=(n.x||0)+(t.x||0),o=(n.y||0)+(t.y||0),"right"===s?a=1:"center"===s&&(a=2),a&&(r+=(n.width-(t.width||0))/a),i[e?"translateX":"x"]=Math.round(r),"bottom"===l?c=1:"middle"===l&&(c=2),c&&(o+=(n.height-(t.height||0))/c),i[e?"translateY":"y"]=Math.round(o),this[this.placed?"animate":"attr"](i),this.placed=!0,this.alignAttr=i,this}alignSetter(t){const e={left:"start",center:"middle",right:"end"};e[t]&&(this.alignValue=t,this.element.setAttribute("text-anchor",e[t]))}animate(t,e,n){const i=r(k(e,this.renderer.globalAnimation,!0));return e=i.defer,c.hidden&&(i.duration=0),0!==i.duration?(n&&(i.complete=n),C((()=>{this.element&&s(this,t,i)}),e)):(this.attr(t,void 0,n||i.complete),I(t,(function(t,e){i.step&&i.step.call(this,t,{prop:e,pos:1,elem:this})}),this)),this}applyTextOutline(t){const e=this.element;-1!==t.indexOf("contrast")&&(t=t.replace(/contrast/g,this.renderer.getContrast(e.style.fill)));var i=t.split(" ");if(t=i[i.length-1],(i=i[0])&&"none"!==i&&n.svg){this.fakeTS=!0,i=i.replace(/(^[\d\.]+)(.*?)$/g,(function(t,e,n){return 2*Number(e)+n})),this.removeTextOutline();const n=c.createElementNS(h,"tspan");f(n,{class:"highcharts-text-outline",fill:t,stroke:t,"stroke-width":i,"stroke-linejoin":"round"}),t=e.querySelector("textPath")||e,[].forEach.call(t.childNodes,(t=>{const e=t.cloneNode(!0);e.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((t=>e.removeAttribute(t))),n.appendChild(e)}));let s=0;[].forEach.call(t.querySelectorAll("text tspan"),(t=>{s+=Number(t.getAttribute("dy"))})),i=c.createElementNS(h,"tspan"),i.textContent="",f(i,{x:Number(e.getAttribute("x")),dy:-s}),n.appendChild(i),t.insertBefore(n,t.firstChild)}}attr(t,e,n,i){const s=this.element,r=O.symbolCustomAttribs;let a,c,l,h,u=this;return"string"===typeof t&&"undefined"!==typeof e&&(a=t,t={},t[a]=e),"string"===typeof t?u=(this[t+"Getter"]||this._defaultGetter).call(this,t,s):(I(t,(function(e,n){l=!1,i||o(this,n),this.symbolName&&-1!==r.indexOf(n)&&(c||(this.symbolAttr(t),c=!0),l=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),l||(h=this[n+"Setter"]||this._defaultSetter,h.call(this,e,n,s))}),this),this.afterSetters()),n&&n.call(this),u}clip(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":"none")}crisp(t,e){e=e||t.strokeWidth||0;const n=Math.round(e)%2/2;return t.x=Math.floor(t.x||this.x||0)+n,t.y=Math.floor(t.y||this.y||0)+n,t.width=Math.floor((t.width||this.width||0)-2*n),t.height=Math.floor((t.height||this.height||0)-2*n),m(t.strokeWidth)&&(t.strokeWidth=e),t}complexColor(t,n,i){const s=this.renderer;let r,o,a,c,l,h,u,d,f,p,g,y=[];b(this.renderer,"complexColor",{args:arguments},(function(){if(t.radialGradient?o="radialGradient":t.linearGradient&&(o="linearGradient"),o){if(a=t[o],l=s.gradients,h=t.stops,f=i.radialReference,w(a)&&(t[o]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&f&&!m(a.gradientUnits)&&(c=a,a=S(a,s.getRadialAttr(f,c),{gradientUnits:"userSpaceOnUse"})),I(a,(function(t,e){"id"!==e&&y.push(e,t)})),I(h,(function(t){y.push(t)})),y=y.join(","),l[y])p=l[y].attr("id");else{a.id=p=A();const t=l[y]=s.createElement(o).attr(a).add(s.defs);t.radAttr=c,t.stops=[],h.forEach((function(n){0===n[1].indexOf("rgba")?(r=e.parse(n[1]),u=r.get("rgb"),d=r.get("a")):(u=n[1],d=1),n=s.createElement("stop").attr({offset:n[0],"stop-color":u,"stop-opacity":d}).add(t),t.stops.push(n)}))}g="url("+s.url+"#"+p+")",i.setAttribute(n,g),i.gradient=y,t.toString=function(){return g}}}))}css(t){const e=this.styles,n={},i=this.element;let s,r=!e;if(t.color&&(t.fill=t.color),e&&I(t,(function(t,i){e&&e[i]!==t&&(n[i]=t,r=!0)})),r){e&&(t=v(e,n)),null===t.width||"auto"===t.width?delete this.textWidth:"text"===i.nodeName.toLowerCase()&&t.width&&(s=this.textWidth=E(t.width)),this.styles=t,s&&!l&&this.renderer.forExport&&delete t.width;const r=S(t);i.namespaceURI===this.SVG_NS&&["textOutline","textOverflow","width"].forEach((t=>r&&delete r[t])),g(i,r)}return this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),t.textOutline&&this.applyTextOutline(t.textOutline)),this}dashstyleSetter(t){let e=this["stroke-width"];if("inherit"===e&&(e=1),t=t&&t.toLowerCase()){const n=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(t=n.length;t--;)n[t]=""+E(n[t])*k(e,NaN);t=n.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}}destroy(){const t=this;var e=t.element||{};const n=t.renderer;var i=e.ownerSVGElement;let s="SPAN"===e.nodeName&&t.parentGroup||void 0;if(e.onclick=e.onmouseout=e.onmouseover=e.onmousemove=e.point=null,o(t),t.clipPath&&i){const e=t.clipPath;[].forEach.call(i.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(t){-1<t.getAttribute("clip-path").indexOf(e.element.id)&&t.removeAttribute("clip-path")})),t.clipPath=e.destroy()}if(t.stops){for(i=0;i<t.stops.length;i++)t.stops[i].destroy();t.stops.length=0,t.stops=void 0}for(t.safeRemoveChild(e);s&&s.div&&0===s.div.childNodes.length;)e=s.parentGroup,t.safeRemoveChild(s.div),delete s.div,s=e;t.alignTo&&y(n.alignedObjects,t),I(t,(function(e,n){t[n]&&t[n].parentGroup===t&&t[n].destroy&&t[n].destroy(),delete t[n]}))}dSetter(t,e,n){w(t)&&("string"===typeof t[0]&&(t=this.renderer.pathToSegments(t)),this.pathArray=t,t=t.reduce(((t,e,n)=>e&&e.join?(n?t+" ":"")+e.join(" "):(e||"").toString()),"")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),this[e]!==t&&(n.setAttribute(e,t),this[e]=t)}fadeOut(t){const e=this;e.animate({opacity:0},{duration:k(t,150),complete:function(){e.hide()}})}fillSetter(t,e,n){"string"===typeof t?n.setAttribute(e,t):t&&this.complexColor(t,e,n)}getBBox(t,e){const{alignValue:n,element:i,renderer:s,styles:r,textStr:o}=this,{cache:c,cacheKeys:l}=s;var h=i.namespaceURI===this.SVG_NS;e=k(e,this.rotation,0);var u=s.styledMode?i&&O.prototype.getStyle.call(i,"font-size"):r&&r.fontSize;let d,f;if(m(o)&&(f=o.toString(),-1===f.indexOf("<")&&(f=f.replace(/[0-9]/g,"0")),f+=["",s.rootFontSize,u,e,this.textWidth,n,r&&r.textOverflow,r&&r.fontWeight].join()),f&&!t&&(d=c[f]),!d){if(h||s.forExport){try{var p=this.fakeTS&&function(t){const e=i.querySelector(".highcharts-text-outline");e&&g(e,{display:t})};x(p)&&p("none"),d=i.getBBox?v({},i.getBBox()):{width:i.offsetWidth,height:i.offsetHeight,x:0,y:0},x(p)&&p("")}catch(T){}(!d||0>d.width)&&(d={x:0,y:0,width:0,height:0})}else d=this.htmlGetBBox();if(p=d.width,t=d.height,h&&(d.height=t={"11px,17":14,"13px,20":16}[`${u||""},${Math.round(t)}`]||t),e){h=Number(i.getAttribute("y")||0)-d.y,u={right:1,center:.5}[n||0]||0;var y=e*a,b=(e-90)*a,w=p*Math.cos(y);e=p*Math.sin(y);var _=Math.cos(b);y=Math.sin(b),p=d.x+u*(p-w)+h*_,b=p+w,_=b-t*_,w=_-w,h=d.y+h-u*e+h*y,u=h+e,t=u-t*y,e=t-e,d.x=Math.min(p,b,_,w),d.y=Math.min(h,u,t,e),d.width=Math.max(p,b,_,w)-d.x,d.height=Math.max(h,u,t,e)-d.y}}if(f&&(""===o||0<d.height)){for(;250<l.length;)delete c[l.shift()];c[f]||l.push(f),c[f]=d}return d}getStyle(t){return u.getComputedStyle(this.element||this,"").getPropertyValue(t)}hasClass(t){return-1!==(""+this.attr("class")).split(" ").indexOf(t)}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}init(t,e){this.element="span"===e?p(e):c.createElementNS(this.SVG_NS,e),this.renderer=t,b(this,"afterInit")}on(t,e){const{onEvents:n}=this;return n[t]&&n[t](),n[t]=d(this.element,t,e),this}opacitySetter(t,e,n){this.opacity=t=Number(Number(t).toFixed(3)),n.setAttribute(e,t)}removeClass(t){return this.attr("class",(""+this.attr("class")).replace(T(t)?new RegExp(`(^| )${t}( |$)`):t," ").replace(/ +/g," ").trim())}removeTextOutline(){const t=this.element.querySelector("tspan.highcharts-text-outline");t&&this.safeRemoveChild(t)}safeRemoveChild(t){const e=t.parentNode;e&&e.removeChild(t)}setRadialReference(t){const e=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this}setTextPath(t,e){e=S(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},e);const n=this.renderer.url,i=this.text||this,s=i.textPath,{attributes:r,enabled:o}=e;return t=t||s&&s.path,s&&s.undo(),t&&o?(e=d(i,"afterModifyTree",(e=>{if(t&&o){let o=t.attr("id");o||t.attr("id",o=A());var s={x:0,y:0};m(r.dx)&&(s.dx=r.dx,delete r.dx),m(r.dy)&&(s.dy=r.dy,delete r.dy),i.attr(s),this.attr({transform:""}),this.box&&(this.box=this.box.destroy()),s=e.nodes.slice(0),e.nodes.length=0,e.nodes[0]={tagName:"textPath",attributes:v(r,{"text-anchor":r.textAnchor,href:`${n}#${o}`}),children:s}}})),i.textPath={path:t,undo:e}):(i.attr({dx:0,dy:0}),delete i.textPath),this.added&&(i.textCache="",this.renderer.buildText(i)),this}shadow(t){var e;const{renderer:n}=this,i=S(90===(null===(e=this.parentGroup)||void 0===e?void 0:e.rotation)?{offsetX:-1,offsetY:-1}:{},_(t)?t:{});return e=n.shadowDefinition(i),this.attr({filter:t?`url(${n.url}#${e})`:"none"})}show(t=!0){return this.attr({visibility:t?"inherit":"visible"})}["stroke-widthSetter"](t,e,n){this[e]=t,n.setAttribute(e,t)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;const t=this.getStyle("stroke-width");let e,n=0;return t.indexOf("px")===t.length-2?n=E(t):""!==t&&(e=c.createElementNS(h,"rect"),f(e,{width:t,"stroke-width":0}),this.element.parentNode.appendChild(e),n=e.getBBox().width,e.parentNode.removeChild(e)),n}symbolAttr(t){const e=this;O.symbolCustomAttribs.forEach((function(n){e[n]=k(t[n],e[n])})),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})}textSetter(t){t!==this.textStr&&(delete this.textPxLength,this.textStr=t,this.added&&this.renderer.buildText(this))}titleSetter(t){const e=this.element,n=e.getElementsByTagName("title")[0]||c.createElementNS(this.SVG_NS,"title");e.insertBefore?e.insertBefore(n,e.firstChild):e.appendChild(n),n.textContent=String(k(t,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){const t=this.element;return t.parentNode.appendChild(t),this}translate(t,e){return this.attr({translateX:t,translateY:e})}updateTransform(){const{element:t,matrix:e,rotation:n=0,scaleX:i,scaleY:s,translateX:r=0,translateY:o=0}=this,a=["translate("+r+","+o+")"];m(e)&&a.push("matrix("+e.join(",")+")"),n&&a.push("rotate("+n+" "+k(this.rotationOriginX,t.getAttribute("x"),0)+" "+k(this.rotationOriginY,t.getAttribute("y")||0)+")"),(m(i)||m(s))&&a.push("scale("+k(i,1)+" "+k(s,1)+")"),a.length&&!(this.text||this).textPath&&t.setAttribute("transform",a.join(" "))}visibilitySetter(t,e,n){"inherit"===t?n.removeAttribute(e):this[e]!==t&&n.setAttribute(e,t),this[e]=t}xGetter(t){return"circle"===this.element.nodeName&&("x"===t?t="cx":"y"===t&&(t="cy")),this._defaultGetter(t)}zIndexSetter(t,e){var n=this.renderer,i=this.parentGroup;const s=(i||n).element||n.box,r=this.element;n=s===n.box;let o,a=!1;var c=this.added;let l;if(m(t)?(r.setAttribute("data-z-index",t),t=+t,this[e]===t&&(c=!1)):m(this[e])&&r.removeAttribute("data-z-index"),this[e]=t,c){for((t=this.zIndex)&&i&&(i.handleZ=!0),e=s.childNodes,l=e.length-1;0<=l&&!a;l--)i=e[l],c=i.getAttribute("data-z-index"),o=!m(c),i!==r&&(0>t&&o&&!n&&!l?(s.insertBefore(r,e[l]),a=!0):(E(c)<=t||o&&(!m(t)||0<=t))&&(s.insertBefore(r,e[l+1]),a=!0));a||(s.insertBefore(r,e[n?3:0]),a=!0)}return a}}return O.symbolCustomAttribs="anchorX anchorY clockwise end height innerR r start width x y".split(" "),O.prototype.strokeSetter=O.prototype.fillSetter,O.prototype.yGetter=O.prototype.xGetter,O.prototype.matrixSetter=O.prototype.rotationOriginXSetter=O.prototype.rotationOriginYSetter=O.prototype.rotationSetter=O.prototype.scaleXSetter=O.prototype.scaleYSetter=O.prototype.translateXSetter=O.prototype.translateYSetter=O.prototype.verticalAlignSetter=function(t,e){this[e]=t,this.doTransform=!0},O})),e(n,"Core/Renderer/RendererRegistry.js",[n["Core/Globals.js"]],(function(t){var e;return function(e){let n;e.rendererTypes={},e.getRendererType=function(t=n){return e.rendererTypes[t]||e.rendererTypes[n]},e.registerRendererType=function(i,s,r){e.rendererTypes[i]=s,n&&!r||(n=i,t.Renderer=s)}}(e||(e={})),e})),e(n,"Core/Renderer/SVG/SVGLabel.js",[n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(t,e){const{defined:n,extend:i,isNumber:s,merge:r,pick:o,removeEvent:a}=e;class c extends t{constructor(t,e,n,i,s,r,o,a,l,h){let u;super(),this.paddingRightSetter=this.paddingLeftSetter=this.paddingSetter,this.init(t,"g"),this.textStr=e,this.x=n,this.y=i,this.anchorX=r,this.anchorY=o,this.baseline=l,this.className=h,this.addClass("button"===h?"highcharts-no-tooltip":"highcharts-label"),h&&this.addClass("highcharts-"+h),this.text=t.text(void 0,0,0,a).attr({zIndex:1}),"string"===typeof s&&((u=/^url\((.*?)\)$/.test(s))||this.renderer.symbols[s])&&(this.symbolKey=s),this.bBox=c.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=t.styledMode||u,this.deferredAttr={},this.alignFactor=0}alignSetter(t){t={left:0,center:.5,right:1}[t],t!==this.alignFactor&&(this.alignFactor=t,this.bBox&&s(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(t,e){this.anchorX=t,this.boxAttr(e,Math.round(t)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(t,e){this.anchorY=t,this.boxAttr(e,t-this.ySetting)}boxAttr(t,e){this.box?this.box.attr(t,e):this.deferredAttr[t]=e}css(e){if(e){const t={};e=r(e),c.textProps.forEach((n=>{"undefined"!==typeof e[n]&&(t[n]=e[n],delete e[n])})),this.text.css(t),"fontSize"in t||"fontWeight"in t?this.updateTextPadding():("width"in t||"textOverflow"in t)&&this.updateBoxSize()}return t.prototype.css.call(this,e)}destroy(){a(this.element,"mouseenter"),a(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),t.prototype.destroy.call(this)}fillSetter(t,e){t&&(this.needsBox=!0),this.fill=t,this.boxAttr(e,t)}getBBox(){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();const t=this.padding,e=o(this.paddingLeft,t);return{width:this.width,height:this.height,x:this.bBox.x-e,y:this.bBox.y-t}}getCrispAdjust(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(t){this.heightSetting=t}onAdd(){this.text.add(this),this.attr({text:o(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&n(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(t,e){s(t)?t!==this[e]&&(this[e]=t,this.updateTextPadding()):this[e]=void 0}rSetter(t,e){this.boxAttr(e,t)}strokeSetter(t,e){this.stroke=t,this.boxAttr(e,t)}["stroke-widthSetter"](t,e){t&&(this.needsBox=!0),this["stroke-width"]=t,this.boxAttr(e,t)}["text-alignSetter"](t){this.textAlign=t}textSetter(t){"undefined"!==typeof t&&this.text.attr({text:t}),this.updateTextPadding()}updateBoxSize(){var t=this.text;const e={},r=this.padding,o=this.bBox=s(this.widthSetting)&&s(this.heightSetting)&&!this.textAlign||!n(t.textStr)?c.emptyBBox:t.getBBox();this.width=this.getPaddedWidth(),this.height=(this.heightSetting||o.height||0)+2*r;const a=this.renderer.fontMetrics(t);this.baselineOffset=r+Math.min((this.text.firstLineMetrics||a).b,o.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-a.h)/2),this.needsBox&&!t.textPath&&(this.box||(t=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect(),t.addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),t.add(this)),t=this.getCrispAdjust(),e.x=t,e.y=(this.baseline?-this.baselineOffset:0)+t,e.width=Math.round(this.width),e.height=Math.round(this.height),this.box.attr(i(e,this.deferredAttr)),this.deferredAttr={})}updateTextPadding(){const t=this.text;if(!t.textPath){this.updateBoxSize();const e=this.baseline?0:this.baselineOffset;let i=o(this.paddingLeft,this.padding);n(this.widthSetting)&&this.bBox&&("center"===this.textAlign||"right"===this.textAlign)&&(i+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),i===t.x&&e===t.y||(t.attr("x",i),t.hasBoxWidthChanged&&(this.bBox=t.getBBox(!0)),"undefined"!==typeof e&&t.attr("y",e)),t.x=i,t.y=e}}widthSetter(t){this.widthSetting=s(t)?t:void 0}getPaddedWidth(){var t=this.padding;const e=o(this.paddingLeft,t);return t=o(this.paddingRight,t),(this.widthSetting||this.bBox.width||0)+e+t}xSetter(t){this.x=t,this.alignFactor&&(t-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(t),this.attr("translateX",this.xSetting)}ySetter(t){this.ySetting=this.y=Math.round(t),this.attr("translateY",this.ySetting)}}return c.emptyBBox={width:0,height:0,x:0,y:0},c.textProps="color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow whiteSpace width".split(" "),c})),e(n,"Core/Renderer/SVG/Symbols.js",[n["Core/Utilities.js"]],(function(t){function e(t,e,n,i,r){const a=[];if(r){const c=r.start||0,l=o(r.r,n);n=o(r.r,i||n),i=(r.end||0)-.001;const h=r.innerR,u=o(r.open,.001>Math.abs((r.end||0)-c-2*Math.PI)),d=Math.cos(c),f=Math.sin(c),p=Math.cos(i),g=Math.sin(i),m=o(r.longArc,.001>i-c-Math.PI?0:1);let y=["A",l,n,0,m,o(r.clockwise,1),t+l*p,e+n*g];y.params={start:c,end:i,cx:t,cy:e},a.push(["M",t+l*d,e+n*f],y),s(h)&&(y=["A",h,h,0,m,s(r.clockwise)?1-r.clockwise:0,t+h*d,e+h*f],y.params={start:i,end:c,cx:t,cy:e},a.push(u?["M",t+h*p,e+h*g]:["L",t+h*p,e+h*g],y)),u||a.push(["Z"])}return a}function n(t,e,n,s,r){return r&&r.r?i(t,e,n,s,r):[["M",t,e],["L",t+n,e],["L",t+n,e+s],["L",t,e+s],["Z"]]}function i(t,e,n,i,s){return s=(null===s||void 0===s?void 0:s.r)||0,[["M",t+s,e],["L",t+n-s,e],["A",s,s,0,0,1,t+n,e+s],["L",t+n,e+i-s],["A",s,s,0,0,1,t+n-s,e+i],["L",t+s,e+i],["A",s,s,0,0,1,t,e+i-s],["L",t,e+s],["A",s,s,0,0,1,t+s,e],["Z"]]}const{defined:s,isNumber:r,pick:o}=t;return{arc:e,callout:function(t,e,n,s,o){const a=Math.min(o&&o.r||0,n,s),c=a+6,l=o&&o.anchorX;o=o&&o.anchorY||0;const h=i(t,e,n,s,{r:a});return r(l)?(t+l>=n?o>e+c&&o<e+s-c?h.splice(3,1,["L",t+n,o-6],["L",t+n+6,o],["L",t+n,o+6],["L",t+n,e+s-a]):h.splice(3,1,["L",t+n,s/2],["L",l,o],["L",t+n,s/2],["L",t+n,e+s-a]):0>=t+l?o>e+c&&o<e+s-c?h.splice(7,1,["L",t,o+6],["L",t-6,o],["L",t,o-6],["L",t,e+a]):h.splice(7,1,["L",t,s/2],["L",l,o],["L",t,s/2],["L",t,e+a]):o&&o>s&&l>t+c&&l<t+n-c?h.splice(5,1,["L",l+6,e+s],["L",l,e+s+6],["L",l-6,e+s],["L",t+a,e+s]):o&&0>o&&l>t+c&&l<t+n-c&&h.splice(1,1,["L",l-6,e],["L",l,e-6],["L",l+6,e],["L",n-a,e]),h):h},circle:function(t,n,i,s){return e(t+i/2,n+s/2,i/2,s/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(t,e,n,i){return[["M",t+n/2,e],["L",t+n,e+i/2],["L",t+n/2,e+i],["L",t,e+i/2],["Z"]]},rect:n,roundedRect:i,square:n,triangle:function(t,e,n,i){return[["M",t+n/2,e],["L",t+n,e+i],["L",t,e+i],["Z"]]},"triangle-down":function(t,e,n,i){return[["M",t,e],["L",t+n,e],["L",t+n/2,e+i],["Z"]]}}})),e(n,"Core/Renderer/SVG/TextBuilder.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n){const{doc:i,SVG_NS:s,win:r}=e,{attr:o,extend:a,fireEvent:c,isString:l,objectEach:h,pick:u}=n;class d{constructor(t){const e=t.styles;this.renderer=t.renderer,this.svgElement=t,this.width=t.textWidth,this.textLineHeight=e&&e.lineHeight,this.textOutline=e&&e.textOutline,this.ellipsis=!(!e||"ellipsis"!==e.textOverflow),this.noWrap=!(!e||"nowrap"!==e.whiteSpace)}buildSVG(){const e=this.svgElement,n=e.element;var s=e.renderer,r=u(e.textStr,"").toString();const o=-1!==r.indexOf("<"),a=n.childNodes;s=!e.added&&s.box;const c=/<br.*?>/g;var h=[r,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,e.getStyle("font-size"),this.width].join();if(h!==e.textCache){for(e.textCache=h,delete e.actualWidth,h=a.length;h--;)n.removeChild(a[h]);o||this.ellipsis||this.width||e.textPath||-1!==r.indexOf(" ")&&(!this.noWrap||c.test(r))?""!==r&&(s&&s.appendChild(n),r=new t(r),this.modifyTree(r.nodes),r.addToDOM(n),this.modifyDOM(),this.ellipsis&&-1!==(n.textContent||"").indexOf("")&&e.attr("title",this.unescapeEntities(e.textStr||"",["&lt;","&gt;"])),s&&s.removeChild(n)):n.appendChild(i.createTextNode(this.unescapeEntities(r))),l(this.textOutline)&&e.applyTextOutline&&e.applyTextOutline(this.textOutline)}}modifyDOM(){const t=this.svgElement,e=o(t.element,"x");let n;for(t.firstLineMetrics=void 0;n=t.element.firstChild;){if(!/^[\s\u200B]*$/.test(n.textContent||" "))break;t.element.removeChild(n)}[].forEach.call(t.element.querySelectorAll("tspan.highcharts-br"),((n,i)=>{n.nextSibling&&n.previousSibling&&(0===i&&1===n.previousSibling.nodeType&&(t.firstLineMetrics=t.renderer.fontMetrics(n.previousSibling)),o(n,{dy:this.getLineHeight(n.nextSibling),x:e}))}));const a=this.width||0;if(a){var c=(n,r)=>{var c=n.textContent||"";const l=c.replace(/([^\^])-/g,"$1- ").split(" ");var h=!this.noWrap&&(1<l.length||1<t.element.childNodes.length);const u=this.getLineHeight(r);let d=0,f=t.actualWidth;if(this.ellipsis)c&&this.truncate(n,c,void 0,0,Math.max(0,a-.8*u),((t,e)=>t.substring(0,e)+""));else if(h){for(c=[],h=[];r.firstChild&&r.firstChild!==n;)h.push(r.firstChild),r.removeChild(r.firstChild);for(;l.length;)l.length&&!this.noWrap&&0<d&&(c.push(n.textContent||""),n.textContent=l.join(" ").replace(/- /g,"-")),this.truncate(n,void 0,l,0===d&&f||0,a,((t,e)=>l.slice(0,e).join(" ").replace(/- /g,"-"))),f=t.actualWidth,d++;h.forEach((t=>{r.insertBefore(t,n)})),c.forEach((t=>{r.insertBefore(i.createTextNode(t),n),t=i.createElementNS(s,"tspan"),t.textContent="",o(t,{dy:u,x:e}),r.insertBefore(t,n)}))}},l=e=>{[].slice.call(e.childNodes).forEach((n=>{n.nodeType===r.Node.TEXT_NODE?c(n,e):(-1!==n.className.baseVal.indexOf("highcharts-br")&&(t.actualWidth=0),l(n))}))};l(t.element)}}getLineHeight(t){return t=t.nodeType===r.Node.TEXT_NODE?t.parentElement:t,this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(t||this.svgElement.element).h}modifyTree(t){const e=(n,i)=>{const{attributes:s={},children:r,style:o={},tagName:c}=n,l=this.renderer.styledMode;"b"===c||"strong"===c?l?s["class"]="highcharts-strong":o.fontWeight="bold":"i"!==c&&"em"!==c||(l?s["class"]="highcharts-emphasized":o.fontStyle="italic"),o&&o.color&&(o.fill=o.color),"br"===c?(s["class"]="highcharts-br",n.textContent="",(i=t[i+1])&&i.textContent&&(i.textContent=i.textContent.replace(/^ +/gm,""))):"a"===c&&r&&r.some((t=>"#text"===t.tagName))&&(n.children=[{children:r,tagName:"tspan"}]),"#text"!==c&&"a"!==c&&(n.tagName="tspan"),a(n,{attributes:s,style:o}),r&&r.filter((t=>"#text"!==t.tagName)).forEach(e)};t.forEach(e),c(this.svgElement,"afterModifyTree",{nodes:t})}truncate(t,e,n,i,s,r){const o=this.svgElement,{rotation:a}=o,c=[];let l,h,u=n?1:0,d=(e||n||"").length,f=d;const p=function(e,s){if(e=s||e,(s=t.parentNode)&&"undefined"===typeof c[e]&&s.getSubStringLength)try{c[e]=i+s.getSubStringLength(0,n?e+1:e)}catch(r){}return c[e]};if(o.rotation=0,h=p(t.textContent.length),i+h>s){for(;u<=d;)f=Math.ceil((u+d)/2),n&&(l=r(n,f)),h=p(f,l&&l.length-1),u===d?u=d+1:h>s?d=f-1:u=f;0===d?t.textContent="":e&&d===e.length-1||(t.textContent=l||r(e||n,f))}n&&n.splice(0,f),o.actualWidth=h,o.rotation=a}unescapeEntities(t,e){return h(this.renderer.escapes,(function(n,i){e&&-1!==e.indexOf(n)||(t=t.toString().replace(new RegExp(n,"g"),i))})),t}}return d})),e(n,"Core/Renderer/SVG/SVGRenderer.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGLabel.js"],n["Core/Renderer/SVG/Symbols.js"],n["Core/Renderer/SVG/TextBuilder.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r,o,a,c){const{charts:l,deg2rad:h,doc:u,isFirefox:d,isMS:f,isWebKit:p,noop:g,SVG_NS:m,symbolSizes:y,win:v}=n,{addEvent:b,attr:w,createElement:x,css:_,defined:T,destroyObjectProperties:S,extend:I,isArray:k,isNumber:E,isObject:C,isString:A,merge:O,pick:P,pInt:M,uniqueKey:D}=c;let L;class N{constructor(t,e,n,i,s,r,o){this.width=this.url=this.style=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0,this.init(t,e,n,i,s,r,o)}init(t,e,n,i,s,r,o){const a=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),c=a.element;let l;o||a.css(this.getStyle(i)),t.appendChild(c),w(t,"dir","ltr"),-1===t.innerHTML.indexOf("xmlns")&&w(c,"xmlns",this.SVG_NS),this.box=c,this.boxWrapper=a,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(u.createTextNode("Created with Highcharts 11.0.1")),this.defs=this.createElement("defs").add(),this.allowHTML=r,this.forExport=s,this.styledMode=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=a.getStyle("font-size"),this.setSize(e,n,!1),d&&t.getBoundingClientRect&&(e=function(){_(t,{left:0,top:0}),l=t.getBoundingClientRect(),_(t,{left:Math.ceil(l.left)-l.left+"px",top:Math.ceil(l.top)-l.top+"px"})},e(),this.unSubPixelFix=b(v,"resize",e))}definition(e){return new t([e]).addToDOM(this.defs.element)}getReferenceURL(){if((d||p)&&u.getElementsByTagName("base").length){if(!T(L)){var e=D();e=new t([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:e},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${e})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(u.body),_(e,{position:"fixed",top:0,left:0,zIndex:9e5});const n=u.elementFromPoint(6,6);L="hitme"===(n&&n.id),u.body.removeChild(e)}if(L)return v.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20")}return""}getStyle(t){return this.style=I({fontFamily:"Helvetica, Arial, sans-serif",fontSize:"1rem"},t)}setStyle(t){this.boxWrapper.css(this.getStyle(t))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){const t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),S(this.gradients||{}),this.gradients=null,this.defs=t.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null}createElement(t){const e=new this.Element;return e.init(this,t),e}getRadialAttr(t,e){return{cx:t[0]-t[2]/2+(e.cx||0)*t[2],cy:t[1]-t[2]/2+(e.cy||0)*t[2],r:(e.r||0)*t[2]}}shadowDefinition(t){const e=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(t).map((e=>t[e]))].join("-").replace(/[^a-z0-9\-]/g,""),n=O({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},t);return this.defs.element.querySelector(`#${e}`)||this.definition({tagName:"filter",attributes:{id:e},children:[{tagName:"feDropShadow",attributes:{dx:n.offsetX,dy:n.offsetY,"flood-color":n.color,"flood-opacity":Math.min(5*n.opacity,1),stdDeviation:n.width/2}}]}),e}buildText(t){new a(t).buildSVG()}getContrast(t){return t=e.parse(t).rgba.map((t=>(t/=255,.03928>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)))),t=.2126*t[0]+.7152*t[1]+.0722*t[2],1.05/(t+.05)>(t+.05)/.05?"#FFFFFF":"#000000"}button(e,n,i,s,r={},o,a,c,l,h){const u=this.label(e,n,i,l,void 0,void 0,h,void 0,"button"),d=this.styledMode;e=r.states||{};let p=0;r=O(r),delete r.states;const g=O({color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},r.style);delete r.style;let m,y,v,w=t.filterUserAttributes(r);return u.attr(O({padding:8,r:2},w)),d||(w=O({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1},w),o=O(w,{fill:"#e6e6e6"},t.filterUserAttributes(o||e.hover||{})),m=o.style,delete o.style,a=O(w,{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},t.filterUserAttributes(a||e.select||{})),y=a.style,delete a.style,c=O(w,{style:{color:"#cccccc"}},t.filterUserAttributes(c||e.disabled||{})),v=c.style,delete c.style),b(u.element,f?"mouseover":"mouseenter",(function(){3!==p&&u.setState(1)})),b(u.element,f?"mouseout":"mouseleave",(function(){3!==p&&u.setState(p)})),u.setState=function(t){1!==t&&(u.state=p=t),u.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][t||0]),d||(u.attr([w,o,a,c][t||0]),t=[g,m,y,v][t||0],C(t)&&u.css(t))},d||(u.attr(w).css(I({cursor:"default"},g)),h&&u.text.css({pointerEvents:"none"})),u.on("touchstart",(t=>t.stopPropagation())).on("click",(function(t){3!==p&&s.call(u,t)}))}crispLine(t,e,n="round"){const i=t[0],s=t[1];return T(i[1])&&i[1]===s[1]&&(i[1]=s[1]=Math[n](i[1])-e%2/2),T(i[2])&&i[2]===s[2]&&(i[2]=s[2]=Math[n](i[2])+e%2/2),t}path(t){const e=this.styledMode?{}:{fill:"none"};return k(t)?e.d=t:C(t)&&I(e,t),this.createElement("path").attr(e)}circle(t,e,n){return t=C(t)?t:"undefined"===typeof t?{}:{x:t,y:e,r:n},e=this.createElement("circle"),e.xSetter=e.ySetter=function(t,e,n){n.setAttribute("c"+e,t)},e.attr(t)}arc(t,e,n,i,s,r){return C(t)?(i=t,e=i.y,n=i.r,t=i.x):i={innerR:i,start:s,end:r},t=this.symbol("arc",t,e,n,n,i),t.r=n,t}rect(t,e,n,i,s,r){t=C(t)?t:"undefined"===typeof t?{}:{x:t,y:e,r:s,width:Math.max(n||0,0),height:Math.max(i||0,0)};const o=this.createElement("rect");return this.styledMode||("undefined"!==typeof r&&(t["stroke-width"]=r,I(t,o.crisp(t))),t.fill="none"),o.rSetter=function(t,e,n){o.r=t,w(n,{rx:t,ry:t})},o.rGetter=function(){return o.r||0},o.attr(t)}roundedRect(t){return this.symbol("roundedRect").attr(t)}setSize(t,e,n){this.width=t,this.height=e,this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:P(n,!0)?void 0:0}),this.alignElements()}g(t){const e=this.createElement("g");return t?e.attr({class:"highcharts-"+t}):e}image(t,e,n,i,s,r){const o={preserveAspectRatio:"none"},a=function(t,e){t.setAttributeNS?t.setAttributeNS("http://www.w3.org/1999/xlink","href",e):t.setAttribute("hc-svg-href",e)};E(e)&&(o.x=e),E(n)&&(o.y=n),E(i)&&(o.width=i),E(s)&&(o.height=s);const c=this.createElement("image").attr(o);return e=function(e){a(c.element,t),r.call(c,e)},r?(a(c.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n=new v.Image,b(n,"load",e),n.src=t,n.complete&&e({})):a(c.element,t),c}symbol(t,e,n,i,s,r){const o=this,a=/^url\((.*?)\)$/,c=a.test(t),h=!c&&(this.symbols[t]?t:"circle"),d=h&&this.symbols[h];let f,p,g,m;if(d)"number"===typeof e&&(p=d.call(this.symbols,Math.round(e||0),Math.round(n||0),i||0,s||0,r)),f=this.path(p),o.styledMode||f.attr("fill","none"),I(f,{symbolName:h||void 0,x:e,y:n,width:i,height:s}),r&&I(f,r);else if(c){g=t.match(a)[1];const i=f=this.image(g);i.imgwidth=P(r&&r.width,y[g]&&y[g].width),i.imgheight=P(r&&r.height,y[g]&&y[g].height),m=t=>t.attr({width:t.width,height:t.height}),["width","height"].forEach((function(t){i[t+"Setter"]=function(t,e){this[e]=t;const{alignByTranslate:n,element:i,width:s,height:o,imgwidth:a,imgheight:c}=this;if(t=this["img"+e],T(t)){let l=1;r&&"within"===r.backgroundSize&&s&&o?(l=Math.min(s/a,o/c),w(i,{width:Math.round(a*l),height:Math.round(c*l)})):i&&i.setAttribute(e,t),n||this.translate(((s||0)-a*l)/2,((o||0)-c*l)/2)}}})),T(e)&&i.attr({x:e,y:n}),i.isImg=!0,T(i.imgwidth)&&T(i.imgheight)?m(i):(i.attr({width:0,height:0}),x("img",{onload:function(){const t=l[o.chartIndex];0===this.width&&(_(this,{position:"absolute",top:"-999em"}),u.body.appendChild(this)),y[g]={width:this.width,height:this.height},i.imgwidth=this.width,i.imgheight=this.height,i.element&&m(i),this.parentNode&&this.parentNode.removeChild(this),o.imgCount--,o.imgCount||!t||t.hasLoaded||t.onload()},src:g}),this.imgCount++)}return f}clipRect(t,e,n,i){const s=D()+"-",r=this.createElement("clipPath").attr({id:s}).add(this.defs);return t=this.rect(t,e,n,i,0).add(r),t.id=s,t.clipPath=r,t.count=0,t}text(t,e,n,i){const s={};return!i||!this.allowHTML&&this.forExport?(s.x=Math.round(e||0),n&&(s.y=Math.round(n)),T(t)&&(s.text=t),t=this.createElement("text").attr(s),(!i||this.forExport&&!this.allowHTML)&&(t.xSetter=function(t,e,n){const i=n.getElementsByTagName("tspan"),s=n.getAttribute(e);for(let r,o=0;o<i.length;o++)r=i[o],r.getAttribute(e)===s&&r.setAttribute(e,t);n.setAttribute(e,t)}),t):this.html(t,e,n)}fontMetrics(t){t=M(s.prototype.getStyle.call(t,"font-size")||0);const e=24>t?t+3:Math.round(1.2*t);return{h:e,b:Math.round(.8*e),f:t}}rotCorr(t,e,n){let i=t;return e&&n&&(i=Math.max(i*Math.cos(e*h),4)),{x:-t/3*Math.sin(e*h),y:i}}pathToSegments(t){const e=[],n=[],i={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let s=0;s<t.length;s++)A(n[0])&&E(t[s])&&n.length===i[n[0].toUpperCase()]&&t.splice(s,0,n[0].replace("M","L").replace("m","l")),"string"===typeof t[s]&&(n.length&&e.push(n.slice(0)),n.length=0),n.push(t[s]);return e.push(n.slice(0)),e}label(t,e,n,i,s,o,a,c,l){return new r(this,t,e,n,i,s,o,a,c,l)}alignElements(){this.alignedObjects.forEach((t=>t.align()))}}return I(N.prototype,{Element:s,SVG_NS:m,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:o,draw:g}),i.registerRendererType("svg",N,!0),N})),e(n,"Core/Renderer/HTML/HTMLElement.js",[n["Core/Globals.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(t,e,n){const{isFirefox:i,isMS:s,isWebKit:r,win:o}=t,{css:a,defined:c,extend:l,pick:h,pInt:u}=n,d=[];class f extends e{static compose(t){if(n.pushUnique(d,t)){const e=f.prototype,n=t.prototype;n.getSpanCorrection=e.getSpanCorrection,n.htmlCss=e.htmlCss,n.htmlGetBBox=e.htmlGetBBox,n.htmlUpdateTransform=e.htmlUpdateTransform,n.setSpanRotation=e.setSpanRotation}return t}getSpanCorrection(t,e,n){this.xCorr=-t*n,this.yCorr=-e}htmlCss(t){const e="SPAN"===this.element.tagName&&t&&"width"in t,n=h(e&&t.width,void 0);let i;return e&&(delete t.width,this.textWidth=n,i=!0),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=l(this.styles,t),a(this.element,t),i&&this.htmlUpdateTransform(),this}htmlGetBBox(){const t=this.element;return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}}htmlUpdateTransform(){if(this.added){var t=this.renderer,e=this.element,n=this.x||0,i=this.y||0,s=this.textAlign||"left",r={left:0,center:.5,right:1}[s],o=this.styles,l=o&&o.whiteSpace;if(a(e,{marginLeft:this.translateX||0,marginTop:this.translateY||0}),"SPAN"===e.tagName){o=this.rotation;const d=this.textWidth&&u(this.textWidth),f=[o,s,e.innerHTML,this.textWidth,this.textAlign].join();let p=!1;if(d!==this.oldTextWidth){if(this.textPxLength)var h=this.textPxLength;else a(e,{width:"",whiteSpace:l||"nowrap"}),h=e.offsetWidth;(d>this.oldTextWidth||h>d)&&(/[ \-]/.test(e.textContent||e.innerText)||"ellipsis"===e.style.textOverflow)&&(a(e,{width:h>d||o?d+"px":"auto",display:"block",whiteSpace:l||"normal"}),this.oldTextWidth=d,p=!0)}this.hasBoxWidthChanged=p,f!==this.cTT&&(t=t.fontMetrics(e).b,!c(o)||o===(this.oldRotation||0)&&s===this.oldAlign||this.setSpanRotation(o,r,t),this.getSpanCorrection(!c(o)&&this.textPxLength||e.offsetWidth,t,r,o,s)),a(e,{left:n+(this.xCorr||0)+"px",top:i+(this.yCorr||0)+"px"}),this.cTT=f,this.oldRotation=o,this.oldAlign=s}}else this.alignOnAdd=!0}setSpanRotation(t,e,n){const c={},l=s&&!/Edge/.test(o.navigator.userAgent)?"-ms-transform":r?"-webkit-transform":i?"MozTransform":o.opera?"-o-transform":void 0;l&&(c[l]=c.transform="rotate("+t+"deg)",c[l+(i?"Origin":"-origin")]=c.transformOrigin=100*e+"% "+n+"px",a(this.element,c))}}return f})),e(n,"Core/Renderer/HTML/HTMLRenderer.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Utilities.js"]],(function(t,e,n,i){const{attr:s,createElement:r,extend:o,pick:a}=i,c=[];class l extends n{static compose(t){return i.pushUnique(c,t)&&(t.prototype.html=l.prototype.html),t}html(n,i,c){const l=this.createElement("span"),h=l.element,u=l.renderer,d=function(t,n){["opacity","visibility"].forEach((function(i){t[i+"Setter"]=function(s,r,o){const a=t.div?t.div.style:n;e.prototype[i+"Setter"].call(this,s,r,o),a&&(a[r]=s)}})),t.addedSetters=!0};return l.textSetter=function(e){e!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,t.setElementHTML(this.element,a(e,"")),this.textStr=e,l.doTransform=!0)},d(l,l.element.style),l.xSetter=l.ySetter=l.alignSetter=l.rotationSetter=function(t,e){"align"===e?l.alignValue=l.textAlign=t:l[e]=t,l.doTransform=!0},l.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},l.attr({text:n,x:Math.round(i),y:Math.round(c)}).css({position:"absolute"}),u.styledMode||l.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),h.style.whiteSpace="nowrap",l.css=l.htmlCss,l.add=function(t){const e=u.box.parentNode,n=[];let i;if(this.parentGroup=t){if(i=t.div,!i){for(;t;)n.push(t),t=t.parentGroup;n.reverse().forEach((function(t){function a(e,n){t[n]=e,"translateX"===n?u.left=e+"px":u.top=e+"px",t.doTransform=!0}const c=s(t.element,"class"),h=t.styles||{};i=t.div=t.div||r("div",c?{className:c}:void 0,{position:"absolute",left:(t.translateX||0)+"px",top:(t.translateY||0)+"px",display:t.display,opacity:t.opacity,visibility:t.visibility},i||e);const u=i.style;o(t,{classSetter:function(t){return function(e){this.element.setAttribute("class",e),t.className=e}}(i),css:function(e){return l.css.call(t,e),["cursor","pointerEvents"].forEach((t=>{e[t]&&(u[t]=e[t])})),t},on:function(){return n[0].div&&l.on.apply({element:n[0].div,onEvents:t.onEvents},arguments),t},translateXSetter:a,translateYSetter:a}),t.addedSetters||d(t),t.css(h)}))}}else i=e;return i.appendChild(h),l.added=!0,l.alignOnAdd&&l.htmlUpdateTransform(),l},l}}return l})),e(n,"Core/Axis/AxisDefaults.js",[],(function(){var t;return function(t){t.defaultXAxisOptions={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e %b"},week:{main:"%e %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotation:void 0,autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",padding:5,reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,opposite:!1,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",rotation:0,useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},t.defaultYAxisOptions={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){const{numberFormatter:t}=this.axis.chart;return t(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},t.defaultLeftAxisOptions={title:{rotation:270}},t.defaultRightAxisOptions={title:{rotation:90}},t.defaultBottomAxisOptions={labels:{autoRotation:[-45]},margin:15,title:{rotation:0}},t.defaultTopAxisOptions={labels:{autoRotation:[-45]},margin:15,title:{rotation:0}}}(t||(t={})),t})),e(n,"Core/Foundation.js",[n["Core/Utilities.js"]],(function(t){const{addEvent:e,isFunction:n,objectEach:i,removeEvent:s}=t;var r;return function(t){t.registerEventOptions=function(t,r){t.eventOptions=t.eventOptions||{},i(r.events,(function(i,r){t.eventOptions[r]!==i&&(t.eventOptions[r]&&(s(t,r,t.eventOptions[r]),delete t.eventOptions[r]),n(i)&&(t.eventOptions[r]=i,e(t,r,i,{order:0})))}))}}(r||(r={})),r})),e(n,"Core/Axis/Tick.js",[n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n){const{deg2rad:i}=e,{clamp:s,correctFloat:r,defined:o,destroyObjectProperties:a,extend:c,fireEvent:l,isNumber:h,merge:u,objectEach:d,pick:f}=n;class p{constructor(t,e,n,i,s){this.isNewLabel=this.isNew=!0,this.axis=t,this.pos=e,this.type=n||"",this.parameters=s||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,l(this,"init"),n||i||this.addLabel()}addLabel(){const e=this,n=e.axis;var i=n.options;const s=n.chart;var a=n.categories;const u=n.logarithmic,d=n.names,p=e.pos,g=f(e.options&&e.options.labels,i.labels);var m=n.tickPositions;const y=p===m[0],v=p===m[m.length-1],b=(!g.step||1===g.step)&&1===n.tickInterval;m=m.info;let w,x,_,T=e.label;a=this.parameters.category||(a?f(a[p],d[p],p):p),u&&h(a)&&(a=r(u.lin2log(a))),n.dateTime&&(m?(x=s.time.resolveDTLFormat(i.dateTimeLabelFormats[!i.grid&&m.higherRanks[p]||m.unitName]),w=x.main):h(a)&&(w=n.dateTime.getXDateFormat(a,i.dateTimeLabelFormats||{}))),e.isFirst=y,e.isLast=v;const S={axis:n,chart:s,dateTimeLabelFormat:w,isFirst:y,isLast:v,pos:p,tick:e,tickPositionInfo:m,value:a};l(this,"labelFormat",S);const I=e=>g.formatter?g.formatter.call(e,e):g.format?(e.text=n.defaultLabelFormatter.call(e,e),t.format(g.format,e,s)):n.defaultLabelFormatter.call(e,e);i=I.call(S,S);const k=x&&x.list;e.shortenLabel=k?function(){for(_=0;_<k.length;_++)if(c(S,{dateTimeLabelFormat:k[_]}),T.attr({text:I.call(S,S)}),T.getBBox().width<n.getSlotWidth(e)-2*g.padding)return;T.attr({text:""})}:void 0,b&&n._addedPlotLB&&e.moveLabel(i,g),o(T)||e.movedLabel?T&&T.textStr!==i&&!b&&(!T.textWidth||g.style.width||T.styles.width||T.css({width:null}),T.attr({text:i}),T.textPxLength=T.getBBox().width):(e.label=T=e.createLabel({x:0,y:0},i,g),e.rotation=0)}createLabel(t,e,n){const i=this.axis,s=i.chart;return(t=o(e)&&n.enabled?s.renderer.text(e,t.x,t.y,n.useHTML).add(i.labelGroup):null)&&(s.styledMode||t.css(u(n.style)),t.textPxLength=t.getBBox().width),t}destroy(){a(this,this.axis)}getPosition(t,e,n,i){const o=this.axis,a=o.chart,c=i&&a.oldChartHeight||a.chartHeight;return t={x:t?r(o.translate(e+n,void 0,void 0,i)+o.transB):o.left+o.offset+(o.opposite?(i&&a.oldChartWidth||a.chartWidth)-o.right-o.left:0),y:t?c-o.bottom+o.offset-(o.opposite?o.height:0):r(c-o.translate(e+n,void 0,void 0,i)-o.transB)},t.y=s(t.y,-1e5,1e5),l(this,"afterGetPosition",{pos:t}),t}getLabelPosition(t,e,n,s,r,a,c,h){const u=this.axis,d=u.transA,p=u.isLinked&&u.linkedParent?u.linkedParent.reversed:u.reversed,g=u.staggerLines,m=u.tickRotCorr||{x:0,y:0},y=s||u.reserveSpaceDefault?0:-u.labelOffset*("center"===u.labelAlign?.5:1),v=r.distance,b={};return n=0===u.side?n.rotation?-v:-n.getBBox().height:2===u.side?m.y+v:Math.cos(n.rotation*i)*(m.y-n.getBBox(!1,0).height/2),o(r.y)&&(n=0===u.side&&u.horiz?r.y+n:r.y),t=t+f(r.x,[0,1,0,-1][u.side]*v)+y+m.x-(a&&s?a*d*(p?-1:1):0),e=e+n-(a&&!s?a*d*(p?1:-1):0),g&&(s=c/(h||1)%g,u.opposite&&(s=g-s-1),e+=u.labelOffset/g*s),b.x=t,b.y=Math.round(e),l(this,"afterGetLabelPosition",{pos:b,tickmarkOffset:a,index:c}),b}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(t,e,n,i,s,r){return r.crispLine([["M",t,e],["L",t+(s?0:-n),e+(s?n:0)]],i)}handleOverflow(t){const e=this.axis,n=e.options.labels,s=t.x;var r=e.chart.chartWidth,o=e.chart.spacing;const a=f(e.labelLeft,Math.min(e.pos,o[3]));o=f(e.labelRight,Math.max(e.isRadial?0:e.pos+e.len,r-o[1]));const c=this.label,l=this.rotation,h={left:0,center:.5,right:1}[e.labelAlign||c.attr("align")],u=c.getBBox().width,d=e.getSlotWidth(this),p={};let g,m=d,y=1;l||"justify"!==n.overflow?0>l&&s-h*u<a?g=Math.round(s/Math.cos(l*i)-a):0<l&&s+h*u>o&&(g=Math.round((r-s)/Math.cos(l*i))):(r=s+(1-h)*u,s-h*u<a?m=t.x+m*(1-h)-a:r>o&&(m=o-t.x+m*h,y=-1),m=Math.min(d,m),m<d&&"center"===e.labelAlign&&(t.x+=y*(d-m-h*(d-Math.min(u,m)))),(u>m||e.autoRotation&&(c.styles||{}).width)&&(g=m)),g&&(this.shortenLabel?this.shortenLabel():(p.width=Math.floor(g)+"px",(n.style||{}).textOverflow||(p.textOverflow="ellipsis"),c.css(p)))}moveLabel(t,e){const n=this;var i=n.label;const s=n.axis;let r=!1;i&&i.textStr===t?(n.movedLabel=i,r=!0,delete n.label):d(s.ticks,(function(e){r||e.isNew||e===n||!e.label||e.label.textStr!==t||(n.movedLabel=e.label,r=!0,e.labelPos=n.movedLabel.xy,delete e.label)})),r||!n.labelPos&&!i||(i=n.labelPos||i.xy,n.movedLabel=n.createLabel(i,t,e),n.movedLabel&&n.movedLabel.attr({opacity:0}))}render(t,e,n){var i=this.axis,s=i.horiz,r=this.pos,o=f(this.tickmarkOffset,i.tickmarkOffset);r=this.getPosition(s,r,o,e),o=r.x;const a=r.y;i=s&&o===i.pos+i.len||!s&&a===i.pos?-1:1,s=f(n,this.label&&this.label.newOpacity,1),n=f(n,1),this.isActive=!0,this.renderGridLine(e,n,i),this.renderMark(r,n,i),this.renderLabel(r,e,s,t),this.isNew=!1,l(this,"afterRender")}renderGridLine(t,e,n){const i=this.axis,s=i.options,r={},o=this.pos,a=this.type,c=f(this.tickmarkOffset,i.tickmarkOffset),l=i.chart.renderer;let h=this.gridLine,u=s.gridLineWidth,d=s.gridLineColor,p=s.gridLineDashStyle;"minor"===this.type&&(u=s.minorGridLineWidth,d=s.minorGridLineColor,p=s.minorGridLineDashStyle),h||(i.chart.styledMode||(r.stroke=d,r["stroke-width"]=u||0,r.dashstyle=p),a||(r.zIndex=1),t&&(e=0),this.gridLine=h=l.path().attr(r).addClass("highcharts-"+(a?a+"-":"")+"grid-line").add(i.gridGroup)),h&&(n=i.getPlotLinePath({value:o+c,lineWidth:h.strokeWidth()*n,force:"pass",old:t,acrossPanes:!1}))&&h[t||this.isNew?"attr":"animate"]({d:n,opacity:e})}renderMark(t,e,n){const i=this.axis;var s=i.options;const r=i.chart.renderer,o=this.type,a=i.tickSize(o?o+"Tick":"tick"),c=t.x;t=t.y;const l=f(s["minor"!==o?"tickWidth":"minorTickWidth"],!o&&i.isXAxis?1:0);s=s["minor"!==o?"tickColor":"minorTickColor"];let h=this.mark;const u=!h;a&&(i.opposite&&(a[0]=-a[0]),h||(this.mark=h=r.path().addClass("highcharts-"+(o?o+"-":"")+"tick").add(i.axisGroup),i.chart.styledMode||h.attr({stroke:s,"stroke-width":l})),h[u?"attr":"animate"]({d:this.getMarkPath(c,t,a[0],h.strokeWidth()*n,i.horiz,r),opacity:e}))}renderLabel(t,e,n,i){var s=this.axis;const r=s.horiz,o=s.options,a=this.label,c=o.labels,l=c.step;s=f(this.tickmarkOffset,s.tickmarkOffset);const u=t.x;t=t.y;let d=!0;a&&h(u)&&(a.xy=t=this.getLabelPosition(u,t,a,r,c,s,i,l),this.isFirst&&!this.isLast&&!o.showFirstLabel||this.isLast&&!this.isFirst&&!o.showLastLabel?d=!1:!r||c.step||c.rotation||e||0===n||this.handleOverflow(t),l&&i%l&&(d=!1),d&&h(t.y)?(t.opacity=n,a[this.isNewLabel?"attr":"animate"](t).show(!0),this.isNewLabel=!1):(a.hide(),this.isNewLabel=!0))}replaceMovedLabel(){const t=this.label,e=this.axis;t&&!this.isNew&&(t.animate({opacity:0},void 0,t.destroy),delete this.label),e.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}}return p})),e(n,"Core/Axis/Axis.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/AxisDefaults.js"],n["Core/Color/Color.js"],n["Core/Defaults.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Axis/Tick.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r,o,a){const{animObject:c}=t,{defaultOptions:l}=i,{registerEventOptions:h}=s,{deg2rad:u}=r,{arrayMax:d,arrayMin:f,clamp:p,correctFloat:g,defined:m,destroyObjectProperties:y,erase:v,error:b,extend:w,fireEvent:x,isArray:_,isNumber:T,isString:S,merge:I,normalizeTickInterval:k,objectEach:E,pick:C,relativeLength:A,removeEvent:O,splat:P,syncTimeout:M}=a,D=(t,e)=>k(e,void 0,void 0,C(t.options.allowDecimals,.5>e||void 0!==t.tickAmount),!!t.tickAmount);class L{constructor(t,e){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.eventOptions=this.coll=this.closestPointRange=this.chart=this.bottom=this.alternateBands=void 0,this.init(t,e)}init(t,e){const n=e.isX;this.chart=t,this.horiz=t.inverted&&!this.isZAxis?!n:n,this.isXAxis=n,this.coll=this.coll||(n?"xAxis":"yAxis"),x(this,"init",{userOptions:e}),this.opposite=C(e.opposite,this.opposite),this.side=C(e.side,this.side,this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);const i=this.options,s=i.labels,r=i.type;this.userOptions=e,this.minPixelPadding=0,this.reversed=C(i.reversed,this.reversed),this.visible=i.visible,this.zoomEnabled=i.zoomEnabled,this.hasNames="category"===r||!0===i.categories,this.categories=i.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=m(i.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=i.minRange||i.maxZoom,this.range=i.range,this.offset=i.offset||0,this.min=this.max=null,e=C(i.crosshair,P(t.options.tooltip.crosshairs)[n?0:1]),this.crosshair=!0===e?{}:e,-1===t.axes.indexOf(this)&&(n?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&!this.isZAxis&&n&&"undefined"===typeof this.reversed&&(this.reversed=!0),this.labelRotation=T(s.rotation)?s.rotation:void 0,h(this,i),x(this,"afterInit")}setOptions(t){this.options=I(e.defaultXAxisOptions,"yAxis"===this.coll&&e.defaultYAxisOptions,[e.defaultTopAxisOptions,e.defaultRightAxisOptions,e.defaultBottomAxisOptions,e.defaultLeftAxisOptions][this.side],I(l[this.coll],t)),x(this,"afterSetOptions",{userOptions:t})}defaultLabelFormatter(t){var e=this.axis;({numberFormatter:t}=this.chart);const n=T(this.value)?this.value:NaN,i=e.chart.time,s=this.dateTimeLabelFormat;var r=l.lang;const o=r.numericSymbols;r=r.numericSymbolMagnitude||1e3;const a=e.logarithmic?Math.abs(n):e.tickInterval;let c,h=o&&o.length;if(e.categories)c=`${this.value}`;else if(s)c=i.dateFormat(s,n);else if(h&&1e3<=a)for(;h--&&"undefined"===typeof c;)e=Math.pow(r,h+1),a>=e&&0===10*n%e&&null!==o[h]&&0!==n&&(c=t(n/e,-1)+o[h]);return"undefined"===typeof c&&(c=1e4<=Math.abs(n)?t(n,-1):t(n,-1,void 0,"")),c}getSeriesExtremes(){const t=this,e=t.chart;let n;x(this,"getSeriesExtremes",null,(function(){t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.series.forEach((function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var s=i.options;let e,r,o=s.threshold;t.hasVisibleSeries=!0,t.positiveValuesOnly&&0>=o&&(o=null),t.isXAxis?(s=i.xData)&&s.length&&(s=t.logarithmic?s.filter((t=>0<t)):s,n=i.getXExtremes(s),e=n.min,r=n.max,T(e)||e instanceof Date||(s=s.filter(T),n=i.getXExtremes(s),e=n.min,r=n.max),s.length&&(t.dataMin=Math.min(C(t.dataMin,e),e),t.dataMax=Math.max(C(t.dataMax,r),r))):(i=i.applyExtremes(),T(i.dataMin)&&(e=i.dataMin,t.dataMin=Math.min(C(t.dataMin,e),e)),T(i.dataMax)&&(r=i.dataMax,t.dataMax=Math.max(C(t.dataMax,r),r)),m(o)&&(t.threshold=o),(!s.softThreshold||t.positiveValuesOnly)&&(t.softThreshold=!1))}}))})),x(this,"afterGetSeriesExtremes")}translate(t,e,n,i,s,r){const o=this.linkedParent||this,a=i&&o.old?o.old.min:o.min;if(!T(a))return NaN;const c=o.minPixelPadding;s=(o.isOrdinal||o.brokenAxis&&o.brokenAxis.hasBreaks||o.logarithmic&&s)&&o.lin2val;let l=1,h=0;return i=i&&o.old?o.old.transA:o.transA,i||(i=o.transA),n&&(l*=-1,h=o.len),o.reversed&&(l*=-1,h-=l*(o.sector||o.len)),e?(r=(t*l+h-c)/i+a,s&&(r=o.lin2val(r))):(s&&(t=o.val2lin(t)),t=l*(t-a)*i,r=(o.isRadial?t:g(t))+h+l*c+(T(r)?i*r:0)),r}toPixels(t,e){return this.translate(t,!1,!this.horiz,void 0,!0)+(e?0:this.pos)}toValue(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(t){function e(t,e,n){return"pass"!==b&&(t<e||t>n)&&(b?t=p(t,e,n):y=!0),t}const n=this,i=n.chart,s=n.left,r=n.top,o=t.old,a=t.value,c=t.lineWidth,l=o&&i.oldChartHeight||i.chartHeight,h=o&&i.oldChartWidth||i.chartWidth,u=n.transB;let d,f,g,m,y,v=t.translatedValue,b=t.force;return t={value:a,lineWidth:c,old:o,force:b,acrossPanes:t.acrossPanes,translatedValue:v},x(this,"getPlotLinePath",t,(function(t){v=C(v,n.translate(a,void 0,void 0,o)),v=p(v,-1e5,1e5),d=g=Math.round(v+u),f=m=Math.round(l-v-u),T(v)?n.horiz?(f=r,m=l-n.bottom,d=g=e(d,s,s+n.width)):(d=s,g=h-n.right,f=m=e(f,r,r+n.height)):(y=!0,b=!1),t.path=y&&!b?null:i.renderer.crispLine([["M",d,f],["L",g,m]],c||1)})),t.path}getLinearTickPositions(t,e,n){const i=g(Math.floor(e/t)*t);n=g(Math.ceil(n/t)*t);const s=[];let r,o;if(g(i+t)===i&&(o=20),this.single)return[e];for(e=i;e<=n;){if(s.push(e),e=g(e+t,o),e===r)break;r=e}return s}getMinorTickInterval(){const t=this.options;return!0===t.minorTicks?C(t.minorTickInterval,"auto"):!1===t.minorTicks?null:t.minorTickInterval}getMinorTickPositions(){var t=this.options;const e=this.tickPositions,n=this.minorTickInterval;var i=this.pointRangePadding||0;const s=this.min-i;i=this.max+i;const r=i-s;let o=[];if(r&&r/n<this.len/3){const r=this.logarithmic;if(r)this.paddedTicks.forEach((function(t,e,i){e&&o.push.apply(o,r.getLogTickPositions(n,i[e-1],i[e],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())o=o.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(n),s,i,t.startOfWeek));else for(t=s+(e[0]-s)%n;t<=i&&t!==o[0];t+=n)o.push(t)}return 0!==o.length&&this.trimTicks(o),o}adjustForMinRange(){const t=this.options,e=this.logarithmic;let n=this.min;var i=this.max;let s,r,o,a,c,l,h=0;if(this.isXAxis&&"undefined"===typeof this.minRange&&!e&&(m(t.min)||m(t.max)||m(t.floor)||m(t.ceiling)?this.minRange=null:(this.series.forEach((function(t){if(a=t.xData,c=t.xIncrement?1:a.length-1,1<a.length)for(r=c;0<r;r--)o=a[r]-a[r-1],(!h||o<h)&&(h=o)})),this.minRange=Math.min(5*h,this.dataMax-this.dataMin))),i-n<this.minRange){s=this.dataMax-this.dataMin>=this.minRange,l=this.minRange;var u=(l-i+n)/2;u=[n-u,C(t.min,n-u)],s&&(u[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),n=d(u),i=[n+l,C(t.max,n+l)],s&&(i[2]=e?e.log2lin(this.dataMax):this.dataMax),i=f(i),i-n<l&&(u[0]=i-l,u[1]=C(t.min,i-l),n=d(u))}this.min=n,this.max=i}getClosest(){let t;return this.categories?t=1:this.series.forEach((function(e){const n=e.closestPointRange,i=e.visible||!e.chart.options.chart.ignoreHiddenSeries;!e.noSharedTooltip&&m(n)&&i&&(t=m(t)?Math.min(t,n):n)})),t}nameToX(t){const e=_(this.options.categories),n=e?this.categories:this.names;let i,s=t.options.x;return t.series.requireSorting=!1,m(s)||(s=this.options.uniqueNames&&n?e?n.indexOf(t.name):C(n.keys[t.name],-1):t.series.autoIncrement()),-1===s?!e&&n&&(i=n.length):i=s,"undefined"!==typeof i?(this.names[i]=t.name,this.names.keys[t.name]=i):t.x&&(i=t.x),i}updateNames(){const t=this,e=this.names;0<e.length&&(Object.keys(e.keys).forEach((function(t){delete e.keys[t]})),e.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((function(e){e.xIncrement=null,e.points&&!e.isDirtyData||(t.max=Math.max(t.max,e.xData.length-1),e.processData(),e.generatePoints()),e.data.forEach((function(n,i){let s;n&&n.options&&"undefined"!==typeof n.name&&(s=t.nameToX(n),"undefined"!==typeof s&&s!==n.x&&(n.x=s,e.xData[i]=s))}))})))}setAxisTranslation(){const t=this,e=t.max-t.min;var n=t.linkedParent;const i=!!t.categories,s=t.isXAxis;let r,o=t.axisPointRange||0,a=0,c=0,l=t.transA;(s||i||o)&&(r=t.getClosest(),n?(a=n.minPointOffset,c=n.pointRangePadding):t.series.forEach((function(e){const n=i?1:s?C(e.options.pointRange,r,0):t.axisPointRange||0,l=e.options.pointPlacement;o=Math.max(o,n),t.single&&!i||(e=e.is("xrange")?!s:s,a=Math.max(a,e&&S(l)?0:n/2),c=Math.max(c,e&&"on"===l?0:n))})),n=t.ordinal&&t.ordinal.slope&&r?t.ordinal.slope/r:1,t.minPointOffset=a*=n,t.pointRangePadding=c*=n,t.pointRange=Math.min(o,t.single&&i?1:e),s&&(t.closestPointRange=r)),t.translationSlope=t.transA=l=t.staticScale||t.len/(e+c||1),t.transB=t.horiz?t.left:t.bottom,t.minPixelPadding=l*a,x(this,"afterSetAxisTranslation")}minFromRange(){return this.max-this.range}setTickInterval(t){var e=this.chart;const n=this.logarithmic,i=this.options,s=this.isXAxis,r=this.isLinked,o=i.tickPixelInterval,a=this.categories,c=this.softThreshold;let l,h,u,d=i.maxPadding,f=i.minPadding,p=T(i.tickInterval)&&0<=i.tickInterval?i.tickInterval:void 0,y=T(this.threshold)?this.threshold:null;if(this.dateTime||a||r||this.getTickAmount(),h=C(this.userMin,i.min),u=C(this.userMax,i.max),r){this.linkedParent=e[this.coll][i.linkedTo];var v=this.linkedParent.getExtremes();this.min=C(v.min,v.dataMin),this.max=C(v.max,v.dataMax),i.type!==this.linkedParent.options.type&&b(11,1,e)}else c&&m(y)&&(this.dataMin>=y?(v=y,f=0):this.dataMax<=y&&(l=y,d=0)),this.min=C(h,v,this.dataMin),this.max=C(u,l,this.dataMax);if(n&&(this.positiveValuesOnly&&!t&&0>=Math.min(this.min,C(this.dataMin,this.min))&&b(10,1,e),this.min=g(n.log2lin(this.min),16),this.max=g(n.log2lin(this.max),16)),this.range&&m(this.max)&&(this.userMin=this.min=h=Math.max(this.dataMin,this.minFromRange()),this.userMax=u=this.max,this.range=null),x(this,"foundExtremes"),this.beforePadding&&this.beforePadding(),this.adjustForMinRange(),!(a||this.axisPointRange||this.stacking&&this.stacking.usePercentage||r)&&m(this.min)&&m(this.max)&&(e=this.max-this.min)&&(!m(h)&&f&&(this.min-=e*f),!m(u)&&d&&(this.max+=e*d)),T(this.userMin)||(T(i.softMin)&&i.softMin<this.min&&(this.min=h=i.softMin),T(i.floor)&&(this.min=Math.max(this.min,i.floor))),T(this.userMax)||(T(i.softMax)&&i.softMax>this.max&&(this.max=u=i.softMax),T(i.ceiling)&&(this.max=Math.min(this.max,i.ceiling))),c&&m(this.dataMin)&&(y=y||0,!m(h)&&this.min<y&&this.dataMin>=y?this.min=this.options.minRange?Math.min(y,this.max-this.minRange):y:!m(u)&&this.max>y&&this.dataMax<=y&&(this.max=this.options.minRange?Math.max(y,this.min+this.minRange):y)),T(this.min)&&T(this.max)&&!this.chart.polar&&this.min>this.max&&(m(this.options.min)?this.max=this.min:m(this.options.max)&&(this.min=this.max)),this.tickInterval=this.min===this.max||"undefined"===typeof this.min||"undefined"===typeof this.max?1:r&&this.linkedParent&&!p&&o===this.linkedParent.options.tickPixelInterval?p=this.linkedParent.tickInterval:C(p,this.tickAmount?(this.max-this.min)/Math.max(this.tickAmount-1,1):void 0,a?1:(this.max-this.min)*o/Math.max(this.len,o)),s&&!t){const t=this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max);this.series.forEach((function(e){e.forceCrop=e.forceCropping&&e.forceCropping(),e.processData(t)})),x(this,"postProcessData",{hasExtremesChanged:t})}this.setAxisTranslation(),x(this,"initialAxisTranslation"),this.pointRange&&!p&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval)),t=C(i.minTickInterval,this.dateTime&&!this.series.some((t=>t.noSharedTooltip))?this.closestPointRange:0),!p&&this.tickInterval<t&&(this.tickInterval=t),this.dateTime||this.logarithmic||p||(this.tickInterval=D(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){var t=this.options;const e=t.tickPositions,n=t.tickPositioner;var i=this.getMinorTickInterval(),s=this.hasVerticalPanning(),r="colorAxis"===this.coll;const o=(r||!s)&&t.startOnTick;let a;if(s=(r||!s)&&t.endOnTick,r=[],this.tickmarkOffset=this.categories&&"between"===t.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===i&&this.tickInterval?this.tickInterval/t.minorTicksPerMajor:i,this.single=this.min===this.max&&m(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==t.allowDecimals),e)r=e.slice();else if(T(this.min)&&T(this.max)){if(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200)))if(this.dateTime)r=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,t.units),this.min,this.max,t.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0);else if(this.logarithmic)r=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else for(i=t=this.tickInterval;i<=2*t;){if(r=this.getLinearTickPositions(this.tickInterval,this.min,this.max),!(this.tickAmount&&r.length>this.tickAmount))break;this.tickInterval=D(this,i*=1.1)}else r=[this.min,this.max],b(19,!1,this.chart);r.length>this.len&&(r=[r[0],r[r.length-1]],r[0]===r[1]&&(r.length=1)),n&&(this.tickPositions=r,(a=n.apply(this,[this.min,this.max]))&&(r=a))}this.tickPositions=r,this.paddedTicks=r.slice(0),this.trimTicks(r,o,s),!this.isLinked&&T(this.min)&&T(this.max)&&(this.single&&2>r.length&&!this.categories&&!this.series.some((t=>t.is("heatmap")&&"between"===t.options.pointPlacement))&&(this.min-=.5,this.max+=.5),e||a||this.adjustTickAmount()),x(this,"afterSetTickPositions")}trimTicks(t,e,n){const i=t[0],s=t[t.length-1],r=!this.isOrdinal&&this.minPointOffset||0;if(x(this,"trimTicks"),!this.isLinked){if(e&&-1/0!==i)this.min=i;else for(;this.min-r>t[0];)t.shift();if(n)this.max=s;else for(;this.max+r<t[t.length-1];)t.pop();0===t.length&&m(i)&&!this.options.tickPositions&&t.push((s+i)/2)}}alignToOthers(){const t=this,e=[this],n=t.options,i="yAxis"===this.coll&&this.chart.options.chart.alignThresholds,s=[];let r;if(t.thresholdAlignment=void 0,(!1!==this.chart.options.chart.alignTicks&&n.alignTicks||i)&&!1!==n.startOnTick&&!1!==n.endOnTick&&!t.logarithmic){const n=t=>{const{horiz:e,options:n}=t;return[e?n.left:n.top,n.width,n.height,n.pane].join()},i=n(this);this.chart[this.coll].forEach((function(s){const{series:o}=s;o.length&&o.some((t=>t.visible))&&s!==t&&n(s)===i&&(r=!0,e.push(s))}))}if(r&&i){e.forEach((e=>{e=e.getThresholdAlignment(t),T(e)&&s.push(e)}));const n=1<s.length?s.reduce(((t,e)=>t+e),0)/s.length:void 0;e.forEach((t=>{t.thresholdAlignment=n}))}return r}getThresholdAlignment(t){if((!T(this.dataMin)||this!==t&&this.series.some((t=>t.isDirty||t.isDirtyData)))&&this.getSeriesExtremes(),T(this.threshold))return t=p((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1),this.options.reversed&&(t=1-t),t}getTickAmount(){const t=this.options,e=t.tickPixelInterval;let n=t.tickAmount;!m(t.tickInterval)&&!n&&this.len<e&&!this.isRadial&&!this.logarithmic&&t.startOnTick&&t.endOnTick&&(n=2),!n&&this.alignToOthers()&&(n=Math.ceil(this.len/e)+1),4>n&&(this.finalTickAmt=n,n=5),this.tickAmount=n}adjustTickAmount(){const t=this,{finalTickAmt:e,max:n,min:i,options:s,tickPositions:r,tickAmount:o,thresholdAlignment:a}=t,c=r&&r.length;var l=C(t.threshold,t.softThreshold?0:null),h=t.tickInterval;let u;if(T(a)&&(u=.5>a?Math.ceil(a*(o-1)):Math.floor(a*(o-1)),s.reversed&&(u=o-1-u)),t.hasData()&&T(i)&&T(n)){const a=()=>{t.transA*=(c-1)/(o-1),t.min=s.startOnTick?r[0]:Math.min(i,r[0]),t.max=s.endOnTick?r[r.length-1]:Math.max(n,r[r.length-1])};if(T(u)&&T(t.threshold)){for(;r[u]!==l||r.length!==o||r[0]>i||r[r.length-1]<n;){for(r.length=0,r.push(t.threshold);r.length<o;)void 0===r[u]||r[u]>t.threshold?r.unshift(g(r[0]-h)):r.push(g(r[r.length-1]+h));if(h>8*t.tickInterval)break;h*=2}a()}else if(c<o){for(;r.length<o;)r.length%2||i===l?r.push(g(r[r.length-1]+h)):r.unshift(g(r[0]-h));a()}if(m(e)){for(h=l=r.length;h--;)(3===e&&1===h%2||2>=e&&0<h&&h<l-1)&&r.splice(h,1);t.finalTickAmt=void 0}}}setScale(){let t=!1,e=!1;this.series.forEach((function(n){t=t||n.isDirtyData||n.isDirty,e=e||n.xAxis&&n.xAxis.isDirty||!1})),this.setAxisSize();const n=this.len!==(this.old&&this.old.len);n||t||e||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(this.stacking&&(this.stacking.resetStacks(),this.stacking.buildStacks()),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=n||this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max))):this.stacking&&this.stacking.cleanStacks(),t&&this.panningState&&(this.panningState.isDirty=!0),x(this,"afterSetScale")}setExtremes(t,e,n,i,s){const r=this,o=r.chart;n=C(n,!0),r.series.forEach((function(t){delete t.kdTree})),s=w(s,{min:t,max:e}),x(r,"setExtremes",s,(function(){r.userMin=t,r.userMax=e,r.eventArgs=s,n&&o.redraw(i)}))}zoom(t,e){const n=this,i=this.dataMin,s=this.dataMax,r=this.options,o=Math.min(i,C(r.min,i)),a=Math.max(s,C(r.max,s));return t={newMin:t,newMax:e},x(this,"zoom",t,(function(t){let e=t.newMin,r=t.newMax;e===n.min&&r===n.max||(n.allowZoomOutside||(m(i)&&(e<o&&(e=o),e>a&&(e=a)),m(s)&&(r<o&&(r=o),r>a&&(r=a))),n.displayBtn="undefined"!==typeof e||"undefined"!==typeof r,n.setExtremes(e,r,!1,void 0,{trigger:"zoom"})),t.zoomed=!0})),t.zoomed}setAxisSize(){const t=this.chart;var e=this.options;const n=e.offsets||[0,0,0,0],i=this.horiz,s=this.width=Math.round(A(C(e.width,t.plotWidth-n[3]+n[1]),t.plotWidth)),r=this.height=Math.round(A(C(e.height,t.plotHeight-n[0]+n[2]),t.plotHeight)),o=this.top=Math.round(A(C(e.top,t.plotTop+n[0]),t.plotHeight,t.plotTop));e=this.left=Math.round(A(C(e.left,t.plotLeft+n[3]),t.plotWidth,t.plotLeft)),this.bottom=t.chartHeight-r-o,this.right=t.chartWidth-s-e,this.len=Math.max(i?s:r,0),this.pos=i?e:o}getExtremes(){const t=this.logarithmic;return{min:t?g(t.lin2log(this.min)):this.min,max:t?g(t.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(t){var e=this.logarithmic;const n=e?e.lin2log(this.min):this.min;return e=e?e.lin2log(this.max):this.max,null===t||-1/0===t?t=n:1/0===t?t=e:n>t?t=n:e<t&&(t=e),this.translate(t,0,1,0,1)}autoLabelAlign(t){const e=(C(t,0)-90*this.side+720)%360;return t={align:"center"},x(this,"autoLabelAlign",t,(function(t){15<e&&165>e?t.align="right":195<e&&345>e&&(t.align="left")})),t.align}tickSize(t){const e=this.options,n=C(e["tick"===t?"tickWidth":"minorTickWidth"],"tick"===t&&this.isXAxis&&!this.categories?1:0);let i,s=e["tick"===t?"tickLength":"minorTickLength"];return n&&s&&("inside"===e[t+"Position"]&&(s=-s),i=[s,n]),t={tickSize:i},x(this,"afterTickSize",t),t.tickSize}labelMetrics(){const t=this.chart.renderer;var e=this.ticks;return e=e[Object.keys(e)[0]]||{},this.chart.renderer.fontMetrics(e.label||e.movedLabel||t.box)}unsquish(){const t=this.options.labels;var e=this.horiz;const n=this.tickInterval,i=this.len/(((this.categories?1:0)+this.max-this.min)/n),s=t.rotation,r=.75*this.labelMetrics().h,o=Math.max(this.max-this.min,0),a=function(t){let e=t/(i||1);return e=1<e?Math.ceil(e):1,e*n>o&&1/0!==t&&1/0!==i&&o&&(e=Math.ceil(o/n)),g(e*n)};let c,l,h=n,d=Number.MAX_VALUE;if(e){if(t.staggerLines||(T(s)?l=[s]:i<t.autoRotationLimit&&(l=t.autoRotation)),l){let t;for(const n of l)(n===s||n&&-90<=n&&90>=n)&&(e=a(Math.abs(r/Math.sin(u*n))),t=e+Math.abs(n/360),t<d&&(d=t,c=n,h=e))}}else h=a(r);return this.autoRotation=l,this.labelRotation=C(c,T(s)?s:0),t.step?n:h}getSlotWidth(t){const e=this.chart,n=this.horiz,i=this.options.labels,s=Math.max(this.tickPositions.length-(this.categories?0:1),1),r=e.margin[3];if(t&&T(t.slotWidth))return t.slotWidth;if(n&&2>i.step)return i.rotation?0:(this.staggerLines||1)*this.len/s;if(!n){if(t=i.style.width,void 0!==t)return parseInt(String(t),10);if(r)return r-e.spacing[3]}return.33*e.chartWidth}renderUnsquish(){const t=this.chart,e=t.renderer,n=this.tickPositions,i=this.ticks,s=this.options.labels,r=s.style,o=this.horiz,a=this.getSlotWidth();var c=Math.max(1,Math.round(a-2*s.padding));const l={},h=this.labelMetrics(),u=r.textOverflow;let d,f,p=0;if(S(s.rotation)||(l.rotation=s.rotation||0),n.forEach((function(t){t=i[t],t.movedLabel&&t.replaceMovedLabel(),t&&t.label&&t.label.textPxLength>p&&(p=t.label.textPxLength)})),this.maxLabelLength=p,this.autoRotation)p>c&&p>h.h?l.rotation=this.labelRotation:this.labelRotation=0;else if(a&&(d=c,!u))for(f="clip",c=n.length;!o&&c--;){var g=n[c];(g=i[g].label)&&(g.styles&&"ellipsis"===g.styles.textOverflow?g.css({textOverflow:"clip"}):g.textPxLength>a&&g.css({width:a+"px"}),g.getBBox().height>this.len/n.length-(h.h-h.f)&&(g.specificTextOverflow="ellipsis"))}l.rotation&&(d=p>.5*t.chartHeight?.33*t.chartHeight:p,u||(f="ellipsis")),(this.labelAlign=s.align||this.autoLabelAlign(this.labelRotation))&&(l.align=this.labelAlign),n.forEach((function(t){const e=(t=i[t])&&t.label,n=r.width,s={};e&&(e.attr(l),t.shortenLabel?t.shortenLabel():d&&!n&&"nowrap"!==r.whiteSpace&&(d<e.textPxLength||"SPAN"===e.element.tagName)?(s.width=d+"px",u||(s.textOverflow=e.specificTextOverflow||f),e.css(s)):e.styles&&e.styles.width&&!s.width&&!n&&e.css({width:null}),delete e.specificTextOverflow,t.rotation=l.rotation)}),this),this.tickRotCorr=e.rotCorr(h.b,this.labelRotation||0,0!==this.side)}hasData(){return this.series.some((function(t){return t.hasData()}))||this.options.showEmpty&&m(this.min)&&m(this.max)}addTitle(t){const e=this.chart.renderer,n=this.horiz,i=this.opposite,s=this.options.title,r=this.chart.styledMode;let o;this.axisTitle||((o=s.textAlign)||(o=(n?{low:"left",middle:"center",high:"right"}:{low:i?"right":"left",middle:"center",high:i?"left":"right"})[s.align]),this.axisTitle=e.text(s.text||"",0,0,s.useHTML).attr({zIndex:7,rotation:s.rotation,align:o}).addClass("highcharts-axis-title"),r||this.axisTitle.css(I(s.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),r||s.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[t?"show":"hide"](t)}generateTick(t){const e=this.ticks;e[t]?e[t].addLabel():e[t]=new o(this,t)}getOffset(){const t=this,{chart:e,horiz:n,options:i,side:s,ticks:r,tickPositions:o,coll:a,axisParent:c}=t,l=e.renderer,h=e.inverted&&!t.isZAxis?[1,0,3,2][s]:s;var u=t.hasData();const d=i.title;var f=i.labels;const p=T(i.crossing);var g=e.axisOffset;const y=e.clipOffset,v=[-1,1,1,-1][s],b=i.className;let w,_,S=0;var I=0;let k=0;if(t.showAxis=w=u||i.showEmpty,t.staggerLines=t.horiz&&f.staggerLines||void 0,!t.axisGroup){const e=(t,e,n)=>l.g(t).attr({zIndex:n}).addClass(`highcharts-${a.toLowerCase()}${e} `+(this.isRadial?`highcharts-radial-axis${e} `:"")+(b||"")).add(c);t.gridGroup=e("grid","-grid",i.gridZIndex),t.axisGroup=e("axis","",i.zIndex),t.labelGroup=e("axis-labels","-labels",f.zIndex)}u||t.isLinked?(o.forEach((function(e){t.generateTick(e)})),t.renderUnsquish(),t.reserveSpaceDefault=0===s||2===s||{1:"left",3:"right"}[s]===t.labelAlign,C(f.reserveSpace,!p&&null,"center"===t.labelAlign||null,t.reserveSpaceDefault)&&o.forEach((function(t){k=Math.max(r[t].getLabelSize(),k)})),t.staggerLines&&(k*=t.staggerLines),t.labelOffset=k*(t.opposite?-1:1)):E(r,(function(t,e){t.destroy(),delete r[e]})),d&&d.text&&!1!==d.enabled&&(t.addTitle(w),w&&!p&&!1!==d.reserveSpace&&(t.titleOffset=S=t.axisTitle.getBBox()[n?"height":"width"],_=d.offset,I=m(_)?0:C(d.margin,n?5:10))),t.renderLine(),t.offset=v*C(i.offset,g[s]?g[s]+(i.margin||0):0),t.tickRotCorr=t.tickRotCorr||{x:0,y:0},u=0===s?-t.labelMetrics().h:2===s?t.tickRotCorr.y:0,I=Math.abs(k)+I,k&&(I=I-u+v*(n?C(f.y,t.tickRotCorr.y+v*f.distance):C(f.x,v*f.distance))),t.axisTitleMargin=C(_,I),t.getMaxLabelDimensions&&(t.maxLabelDimensions=t.getMaxLabelDimensions(r,o)),"colorAxis"!==a&&(f=this.tickSize("tick"),g[s]=Math.max(g[s],(t.axisTitleMargin||0)+S+v*t.offset,I,o&&o.length&&f?f[0]+v*t.offset:0),g=!t.axisLine||i.offset?0:2*Math.floor(t.axisLine.strokeWidth()/2),y[h]=Math.max(y[h],g)),x(this,"afterGetOffset")}getLinePath(t){const e=this.chart,n=this.opposite;var i=this.offset;const s=this.horiz,r=this.left+(n?this.width:0)+i;return i=e.chartHeight-this.bottom-(n?this.height:0)+i,n&&(t*=-1),e.renderer.crispLine([["M",s?this.left:r,s?i:this.top],["L",s?e.chartWidth-this.right:r,s?i:e.chartHeight-this.bottom]],t)}renderLine(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(t){var e=this.horiz,n=this.left;const i=this.top;var s=this.len;const r=this.options.title,o=e?n:i,a=this.opposite,c=this.offset,l=r.x,h=r.y,u=this.chart.renderer.fontMetrics(t);return t=t?Math.max(t.getBBox(!1,0).height-u.h-1,0):0,s={low:o+(e?0:s),middle:o+s/2,high:o+(e?s:0)}[r.align],n=(e?i+this.height:n)+(e?1:-1)*(a?-1:1)*(this.axisTitleMargin||0)+[-t,t,u.f,-t][this.side],e={x:e?s+l:n+(a?this.width:0)+c+l,y:e?n+h-(a?this.height:0)+c:s+h},x(this,"afterGetTitlePosition",{titlePosition:e}),e}renderMinorTick(t,e){const n=this.minorTicks;n[t]||(n[t]=new o(this,t,"minor")),e&&n[t].isNew&&n[t].render(null,!0),n[t].render(null,!1,1)}renderTick(t,e,n){const i=this.ticks;(!this.isLinked||t>=this.min&&t<=this.max||this.grid&&this.grid.isColumn)&&(i[t]||(i[t]=new o(this,t)),n&&i[t].isNew&&i[t].render(e,!0,-1),i[t].render(e))}render(){const t=this,e=t.chart,n=t.logarithmic,i=t.options,s=t.isLinked,a=t.tickPositions,l=t.axisTitle,h=t.ticks,u=t.minorTicks,d=t.alternateBands,f=i.stackLabels,p=i.alternateGridColor,g=i.crossing,m=t.tickmarkOffset,y=t.axisLine,v=t.showAxis,b=c(e.renderer.globalAnimation);let w,_;if(t.labelEdge.length=0,t.overlap=!1,[h,u,d].forEach((function(t){E(t,(function(t){t.isActive=!1}))})),T(g)){const t=this.isXAxis?e.yAxis[0]:e.xAxis[0],n=[1,-1,-1,1][this.side];t&&(this.offset=n*t.toPixels(g,!0))}if(t.hasData()||s){const s=t.chart.hasRendered&&t.old&&T(t.old.min);t.minorTickInterval&&!t.categories&&t.getMinorTickPositions().forEach((function(e){t.renderMinorTick(e,s)})),a.length&&(a.forEach((function(e,n){t.renderTick(e,n,s)})),m&&(0===t.min||t.single)&&(h[-1]||(h[-1]=new o(t,-1,null,!0)),h[-1].render(-1))),p&&a.forEach((function(i,s){_="undefined"!==typeof a[s+1]?a[s+1]+m:t.max-m,0===s%2&&i<t.max&&_<=t.max+(e.polar?-m:m)&&(d[i]||(d[i]=new r.PlotLineOrBand(t)),w=i+m,d[i].options={from:n?n.lin2log(w):w,to:n?n.lin2log(_):_,color:p,className:"highcharts-alternate-grid"},d[i].render(),d[i].isActive=!0)})),t._addedPlotLB||(t._addedPlotLB=!0,(i.plotLines||[]).concat(i.plotBands||[]).forEach((function(e){t.addPlotBandOrLine(e)})))}[h,u,d].forEach((function(t){const n=[],i=b.duration;E(t,(function(t,e){t.isActive||(t.render(e,!1,0),t.isActive=!1,n.push(e))})),M((function(){let e=n.length;for(;e--;)t[n[e]]&&!t[n[e]].isActive&&(t[n[e]].destroy(),delete t[n[e]])}),t!==d&&e.hasRendered&&i?i:0)})),y&&(y[y.isPlaced?"animate":"attr"]({d:this.getLinePath(y.strokeWidth())}),y.isPlaced=!0,y[v?"show":"hide"](v)),l&&v&&(l[l.isNew?"attr":"animate"](t.getTitlePosition(l)),l.isNew=!1),f&&f.enabled&&t.stacking&&t.stacking.renderStackTotals(),t.old={len:t.len,max:t.max,min:t.min,transA:t.transA,userMax:t.userMax,userMin:t.userMin},t.isDirty=!1,x(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(t){t.render()}))),this.series.forEach((function(t){t.isDirty=!0}))}getKeepProps(){return this.keepProps||L.keepProps}destroy(t){const e=this,n=e.plotLinesAndBands,i=this.eventOptions;if(x(this,"destroy",{keepEvents:t}),t||O(e),[e.ticks,e.minorTicks,e.alternateBands].forEach((function(t){y(t)})),n)for(t=n.length;t--;)n[t].destroy();"axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach((function(t){e[t]&&(e[t]=e[t].destroy())}));for(const s in e.plotLinesAndBandsGroups)e.plotLinesAndBandsGroups[s]=e.plotLinesAndBandsGroups[s].destroy();E(e,(function(t,n){-1===e.getKeepProps().indexOf(n)&&delete e[n]})),this.eventOptions=i}drawCrosshair(t,e){const i=this.crosshair;var s=C(i&&i.snap,!0);const r=this.chart;let o,a=this.cross;if(x(this,"drawCrosshair",{e:t,point:e}),t||(t=this.cross&&this.cross.e),i&&!1!==(m(e)||!s)){if(s?m(e)&&(o=C("colorAxis"!==this.coll?e.crosshairPos:null,this.isXAxis?e.plotX:this.len-e.plotY)):o=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),m(o)){var c={value:e&&(this.isXAxis?e.x:C(e.stackY,e.y)),translatedValue:o};r.polar&&w(c,{isCrosshair:!0,chartX:t&&t.chartX,chartY:t&&t.chartY,point:e}),c=this.getPlotLinePath(c)||null}if(!m(c))return void this.hideCrosshair();s=this.categories&&!this.isRadial,a||(this.cross=a=r.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(s?"category ":"thin ")+(i.className||"")).attr({zIndex:C(i.zIndex,2)}).add(),r.styledMode||(a.attr({stroke:i.color||(s?n.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":C(i.width,1)}).css({"pointer-events":"none"}),i.dashStyle&&a.attr({dashstyle:i.dashStyle}))),a.show().attr({d:c}),s&&!i.width&&a.attr({"stroke-width":this.transA}),this.cross.e=t}else this.hideCrosshair();x(this,"afterDrawCrosshair",{e:t,point:e})}hideCrosshair(){this.cross&&this.cross.hide(),x(this,"afterHideCrosshair")}hasVerticalPanning(){const t=this.chart.options.chart.panning;return!!(t&&t.enabled&&/y/.test(t.type))}update(t,e){const n=this.chart;t=I(this.userOptions,t),this.destroy(!0),this.init(n,t),n.isDirtyBox=!0,C(e,!0)&&n.redraw()}remove(t){const e=this.chart,n=this.coll,i=this.series;let s=i.length;for(;s--;)i[s]&&i[s].remove(!1);v(e.axes,this),v(e[n],this),e[n].forEach((function(t,e){t.options.index=t.userOptions.index=e})),this.destroy(),e.isDirtyBox=!0,C(t,!0)&&e.redraw()}setTitle(t,e){this.update({title:t},e)}setCategories(t,e){this.update({categories:t},e)}}return L.defaultOptions=e.defaultXAxisOptions,L.keepProps="extKey hcEvents names series userMax userMin".split(" "),L})),e(n,"Core/Axis/DateTimeAxis.js",[n["Core/Utilities.js"]],(function(t){const{addEvent:e,getMagnitude:n,normalizeTickInterval:i,timeUnits:s}=t;var r;return function(r){function o(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function a(t){"datetime"!==t.userOptions.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new l(this))}const c=[];r.compose=function(n){return t.pushUnique(c,n)&&(n.keepProps.push("dateTime"),n.prototype.getTimeTicks=o,e(n,"init",a)),n};class l{constructor(t){this.axis=t}normalizeTimeTickInterval(t,e){const r=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];e=r[r.length-1];let o,a=s[e[0]],c=e[1];for(o=0;o<r.length&&(e=r[o],a=s[e[0]],c=e[1],!(r[o+1]&&t<=(a*c[c.length-1]+s[r[o+1][0]])/2));o++);return a===s.year&&t<5*a&&(c=[1,2,5]),t=i(t/a,c,"year"===e[0]?Math.max(n(t/a),1):1),{unitRange:a,count:t,unitName:e[0]}}getXDateFormat(t,e){const{axis:n}=this,i=n.chart.time;return n.closestPointRange?i.getDateFormat(n.closestPointRange,t,n.options.startOfWeek,e)||i.resolveDTLFormat(e.year).main:i.resolveDTLFormat(e.day).main}}r.Additions=l}(r||(r={})),r})),e(n,"Core/Axis/LogarithmicAxis.js",[n["Core/Utilities.js"]],(function(t){const{addEvent:e,normalizeTickInterval:n,pick:i}=t;var s;return function(s){function r(t){let e=this.logarithmic;"logarithmic"!==t.userOptions.type?this.logarithmic=void 0:e||(this.logarithmic=new c(this))}function o(){const t=this.logarithmic;t&&(this.lin2val=function(e){return t.lin2log(e)},this.val2lin=function(e){return t.log2lin(e)})}const a=[];s.compose=function(n){return t.pushUnique(a,n)&&(n.keepProps.push("logarithmic"),e(n,"init",r),e(n,"afterInit",o)),n};class c{constructor(t){this.axis=t}getLogTickPositions(t,e,s,r){const o=this.axis;var a=o.len,c=o.options;let l=[];if(r||(this.minorAutoInterval=void 0),.5<=t)t=Math.round(t),l=o.getLinearTickPositions(t,e,s);else if(.08<=t){let n,i,o,h,u;for(c=Math.floor(e),a=.3<t?[1,2,4]:.15<t?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];c<s+1&&!u;c++)for(i=a.length,n=0;n<i&&!u;n++)o=this.log2lin(this.lin2log(c)*a[n]),o>e&&(!r||h<=s)&&"undefined"!==typeof h&&l.push(h),h>s&&(u=!0),h=o}else e=this.lin2log(e),s=this.lin2log(s),t=r?o.getMinorTickInterval():c.tickInterval,t=i("auto"===t?null:t,this.minorAutoInterval,c.tickPixelInterval/(r?5:1)*(s-e)/((r?a/o.tickPositions.length:a)||1)),t=n(t),l=o.getLinearTickPositions(t,e,s).map(this.log2lin),r||(this.minorAutoInterval=t/5);return r||(o.tickInterval=t),l}lin2log(t){return Math.pow(10,t)}log2lin(t){return Math.log(t)/Math.LN10}}s.Additions=c}(s||(s={})),s})),e(n,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[n["Core/Utilities.js"]],(function(t){const{erase:e,extend:n,isNumber:i}=t;var s;return function(s){function r(t){return this.addPlotBandOrLine(t,"plotBands")}function o(t,e){const n=this.userOptions;let i=new f(this,t);if(this.visible&&(i=i.render()),i){if(this._addedPlotLB||(this._addedPlotLB=!0,(n.plotLines||[]).concat(n.plotBands||[]).forEach((t=>{this.addPlotBandOrLine(t)}))),e){const i=n[e]||[];i.push(t),n[e]=i}this.plotLinesAndBands.push(i)}return i}function a(t){return this.addPlotBandOrLine(t,"plotLines")}function c(t,e,n=this.options){const s=this.getPlotLinePath({value:e,force:!0,acrossPanes:n.acrossPanes}),r=[],o=this.horiz;let a;if(e=!i(this.min)||!i(this.max)||t<this.min&&e<this.min||t>this.max&&e>this.max,t=this.getPlotLinePath({value:t,force:!0,acrossPanes:n.acrossPanes}),n=1,t&&s)for(e&&(a=t.toString()===s.toString(),n=0),e=0;e<t.length;e+=2){const i=t[e],c=t[e+1],l=s[e],h=s[e+1];"M"!==i[0]&&"L"!==i[0]||"M"!==c[0]&&"L"!==c[0]||"M"!==l[0]&&"L"!==l[0]||"M"!==h[0]&&"L"!==h[0]||(o&&l[1]===i[1]?(l[1]+=n,h[1]+=n):o||l[2]!==i[2]||(l[2]+=n,h[2]+=n),r.push(["M",i[1],i[2]],["L",c[1],c[2]],["L",h[1],h[2]],["L",l[1],l[2]],["Z"])),r.isFlat=a}return r}function l(t){this.removePlotBandOrLine(t)}function h(t){const n=this.plotLinesAndBands,i=this.options,s=this.userOptions;if(n){let r=n.length;for(;r--;)n[r].id===t&&n[r].destroy();[i.plotLines||[],s.plotLines||[],i.plotBands||[],s.plotBands||[]].forEach((function(n){for(r=n.length;r--;)(n[r]||{}).id===t&&e(n,n[r])}))}}function u(t){this.removePlotBandOrLine(t)}const d=[];let f;s.compose=function(e,i){return f||(f=e),t.pushUnique(d,i)&&n(i.prototype,{addPlotBand:r,addPlotLine:a,addPlotBandOrLine:o,getPlotBandPath:c,removePlotBand:l,removePlotLine:u,removePlotBandOrLine:h}),i}}(s||(s={})),s})),e(n,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[n["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],n["Core/Utilities.js"]],(function(t,e){const{arrayMax:n,arrayMin:i,defined:s,destroyObjectProperties:r,erase:o,fireEvent:a,merge:c,objectEach:l,pick:h}=e;class u{static compose(e){return t.compose(u,e)}constructor(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)}render(){a(this,"render");const t=this,e=t.axis,n=e.horiz;var i=e.logarithmic;const r=t.options,o=r.color,u=h(r.zIndex,0),d=r.events,f={},p=e.chart.renderer;let g=r.label,m=t.label,y=r.to,v=r.from,b=r.value,w=t.svgElem;var x=[];const _=s(v)&&s(y);x=s(b);const T=!w,S={class:"highcharts-plot-"+(_?"band ":"line ")+(r.className||"")};let I=_?"bands":"lines";if(i&&(v=i.log2lin(v),y=i.log2lin(y),b=i.log2lin(b)),e.chart.styledMode||(x?(S.stroke=o||"#999999",S["stroke-width"]=h(r.width,1),r.dashStyle&&(S.dashstyle=r.dashStyle)):_&&(S.fill=o||"#e6e9ff",r.borderWidth&&(S.stroke=r.borderColor,S["stroke-width"]=r.borderWidth))),f.zIndex=u,I+="-"+u,(i=e.plotLinesAndBandsGroups[I])||(e.plotLinesAndBandsGroups[I]=i=p.g("plot-"+I).attr(f).add()),T&&(t.svgElem=w=p.path().attr(S).add(i)),x)x=e.getPlotLinePath({value:b,lineWidth:w.strokeWidth(),acrossPanes:r.acrossPanes});else{if(!_)return;x=e.getPlotBandPath(v,y,r)}return!t.eventsAdded&&d&&(l(d,(function(e,n){w.on(n,(function(e){d[n].apply(t,[e])}))})),t.eventsAdded=!0),(T||!w.d)&&x&&x.length?w.attr({d:x}):w&&(x?(w.show(),w.animate({d:x})):w.d&&(w.hide(),m&&(t.label=m=m.destroy()))),g&&(s(g.text)||s(g.formatter))&&x&&x.length&&0<e.width&&0<e.height&&!x.isFlat?(g=c({align:n&&_&&"center",x:n?!_&&4:10,verticalAlign:!n&&_&&"middle",y:n?_?16:10:_?6:-4,rotation:n&&!_&&90},g),this.renderLabel(g,x,_,u)):m&&m.hide(),t}renderLabel(t,e,s,r){const o=this.axis;var a=o.chart.renderer;let l=this.label;l||(this.label=l=a.text(this.getLabelText(t),0,0,t.useHTML).attr({align:t.textAlign||t.align,rotation:t.rotation,class:"highcharts-plot-"+(s?"band":"line")+"-label "+(t.className||""),zIndex:r}).add(),o.chart.styledMode||l.css(c({fontSize:"0.8em",textOverflow:"ellipsis"},t.style))),r=e.xBounds||[e[0][1],e[1][1],s?e[2][1]:e[0][1]],e=e.yBounds||[e[0][2],e[1][2],s?e[2][2]:e[0][2]],s=i(r),a=i(e),l.align(t,!1,{x:s,y:a,width:n(r)-s,height:n(e)-a}),l.alignValue&&"left"!==l.alignValue||(t=t.clip?o.width:o.chart.chartWidth,l.css({width:(90===l.rotation?o.height-(l.alignAttr.y-o.top):t-(l.alignAttr.x-o.left))+"px"})),l.show(!0)}getLabelText(t){return s(t.formatter)?t.formatter.call(this):t.text}destroy(){o(this.axis.plotLinesAndBands,this),delete this.axis,r(this)}}return u})),e(n,"Core/Tooltip.js",[n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s){const{format:r}=t,{doc:o,isSafari:a}=e,{distribute:c}=n,{addEvent:l,clamp:h,css:u,discardElement:d,extend:f,fireEvent:p,isArray:g,isNumber:m,isString:y,merge:v,pick:b,splat:w,syncTimeout:x}=s;class _{constructor(t,e){this.allowShared=!0,this.container=void 0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.now={},this.options={},this.outside=!1,this.chart=t,this.init(t,e)}bodyFormatter(t){return t.map((function(t){const e=t.series.tooltipOptions;return(e[(t.point.formatPrefix||"point")+"Formatter"]||t.point.tooltipFormatter).call(t.point,e[(t.point.formatPrefix||"point")+"Format"]||"")}))}cleanSplit(t){this.chart.series.forEach((function(e){const n=e&&e.tt;n&&(!n.isActive||t?e.tt=n.destroy():n.isActive=!1)}))}defaultFormatter(t){const e=this.points||w(this);let n;return n=[t.tooltipFooterHeaderFormatter(e[0])],n=n.concat(t.bodyFormatter(e)),n.push(t.tooltipFooterHeaderFormatter(e[0],!0)),n}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),d(this.container)),s.clearTimeout(this.hideTimer),s.clearTimeout(this.tooltipTimeout)}getAnchor(t,e){var n=this.chart;const i=n.pointer,s=n.inverted,r=n.plotTop;if(n=n.plotLeft,t=w(t),t[0].series&&t[0].series.yAxis&&!t[0].series.yAxis.options.reversedStacks&&(t=t.slice().reverse()),this.followPointer&&e)"undefined"===typeof e.chartX&&(e=i.normalize(e)),t=[e.chartX-n,e.chartY-r];else if(t[0].tooltipPos)t=t[0].tooltipPos;else{let i=0,o=0;t.forEach((function(t){(t=t.pos(!0))&&(i+=t[0],o+=t[1])})),i/=t.length,o/=t.length,this.shared&&1<t.length&&e&&(s?i=e.chartX:o=e.chartY),t=[i-n,o-r]}return t.map(Math.round)}getClassName(t,e,n){const i=t.series,s=i.options;return[this.options.className,"highcharts-label",n&&"highcharts-tooltip-header",e?"highcharts-tooltip-box":"highcharts-tooltip",!n&&"highcharts-color-"+b(t.colorIndex,i.colorIndex),s&&s.className].filter(y).join(" ")}getLabel(){const t=this,n=this.chart.styledMode,s=this.options,r=this.split&&this.allowShared,o=s.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none");let a,c=this.chart.renderer;if(this.label){var l=!this.label.hasClass("highcharts-label");(!r&&l||r&&!l)&&this.destroy()}if(!this.label){if(this.outside){l=this.chart.options.chart.style;const t=i.getRendererType();this.container=a=e.doc.createElement("div"),a.className="highcharts-tooltip-container",u(a,{position:"absolute",top:"1px",pointerEvents:o,zIndex:Math.max(this.options.style.zIndex||0,(l&&l.zIndex||0)+3)}),e.doc.body.appendChild(a),this.renderer=c=new t(a,0,0,l,void 0,void 0,c.styledMode)}if(r?this.label=c.g("tooltip"):(this.label=c.label("",0,0,s.shape,void 0,void 0,s.useHTML,void 0,"tooltip").attr({padding:s.padding,r:s.borderRadius}),n||this.label.attr({fill:s.backgroundColor,"stroke-width":s.borderWidth||0}).css(s.style).css({pointerEvents:o})),t.outside){const e=this.label,{xSetter:n,ySetter:i}=e;e.xSetter=function(i){n.call(e,t.distance),a.style.left=i+"px"},e.ySetter=function(n){i.call(e,t.distance),a.style.top=n+"px"}}this.label.attr({zIndex:8}).shadow(s.shadow).add()}return this.label}getPlayingField(){const{body:t,documentElement:e}=o,{chart:n,distance:i,outside:s}=this;return{width:s?Math.max(t.scrollWidth,e.scrollWidth,t.offsetWidth,e.offsetWidth,e.clientWidth)-2*i:n.chartWidth,height:s?Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,e.clientHeight):n.chartHeight}}getPosition(t,e,n){const i=this.chart,s=this.distance,r={},o=i.inverted&&n.h||0,a=this.outside;var c=this.getPlayingField();const l=c.width,h=c.height,u=i.pointer.getChartPosition();c=r=>{const o="x"===r;return[r,o?l:h,o?t:e].concat(a?[o?t*u.scaleX:e*u.scaleY,o?u.left-s+(n.plotX+i.plotLeft)*u.scaleX:u.top-s+(n.plotY+i.plotTop)*u.scaleY,0,o?l:h]:[o?t:e,o?n.plotX+i.plotLeft:n.plotY+i.plotTop,o?i.plotLeft:i.plotTop,o?i.plotLeft+i.plotWidth:i.plotTop+i.plotHeight])};let d,f=c("y"),p=c("x");c=!!n.negative,!i.polar&&i.hoverSeries&&i.hoverSeries.yAxis&&i.hoverSeries.yAxis.reversed&&(c=!c);const g=!this.followPointer&&b(n.ttBelow,!i.inverted===c),m=function(t,e,n,i,c,l,h){const d=a?"y"===t?s*u.scaleY:s*u.scaleX:s,f=(n-i)/2,p=i<c-s,m=c+s+i<e,y=c-d-n+f;if(c=c+d-f,g&&m)r[t]=c;else if(!g&&p)r[t]=y;else if(p)r[t]=Math.min(h-i,0>y-o?y:y-o);else{if(!m)return!1;r[t]=Math.max(l,c+o+n>e?c:c+o)}},y=function(t,e,n,i,o){let a;return o<s||o>e-s?a=!1:r[t]=o<n/2?1:o>e-i/2?e-i-2:o-n/2,a},v=function(t){const e=f;f=p,p=e,d=t},w=function(){!1!==m.apply(0,f)?!1!==y.apply(0,p)||d||(v(!0),w()):d?r.x=r.y=0:(v(!0),w())};return(i.inverted||1<this.len)&&v(),w(),r}hide(t){const e=this;s.clearTimeout(this.hideTimer),t=b(t,this.options.hideDelay),this.isHidden||(this.hideTimer=x((function(){e.getLabel().fadeOut(t?void 0:t),e.isHidden=!0}),t))}init(t,e){this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=e.split&&!t.inverted&&!t.polar,this.shared=e.shared||this.split,this.outside=b(e.outside,!(!t.scrollablePixelsX&&!t.scrollablePixelsY))}shouldStickOnContact(t){return!(this.followPointer||!this.options.stickOnContact||t&&!this.chart.pointer.inClass(t.target,"highcharts-tooltip"))}move(t,e,n,i){const r=this,o=r.now,a=!1!==r.options.animation&&!r.isHidden&&(1<Math.abs(t-o.x)||1<Math.abs(e-o.y)),c=r.followPointer||1<r.len;f(o,{x:a?(2*o.x+t)/3:t,y:a?(o.y+e)/2:e,anchorX:c?void 0:a?(2*o.anchorX+n)/3:n,anchorY:c?void 0:a?(o.anchorY+i)/2:i}),r.getLabel().attr(o),r.drawTracker(),a&&(s.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((function(){r&&r.move(t,e,n,i)}),32))}refresh(t,e){const n=this.chart,i=this.options,r=n.pointer,o=w(t),a=o[0],c=[];var l=i.formatter||this.defaultFormatter,h=this.shared;const u=n.styledMode;let d={};if(i.enabled&&a.series){s.clearTimeout(this.hideTimer),this.allowShared=!(!g(t)&&t.series&&t.series.noSharedTooltip),this.followPointer=!this.split&&a.series.tooltipOptions.followPointer,t=this.getAnchor(t,e);var f=t[0],m=t[1];if(h&&this.allowShared?(r.applyInactiveState(o),o.forEach((function(t){t.setState("hover"),c.push(t.getLabelConfig())})),d={x:a.category,y:a.y},d.points=c):d=a.getLabelConfig(),this.len=c.length,l=l.call(d,this),h=a.series,this.distance=b(h.tooltipOptions.distance,16),!1===l)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(l,o);else{let s=f,c=m;if(e&&r.isDirectTouch&&(s=e.chartX-n.plotLeft,c=e.chartY-n.plotTop),!n.polar&&!1!==h.options.clip&&!o.some((t=>r.isDirectTouch||t.series.shouldShowTooltip(s,c))))return void this.hide();e=this.getLabel(),i.style.width&&!u||e.css({width:(this.outside?this.getPlayingField():n.spacingBox).width+"px"}),e.attr({text:l&&l.join?l.join(""):l}),e.addClass(this.getClassName(a),!0),u||e.attr({stroke:i.borderColor||a.color||h.color||"#666666"}),this.updatePosition({plotX:f,plotY:m,negative:a.negative,ttBelow:a.ttBelow,h:t[2]||0})}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}p(this,"refresh")}}renderSplit(t,e){function n(t,e,n,s,r=!0){return n?(e=A?0:L,t=h(t-s/2,k.left,k.right-s-(i.outside?O:0))):(e-=M,t=r?t-s-T:t+T,t=h(t,r?t:k.left,k.right)),{x:t,y:e}}const i=this,{chart:s,chart:{chartWidth:r,chartHeight:l,plotHeight:u,plotLeft:d,plotTop:p,pointer:g,scrollablePixelsY:m=0,scrollablePixelsX:v,scrollingContainer:{scrollLeft:w,scrollTop:x}={scrollLeft:0,scrollTop:0},styledMode:_},distance:T,options:S,options:{positioner:I}}=i,k=i.outside&&"number"!==typeof v?o.documentElement.getBoundingClientRect():{left:w,right:w+r,top:x,bottom:x+l},E=i.getLabel(),C=this.renderer||s.renderer,A=!(!s.xAxis[0]||!s.xAxis[0].opposite),{left:O,top:P}=g.getChartPosition();let M=p+x,D=0,L=u-m;y(t)&&(t=[!1,t]),t=t.slice(0,e.length+1).reduce((function(t,s,r){if(!1!==s&&""!==s){r=e[r-1]||{isHeader:!0,plotX:e[0].plotX,plotY:u,series:{}};const g=r.isHeader;var o,a=g?i:r.series;{var c=r;s=s.toString();var l=a.tt;const{isHeader:t,series:e}=c;l||(l={padding:S.padding,r:S.borderRadius},_||(l.fill=S.backgroundColor,l["stroke-width"]=null!==(o=S.borderWidth)&&void 0!==o?o:1),l=C.label("",0,0,S[t?"headerShape":"shape"],void 0,void 0,S.useHTML).addClass(i.getClassName(c,!0,t)).attr(l).add(E)),l.isActive=!0,l.attr({text:s}),_||l.css(S.style).attr({stroke:S.borderColor||c.color||e.color||"#333333"}),o=l}o=a.tt=o,c=o.getBBox(),a=c.width+o.strokeWidth(),g&&(D=c.height,L+=D,A&&(M-=D));{const{isHeader:t,plotX:e=0,plotY:n=0,series:i}=r;if(t){s=d+e;var f=p+u/2}else{const{xAxis:t,yAxis:r}=i;s=t.pos+h(e,-T,t.len+T),i.shouldShowTooltip(0,r.pos-p+n,{ignoreX:!0})&&(f=r.pos+n)}s=h(s,k.left-T,k.right+T),f={anchorX:s,anchorY:f}}const{anchorX:m,anchorY:y}=f;"number"===typeof y?(f=c.height+1,c=I?I.call(i,a,f,r):n(m,y,g,a),t.push({align:I?0:void 0,anchorX:m,anchorY:y,boxWidth:a,point:r,rank:b(c.rank,g?1:0),size:f,target:c.y,tt:o,x:c.x})):o.isActive=!1}return t}),[]),!I&&t.some((t=>{var{outside:e}=i;return e=(e?O:0)+t.anchorX,e<k.left&&e+t.boxWidth<k.right||e<O-k.left+t.boxWidth&&k.right-e>e}))&&(t=t.map((t=>{const{x:e,y:i}=n(t.anchorX,t.anchorY,t.point.isHeader,t.boxWidth,!1);return f(t,{target:i,x:e})}))),i.cleanSplit(),c(t,L);var N=O,R=O;t.forEach((function(t){const{x:e,boxWidth:n,isHeader:s}=t;s||(i.outside&&O+e<N&&(N=O+e),!s&&i.outside&&N+n>R&&(R=O+e))})),t.forEach((function(t){const{x:e,anchorX:n,anchorY:s,pos:r,point:{isHeader:o}}=t,a={visibility:"undefined"===typeof r?"hidden":"inherit",x:e,y:(r||0)+M,anchorX:n,anchorY:s};if(i.outside&&e<n){const t=O-N;0<t&&(o||(a.x=e+t,a.anchorX=n+t),o&&(a.x=(R-N)/2,a.anchorX=n+t))}t.tt.attr(a)}));const{container:F,outside:j,renderer:B}=i;if(j&&F&&B){const{width:t,height:e,x:n,y:i}=E.getBBox();B.setSize(t+n,e+i,!1),F.style.left=N+"px",F.style.top=P+"px"}a&&E.attr({opacity:1===E.opacity?.999:1})}drawTracker(){if(this.shouldStickOnContact()){var t=this.chart,e=this.label,n=this.shared?t.hoverPoints:t.hoverPoint;if(e&&n){var i={x:0,y:0,width:0,height:0};n=this.getAnchor(n);var s=e.getBBox();n[0]+=t.plotLeft-e.translateX,n[1]+=t.plotTop-e.translateY,i.x=Math.min(0,n[0]),i.y=Math.min(0,n[1]),i.width=0>n[0]?Math.max(Math.abs(n[0]),s.width-n[0]):Math.max(Math.abs(n[0]),s.width),i.height=0>n[1]?Math.max(Math.abs(n[1]),s.height-Math.abs(n[1])):Math.max(Math.abs(n[1]),s.height),this.tracker?this.tracker.attr(i):(this.tracker=e.renderer.rect(i).addClass("highcharts-tracker").add(e),t.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}}else this.tracker&&(this.tracker=this.tracker.destroy())}styledModeFormat(t){return t.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}tooltipFooterHeaderFormatter(t,e){const n=t.series,i=n.tooltipOptions;var s=n.xAxis;const o=s&&s.dateTime;s={isFooter:e,labelConfig:t};let a=i.xDateFormat,c=i[e?"footerFormat":"headerFormat"];return p(this,"headerFormatter",s,(function(e){o&&!a&&m(t.key)&&(a=o.getXDateFormat(t.key,i.dateTimeLabelFormats)),o&&a&&(t.point&&t.point.tooltipDateKeys||["key"]).forEach((function(t){c=c.replace("{point."+t+"}","{point."+t+":"+a+"}")})),n.chart.styledMode&&(c=this.styledModeFormat(c)),e.text=r(c,{point:t,series:n},this.chart)})),s.text}update(t){this.destroy(),v(!0,this.chart.options.tooltip.userOptions,t),this.init(this.chart,v(!0,this.options,t))}updatePosition(t){const{chart:e,distance:n,options:i}=this;var s=e.pointer;const r=this.getLabel(),{left:o,top:a,scaleX:c,scaleY:l}=s.getChartPosition();s=(i.positioner||this.getPosition).call(this,r.width,r.height,t);let h,d=(t.plotX||0)+e.plotLeft;t=(t.plotY||0)+e.plotTop,this.outside&&(i.positioner&&(s.x+=o-n,s.y+=a-n),h=(i.borderWidth||0)+2*n,this.renderer.setSize(r.width+h,r.height+h,!1),1===c&&1===l||(u(this.container,{transform:`scale(${c}, ${l})`}),d*=c,t*=l),d+=o-s.x,t+=a-s.y),this.move(Math.round(s.x),Math.round(s.y||0),d,t)}}return function(t){const e=[];t.compose=function(n){s.pushUnique(e,n)&&l(n,"afterInit",(function(){const e=this.chart;e.options.tooltip&&(e.tooltip=new t(e,e.options.tooltip))}))}}(_||(_={})),_})),e(n,"Core/Series/Point.js",[n["Core/Renderer/HTML/AST.js"],n["Core/Animation/AnimationUtilities.js"],n["Core/Defaults.js"],n["Core/FormatUtilities.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s){const{animObject:r}=e,{defaultOptions:o}=n,{format:a}=i,{addEvent:c,defined:l,erase:h,extend:u,fireEvent:d,getNestedProperty:f,isArray:p,isFunction:g,isNumber:m,isObject:y,merge:v,objectEach:b,pick:w,syncTimeout:x,removeEvent:_,uniqueKey:T}=s;class S{constructor(){this.category=void 0,this.destroyed=!1,this.formatPrefix="point",this.id=void 0,this.isNull=!1,this.percentage=this.options=this.name=void 0,this.selected=!1,this.total=this.shapeArgs=this.series=void 0,this.visible=!0,this.x=void 0}animateBeforeDestroy(){const t=this,e={x:t.startXPos,opacity:0},n=t.getGraphicalProps();n.singular.forEach((function(n){t[n]=t[n].animate("dataLabel"===n?{x:t[n].startXPos,y:t[n].startYPos,opacity:0}:e)})),n.plural.forEach((function(e){t[e].forEach((function(e){e.element&&e.animate(u({x:t.startXPos},e.startYPos?{x:e.startXPos,y:e.startYPos}:{}))}))}))}applyOptions(t,e){const n=this.series,i=n.options.pointValKey||n.pointValKey;return t=S.prototype.optionsToObject.call(this,t),u(this,t),this.options=this.options?u(this.options,t):t,t.group&&delete this.group,t.dataLabels&&delete this.dataLabels,i&&(this.y=S.prototype.getNestedProperty.call(this,i)),this.formatPrefix=(this.isNull=this.isValid&&!this.isValid())?"null":"point",this.selected&&(this.state="select"),"name"in this&&"undefined"===typeof e&&n.xAxis&&n.xAxis.hasNames&&(this.x=n.xAxis.nameToX(this)),"undefined"===typeof this.x&&n?this.x="undefined"===typeof e?n.autoIncrement():e:m(t.x)&&n.options.relativeXValue&&(this.x=n.autoIncrement(t.x)),this}destroy(){if(!this.destroyed){const e=this;var t=e.series;const n=t.chart;t=t.options.dataSorting;const i=n.hoverPoints,s=r(e.series.chart.renderer.globalAnimation),o=()=>{(e.graphic||e.graphics||e.dataLabel||e.dataLabels)&&(_(e),e.destroyElements());for(const t in e)delete e[t]};e.legendItem&&n.legend.destroyItem(e),i&&(e.setState(),h(i,e),i.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut(),t&&t.enabled?(this.animateBeforeDestroy(),x(o,s.duration)):o(),n.pointCount--}this.destroyed=!0}destroyElements(t){const e=this;t=e.getGraphicalProps(t),t.singular.forEach((function(t){e[t]=e[t].destroy()})),t.plural.forEach((function(t){e[t].forEach((function(t){t&&t.element&&t.destroy()})),delete e[t]}))}firePointEvent(t,e,n){const i=this,s=this.series.options;(s.point.events[t]||i.options&&i.options.events&&i.options.events[t])&&i.importEvents(),"click"===t&&s.allowPointSelect&&(n=function(t){i.select&&i.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),d(i,t,e,n)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+("undefined"!==typeof this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(t){const e=this,n=[],i={singular:[],plural:[]};let s,r;for(t=t||{graphic:1,dataLabel:1},t.graphic&&n.push("graphic"),t.dataLabel&&n.push("dataLabel","dataLabelPath","dataLabelUpper","connector"),r=n.length;r--;)s=n[r],e[s]&&i.singular.push(s);return["graphic","dataLabel","connector"].forEach((function(n){const s=n+"s";t[n]&&e[s]&&i.plural.push(s)})),i}getLabelConfig(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}}getNestedProperty(t){if(t)return 0===t.indexOf("custom.")?f(t,this.options):this[t]}getZone(){var t=this.series;const e=t.zones;t=t.zoneAxis||"y";let n,i=0;for(n=e[i];this[t]>=n.value;)n=e[++i];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=n&&n.color&&!this.options.color?n.color:this.nonZonedColor,n}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}init(t,e,n){return this.series=t,this.applyOptions(e,n),this.id=l(this.id)?this.id:T(),this.resolveColor(),t.chart.pointCount++,d(this,"afterInit"),this}isValid(){return null!==this.x&&m(this.y)}optionsToObject(t){var e=this.series;const n=e.options.keys,i=n||e.pointArrayMap||["y"],s=i.length;let r={},o=0,a=0;if(m(t)||null===t)r[i[0]]=t;else if(p(t))for(!n&&t.length>s&&(e=typeof t[0],"string"===e?r.name=t[0]:"number"===e&&(r.x=t[0]),o++);a<s;)n&&"undefined"===typeof t[o]||(0<i[a].indexOf(".")?S.prototype.setNestedProperty(r,t[o],i[a]):r[i[a]]=t[o]),o++,a++;else"object"===typeof t&&(r=t,t.dataLabels&&(e._hasPointLabels=!0),t.marker&&(e._hasPointMarkers=!0));return r}pos(t,e=this.plotY){if(!this.destroyed){const{plotX:n,series:i}=this,{chart:s,xAxis:r,yAxis:o}=i;let a=0,c=0;if(m(n)&&m(e))return t&&(a=r?r.pos:s.plotLeft,c=o?o.pos:s.plotTop),s.inverted&&r&&o?[o.len-e+c,r.len-n+a]:[n+a,e+c]}}resolveColor(){const t=this.series;var e=t.chart.styledMode;let n;var i=t.chart.options.chart.colorCount;delete this.nonZonedColor,t.options.colorByPoint?(e||(i=t.options.colors||t.chart.options.colors,n=i[t.colorCounter],i=i.length),e=t.colorCounter,t.colorCounter++,t.colorCounter===i&&(t.colorCounter=0)):(e||(n=t.color),e=t.colorIndex),this.colorIndex=w(this.options.colorIndex,e),this.color=w(this.options.color,n)}setNestedProperty(t,e,n){return n.split(".").reduce((function(t,n,i,s){return t[n]=s.length-1===i?e:y(t[n],!0)?t[n]:{},t[n]}),t),t}shouldDraw(){return!this.isNull}tooltipFormatter(t){const e=this.series,n=e.tooltipOptions,i=w(n.valueDecimals,""),s=n.valuePrefix||"",r=n.valueSuffix||"";return e.chart.styledMode&&(t=e.chart.tooltip.styledModeFormat(t)),(e.pointArrayMap||["y"]).forEach((function(e){e="{point."+e,(s||r)&&(t=t.replace(RegExp(e+"}","g"),s+e+"}"+r)),t=t.replace(RegExp(e+"}","g"),e+":,."+i+"f}")})),a(t,{point:this,series:this.series},e.chart)}update(t,e,n,i){function s(){r.applyOptions(t);var i=a&&r.hasMockGraphic;i=null===r.y?!i:i,a&&i&&(r.graphic=a.destroy(),delete r.hasMockGraphic),y(t,!0)&&(a&&a.element&&t&&t.marker&&"undefined"!==typeof t.marker.symbol&&(r.graphic=a.destroy()),t&&t.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy()),r.connector&&(r.connector=r.connector.destroy())),h=r.index,o.updateParallelArrays(r,h),l.data[h]=y(l.data[h],!0)||y(t,!0)?r.options:w(t,l.data[h]),o.isDirty=o.isDirtyData=!0,!o.fixedBox&&o.hasCartesianSeries&&(c.isDirtyBox=!0),"point"===l.legendType&&(c.isDirtyLegend=!0),e&&c.redraw(n)}const r=this,o=r.series,a=r.graphic,c=o.chart,l=o.options;let h;e=w(e,!0),!1===i?s():r.firePointEvent("update",{options:t},s)}remove(t,e){this.series.removePoint(this.series.data.indexOf(this),t,e)}select(t,e){const n=this,i=n.series,s=i.chart;this.selectedStaging=t=w(t,!n.selected),n.firePointEvent(t?"select":"unselect",{accumulate:e},(function(){n.selected=n.options.selected=t,i.options.data[i.data.indexOf(n)]=n.options,n.setState(t&&"select"),e||s.getSelectedPoints().forEach((function(t){const e=t.series;t.selected&&t!==n&&(t.selected=t.options.selected=!1,e.options.data[e.data.indexOf(t)]=t.options,t.setState(s.hoverPoints&&e.options.inactiveOtherPoints?"inactive":""),t.firePointEvent("unselect"))}))})),delete this.selectedStaging}onMouseOver(t){const e=this.series.chart,n=e.pointer;t=t?n.normalize(t):n.getChartCoordinatesFromPoint(this,e.inverted),n.runPointActions(t,this)}onMouseOut(){const t=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(t.hoverPoints||[]).forEach((function(t){t.setState()})),t.hoverPoints=t.hoverPoint=null}importEvents(){if(!this.hasImportedEvents){const t=this,e=v(t.series.options.point,t.options).events;t.events=e,b(e,(function(e,n){g(e)&&c(t,n,e)})),this.hasImportedEvents=!0}}setState(e,n){const i=this.series;var s=this.state,r=i.options.states[e||"normal"]||{},a=o.plotOptions[i.type].marker&&i.options.marker;const c=a&&!1===a.enabled,l=a&&a.states&&a.states[e||"normal"]||{},h=!1===l.enabled,f=this.marker||{},p=i.chart,g=a&&i.markerAttribs;let y=i.halo;var v;let b;var x=i.stateMarkerGraphic;if(e=e||"",!(e===this.state&&!n||this.selected&&"select"!==e||!1===r.enabled||e&&(h||c&&!1===l.enabled)||e&&f.states&&f.states[e]&&!1===f.states[e].enabled)){if(this.state=e,g&&(v=i.markerAttribs(this,e)),this.graphic&&!this.hasMockGraphic){if(s&&this.graphic.removeClass("highcharts-point-"+s),e&&this.graphic.addClass("highcharts-point-"+e),!p.styledMode){s=i.pointAttribs(this,e),b=w(p.options.chart.animation,r.animation);const t=s.opacity;i.options.inactiveOtherPoints&&m(t)&&((this.dataLabels||[]).forEach((function(e){e&&!e.hasClass("highcharts-data-label-hidden")&&e.animate({opacity:t},b)})),this.connector&&this.connector.animate({opacity:t},b)),this.graphic.animate(s,b)}v&&this.graphic.animate(v,w(p.options.chart.animation,l.animation,a.animation)),x&&x.hide()}else e&&l&&(a=f.symbol||i.symbol,x&&x.currentSymbol!==a&&(x=x.destroy()),v&&(x?x[n?"animate":"attr"]({x:v.x,y:v.y}):a&&(i.stateMarkerGraphic=x=p.renderer.symbol(a,v.x,v.y,v.width,v.height).add(i.markerGroup),x.currentSymbol=a)),!p.styledMode&&x&&"inactive"!==this.state&&x.attr(i.pointAttribs(this,e))),x&&(x[e&&this.isInside?"show":"hide"](),x.element.point=this,x.addClass(this.getClassName(),!0));r=r.halo,v=(x=this.graphic||x)&&x.visibility||"inherit",r&&r.size&&x&&"hidden"!==v&&!this.isCluster?(y||(i.halo=y=p.renderer.path().add(x.parentGroup)),y.show()[n?"animate":"attr"]({d:this.haloPath(r.size)}),y.attr({class:"highcharts-halo highcharts-color-"+w(this.colorIndex,i.colorIndex)+(this.className?" "+this.className:""),visibility:v,zIndex:-1}),y.point=this,p.styledMode||y.attr(u({fill:this.color||i.color,"fill-opacity":r.opacity},t.filterUserAttributes(r.attributes||{})))):y&&y.point&&y.point.haloPath&&y.animate({d:y.point.haloPath(0)},null,y.hide),d(this,"afterSetState",{state:e})}}haloPath(t){const e=this.pos();return e?this.series.chart.renderer.symbols.circle(Math.floor(e[0])-t,e[1]-t,2*t,2*t):[]}}return S})),e(n,"Core/Pointer.js",[n["Core/Color/Color.js"],n["Core/Globals.js"],n["Core/Utilities.js"]],(function(t,e,n){const{parse:i}=t,{charts:s,noop:r}=e,{addEvent:o,attr:a,css:c,defined:l,extend:h,find:u,fireEvent:d,isNumber:f,isObject:p,objectEach:g,offset:m,pick:y,splat:v}=n;class b{constructor(t,e){this.lastValidTouch={},this.pinchDown=[],this.runChartClick=!1,this.eventsToUnbind=[],this.chart=t,this.hasDragged=!1,this.options=e,this.init(t,e)}applyInactiveState(t){let e,n=[];(t||[]).forEach((function(t){e=t.series,n.push(e),e.linkedParent&&n.push(e.linkedParent),e.linkedSeries&&(n=n.concat(e.linkedSeries)),e.navigatorSeries&&n.push(e.navigatorSeries)})),this.chart.series.forEach((function(t){-1===n.indexOf(t)?t.setState("inactive",!0):t.options.inactiveOtherPoints&&t.setAllPointsToState("inactive")}))}destroy(){const t=this;this.eventsToUnbind.forEach((t=>t())),this.eventsToUnbind=[],e.chartCount||(b.unbindDocumentMouseUp&&(b.unbindDocumentMouseUp=b.unbindDocumentMouseUp()),b.unbindDocumentTouchEnd&&(b.unbindDocumentTouchEnd=b.unbindDocumentTouchEnd())),clearInterval(t.tooltipTimeout),g(t,(function(e,n){t[n]=void 0}))}getSelectionMarkerAttrs(t,e){const n={args:{chartX:t,chartY:e},attrs:{},shapeType:"rect"};return d(this,"getSelectionMarkerAttrs",n,(n=>{const{chart:i,mouseDownX:s=0,mouseDownY:r=0,zoomHor:o,zoomVert:a}=this;let c;n=n.attrs,n.x=i.plotLeft,n.y=i.plotTop,n.width=o?1:i.plotWidth,n.height=a?1:i.plotHeight,o&&(c=t-s,n.width=Math.abs(c),n.x=(0<c?0:c)+s),a&&(c=e-r,n.height=Math.abs(c),n.y=(0<c?0:c)+r)})),n}drag(t){const e=this.chart,n=e.options.chart;var s=e.plotLeft;const r=e.plotTop,o=e.plotWidth,a=e.plotHeight,c=this.mouseDownX||0,l=this.mouseDownY||0,h=p(n.panning)?n.panning&&n.panning.enabled:n.panning,u=n.panKey&&t[n.panKey+"Key"];let d=t.chartX,f=t.chartY,g=this.selectionMarker;if((!g||!g.touch)&&(d<s?d=s:d>s+o&&(d=s+o),f<r?f=r:f>r+a&&(f=r+a),this.hasDragged=Math.sqrt(Math.pow(c-d,2)+Math.pow(l-f,2)),10<this.hasDragged)){s=e.isInsidePlot(c-s,l-r,{visiblePlotOnly:!0});const{shapeType:o,attrs:a}=this.getSelectionMarkerAttrs(d,f);!e.hasCartesianSeries&&!e.mapView||!this.zoomX&&!this.zoomY||!s||u||g||(this.selectionMarker=g=e.renderer[o](),g.attr({class:"highcharts-selection-marker",zIndex:7}).add(),e.styledMode||g.attr({fill:n.selectionMarkerFill||i("#334eff").setOpacity(.25).get()})),g&&g.attr(a),s&&!g&&h&&e.pan(t,n.panning)}}dragStart(t){const e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY}getSelectionBox(t){const e={args:{marker:t},result:{}};return d(this,"getSelectionBox",e,(e=>{e.result={x:t.attr?+t.attr("x"):t.x,y:t.attr?+t.attr("y"):t.y,width:t.attr?t.attr("width"):t.width,height:t.attr?t.attr("height"):t.height}})),e.result}drop(t){const e=this,n=this.chart,i=this.hasPinched;if(this.selectionMarker){const{x:s,y:r,width:o,height:a}=this.getSelectionBox(this.selectionMarker),c={originalEvent:t,xAxis:[],yAxis:[],x:s,y:r,width:o,height:a};let u=!!n.mapView;(this.hasDragged||i)&&(n.axes.forEach((function(n){if(n.zoomEnabled&&l(n.min)&&(i||e[{xAxis:"zoomX",yAxis:"zoomY"}[n.coll]])&&f(s)&&f(r)&&f(o)&&f(a)){var h=n.horiz;const e="touchend"===t.type?n.minPixelPadding:0,i=n.toValue((h?s:r)+e);h=n.toValue((h?s+o:r+a)-e),c[n.coll].push({axis:n,min:Math.min(i,h),max:Math.max(i,h)}),u=!0}})),u&&d(n,"selection",c,(function(t){n.zoom(h(t,i?{animation:!1}:null))}))),f(n.index)&&(this.selectionMarker=this.selectionMarker.destroy()),i&&this.scaleGroups()}n&&f(n.index)&&(c(n.container,{cursor:n._cursor}),n.cancelClick=10<this.hasDragged,n.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])}findNearestKDPoint(t,e,n){let i;return t.forEach((function(t){var s=!(t.noSharedTooltip&&e)&&0>t.options.findNearestPointBy.indexOf("y");if(t=t.searchPoint(n,s),(s=p(t,!0)&&t.series)&&!(s=!p(i,!0))){{s=i.distX-t.distX;const n=i.dist-t.dist,r=(t.series.group&&t.series.group.zIndex)-(i.series.group&&i.series.group.zIndex);s=0!==s&&e?s:0!==n?n:0!==r?r:i.series.index>t.series.index?-1:1}s=0<s}s&&(i=t)})),i}getChartCoordinatesFromPoint(t,e){var n=t.series;const i=n.xAxis;n=n.yAxis;const s=t.shapeArgs;if(i&&n){let r=y(t.clientX,t.plotX),o=t.plotY||0;return t.isNode&&s&&f(s.x)&&f(s.y)&&(r=s.x,o=s.y),e?{chartX:n.len+n.pos-o,chartY:i.len+i.pos-r}:{chartX:r+i.pos,chartY:o+n.pos}}if(s&&s.x&&s.y)return{chartX:s.x,chartY:s.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;var{container:t}=this.chart;const e=m(t);this.chartPosition={left:e.left,top:e.top,scaleX:1,scaleY:1};const n=t.offsetWidth;return t=t.offsetHeight,2<n&&2<t&&(this.chartPosition.scaleX=e.width/n,this.chartPosition.scaleY=e.height/t),this.chartPosition}getCoordinates(t){const e={xAxis:[],yAxis:[]};return this.chart.axes.forEach((function(n){e[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(t[n.horiz?"chartX":"chartY"])})})),e}getHoverData(t,e,n,i,s,r){const o=[];i=!(!i||!t);const a=function(t){return t.visible&&!(!s&&t.directTouch)&&y(t.options.enableMouseTracking,!0)};let c,l={chartX:r?r.chartX:void 0,chartY:r?r.chartY:void 0,shared:s};d(this,"beforeGetHoverData",l),c=e&&!e.stickyTracking?[e]:n.filter((t=>t.stickyTracking&&(l.filter||a)(t)));const h=i||!r?t:this.findNearestKDPoint(c,s,r);return e=h&&h.series,h&&(s&&!e.noSharedTooltip?(c=n.filter((function(t){return l.filter?l.filter(t):a(t)&&!t.noSharedTooltip})),c.forEach((function(t){let e=u(t.points,(function(t){return t.x===h.x&&!t.isNull}));p(e)&&(t.boosted&&t.boost&&(e=t.boost.getPoint(e)),o.push(e))}))):o.push(h)),l={hoverPoint:h},d(this,"afterGetHoverData",l),{hoverPoint:l.hoverPoint,hoverSeries:e,hoverPoints:o}}getPointFromEvent(t){let e;for(t=t.target;t&&!e;)e=t.point,t=t.parentNode;return e}onTrackerMouseOut(t){t=t.relatedTarget;const e=this.chart.hoverSeries;this.isDirectTouch=!1,!e||!t||e.stickyTracking||this.inClass(t,"highcharts-tooltip")||this.inClass(t,"highcharts-series-"+e.index)&&this.inClass(t,"highcharts-tracker")||e.onMouseOut()}inClass(t,e){let n;for(;t;){if(n=a(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf("highcharts-container"))return!1}t=t.parentElement}}init(t,e){this.options=e,this.chart=t,this.runChartClick=!(!e.chart.events||!e.chart.events.click),this.pinchDown=[],this.lastValidTouch={},this.setDOMEvents(),d(this,"afterInit")}normalize(t,e){var n=t.touches,i=n?n.length?n.item(0):y(n.changedTouches,t.changedTouches)[0]:t;return e||(e=this.getChartPosition()),n=i.pageX-e.left,i=i.pageY-e.top,n/=e.scaleX,i/=e.scaleY,h(t,{chartX:Math.round(n),chartY:Math.round(i)})}onContainerClick(t){const e=this.chart,n=e.hoverPoint;t=this.normalize(t);const i=e.plotLeft,s=e.plotTop;e.cancelClick||(n&&this.inClass(t.target,"highcharts-tracker")?(d(n.series,"click",h(t,{point:n})),e.hoverPoint&&n.firePointEvent("click",t)):(h(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-i,t.chartY-s,{visiblePlotOnly:!0})&&d(e,"click",t)))}onContainerMouseDown(t){const n=1===(1&(t.buttons||t.button));t=this.normalize(t),e.isFirefox&&0!==t.button&&this.onContainerMouseMove(t),("undefined"===typeof t.button||n)&&(this.zoomOption(t),n&&t.preventDefault&&t.preventDefault(),this.dragStart(t))}onContainerMouseLeave(t){const e=s[y(b.hoverChartIndex,-1)];t=this.normalize(t),e&&t.relatedTarget&&!this.inClass(t.relatedTarget,"highcharts-tooltip")&&(e.pointer.reset(),e.pointer.chartPosition=void 0)}onContainerMouseEnter(t){delete this.chartPosition}onContainerMouseMove(t){const e=this.chart,n=e.tooltip;t=this.normalize(t),this.setHoverChartIndex(),("mousedown"===e.mouseIsDown||this.touchSelect(t))&&this.drag(t),e.openMenu||!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop,{visiblePlotOnly:!0})||n&&n.shouldStickOnContact(t)||(this.inClass(t.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(t))}onDocumentTouchEnd(t){const e=s[y(b.hoverChartIndex,-1)];e&&e.pointer.drop(t)}onContainerTouchMove(t){this.touchSelect(t)?this.onContainerMouseMove(t):this.touch(t)}onContainerTouchStart(t){this.touchSelect(t)?this.onContainerMouseDown(t):(this.zoomOption(t),this.touch(t,!0))}onDocumentMouseMove(t){const e=this.chart,n=e.tooltip,i=this.chartPosition;t=this.normalize(t,i),!i||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop,{visiblePlotOnly:!0})||n&&n.shouldStickOnContact(t)||this.inClass(t.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(t){const e=s[y(b.hoverChartIndex,-1)];e&&e.pointer.drop(t)}pinch(t){const e=this,n=e.chart,i=e.pinchDown,s=t.touches||[],o=s.length,a=e.lastValidTouch,c=e.hasZoom,l={},u=1===o&&(e.inClass(t.target,"highcharts-tracker")&&n.runTrackerClick||e.runChartClick),f={};var p=e.chart.tooltip;p=1===o&&y(p&&p.options.followTouchMove,!0);let g=e.selectionMarker;1<o?e.initiated=!0:p&&(e.initiated=!1),c&&e.initiated&&!u&&!1!==t.cancelable&&t.preventDefault(),[].map.call(s,(function(t){return e.normalize(t)})),"touchstart"===t.type?([].forEach.call(s,(function(t,e){i[e]={chartX:t.chartX,chartY:t.chartY}})),a.x=[i[0].chartX,i[1]&&i[1].chartX],a.y=[i[0].chartY,i[1]&&i[1].chartY],n.axes.forEach((function(t){if(t.zoomEnabled){const e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,s=t.toPixels(Math.min(y(t.options.min,t.dataMin),t.dataMin)),r=t.toPixels(Math.max(y(t.options.max,t.dataMax),t.dataMax)),o=Math.max(s,r);e.min=Math.min(t.pos,Math.min(s,r)-i),e.max=Math.max(t.pos+t.len,o+i)}})),e.res=!0):p?this.runPointActions(e.normalize(t)):i.length&&(d(n,"touchpan",{originalEvent:t},(()=>{g||(e.selectionMarker=g=h({destroy:r,touch:!0},n.plotBox)),e.pinchTranslate(i,s,l,g,f,a),e.hasPinched=c,e.scaleGroups(l,f)})),e.res&&(e.res=!1,this.reset(!1,0)))}pinchTranslate(t,e,n,i,s,r){this.zoomHor&&this.pinchTranslateDirection(!0,t,e,n,i,s,r),this.zoomVert&&this.pinchTranslateDirection(!1,t,e,n,i,s,r)}pinchTranslateDirection(t,e,n,i,s,r,o,a){const c=this.chart,l=t?"x":"y",h=t?"X":"Y",u="chart"+h,d=t?"width":"height",f=c["plot"+(t?"Left":"Top")],p=c.inverted,g=c.bounds[t?"h":"v"],m=1===e.length,y=e[0][u],v=!m&&e[1][u];e=function(){"number"===typeof S&&20<Math.abs(y-v)&&(_=a||Math.abs(T-S)/Math.abs(y-v)),w=(f-T)/_+y,b=c["plot"+(t?"Width":"Height")]/_};let b,w,x,_=a||1,T=n[0][u],S=!m&&n[1][u];e(),n=w,n<g.min?(n=g.min,x=!0):n+b>g.max&&(n=g.max-b,x=!0),x?(T-=.8*(T-o[l][0]),"number"===typeof S&&(S-=.8*(S-o[l][1])),e()):o[l]=[T,S],p||(r[l]=w-f,r[d]=b),r=p?1/_:_,s[d]=b,s[l]=n,i[p?t?"scaleY":"scaleX":"scale"+h]=_,i["translate"+h]=r*f+(T-r*y)}reset(t,e){const n=this.chart,i=n.hoverSeries,s=n.hoverPoint,r=n.hoverPoints,o=n.tooltip,a=o&&o.shared?r:s;t&&a&&v(a).forEach((function(e){e.series.isCartesian&&"undefined"===typeof e.plotX&&(t=!1)})),t?o&&a&&v(a).length&&(o.refresh(a),o.shared&&r?r.forEach((function(t){t.setState(t.state,!0),t.series.isCartesian&&(t.series.xAxis.crosshair&&t.series.xAxis.drawCrosshair(null,t),t.series.yAxis.crosshair&&t.series.yAxis.drawCrosshair(null,t))})):s&&(s.setState(s.state,!0),n.axes.forEach((function(t){t.crosshair&&s.series[t.coll]===t&&t.drawCrosshair(null,s)})))):(s&&s.onMouseOut(),r&&r.forEach((function(t){t.setState()})),i&&i.onMouseOut(),o&&o.hide(e),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),n.axes.forEach((function(t){t.hideCrosshair()})),this.hoverX=n.hoverPoints=n.hoverPoint=null)}runPointActions(t,e,n){const i=this.chart,r=i.tooltip&&i.tooltip.options.enabled?i.tooltip:void 0,a=!!r&&r.shared;let c=e||i.hoverPoint,l=c&&c.series||i.hoverSeries;e=this.getHoverData(c,l,i.series,(!t||"touchmove"!==t.type)&&(!!e||l&&l.directTouch&&this.isDirectTouch),a,t),c=e.hoverPoint,l=e.hoverSeries;const h=e.hoverPoints;e=l&&l.tooltipOptions.followPointer&&!l.tooltipOptions.split;const d=a&&l&&!l.noSharedTooltip;if(c&&(n||c!==i.hoverPoint||r&&r.isHidden)){if((i.hoverPoints||[]).forEach((function(t){-1===h.indexOf(t)&&t.setState()})),i.hoverSeries!==l&&l.onMouseOver(),this.applyInactiveState(h),(h||[]).forEach((function(t){t.setState("hover")})),i.hoverPoint&&i.hoverPoint.firePointEvent("mouseOut"),!c.series)return;i.hoverPoints=h,i.hoverPoint=c,c.firePointEvent("mouseOver",void 0,(()=>{r&&c&&r.refresh(d?h:c,t)}))}else e&&r&&!r.isHidden&&(n=r.getAnchor([{}],t),i.isInsidePlot(n[0],n[1],{visiblePlotOnly:!0})&&r.updatePosition({plotX:n[0],plotY:n[1]}));this.unDocMouseMove||(this.unDocMouseMove=o(i.container.ownerDocument,"mousemove",(function(t){const e=s[b.hoverChartIndex];e&&e.pointer.onDocumentMouseMove(t)})),this.eventsToUnbind.push(this.unDocMouseMove)),i.axes.forEach((function(e){const n=y((e.crosshair||{}).snap,!0);let s;n&&((s=i.hoverPoint)&&s.series[e.coll]===e||(s=u(h,(t=>t.series&&t.series[e.coll]===e)))),s||!n?e.drawCrosshair(t,s):e.hideCrosshair()}))}scaleGroups(t,e){const n=this.chart;n.series.forEach((function(i){const s=t||i.getPlotBox();i.group&&(i.xAxis&&i.xAxis.zoomEnabled||n.mapView)&&(i.group.attr(s),i.markerGroup&&(i.markerGroup.attr(s),i.markerGroup.clip(e?n.clipRect:null)),i.dataLabelsGroup&&i.dataLabelsGroup.attr(s))})),n.clipRect.attr(e||n.clipBox)}setDOMEvents(){const t=this.chart.container,n=t.ownerDocument;t.onmousedown=this.onContainerMouseDown.bind(this),t.onmousemove=this.onContainerMouseMove.bind(this),t.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(o(t,"mouseenter",this.onContainerMouseEnter.bind(this))),this.eventsToUnbind.push(o(t,"mouseleave",this.onContainerMouseLeave.bind(this))),b.unbindDocumentMouseUp||(b.unbindDocumentMouseUp=o(n,"mouseup",this.onDocumentMouseUp.bind(this)));let i=this.chart.renderTo.parentElement;for(;i&&"BODY"!==i.tagName;)this.eventsToUnbind.push(o(i,"scroll",(()=>{delete this.chartPosition}))),i=i.parentElement;e.hasTouch&&(this.eventsToUnbind.push(o(t,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1})),this.eventsToUnbind.push(o(t,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),b.unbindDocumentTouchEnd||(b.unbindDocumentTouchEnd=o(n,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})))}setHoverChartIndex(){const t=this.chart,n=e.charts[y(b.hoverChartIndex,-1)];n&&n!==t&&n.pointer.onContainerMouseLeave({relatedTarget:t.container}),n&&n.mouseIsDown||(b.hoverChartIndex=t.index)}touch(t,e){const n=this.chart;let i,s;this.setHoverChartIndex(),1===t.touches.length?(t=this.normalize(t),(s=n.isInsidePlot(t.chartX-n.plotLeft,t.chartY-n.plotTop,{visiblePlotOnly:!0}))&&!n.openMenu?(e&&this.runPointActions(t),"touchmove"===t.type&&(e=this.pinchDown,i=!!e[0]&&4<=Math.sqrt(Math.pow(e[0].chartX-t.chartX,2)+Math.pow(e[0].chartY-t.chartY,2))),y(i,!0)&&this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)}touchSelect(t){return!(!this.chart.options.chart.zooming.singleTouch||!t.touches||1!==t.touches.length)}zoomOption(t){var e=this.chart,n=e.options.chart;e=e.inverted;let i=n.zooming.type||"";/touch/.test(t.type)&&(i=y(n.zooming.pinchType,i)),this.zoomX=t=/x/.test(i),this.zoomY=n=/y/.test(i),this.zoomHor=t&&!e||n&&e,this.zoomVert=n&&!e||t&&e,this.hasZoom=t||n}}return function(t){const e=[],i=[];t.compose=function(e){n.pushUnique(i,e)&&o(e,"beforeRender",(function(){this.pointer=new t(this,this.options)}))},t.dissolve=function(){for(let t=0,n=e.length;t<n;++t)e[t]();e.length=0}}(b||(b={})),b})),e(n,"Core/Legend/Legend.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/FormatUtilities.js"],n["Core/Globals.js"],n["Core/Series/Point.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r){const{animObject:o,setAnimation:a}=t,{format:c}=e,{marginNames:l}=n,{distribute:h}=s,{addEvent:u,createElement:d,css:f,defined:p,discardElement:g,find:m,fireEvent:y,isNumber:v,merge:b,pick:w,relativeLength:x,stableSort:_,syncTimeout:T}=r;class S{constructor(t,e){this.allItems=[],this.contentGroup=this.box=void 0,this.display=!1,this.group=void 0,this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0,this.options=void 0,this.padding=0,this.pages=[],this.proximate=!1,this.scrollGroup=void 0,this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0,this.chart=t,this.init(t,e)}init(t,e){this.chart=t,this.setOptions(e),e.enabled&&(this.render(),u(this.chart,"endResize",(function(){this.legend.positionCheckboxes()})),u(this.chart,"render",(()=>{this.proximate&&(this.proximatePositions(),this.positionItems())})))}setOptions(t){const e=w(t.padding,8);this.options=t,this.chart.styledMode||(this.itemStyle=t.itemStyle,this.itemHiddenStyle=b(this.itemStyle,t.itemHiddenStyle)),this.itemMarginTop=t.itemMarginTop,this.itemMarginBottom=t.itemMarginBottom,this.padding=e,this.initialItemY=e-5,this.symbolWidth=w(t.symbolWidth,16),this.pages=[],this.proximate="proximate"===t.layout&&!this.chart.inverted,this.baseline=void 0}update(t,e){const n=this.chart;this.setOptions(b(!0,this.options,t)),this.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,w(e,!0)&&n.redraw(),y(this,"afterUpdate")}colorizeItem(t,e){const{group:n,label:i,line:s,symbol:r}=t.legendItem||{};if(n&&n[e?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var o=this.options;const n=this.itemHiddenStyle.color;o=e?o.itemStyle.color:n;const a=e&&t.color||n,c=t.options&&t.options.marker;let l={fill:a};i&&i.css({fill:o}),s&&s.attr({stroke:a}),r&&(c&&r.isMarker&&(l=t.pointAttribs(),e||(l.stroke=l.fill=n)),r.attr(l))}y(this,"afterColorizeItem",{item:t,visible:e})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(t){const{group:e,x:n=0,y:i=0}=t.legendItem||{};var s=this.options,r=s.symbolPadding;const o=!s.rtl;s=t.checkbox,e&&e.element&&(r={translateX:o?n:this.legendWidth-n-2*r-4,translateY:i},e[p(e.translateY)?"animate":"attr"](r,void 0,(()=>{y(this,"afterPositionItem",{item:t})}))),s&&(s.x=n,s.y=i)}destroyItem(t){const e=t.checkbox,n=t.legendItem||{};for(const i of["group","label","line","symbol"])n[i]&&(n[i]=n[i].destroy());e&&g(e),t.legendItem=void 0}destroy(){for(const t of this.getAllItems())this.destroyItem(t);for(const t of"clipRect up down pager nav box title group".split(" "))this[t]&&(this[t]=this[t].destroy());this.display=null}positionCheckboxes(){const t=this.group&&this.group.alignAttr,e=this.clipHeight||this.legendHeight,n=this.titleHeight;let i;t&&(i=t.translateY,this.allItems.forEach((function(s){const r=s.checkbox;let o;r&&(o=i+n+r.y+(this.scrollOffset||0)+3,f(r,{left:t.translateX+s.checkboxOffset+r.x-20+"px",top:o+"px",display:this.proximate||o>i-6&&o<i+e-6?"":"none"}))}),this))}renderTitle(){var t=this.options;const e=this.padding,n=t.title;let i=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,e-3,e-4,void 0,void 0,void 0,t.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(n.style),this.title.add(this.group)),n.width||this.title.css({width:this.maxLegendWidth+"px"}),t=this.title.getBBox(),i=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i}setText(t){const e=this.options;t.legendItem.label.attr({text:e.labelFormat?c(e.labelFormat,t,this.chart):e.labelFormatter.call(t)})}renderItem(t){const e=t.legendItem=t.legendItem||{};var n=this.chart,i=n.renderer;const s=this.options,r=this.symbolWidth,o=s.symbolPadding||0,a=this.itemStyle,c=this.itemHiddenStyle,l="horizontal"===s.layout?w(s.itemDistance,20):0,h=!s.rtl,u=!t.series,d=!u&&t.series.drawLegendSymbol?t.series:t;var f=d.options;const p=this.createCheckboxForItem&&f&&f.showCheckbox,g=s.useHTML,m=t.options.className;let y=e.label;f=r+o+l+(p?20:0),y||(e.group=i.g("legend-item").addClass("highcharts-"+d.type+"-series highcharts-color-"+t.colorIndex+(m?" "+m:"")+(u?" highcharts-series-"+t.index:"")).attr({zIndex:1}).add(this.scrollGroup),e.label=y=i.text("",h?r+o:-o,this.baseline||0,g),n.styledMode||y.css(b(t.visible?a:c)),y.attr({align:h?"left":"right",zIndex:2}).add(e.group),this.baseline||(this.fontMetrics=i.fontMetrics(y),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,y.attr("y",this.baseline),this.symbolHeight=w(s.symbolHeight,this.fontMetrics.f),s.squareSymbol&&(this.symbolWidth=w(s.symbolWidth,Math.max(this.symbolHeight,16)),f=this.symbolWidth+o+l+(p?20:0),h&&y.attr("x",this.symbolWidth+o))),d.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,y,g)),p&&!t.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(t),this.colorizeItem(t,t.visible),!n.styledMode&&a.width||y.css({width:(s.itemWidth||this.widthOption||n.spacingBox.width)-f+"px"}),this.setText(t),n=y.getBBox(),i=this.fontMetrics&&this.fontMetrics.h||0,t.itemWidth=t.checkboxOffset=s.itemWidth||e.labelWidth||n.width+f,this.maxItemWidth=Math.max(this.maxItemWidth,t.itemWidth),this.totalItemWidth+=t.itemWidth,this.itemHeight=t.itemHeight=Math.round(e.labelHeight||(n.height>1.5*i?n.height:i))}layoutItem(t){var e=this.options;const n=this.padding,i="horizontal"===e.layout,s=t.itemHeight,r=this.itemMarginBottom,o=this.itemMarginTop,a=i?w(e.itemDistance,20):0,c=this.maxLegendWidth;e=e.alignColumns&&this.totalItemWidth>c?this.maxItemWidth:t.itemWidth;const l=t.legendItem||{};i&&this.itemX-n+e>c&&(this.itemX=n,this.lastLineHeight&&(this.itemY+=o+this.lastLineHeight+r),this.lastLineHeight=0),this.lastItemY=o+this.itemY+r,this.lastLineHeight=Math.max(s,this.lastLineHeight),l.x=this.itemX,l.y=this.itemY,i?this.itemX+=e:(this.itemY+=o+s+r,this.lastLineHeight=s),this.offsetWidth=this.widthOption||Math.max((i?this.itemX-n-(t.checkbox?0:a):e)+n,this.offsetWidth)}getAllItems(){let t=[];return this.chart.series.forEach((function(e){const n=e&&e.options;e&&w(n.showInLegend,!p(n.linkedTo)&&void 0,!0)&&(t=t.concat((e.legendItem||{}).labels||("point"===n.legendType?e.data:e)))})),y(this,"afterGetAllItems",{allItems:t}),t}getAlignment(){const t=this.options;return this.proximate?t.align.charAt(0)+"tv":t.floating?"":t.align.charAt(0)+t.verticalAlign.charAt(0)+t.layout.charAt(0)}adjustMargins(t,e){const n=this.chart,i=this.options,s=this.getAlignment();s&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach((function(r,o){r.test(s)&&!p(t[o])&&(n[l[o]]=Math.max(n[l[o]],n.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*i[o%2?"x":"y"]+w(i.margin,12)+e[o]+(n.titleOffset[o]||0)))}))}proximatePositions(){const t=this.chart,e=[],n="left"===this.options.align;let i;this.allItems.forEach((function(i){var s,r=n;let o;i.yAxis&&(i.xAxis.options.reversed&&(r=!r),i.points&&(s=m(r?i.points:i.points.slice(0).reverse(),(function(t){return v(t.plotY)}))),r=this.itemMarginTop+i.legendItem.label.getBBox().height+this.itemMarginBottom,o=i.yAxis.top-t.plotTop,i.visible?(s=s?s.plotY:i.yAxis.height,s+=o-.3*r):s=o+i.yAxis.height,e.push({target:s,size:r,item:i}))}),this);for(const s of h(e,t.plotHeight))i=s.item.legendItem||{},v(s.pos)&&(i.y=t.plotTop-t.spacing[0]+s.pos)}render(){const t=this.chart,e=t.renderer,n=this.options,i=this.padding;var s=this.getAllItems();let r,o=this.group,a=this.box;this.itemX=i,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=x(n.width,t.spacingBox.width-i);var c=t.spacingBox.width-2*i-n.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(c/=2),this.maxLegendWidth=this.widthOption||c,o||(this.group=o=e.g("legend").addClass(n.className||"").attr({zIndex:7}).add(),this.contentGroup=e.g().attr({zIndex:1}).add(o),this.scrollGroup=e.g().add(this.contentGroup)),this.renderTitle(),_(s,((t,e)=>(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0))),n.reversed&&s.reverse(),this.allItems=s,this.display=c=!!s.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,s.forEach(this.renderItem,this),s.forEach(this.layoutItem,this),s=(this.widthOption||this.offsetWidth)+i,r=this.lastItemY+this.lastLineHeight+this.titleHeight,r=this.handleOverflow(r),r+=i,a||(this.box=a=e.rect().addClass("highcharts-legend-box").attr({r:n.borderRadius}).add(o)),t.styledMode||a.attr({stroke:n.borderColor,"stroke-width":n.borderWidth||0,fill:n.backgroundColor||"none"}).shadow(n.shadow),0<s&&0<r&&a[a.placed?"animate":"attr"](a.crisp.call({},{x:0,y:0,width:s,height:r},a.strokeWidth())),o[c?"show":"hide"](),t.styledMode&&"none"===o.getStyle("display")&&(s=r=0),this.legendWidth=s,this.legendHeight=r,c&&this.align(),this.proximate||this.positionItems(),y(this,"afterRender")}align(t=this.chart.spacingBox){const e=this.chart,n=this.options;let i=t.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<e.titleOffset[0]?i+=e.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<e.titleOffset[2]&&(i-=e.titleOffset[2]),i!==t.y&&(t=b(t,{y:i})),e.hasRendered||(this.group.placed=!1),this.group.align(b(n,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":n.verticalAlign}),!0,t)}handleOverflow(t){const e=this,n=this.chart,i=n.renderer,s=this.options;var r=s.y;const o="top"===s.verticalAlign,a=this.padding,c=s.maxHeight,l=s.navigation,h=w(l.animation,!0),u=l.arrowSize||12,d=this.pages,f=this.allItems,p=function(t){"number"===typeof t?x.attr({height:t}):x&&(e.clipRect=x.destroy(),e.contentGroup.clip()),e.contentGroup.div&&(e.contentGroup.div.style.clip=t?"rect("+a+"px,9999px,"+(a+t)+"px,0)":"auto")},g=function(t){return e[t]=i.circle(0,0,1.3*u).translate(u/2,u/2).add(b),n.styledMode||e[t].attr("fill","rgba(0,0,0,0.0001)"),e[t]};let m,y,v;r=n.spacingBox.height+(o?-r:r)-a;let b=this.nav,x=this.clipRect;return"horizontal"!==s.layout||"middle"===s.verticalAlign||s.floating||(r/=2),c&&(r=Math.min(r,c)),d.length=0,t&&0<r&&t>r&&!1!==l.enabled?(this.clipHeight=m=Math.max(r-20-this.titleHeight-a,0),this.currentPage=w(this.currentPage,1),this.fullHeight=t,f.forEach(((t,e)=>{v=t.legendItem||{},t=v.y||0;const n=Math.round(v.label.getBBox().height);let i=d.length;(!i||t-d[i-1]>m&&(y||t)!==d[i-1])&&(d.push(y||t),i++),v.pageIx=i-1,y&&((f[e-1].legendItem||{}).pageIx=i-1),e===f.length-1&&t+n-d[i-1]>m&&t>d[i-1]&&(d.push(t),v.pageIx=i),t!==y&&(y=t)})),x||(x=e.clipRect=i.clipRect(0,a-2,9999,0),e.contentGroup.clip(x)),p(m),b||(this.nav=b=i.g().attr({zIndex:1}).add(this.group),this.up=i.symbol("triangle",0,0,u,u).add(b),g("upTracker").on("click",(function(){e.scroll(-1,h)})),this.pager=i.text("",15,10).addClass("highcharts-legend-navigation"),!n.styledMode&&l.style&&this.pager.css(l.style),this.pager.add(b),this.down=i.symbol("triangle-down",0,0,u,u).add(b),g("downTracker").on("click",(function(){e.scroll(1,h)}))),e.scroll(0),t=r):b&&(p(),this.nav=b.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t}scroll(t,e){const n=this.chart,i=this.pages,s=i.length,r=this.clipHeight,c=this.options.navigation,l=this.pager,h=this.padding;let u=this.currentPage+t;u>s&&(u=s),0<u&&("undefined"!==typeof e&&a(e,n),this.nav.attr({translateX:h,translateY:r+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach((function(t){t.attr({class:1===u?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),l.attr({text:u+"/"+s}),[this.down,this.downTracker].forEach((function(t){t.attr({x:18+this.pager.getBBox().width,class:u===s?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),n.styledMode||(this.up.attr({fill:1===u?c.inactiveColor:c.activeColor}),this.upTracker.css({cursor:1===u?"default":"pointer"}),this.down.attr({fill:u===s?c.inactiveColor:c.activeColor}),this.downTracker.css({cursor:u===s?"default":"pointer"})),this.scrollOffset=-i[u-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=u,this.positionCheckboxes(),t=o(w(e,n.renderer.globalAnimation,!0)),T((()=>{y(this,"afterScroll",{currentPage:u})}),t.duration))}setItemEvents(t,e,n){const s=this,r=t.legendItem||{},o=s.chart.renderer.boxWrapper,a=t instanceof i,c="highcharts-legend-"+(a?"point":"series")+"-active",l=s.chart.styledMode;n=n?[e,r.symbol]:[r.group];const h=e=>{s.allItems.forEach((n=>{t!==n&&[n].concat(n.linkedSeries||[]).forEach((t=>{t.setState(e,!a)}))}))};for(const i of n)i&&i.on("mouseover",(function(){t.visible&&h("inactive"),t.setState("hover"),t.visible&&o.addClass(c),l||e.css(s.options.itemHoverStyle)})).on("mouseout",(function(){s.chart.styledMode||e.css(b(t.visible?s.itemStyle:s.itemHiddenStyle)),h(""),o.removeClass(c),t.setState()})).on("click",(function(e){const n=function(){t.setVisible&&t.setVisible(),h(t.visible?"inactive":"")};o.removeClass(c),e={browserEvent:e},t.firePointEvent?t.firePointEvent("legendItemClick",e,n):y(t,"legendItemClick",e,n)}))}createCheckboxForItem(t){t.checkbox=d("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),u(t.checkbox,"click",(function(e){y(t.series||t,"checkboxClick",{checked:e.target.checked,item:t},(function(){t.select()}))}))}}return function(t){const e=[];t.compose=function(n){r.pushUnique(e,n)&&u(n,"beforeMargins",(function(){this.legend=new t(this,this.options.legend)}))}}(S||(S={})),S})),e(n,"Core/Series/SeriesRegistry.js",[n["Core/Globals.js"],n["Core/Defaults.js"],n["Core/Series/Point.js"],n["Core/Utilities.js"]],(function(t,e,n,i){const{defaultOptions:s}=e,{extendClass:r,merge:o}=i;var a;return function(e){function i(t,i){const r=s.plotOptions||{},o=i.defaultOptions,a=i.prototype;a.type=t,a.pointClass||(a.pointClass=n),o&&(r[t]=o),e.seriesTypes[t]=i}e.seriesTypes=t.seriesTypes,e.registerSeriesType=i,e.seriesType=function(t,a,c,l,h){const u=s.plotOptions||{};return a=a||"",u[t]=o(u[a],c),i(t,r(e.seriesTypes[a]||function(){},l)),e.seriesTypes[t].prototype.type=t,h&&(e.seriesTypes[t].prototype.pointClass=r(n,h)),e.seriesTypes[t]}}(a||(a={})),a})),e(n,"Core/Chart/Chart.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/Defaults.js"],n["Core/FormatUtilities.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Time.js"],n["Core/Utilities.js"],n["Core/Renderer/HTML/AST.js"]],(function(t,e,n,i,s,r,o,a,c,l,h,u){const{animate:d,animObject:f,setAnimation:p}=t,{defaultOptions:g,defaultTime:m}=n,{numberFormat:y}=i,{registerEventOptions:v}=s,{charts:b,doc:w,marginNames:x,svg:_,win:T}=r,{seriesTypes:S}=a,{addEvent:I,attr:k,cleanRecursively:E,createElement:C,css:A,defined:O,discardElement:P,erase:M,error:D,extend:L,find:N,fireEvent:R,getStyle:F,isArray:j,isNumber:B,isObject:U,isString:V,merge:z,objectEach:G,pick:$,pInt:q,relativeLength:W,removeEvent:H,splat:K,syncTimeout:X,uniqueKey:Y}=h;class Q{static chart(t,e,n){return new Q(t,e,n)}constructor(t,e,n){this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.labelCollectors=this.isResizing=this.index=this.eventOptions=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0,this.sharedClips={},this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=void 0,this.getArgs(t,e,n)}getArgs(t,e,n){V(t)||t.nodeName?(this.renderTo=t,this.init(e,n)):this.init(t,e)}init(t,e){const n=t.plotOptions||{};R(this,"init",{args:arguments},(function(){const i=z(g,t),s=i.chart;G(i.plotOptions,(function(t,e){U(t)&&(t.tooltip=n[e]&&z(n[e].tooltip)||void 0)})),i.tooltip.userOptions=t.chart&&t.chart.forExport&&t.tooltip.userOptions||t.tooltip,this.userOptions=t,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=e,this.isResizing=0;const o=s.zooming=s.zooming||{};t.chart&&!t.chart.zooming&&(o.resetButton=s.resetZoomButton),o.key=$(o.key,s.zoomKey),o.pinchType=$(o.pinchType,s.pinchType),o.singleTouch=$(o.singleTouch,s.zoomBySingleTouch),o.type=$(o.type,s.zoomType),this.options=i,this.axes=[],this.series=[],this.time=t.time&&Object.keys(t.time).length?new l(t.time):r.time,this.numberFormatter=s.numberFormatter||y,this.styledMode=s.styledMode,this.hasCartesianSeries=s.showAxes,this.index=b.length,b.push(this),r.chartCount++,v(this,s),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,R(this,"afterInit"),this.firstRender()}))}initSeries(t){var e=this.options.chart;e=t.type||e.type;const n=S[e];return n||D(17,!0,this,{missingModuleFor:e}),e=new n,"function"===typeof e.init&&e.init(this,t),e}setSeriesData(){this.getSeriesOrderByLinks().forEach((function(t){t.points||t.data||!t.enabledDataSorting||t.setData(t.options.data,!1)}))}getSeriesOrderByLinks(){return this.series.concat().sort((function(t,e){return t.linkedSeries.length||e.linkedSeries.length?e.linkedSeries.length-t.linkedSeries.length:0}))}orderSeries(t){const e=this.series;for(let n=t||0,i=e.length;n<i;++n)e[n]&&(e[n].index=n,e[n].name=e[n].getName())}isInsidePlot(t,e,n={}){const{inverted:i,plotBox:s,plotLeft:r,plotTop:o,scrollablePlotBox:a}=this;var c=0;let l=0;n.visiblePlotOnly&&this.scrollingContainer&&({scrollLeft:c,scrollTop:l}=this.scrollingContainer);const h=n.series,u=n.visiblePlotOnly&&a||s;var d=n.inverted?e:t;if(e=n.inverted?t:e,t={x:d,y:e,isInsidePlot:!0,options:n},!n.ignoreX){const e=h&&(i&&!this.polar?h.yAxis:h.xAxis)||{pos:r,len:1/0};d=n.paneCoordinates?e.pos+d:r+d,d>=Math.max(c+r,e.pos)&&d<=Math.min(c+r+u.width,e.pos+e.len)||(t.isInsidePlot=!1)}return!n.ignoreY&&t.isInsidePlot&&(c=!i&&n.axis&&!n.axis.isXAxis&&n.axis||h&&(i?h.xAxis:h.yAxis)||{pos:o,len:1/0},n=n.paneCoordinates?c.pos+e:o+e,n>=Math.max(l+o,c.pos)&&n<=Math.min(l+o+u.height,c.pos+c.len)||(t.isInsidePlot=!1)),R(this,"afterIsInsidePlot",t),t.isInsidePlot}redraw(t){R(this,"beforeRedraw");const e=this.hasCartesianSeries?this.axes:this.colorAxis||[],n=this.series,i=this.pointer,s=this.legend,r=this.userOptions.legend,o=this.renderer,a=o.isHidden(),c=[];let l,h,u,d=this.isDirtyBox,f=this.isDirtyLegend;for(o.rootFontSize=o.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),p(!!this.hasRendered&&t,this),a&&this.temporaryDisplay(),this.layOutTitles(),t=n.length;t--;)if(u=n[t],(u.options.stacking||u.options.centerInCategory)&&(h=!0,u.isDirty)){l=!0;break}if(l)for(t=n.length;t--;)u=n[t],u.options.stacking&&(u.isDirty=!0);n.forEach((function(t){t.isDirty&&("point"===t.options.legendType?("function"===typeof t.updateTotals&&t.updateTotals(),f=!0):r&&(r.labelFormatter||r.labelFormat)&&(f=!0)),t.isDirtyData&&R(t,"updatedData")})),f&&s&&s.options.enabled&&(s.render(),this.isDirtyLegend=!1),h&&this.getStacks(),e.forEach((function(t){t.updateNames(),t.setScale()})),this.getMargins(),e.forEach((function(t){t.isDirty&&(d=!0)})),e.forEach((function(t){const e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,c.push((function(){R(t,"afterSetExtremes",L(t.eventArgs,t.getExtremes())),delete t.eventArgs}))),(d||h)&&t.redraw()})),d&&this.drawChartBox(),R(this,"predraw"),n.forEach((function(t){(d||t.isDirty)&&t.visible&&t.redraw(),t.isDirtyData=!1})),i&&i.reset(!0),o.draw(),R(this,"redraw"),R(this,"render"),a&&this.temporaryDisplay(!0),c.forEach((function(t){t.call()}))}get(t){function e(e){return e.id===t||e.options&&e.options.id===t}const n=this.series;let i=N(this.axes,e)||N(this.series,e);for(let s=0;!i&&s<n.length;s++)i=N(n[s].points||[],e);return i}getAxes(){const t=this;var n=this.options;const i=n.xAxis=K(n.xAxis||{});n=n.yAxis=K(n.yAxis||{}),R(this,"getAxes"),i.forEach((function(t,e){t.index=e,t.isX=!0})),n.forEach((function(t,e){t.index=e})),i.concat(n).forEach((function(n){new e(t,n)})),R(this,"afterGetAxes")}getSelectedPoints(){return this.series.reduce(((t,e)=>(e.getPointsCollection().forEach((e=>{$(e.selectedStaging,e.selected)&&t.push(e)})),t)),[])}getSelectedSeries(){return this.series.filter((function(t){return t.selected}))}setTitle(t,e,n){this.applyDescription("title",t),this.applyDescription("subtitle",e),this.applyDescription("caption",void 0),this.layOutTitles(n)}applyDescription(t,e){const n=this;var i="title"===t?{color:"#333333",fontSize:this.options.isStock?"1em":"1.2em",fontWeight:"bold"}:{color:"#666666",fontSize:"0.8em"};i=this.options[t]=z(!this.styledMode&&{style:i},this.options[t],e);let s=this[t];s&&e&&(this[t]=s=s.destroy()),i&&!s&&(s=this.renderer.text(i.text,0,0,i.useHTML).attr({align:i.align,class:"highcharts-"+t,zIndex:i.zIndex||4}).add(),s.update=function(e){n[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[t]](e)},this.styledMode||s.css(i.style),this[t]=s)}layOutTitles(t){const e=[0,0,0],n=this.renderer,i=this.spacingBox;["title","subtitle","caption"].forEach((function(t){const s=this[t],r=this.options[t],o=r.verticalAlign||"top";if(t="title"===t?"top"===o?-3:0:"top"===o?e[0]+2:0,s){s.css({width:(r.width||i.width+(r.widthAdjust||0))+"px"});const a=n.fontMetrics(s).b,c=Math.round(s.getBBox(r.useHTML).height);s.align(L({y:"bottom"===o?a:t+a,height:c},r),!1,"spacingBox"),r.floating||("top"===o?e[0]=Math.ceil(e[0]+c):"bottom"===o&&(e[2]=Math.ceil(e[2]+c)))}}),this),e[0]&&"top"===(this.options.title.verticalAlign||"top")&&(e[0]+=this.options.title.margin),e[2]&&"bottom"===this.options.caption.verticalAlign&&(e[2]+=this.options.caption.margin);const s=!this.titleOffset||this.titleOffset.join(",")!==e.join(",");this.titleOffset=e,R(this,"afterLayOutTitles"),!this.isDirtyBox&&s&&(this.isDirtyBox=this.isDirtyLegend=s,this.hasRendered&&$(t,!0)&&this.isDirtyBox&&this.redraw())}getContainerBox(){return{width:F(this.renderTo,"width",!0)||0,height:F(this.renderTo,"height",!0)||0}}getChartSize(){var t=this.options.chart;const e=t.width;t=t.height;const n=this.getContainerBox();this.chartWidth=Math.max(0,e||n.width||600),this.chartHeight=Math.max(0,W(t,this.chartWidth)||(1<n.height?n.height:400)),this.containerBox=n}temporaryDisplay(t){let e=this.renderTo;if(t)for(;e&&e.style;)e.hcOrigStyle&&(A(e,e.hcOrigStyle),delete e.hcOrigStyle),e.hcOrigDetached&&(w.body.removeChild(e),e.hcOrigDetached=!1),e=e.parentNode;else for(;e&&e.style;)if(w.body.contains(e)||e.parentNode||(e.hcOrigDetached=!0,w.body.appendChild(e)),("none"===F(e,"display",!1)||e.hcOricDetached)&&(e.hcOrigStyle={display:e.style.display,height:e.style.height,overflow:e.style.overflow},t={display:"block",overflow:"hidden"},e!==this.renderTo&&(t.height=0),A(e,t),e.offsetWidth||e.style.setProperty("display","block","important")),e=e.parentNode,e===w.body)break}setClassName(t){this.container.className="highcharts-container "+(t||"")}getContainer(){const t=this.options,e=t.chart;var n=Y();let i,s=this.renderTo;s||(this.renderTo=s=e.renderTo),V(s)&&(this.renderTo=s=w.getElementById(s)),s||D(13,!0,this);var r=q(k(s,"data-highcharts-chart"));B(r)&&b[r]&&b[r].hasRendered&&b[r].destroy(),k(s,"data-highcharts-chart",this.index),s.innerHTML=u.emptyHTML,e.skipClone||s.offsetWidth||this.temporaryDisplay(),this.getChartSize(),r=this.chartWidth;const a=this.chartHeight;if(A(s,{overflow:"hidden"}),this.styledMode||(i=L({position:"relative",overflow:"hidden",width:r+"px",height:a+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},e.style||{})),this.container=n=C("div",{id:n},i,s),this._cursor=n.style.cursor,this.renderer=new(e.renderer||!_?o.getRendererType(e.renderer):c)(n,r,a,void 0,e.forExport,t.exporting&&t.exporting.allowHTML,this.styledMode),this.containerBox=this.getContainerBox(),p(void 0,this),this.setClassName(e.className),this.styledMode)for(const o in t.defs)this.renderer.definition(t.defs[o]);else this.renderer.setStyle(e.style);this.renderer.chartIndex=this.index,R(this,"afterGetContainer")}getMargins(t){const{spacing:e,margin:n,titleOffset:i}=this;this.resetMargins(),i[0]&&!O(n[0])&&(this.plotTop=Math.max(this.plotTop,i[0]+e[0])),i[2]&&!O(n[2])&&(this.marginBottom=Math.max(this.marginBottom,i[2]+e[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(n,e),R(this,"getMargins"),t||this.getAxisMargins()}getAxisMargins(){const t=this,e=t.axisOffset=[0,0,0,0],n=t.colorAxis,i=t.margin,s=function(t){t.forEach((function(t){t.visible&&t.getOffset()}))};t.hasCartesianSeries?s(t.axes):n&&n.length&&s(n),x.forEach((function(n,s){O(i[s])||(t[n]+=e[s])})),t.setChartSize()}reflow(t){const e=this;var n=e.options.chart;n=O(n.width)&&O(n.height);const i=e.containerBox,s=e.getContainerBox();delete e.pointer.chartPosition,!n&&!e.isPrinting&&i&&s.width&&(s.width===i.width&&s.height===i.height||(h.clearTimeout(e.reflowTimeout),e.reflowTimeout=X((function(){e.container&&e.setSize(void 0,void 0,!1)}),t?100:0)),e.containerBox=s)}setReflow(){const t=this;var e=e=>{var n;null!==(n=t.options)&&void 0!==n&&n.chart.reflow&&t.hasLoaded&&t.reflow(e)};"function"===typeof ResizeObserver?new ResizeObserver(e).observe(t.renderTo):(e=I(T,"resize",e),I(this,"destroy",e))}setSize(t,e,n){const i=this,s=i.renderer;i.isResizing+=1,p(n,i),n=s.globalAnimation,i.oldChartHeight=i.chartHeight,i.oldChartWidth=i.chartWidth,"undefined"!==typeof t&&(i.options.chart.width=t),"undefined"!==typeof e&&(i.options.chart.height=e),i.getChartSize(),i.styledMode||(n?d:A)(i.container,{width:i.chartWidth+"px",height:i.chartHeight+"px"},n),i.setChartSize(!0),s.setSize(i.chartWidth,i.chartHeight,n),i.axes.forEach((function(t){t.isDirty=!0,t.setScale()})),i.isDirtyLegend=!0,i.isDirtyBox=!0,i.layOutTitles(),i.getMargins(),i.redraw(n),i.oldChartHeight=null,R(i,"resize"),X((function(){i&&R(i,"endResize",null,(function(){--i.isResizing}))}),f(n).duration)}setChartSize(t){var e=this.inverted;const n=this.renderer;var i=this.chartWidth,s=this.chartHeight;const r=this.options.chart,o=this.spacing,a=this.clipOffset;let c,l,h,u;this.plotLeft=c=Math.round(this.plotLeft),this.plotTop=l=Math.round(this.plotTop),this.plotWidth=h=Math.max(0,Math.round(i-c-this.marginRight)),this.plotHeight=u=Math.max(0,Math.round(s-l-this.marginBottom)),this.plotSizeX=e?u:h,this.plotSizeY=e?h:u,this.plotBorderWidth=r.plotBorderWidth||0,this.spacingBox=n.spacingBox={x:o[3],y:o[0],width:i-o[3]-o[1],height:s-o[0]-o[2]},this.plotBox=n.plotBox={x:c,y:l,width:h,height:u},e=2*Math.floor(this.plotBorderWidth/2),i=Math.ceil(Math.max(e,a[3])/2),s=Math.ceil(Math.max(e,a[0])/2),this.clipBox={x:i,y:s,width:Math.floor(this.plotSizeX-Math.max(e,a[1])/2-i),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(e,a[2])/2-s))},t||(this.axes.forEach((function(t){t.setAxisSize(),t.setAxisTranslation()})),n.alignElements()),R(this,"afterSetChartSize",{skipAxes:t})}resetMargins(){R(this,"resetMargins");const t=this,e=t.options.chart;["margin","spacing"].forEach((function(n){const i=e[n],s=U(i)?i:[i,i,i,i];["Top","Right","Bottom","Left"].forEach((function(i,r){t[n][r]=$(e[n+i],s[r])}))})),x.forEach((function(e,n){t[e]=$(t.margin[n],t.spacing[n])})),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]}drawChartBox(){const t=this.options.chart,e=this.renderer,n=this.chartWidth,i=this.chartHeight,s=this.styledMode,r=this.plotBGImage;var o=t.backgroundColor;const a=t.plotBackgroundColor,c=t.plotBackgroundImage,l=this.plotLeft,h=this.plotTop,u=this.plotWidth,d=this.plotHeight,f=this.plotBox,p=this.clipRect,g=this.clipBox;let m,y,v=this.chartBackground,b=this.plotBackground,w=this.plotBorder,x="animate";v||(this.chartBackground=v=e.rect().addClass("highcharts-background").add(),x="attr"),s?m=y=v.strokeWidth():(m=t.borderWidth||0,y=m+(t.shadow?8:0),o={fill:o||"none"},(m||v["stroke-width"])&&(o.stroke=t.borderColor,o["stroke-width"]=m),v.attr(o).shadow(t.shadow)),v[x]({x:y/2,y:y/2,width:n-y-m%2,height:i-y-m%2,r:t.borderRadius}),x="animate",b||(x="attr",this.plotBackground=b=e.rect().addClass("highcharts-plot-background").add()),b[x](f),s||(b.attr({fill:a||"none"}).shadow(t.plotShadow),c&&(r?(c!==r.attr("href")&&r.attr("href",c),r.animate(f)):this.plotBGImage=e.image(c,l,h,u,d).add())),p?p.animate({width:g.width,height:g.height}):this.clipRect=e.clipRect(g),x="animate",w||(x="attr",this.plotBorder=w=e.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),s||w.attr({stroke:t.plotBorderColor,"stroke-width":t.plotBorderWidth||0,fill:"none"}),w[x](w.crisp({x:l,y:h,width:u,height:d},-w.strokeWidth())),this.isDirtyBox=!1,R(this,"afterDrawChartBox")}propFromSeries(){const t=this,e=t.options.chart,n=t.options.series;let i,s,r;["inverted","angular","polar"].forEach((function(o){for(s=S[e.type],r=e[o]||s&&s.prototype[o],i=n&&n.length;!r&&i--;)(s=S[n[i].type])&&s.prototype[o]&&(r=!0);t[o]=r}))}linkSeries(t){const e=this,n=e.series;n.forEach((function(t){t.linkedSeries.length=0})),n.forEach((function(t){let n=t.options.linkedTo;V(n)&&(n=":previous"===n?e.series[t.index-1]:e.get(n))&&n.linkedParent!==t&&(n.linkedSeries.push(t),t.linkedParent=n,n.enabledDataSorting&&t.setDataSortingOptions(),t.visible=$(t.options.visible,n.options.visible,t.visible))})),R(this,"afterLinkSeries",{isUpdating:t})}renderSeries(){this.series.forEach((function(t){t.translate(),t.render()}))}render(){const t=this.axes,e=this.colorAxis,n=this.renderer,i=function(t){t.forEach((function(t){t.visible&&t.render()}))};let s=0;this.setTitle(),R(this,"beforeMargins"),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize();const r=this.plotWidth;t.some((function(t){if(t.horiz&&t.visible&&t.options.labels.enabled&&t.series.length)return s=21,!0}));const o=this.plotHeight=Math.max(this.plotHeight-s,0);t.forEach((function(t){t.setScale()})),this.getAxisMargins();const a=1.1<r/this.plotWidth,c=1.05<o/this.plotHeight;(a||c)&&(t.forEach((function(t){(t.horiz&&a||!t.horiz&&c)&&t.setTickInterval(!0)})),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?i(t):e&&e.length&&i(e),this.seriesGroup||(this.seriesGroup=n.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(t){const e=this,n=z(!0,this.options.credits,t);n.enabled&&!this.credits&&(this.credits=this.renderer.text(n.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){n.href&&(T.location.href=n.href)})).attr({align:n.position.align,zIndex:8}),e.styledMode||this.credits.css(n.style),this.credits.add().align(n.position),this.credits.update=function(t){e.credits=e.credits.destroy(),e.addCredits(t)})}destroy(){const t=this,e=t.axes,n=t.series,i=t.container,s=i&&i.parentNode;let o;for(R(t,"destroy"),t.renderer.forExport?M(b,t):b[t.index]=void 0,r.chartCount--,t.renderTo.removeAttribute("data-highcharts-chart"),H(t),o=e.length;o--;)e[o]=e[o].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),o=n.length;o--;)n[o]=n[o].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach((function(e){const n=t[e];n&&n.destroy&&(t[e]=n.destroy())})),i&&(i.innerHTML=u.emptyHTML,H(i),s&&P(i)),G(t,(function(e,n){delete t[n]}))}firstRender(){const t=this,e=t.options;t.getContainer(),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),(j(e.series)?e.series:[]).forEach((function(e){t.initSeries(e)})),t.linkSeries(),t.setSeriesData(),R(t,"beforeRender"),t.render(),t.pointer.getChartPosition(),t.renderer.imgCount||t.hasLoaded||t.onload(),t.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach((function(t){t&&"undefined"!==typeof this.index&&t.apply(this,[this])}),this),R(this,"load"),R(this,"render"),O(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){const{options:t,title:e}=this;t&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":(e&&e.element.textContent||"").replace(/</g,"&lt;")}),t.accessibility&&!1===t.accessibility.enabled||D('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(t,e,n){const i=this;let s;return t&&(e=$(e,!0),R(i,"addSeries",{options:t},(function(){s=i.initSeries(t),i.isDirtyLegend=!0,i.linkSeries(),s.enabledDataSorting&&s.setData(t.data,!1),R(i,"afterAddSeries",{series:s}),e&&i.redraw(n)}))),s}addAxis(t,e,n,i){return this.createAxis(e?"xAxis":"yAxis",{axis:t,redraw:n,animation:i})}addColorAxis(t,e,n){return this.createAxis("colorAxis",{axis:t,redraw:e,animation:n})}createAxis(t,n){return t=new e(this,z(n.axis,{index:this[t].length,isX:"xAxis"===t})),$(n.redraw,!0)&&this.redraw(n.animation),t}showLoading(t){const e=this,n=e.options,i=n.loading,s=function(){r&&A(r,{left:e.plotLeft+"px",top:e.plotTop+"px",width:e.plotWidth+"px",height:e.plotHeight+"px"})};let r=e.loadingDiv,o=e.loadingSpan;r||(e.loadingDiv=r=C("div",{className:"highcharts-loading highcharts-loading-hidden"},null,e.container)),o||(e.loadingSpan=o=C("span",{className:"highcharts-loading-inner"},null,r),I(e,"redraw",s)),r.className="highcharts-loading",u.setElementHTML(o,$(t,n.lang.loading,"")),e.styledMode||(A(r,L(i.style,{zIndex:10})),A(o,i.labelStyle),e.loadingShown||(A(r,{opacity:0,display:""}),d(r,{opacity:i.style.opacity||.5},{duration:i.showDuration||0}))),e.loadingShown=!0,s()}hideLoading(){const t=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",this.styledMode||d(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){A(e,{display:"none"})}})),this.loadingShown=!1}update(t,e,n,i){const s=this,r={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},o=t.isResponsiveOptions,a=[];let c,h;R(s,"update",{options:t}),o||s.setResponsive(!1,!0),t=E(t,s.options),s.userOptions=z(s.userOptions,t);var u=t.chart;if(u){if(z(!0,s.options.chart,u),"className"in u&&s.setClassName(u.className),"inverted"in u||"polar"in u||"type"in u){s.propFromSeries();var d=!0}"alignTicks"in u&&(d=!0),"events"in u&&v(this,u),G(u,(function(t,e){-1!==s.propsRequireUpdateSeries.indexOf("chart."+e)&&(c=!0),-1!==s.propsRequireDirtyBox.indexOf(e)&&(s.isDirtyBox=!0),-1!==s.propsRequireReflow.indexOf(e)&&(o?s.isDirtyBox=!0:h=!0)})),!s.styledMode&&u.style&&s.renderer.setStyle(s.options.chart.style||{})}!s.styledMode&&t.colors&&(this.options.colors=t.colors),t.time&&(this.time===m&&(this.time=new l(t.time)),z(!0,s.options.time,t.time)),G(t,(function(e,n){s[n]&&"function"===typeof s[n].update?s[n].update(e,!1):"function"===typeof s[r[n]]?s[r[n]](e):"colors"!==n&&-1===s.collectionsWithUpdate.indexOf(n)&&z(!0,s.options[n],t[n]),"chart"!==n&&-1!==s.propsRequireUpdateSeries.indexOf(n)&&(c=!0)})),this.collectionsWithUpdate.forEach((function(e){let i;t[e]&&(i=[],s[e].forEach((function(t,e){t.options.isInternal||i.push($(t.options.index,e))})),K(t[e]).forEach((function(t,r){const o=O(t.id);let a;o&&(a=s.get(t.id)),!a&&s[e]&&(a=s[e][i?i[r]:r])&&o&&O(a.options.id)&&(a=void 0),a&&a.coll===e&&(a.update(t,!1),n&&(a.touched=!0)),!a&&n&&s.collectionsWithInit[e]&&(s.collectionsWithInit[e][0].apply(s,[t].concat(s.collectionsWithInit[e][1]||[]).concat([!1])).touched=!0)})),n&&s[e].forEach((function(t){t.touched||t.options.isInternal?delete t.touched:a.push(t)})))})),a.forEach((function(t){t.chart&&t.remove&&t.remove(!1)})),d&&s.axes.forEach((function(t){t.update({},!1)})),c&&s.getSeriesOrderByLinks().forEach((function(t){t.chart&&t.update({},!1)}),this),d=u&&u.width,u=u&&(V(u.height)?W(u.height,d||s.chartWidth):u.height),h||B(d)&&d!==s.chartWidth||B(u)&&u!==s.chartHeight?s.setSize(d,u,i):$(e,!0)&&s.redraw(i),R(s,"afterUpdate",{options:t,redraw:e,animation:i})}setSubtitle(t,e){this.applyDescription("subtitle",t),this.layOutTitles(e)}setCaption(t,e){this.applyDescription("caption",t),this.layOutTitles(e)}showResetZoom(){function t(){e.zoomOut()}const e=this,n=g.lang,i=e.options.chart.zooming.resetButton,s=i.theme,r="chart"===i.relativeTo||"spacingBox"===i.relativeTo?null:"scrollablePlotBox";R(this,"beforeShowResetZoom",null,(function(){e.resetZoomButton=e.renderer.button(n.resetZoom,null,null,t,s).attr({align:i.position.align,title:n.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,r)})),R(this,"afterShowResetZoom")}zoomOut(){R(this,"selection",{resetSelection:!0},this.zoom)}zoom(t){const e=this,n=e.pointer;let i,s=!1;!t||t.resetSelection?(e.axes.forEach((function(t){i=t.zoom()})),n.initiated=!1):t.xAxis.concat(t.yAxis).forEach((function(t){const r=t.axis;(n[r.isXAxis?"zoomX":"zoomY"]&&O(n.mouseDownX)&&O(n.mouseDownY)&&e.isInsidePlot(n.mouseDownX-e.plotLeft,n.mouseDownY-e.plotTop,{axis:r})||!O(e.inverted?n.mouseDownX:n.mouseDownY))&&(i=r.zoom(t.min,t.max),r.displayBtn&&(s=!0))}));const r=e.resetZoomButton;s&&!r?e.showResetZoom():!s&&U(r)&&(e.resetZoomButton=r.destroy()),i&&e.redraw($(e.options.chart.animation,t&&t.animation,100>e.pointCount))}pan(t,e){const n=this,i=n.hoverPoints;e="object"===typeof e?e:{enabled:e,type:"x"};const s=n.options.chart;s&&s.panning&&(s.panning=e);const r=e.type;let o;R(this,"pan",{originalEvent:t},(function(){i&&i.forEach((function(t){t.setState()}));let e=n.xAxis;"xy"===r?e=e.concat(n.yAxis):"y"===r&&(e=n.yAxis);const s={};e.forEach((function(e){if(e.options.panningEnabled&&!e.options.isInternal){var i=e.horiz,a=t[i?"chartX":"chartY"];i=i?"mouseDownX":"mouseDownY";var c=n[i],l=e.minPointOffset||0,h=e.reversed&&!n.inverted||!e.reversed&&n.inverted?-1:1,u=e.getExtremes(),d=e.toValue(c-a,!0)+l*h,f=e.toValue(c+e.len-a,!0)-(l*h||e.isXAxis&&e.pointRangePadding||0),p=f<d;h=e.hasVerticalPanning(),c=p?f:d,d=p?d:f;var g=e.panningState;!h||e.isXAxis||g&&!g.isDirty||e.series.forEach((function(t){var e=t.getProcessedData(!0);e=t.getExtremes(e.yData,!0),g||(g={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE}),B(e.dataMin)&&B(e.dataMax)&&(g.startMin=Math.min($(t.options.threshold,1/0),e.dataMin,g.startMin),g.startMax=Math.max($(t.options.threshold,-1/0),e.dataMax,g.startMax))})),h=Math.min($(g&&g.startMin,u.dataMin),l?u.min:e.toValue(e.toPixels(u.min)-e.minPixelPadding)),f=Math.max($(g&&g.startMax,u.dataMax),l?u.max:e.toValue(e.toPixels(u.max)+e.minPixelPadding)),e.panningState=g,e.isOrdinal||(l=h-c,0<l&&(d+=l,c=h),l=d-f,0<l&&(d=f,c-=l),e.series.length&&c!==u.min&&d!==u.max&&c>=h&&d<=f&&(e.setExtremes(c,d,!1,!1,{trigger:"pan"}),!n.resetZoomButton&&c!==h&&d!==f&&r.match("y")&&(n.showResetZoom(),e.displayBtn=!1),o=!0),s[i]=a)}})),G(s,((t,e)=>{n[e]=t})),o&&n.redraw(!1),A(n.container,{cursor:"move"})}))}}return L(Q.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Q.prototype.addAxis,[!0]],yAxis:[Q.prototype.addAxis,[!1]],series:[Q.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" ")}),Q})),e(n,"Core/Legend/LegendSymbol.js",[n["Core/Utilities.js"]],(function(t){const{extend:e,merge:n,pick:i}=t;var s;return function(t){t.lineMarker=function(t,s){s=this.legendItem=this.legendItem||{};var r=this.options;const o=t.symbolWidth,a=t.symbolHeight,c=a/2,l=this.chart.renderer,h=s.group;t=t.baseline-Math.round(.3*t.fontMetrics.b);let u={},d=r.marker,f=0;this.chart.styledMode||(u={"stroke-width":Math.min(r.lineWidth||0,24)},r.dashStyle?u.dashstyle=r.dashStyle:"square"!==r.linecap&&(u["stroke-linecap"]="round")),s.line=l.path().addClass("highcharts-graph").attr(u).add(h),u["stroke-linecap"]&&(f=Math.min(s.line.strokeWidth(),o)/2),o&&s.line.attr({d:[["M",f,t],["L",o-f,t]]}),d&&!1!==d.enabled&&o&&(r=Math.min(i(d.radius,c),c),0===this.symbol.indexOf("url")&&(d=n(d,{width:a,height:a}),r=0),s.symbol=s=l.symbol(this.symbol,o/2-r,t-r,2*r,2*r,e({context:"legend"},d)).addClass("highcharts-point").add(h),s.isMarker=!0)},t.rectangle=function(t,e){e=e.legendItem||{};const n=t.symbolHeight,s=t.options.squareSymbol;e.symbol=this.chart.renderer.rect(s?(t.symbolWidth-n)/2:0,t.baseline-n+1,s?n:t.symbolWidth,n,i(t.options.symbolRadius,n/2)).addClass("highcharts-point").attr({zIndex:3}).add(e.group)}}(s||(s={})),s})),e(n,"Core/Series/SeriesDefaults.js",[],(function(){return{lineWidth:1,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){const{numberFormatter:t}=this.series.chart;return"number"!==typeof this.y?"":t(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}})),e(n,"Core/Series/Series.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Defaults.js"],n["Core/Foundation.js"],n["Core/Globals.js"],n["Core/Legend/LegendSymbol.js"],n["Core/Series/Point.js"],n["Core/Series/SeriesDefaults.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r,o,a,c,l){const{animObject:h,setAnimation:u}=t,{defaultOptions:d}=e,{registerEventOptions:f}=n,{hasTouch:p,svg:g,win:m}=i,{seriesTypes:y}=a,{arrayMax:v,arrayMin:b,clamp:w,cleanRecursively:x,correctFloat:_,defined:T,erase:S,error:I,extend:k,find:E,fireEvent:C,getNestedProperty:A,isArray:O,isNumber:P,isString:M,merge:D,objectEach:L,pick:N,removeEvent:R,splat:F,syncTimeout:j}=l;class B{constructor(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0}init(t,e){C(this,"init",{options:e});const n=this,i=t.series;this.eventsToUnbind=[],n.chart=t,n.options=n.setOptions(e),e=n.options,n.linkedSeries=[],n.bindAxes(),k(n,{name:e.name,state:"",visible:!1!==e.visible,selected:!0===e.selected}),f(this,e);const s=e.events;let r;(s&&s.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),n.getColor(),n.getSymbol(),n.parallelArrays.forEach((function(t){n[t+"Data"]||(n[t+"Data"]=[])})),n.isCartesian&&(t.hasCartesianSeries=!0),i.length&&(r=i[i.length-1]),n._i=N(r&&r._i,-1)+1,n.opacity=n.options.opacity,t.orderSeries(this.insert(i)),e.dataSorting&&e.dataSorting.enabled?n.setDataSortingOptions():n.points||n.data||n.setData(e.data,!1),C(this,"afterInit")}is(t){return y[t]&&this instanceof y[t]}insert(t){const e=this.options.index;let n;if(P(e)){for(n=t.length;n--;)if(e>=N(t[n].options.index,t[n]._i)){t.splice(n+1,0,this);break}-1===n&&t.unshift(this),n+=1}else t.push(this);return N(n,t.length-1)}bindAxes(){const t=this,e=t.options,n=t.chart;let i;C(this,"bindAxes",null,(function(){(t.axisTypes||[]).forEach((function(s){let r=0;n[s].forEach((function(n){i=n.options,(e[s]===r&&!i.isInternal||"undefined"!==typeof e[s]&&e[s]===i.id||"undefined"===typeof e[s]&&0===i.index)&&(t.insert(n.series),t[s]=n,n.isDirty=!0),i.isInternal||r++})),t[s]||t.optionalAxis===s||I(18,!0,n)}))})),C(this,"afterBindAxes")}updateParallelArrays(t,e,n){const i=t.series,s=P(e)?function(n){const s="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=s}:function(t){Array.prototype[e].apply(i[t+"Data"],n)};i.parallelArrays.forEach(s)}hasData(){return this.visible&&"undefined"!==typeof this.dataMax&&"undefined"!==typeof this.dataMin||this.visible&&this.yData&&0<this.yData.length}autoIncrement(t){var e=this.options;const n=e.pointIntervalUnit,i=e.relativeXValue,s=this.chart.time;let r,o=this.xIncrement;return o=N(o,e.pointStart,0),this.pointInterval=r=N(this.pointInterval,e.pointInterval,1),i&&P(t)&&(r*=t),n&&(e=new s.Date(o),"day"===n?s.set("Date",e,s.get("Date",e)+r):"month"===n?s.set("Month",e,s.get("Month",e)+r):"year"===n&&s.set("FullYear",e,s.get("FullYear",e)+r),r=e.getTime()-o),i&&P(t)?o+r:(this.xIncrement=o+r,o)}setDataSortingOptions(){const t=this.options;k(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),T(t.pointRange)||(t.pointRange=1)}setOptions(t){var e=this.chart,n=e.options,i=n.plotOptions,s=e.userOptions||{};t=D(t),e=e.styledMode;const r={plotOptions:i,userOptions:t};C(this,"setOptions",r);const o=r.plotOptions[this.type],a=s.plotOptions||{};return this.userOptions=r.userOptions,s=D(o,i.series,s.plotOptions&&s.plotOptions[this.type],t),this.tooltipOptions=D(d.tooltip,d.plotOptions.series&&d.plotOptions.series.tooltip,d.plotOptions[this.type].tooltip,n.tooltip.userOptions,i.series&&i.series.tooltip,i[this.type].tooltip,t.tooltip),this.stickyTracking=N(t.stickyTracking,a[this.type]&&a[this.type].stickyTracking,a.series&&a.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||s.stickyTracking),null===o.marker&&delete s.marker,this.zoneAxis=s.zoneAxis,i=this.zones=(s.zones||[]).slice(),!s.negativeColor&&!s.negativeFillColor||s.zones||(n={value:s[this.zoneAxis+"Threshold"]||s.threshold||0,className:"highcharts-negative"},e||(n.color=s.negativeColor,n.fillColor=s.negativeFillColor),i.push(n)),i.length&&T(i[i.length-1].value)&&i.push(e?{}:{color:this.color,fillColor:this.fillColor}),C(this,"afterSetOptions",{options:s}),s}getName(){return N(this.options.name,"Series "+(this.index+1))}getCyclic(t,e,n){const i=this.chart,s=this.userOptions,r=t+"Index",o=t+"Counter",a=n?n.length:N(i.options.chart[t+"Count"],i[t+"Count"]);if(!e){var c=N(s[r],s["_"+r]);T(c)||(i.series.length||(i[o]=0),s["_"+r]=c=i[o]%a,i[o]+=1),n&&(e=n[c])}"undefined"!==typeof c&&(this[r]=c),this[t]=e}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||d.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)}findPointIndex(t,e){const n=t.id,i=t.x,s=this.points;var o,a=this.options.dataSorting;let c,l;if(n)a=this.chart.get(n),a instanceof r&&(o=a);else if((this.linkedParent||this.enabledDataSorting||this.options.relativeXValue)&&(o=e=>!e.touched&&e.index===t.index,a&&a.matchByName?o=e=>!e.touched&&e.name===t.name:this.options.relativeXValue&&(o=e=>!e.touched&&e.options.x===t.x),o=E(s,o),!o))return;return o&&(l=o&&o.index,"undefined"!==typeof l&&(c=!0)),"undefined"===typeof l&&P(i)&&(l=this.xData.indexOf(i,e)),-1!==l&&"undefined"!==typeof l&&this.cropped&&(l=l>=this.cropStart?l-this.cropStart:l),!c&&P(l)&&s[l]&&s[l].touched&&(l=void 0),l}updateData(t,e){const n=this.options,i=n.dataSorting,s=this.points,r=[],o=this.requireSorting,a=t.length===s.length;let c,l,h,u=!0;if(this.xIncrement=null,t.forEach((function(t,e){var l=T(t)&&this.pointClass.prototype.optionsToObject.call({series:this},t)||{};const u=l.x;l.id||P(u)?(l=this.findPointIndex(l,h),-1===l||"undefined"===typeof l?r.push(t):s[l]&&t!==n.data[l]?(s[l].update(t,!1,null,!1),s[l].touched=!0,o&&(h=l+1)):s[l]&&(s[l].touched=!0),(!a||e!==l||i&&i.enabled||this.hasDerivedData)&&(c=!0)):r.push(t)}),this),c)for(t=s.length;t--;)(l=s[t])&&!l.touched&&l.remove&&l.remove(!1,e);else!a||i&&i.enabled?u=!1:(t.forEach((function(t,e){t===s[e].y||s[e].destroyed||s[e].update(t,!1,null,!1)})),r.length=0);return s.forEach((function(t){t&&(t.touched=!1)})),!!u&&(r.forEach((function(t){this.addPoint(t,!1,null,null,!1)}),this),null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=v(this.xData),this.autoIncrement()),!0)}setData(t,e=!0,n,i){var s;const r=this,o=r.points,a=o&&o.length||0,c=r.options,l=r.chart,h=c.dataSorting,u=r.xAxis,d=c.turboThreshold,f=this.xData,p=this.yData;var g=r.pointArrayMap;g=g&&g.length;const m=c.keys;let y,v=0,b=1,w=null;if(!l.options.chart.allowMutatingData){c.data&&delete r.options.data,r.userOptions.data&&delete r.userOptions.data;var x=D(!0,t)}if(t=x||t||[],x=t.length,h&&h.enabled&&(t=this.sortData(t)),l.options.chart.allowMutatingData&&!1!==i&&x&&a&&!r.cropped&&!r.hasGroupedData&&r.visible&&!r.boosted&&(y=this.updateData(t,n)),!y){if(r.xIncrement=null,r.colorCounter=0,this.parallelArrays.forEach((function(t){r[t+"Data"].length=0})),d&&x>d)if(w=r.getFirstValidPoint(t),P(w))for(n=0;n<x;n++)f[n]=this.autoIncrement(),p[n]=t[n];else if(O(w))if(g)if(w.length===g)for(n=0;n<x;n++)f[n]=this.autoIncrement(),p[n]=t[n];else for(n=0;n<x;n++)i=t[n],f[n]=i[0],p[n]=i.slice(1,g+1);else if(m&&(v=m.indexOf("x"),b=m.indexOf("y"),v=0<=v?v:0,b=0<=b?b:1),1===w.length&&(b=0),v===b)for(n=0;n<x;n++)f[n]=this.autoIncrement(),p[n]=t[n][b];else for(n=0;n<x;n++)i=t[n],f[n]=i[v],p[n]=i[b];else I(12,!1,l);else for(n=0;n<x;n++)i={series:r},r.pointClass.prototype.applyOptions.apply(i,[t[n]]),r.updateParallelArrays(i,n);for(p&&M(p[0])&&I(14,!0,l),r.data=[],r.options.data=r.userOptions.data=t,n=a;n--;)null===(s=o[n])||void 0===s||s.destroy();u&&(u.minRange=u.userMinRange),r.isDirty=l.isDirtyBox=!0,r.isDirtyData=!!o,n=!1}"point"===c.legendType&&(this.processData(),this.generatePoints()),e&&l.redraw(n)}sortData(t){const e=this,n=e.options.dataSorting.sortKey||"y",i=function(t,e){return T(e)&&t.pointClass.prototype.optionsToObject.call({series:t},e)||{}};return t.forEach((function(n,s){t[s]=i(e,n),t[s].index=s}),this),t.concat().sort(((t,e)=>(t=A(n,t),e=A(n,e),e<t?-1:e>t?1:0))).forEach((function(t,e){t.x=e}),this),e.linkedSeries&&e.linkedSeries.forEach((function(e){const n=e.options,s=n.data;n.dataSorting&&n.dataSorting.enabled||!s||(s.forEach((function(n,r){s[r]=i(e,n),t[r]&&(s[r].x=t[r].x,s[r].index=r)})),e.setData(s,!1))})),t}getProcessedData(t){var e=this.xAxis,n=this.options,i=n.cropThreshold;const s=t||this.getExtremesFromAll||n.getExtremesFromAll,r=this.isCartesian;t=e&&e.val2lin,n=!(!e||!e.logarithmic);let o,a,c,l=0,h=this.xData,u=this.yData,d=this.requireSorting;var f=!1;const p=h.length;if(e&&(f=e.getExtremes(),a=f.min,c=f.max,f=!(!e.categories||e.names.length)),r&&this.sorted&&!s&&(!i||p>i||this.forceCrop))if(h[p-1]<a||h[0]>c)h=[],u=[];else if(this.yData&&(h[0]<a||h[p-1]>c)){var g=this.cropData(this.xData,this.yData,a,c);h=g.xData,u=g.yData,l=g.start,g=!0}for(i=h.length||1;--i;)e=n?t(h[i])-t(h[i-1]):h[i]-h[i-1],0<e&&("undefined"===typeof o||e<o)?o=e:0>e&&d&&!f&&(I(15,!1,this.chart),d=!1);return{xData:h,yData:u,cropped:g,cropStart:l,closestPointRange:o}}processData(t){const e=this.xAxis;if(this.isCartesian&&!this.isDirty&&!e.isDirty&&!this.yAxis.isDirty&&!t)return!1;t=this.getProcessedData(),this.cropped=t.cropped,this.cropStart=t.cropStart,this.processedXData=t.xData,this.processedYData=t.yData,this.closestPointRange=this.basePointRange=t.closestPointRange,C(this,"afterProcessData")}cropData(t,e,n,i,s){const r=t.length;let o,a=0,c=r;for(s=N(s,this.cropShoulder),o=0;o<r;o++)if(t[o]>=n){a=Math.max(0,o-s);break}for(n=o;n<r;n++)if(t[n]>i){c=n+s;break}return{xData:t.slice(a,c),yData:e.slice(a,c),start:a,end:c}}generatePoints(){var t=this.options;const e=this.processedData||t.data,n=this.processedXData,i=this.processedYData,s=this.pointClass,r=n.length,o=this.cropStart||0,a=this.hasGroupedData,c=t.keys,l=[];let h;t=t.dataGrouping&&t.dataGrouping.groupAll?o:0;let u,d,f=this.data;if(!f&&!a){var p=[];p.length=e.length,f=this.data=p}for(c&&a&&(this.options.keys=!1),d=0;d<r;d++)p=o+d,a?(u=(new s).init(this,[n[d]].concat(F(i[d]))),u.dataGroup=this.groupMap[t+d],u.dataGroup.options&&(u.options=u.dataGroup.options,k(u,u.dataGroup.options),delete u.dataLabels)):(u=f[p])||"undefined"===typeof e[p]||(f[p]=u=(new s).init(this,e[p],n[d])),u&&(u.index=a?t+d:p,l[d]=u);if(this.options.keys=c,f&&(r!==(h=f.length)||a))for(d=0;d<h;d++)d!==o||a||(d+=r),f[d]&&(f[d].destroyElements(),f[d].plotX=void 0);this.data=f,this.points=l,C(this,"afterGeneratePoints")}getXExtremes(t){return{min:b(t),max:v(t)}}getExtremes(t,e){const n=this.xAxis;var i=this.yAxis;const s=this.processedXData||this.xData,r=[],o=this.requireSorting?this.cropShoulder:0;i=!!i&&i.positiveValuesOnly;let a,c=0,l=0,h=0;t=t||this.stackedYData||this.processedYData||[];const u=t.length;if(n){var d=n.getExtremes();c=d.min,l=d.max}for(a=0;a<u;a++){var f=s[a];d=t[a];var p=(P(d)||O(d))&&(d.length||0<d||!i);if(f=e||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!n||(s[a+o]||f)>=c&&(s[a-o]||f)<=l,p&&f)if(p=d.length)for(;p--;)P(d[p])&&(r[h++]=d[p]);else r[h++]=d}return t={activeYData:r,dataMin:b(r),dataMax:v(r)},C(this,"afterGetExtremes",{dataExtremes:t}),t}applyExtremes(){const t=this.getExtremes();return this.dataMin=t.dataMin,this.dataMax=t.dataMax,t}getFirstValidPoint(t){const e=t.length;let n=0,i=null;for(;null===i&&n<e;)i=t[n],n++;return i}translate(){var t;this.processedXData||this.processData(),this.generatePoints();const e=this.options,n=e.stacking,i=this.xAxis,s=i.categories,r=this.enabledDataSorting,o=this.yAxis,a=this.points,c=a.length,l=this.pointPlacementToXValue(),h=!!l,u=e.threshold,d=e.startFromThreshold?u:0,f=this.zoneAxis||"y";let p,g,m,y,v=Number.MAX_VALUE;for(p=0;p<c;p++){const c=a[p],b=c.x;let x,S,I=c.y,k=c.low;const E=n&&(null===(t=o.stacking)||void 0===t?void 0:t.stacks[(this.negStacks&&I<(d?0:u)?"-":"")+this.stackKey]);let C;g=i.translate(b,!1,!1,!1,!0,l),c.plotX=P(g)?_(w(g,-1e5,1e5)):void 0,n&&this.visible&&E&&E[b]&&(y=this.getStackIndicator(y,b,this.index),!c.isNull&&y.key&&(x=E[b],S=x.points[y.key]),x&&O(S)&&(k=S[0],I=S[1],k===d&&y.key===E[b].base&&(k=N(P(u)?u:o.min)),o.positiveValuesOnly&&T(k)&&0>=k&&(k=void 0),c.total=c.stackTotal=N(x.total),c.percentage=T(c.y)&&x.total?c.y/x.total*100:void 0,c.stackY=I,this.irregularWidths||x.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),c.yBottom=T(k)?w(o.translate(k,!1,!0,!1,!0),-1e5,1e5):void 0,this.dataModify&&(I=this.dataModify.modifyValue(I,p)),P(I)&&void 0!==c.plotX&&(C=o.translate(I,!1,!0,!1,!0),C=P(C)?w(C,-1e5,1e5):void 0),c.plotY=C,c.isInside=this.isPointInside(c),c.clientX=h?_(i.translate(b,!1,!1,!1,!0,l)):g,c.negative=c[f]<(e[f+"Threshold"]||u||0),c.category=N(s&&s[c.x],c.x),c.isNull||!1===c.visible||("undefined"!==typeof m&&(v=Math.min(v,Math.abs(g-m))),m=g),c.zone=this.zones.length?c.getZone():void 0,!c.graphic&&this.group&&r&&(c.isNew=!0)}this.closestPointRangePx=v,C(this,"afterTranslate")}getValidPoints(t,e,n){const i=this.chart;return(t||this.points||[]).filter((function(t){const{plotX:s,plotY:r}=t;return!(!(n||!t.isNull&&P(r))||e&&!i.isInsidePlot(s,r,{inverted:i.inverted}))&&!1!==t.visible}))}getClipBox(){const{chart:t,xAxis:e,yAxis:n}=this,i=D(t.clipBox);return e&&e.len!==t.plotSizeX&&(i.width=e.len),n&&n.len!==t.plotSizeY&&(i.height=n.len),i}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0)}setClip(){const{chart:t,group:e,markerGroup:n}=this,i=t.sharedClips,s=t.renderer,r=this.getClipBox(),o=this.getSharedClipKey();let a=i[o];a?a.animate(r):i[o]=a=s.clipRect(r),e&&e.clip(!1===this.options.clip?void 0:a),n&&n.clip()}animate(t){const{chart:e,group:n,markerGroup:i}=this,s=e.inverted;var r=h(this.options.animation),o=[this.getSharedClipKey(),r.duration,r.easing,r.defer].join();let a=e.sharedClips[o],c=e.sharedClips[o+"m"];if(t&&n)r=this.getClipBox(),a?a.attr("height",r.height):(r.width=0,s&&(r.x=e.plotHeight),a=e.renderer.clipRect(r),e.sharedClips[o]=a,c=e.renderer.clipRect({x:-99,y:-99,width:s?e.plotWidth+199:99,height:s?99:e.plotHeight+199}),e.sharedClips[o+"m"]=c),n.clip(a),i&&i.clip(c);else if(a&&!a.hasClass("highcharts-animating")){o=this.getClipBox();const t=r.step;i&&i.element.childNodes.length&&(r.step=function(e,n){t&&t.apply(n,arguments),"width"===n.prop&&c&&c.element&&c.attr(s?"height":"width",e+99)}),a.addClass("highcharts-animating").animate(o,r)}}afterAnimate(){this.setClip(),L(this.chart.sharedClips,((t,e,n)=>{t&&!this.chart.container.querySelector(`[clip-path="url(#${t.id})"]`)&&(t.destroy(),delete n[e])})),this.finishedAnimating=!0,C(this,"afterAnimate")}drawPoints(t=this.points){const e=this.chart,n=e.styledMode,{colorAxis:i,options:s}=this,r=s.marker,o=this[this.specialGroup||"markerGroup"],a=this.xAxis,c=N(r.enabled,!(a&&!a.isRadial)||null,this.closestPointRangePx>=r.enabledThreshold*r.radius);let l,h,u,d,f,p;if(!1!==r.enabled||this._hasPointMarkers)for(l=0;l<t.length;l++){h=t[l],d=(u=h.graphic)?"animate":"attr";var g=h.marker||{};if(f=!!h.marker,(c&&"undefined"===typeof g.enabled||g.enabled)&&!h.isNull&&!1!==h.visible){const t=N(g.symbol,this.symbol,"rect");p=this.markerAttribs(h,h.selected&&"select"),this.enabledDataSorting&&(h.startXPos=a.reversed?-(p.width||0):a.width);const s=!1!==h.isInside;!u&&s&&(0<(p.width||0)||h.hasImage)&&(h.graphic=u=e.renderer.symbol(t,p.x,p.y,p.width,p.height,f?g:r).add(o),this.enabledDataSorting&&e.hasRendered&&(u.attr({x:h.startXPos}),d="animate")),u&&"animate"===d&&u[s?"show":"hide"](s).animate(p),u&&(g=this.pointAttribs(h,n||!h.selected?void 0:"select"),n?i&&u.css({fill:g.fill}):u[d](g)),u&&u.addClass(h.getClassName(),!0)}else u&&(h.graphic=u.destroy())}}markerAttribs(t,e){const n=this.options;var i=n.marker;const s=t.marker||{},r=s.symbol||i.symbol,o={};let a=N(s.radius,i&&i.radius);return e&&(i=i.states[e],e=s.states&&s.states[e],a=N(e&&e.radius,i&&i.radius,a&&a+(i&&i.radiusPlus||0))),t.hasImage=r&&0===r.indexOf("url"),t.hasImage&&(a=0),t=t.pos(),P(a)&&t&&(o.x=t[0]-a,o.y=t[1]-a,n.crisp&&(o.x=Math.floor(o.x))),a&&(o.width=o.height=2*a),o}pointAttribs(t,e){var n=this.options.marker,i=t&&t.options;const s=i&&i.marker||{};var r=i&&i.color,o=t&&t.color;const a=t&&t.zone&&t.zone.color;let c=this.color;return t=N(s.lineWidth,n.lineWidth),i=1,c=r||a||o||c,r=s.fillColor||n.fillColor||c,o=s.lineColor||n.lineColor||c,e=e||"normal",n=n.states[e]||{},e=s.states&&s.states[e]||{},t=N(e.lineWidth,n.lineWidth,t+N(e.lineWidthPlus,n.lineWidthPlus,0)),r=e.fillColor||n.fillColor||r,o=e.lineColor||n.lineColor||o,i=N(e.opacity,n.opacity,i),{stroke:o,"stroke-width":t,fill:r,opacity:i}}destroy(t){const e=this,n=e.chart,i=/AppleWebKit\/533/.test(m.navigator.userAgent),s=e.data||[];let r,o,a,h;for(C(e,"destroy",{keepEventsForUpdate:t}),this.removeEvents(t),(e.axisTypes||[]).forEach((function(t){(h=e[t])&&h.series&&(S(h.series,e),h.isDirty=h.forceRedraw=!0)})),e.legendItem&&e.chart.legend.destroyItem(e),o=s.length;o--;)(a=s[o])&&a.destroy&&a.destroy();e.clips&&e.clips.forEach((t=>t.destroy())),l.clearTimeout(e.animationTimeout),L(e,(function(t,e){t instanceof c&&!t.survive&&(r=i&&"group"===e?"hide":"destroy",t[r]())})),n.hoverSeries===e&&(n.hoverSeries=void 0),S(n.series,e),n.orderSeries(),L(e,(function(n,i){t&&"hcEvents"===i||delete e[i]}))}applyZones(){const t=this,e=this.chart,n=e.renderer,i=this.zones,s=this.clips||[],r=this.graph,o=this.area,a=Math.max(e.plotWidth,e.plotHeight),c=this[(this.zoneAxis||"y")+"Axis"],l=e.inverted;let h,u,d,f,p,g,m,y,v,b,x,_=!1;i.length&&(r||o)&&c&&"undefined"!==typeof c.min?(p=c.reversed,g=c.horiz,r&&!this.showLine&&r.hide(),o&&o.hide(),f=c.getExtremes(),i.forEach((function(i,T){h=p?g?e.plotWidth:0:g?0:c.toPixels(f.min)||0,h=w(N(u,h),0,a),u=w(Math.round(c.toPixels(N(i.value,f.max),!0)||0),0,a),_&&(h=u=c.toPixels(f.max)),m=Math.abs(h-u),y=Math.min(h,u),v=Math.max(h,u),c.isXAxis?(d={x:l?v:y,y:0,width:m,height:a},g||(d.x=e.plotHeight-d.x)):(d={x:0,y:l?v:y,width:a,height:m},g&&(d.y=e.plotWidth-d.y)),s[T]?s[T].animate(d):s[T]=n.clipRect(d),b=t["zone-area-"+T],x=t["zone-graph-"+T],r&&x&&x.clip(s[T]),o&&b&&b.clip(s[T]),_=i.value>f.max,t.resetZones&&0===u&&(u=void 0)})),this.clips=s):t.visible&&(r&&r.show(),o&&o.show())}plotGroup(t,e,n,i,s){let r=this[t];const o=!r;return n={visibility:n,zIndex:i||.1},"undefined"===typeof this.opacity||this.chart.styledMode||"inactive"===this.state||(n.opacity=this.opacity),o&&(this[t]=r=this.chart.renderer.g().add(s)),r.addClass("highcharts-"+e+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(T(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(r.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),r.attr(n)[o?"attr":"animate"](this.getPlotBox(e)),r}getPlotBox(t){let e=this.xAxis,n=this.yAxis;const i=this.chart;return t=i.inverted&&!i.polar&&e&&!1!==this.invertible&&"series"===t,i.inverted&&(e=n,n=this.xAxis),{translateX:e?e.left:i.plotLeft,translateY:n?n.top:i.plotTop,rotation:t?90:0,rotationOriginX:t?(e.len-n.len)/2:0,rotationOriginY:t?(e.len+n.len)/2:0,scaleX:t?-1:1,scaleY:1}}removeEvents(t){t||R(this),this.eventsToUnbind.length&&(this.eventsToUnbind.forEach((function(t){t()})),this.eventsToUnbind.length=0)}render(){const t=this;var e=t.chart;const n=t.options,i=h(n.animation),s=t.visible?"inherit":"hidden",r=n.zIndex,o=t.hasRendered;e=e.seriesGroup;let a=t.finishedAnimating?0:i.duration;C(this,"render"),t.plotGroup("group","series",s,r,e),t.markerGroup=t.plotGroup("markerGroup","markers",s,r,e),!1!==n.clip&&t.setClip(),t.animate&&a&&t.animate(!0),t.drawGraph&&(t.drawGraph(),t.applyZones()),t.visible&&t.drawPoints(),t.drawDataLabels&&t.drawDataLabels(),t.redrawPoints&&t.redrawPoints(),t.drawTracker&&!1!==t.options.enableMouseTracking&&t.drawTracker(),t.animate&&a&&t.animate(),o||(a&&i.defer&&(a+=i.defer),t.animationTimeout=j((function(){t.afterAnimate()}),a||0)),t.isDirty=!1,t.hasRendered=!0,C(t,"afterRender")}redraw(){const t=this.isDirty||this.isDirtyData;this.translate(),this.render(),t&&delete this.kdTree}searchPoint(t,e){const n=this.xAxis,i=this.yAxis,s=this.chart.inverted;return this.searchKDTree({clientX:s?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:s?i.len-t.chartX+i.pos:t.chartY-i.pos},e,t)}buildKDTree(t){function e(t,i,s){var r=t&&t.length;let o;if(r)return o=n.kdAxisArray[i%s],t.sort((function(t,e){return t[o]-e[o]})),r=Math.floor(r/2),{point:t[r],left:e(t.slice(0,r),i+1,s),right:e(t.slice(r+1),i+1,s)}}this.buildingKdTree=!0;const n=this,i=-1<n.options.findNearestPointBy.indexOf("y")?2:1;delete n.kdTree,j((function(){n.kdTree=e(n.getValidPoints(null,!n.directTouch),i,i),n.buildingKdTree=!1}),n.options.kdNow||t&&"touchstart"===t.type?0:1)}searchKDTree(t,e,n){function i(t,e,n,c){const l=e.point;var h=s.kdAxisArray[n%c];let u=l;var d=T(t[r])&&T(l[r])?Math.pow(t[r]-l[r],2):null,f=T(t[o])&&T(l[o])?Math.pow(t[o]-l[o],2):null;return f=(d||0)+(f||0),l.dist=T(f)?Math.sqrt(f):Number.MAX_VALUE,l.distX=T(d)?Math.sqrt(d):Number.MAX_VALUE,h=t[h]-l[h],f=0>h?"left":"right",d=0>h?"right":"left",e[f]&&(f=i(t,e[f],n+1,c),u=f[a]<u[a]?f:l),e[d]&&Math.sqrt(h*h)<u[a]&&(t=i(t,e[d],n+1,c),u=t[a]<u[a]?t:u),u}const s=this,r=this.kdAxisArray[0],o=this.kdAxisArray[1],a=e?"distX":"dist";if(e=-1<s.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(n),this.kdTree)return i(t,this.kdTree,e,e)}pointPlacementToXValue(){const{options:{pointPlacement:t,pointRange:e},xAxis:n}=this;let i=t;return"between"===i&&(i=n.reversed?-.5:.5),P(i)?i*(e||n.pointRange):0}isPointInside(t){const{chart:e,xAxis:n,yAxis:i}=this;return"undefined"!==typeof t.plotY&&"undefined"!==typeof t.plotX&&0<=t.plotY&&t.plotY<=(i?i.len:e.plotHeight)&&0<=t.plotX&&t.plotX<=(n?n.len:e.plotWidth)}drawTracker(){const t=this,e=t.options,n=e.trackByArea,i=[].concat(n?t.areaPath:t.graphPath),s=t.chart,r=s.pointer,o=s.renderer,a=s.options.tooltip.snap,c=t.tracker,l=function(e){s.hoverSeries!==t&&t.onMouseOver()},h="rgba(192,192,192,"+(g?1e-4:.002)+")";c?c.attr({d:i}):t.graph&&(t.tracker=o.path(i).attr({visibility:t.visible?"inherit":"hidden",zIndex:2}).addClass(n?"highcharts-tracker-area":"highcharts-tracker-line").add(t.group),s.styledMode||t.tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:h,fill:n?h:"none","stroke-width":t.graph.strokeWidth()+(n?0:2*a)}),[t.tracker,t.markerGroup,t.dataLabelsGroup].forEach((function(t){t&&(t.addClass("highcharts-tracker").on("mouseover",l).on("mouseout",(function(t){r.onTrackerMouseOut(t)})),e.cursor&&!s.styledMode&&t.css({cursor:e.cursor}),p)&&t.on("touchstart",l)}))),C(this,"afterDrawTracker")}addPoint(t,e,n,i,s){const r=this.options,o=this.data,a=this.chart;var c=this.xAxis;c=c&&c.hasNames&&c.names;const l=r.data,h=this.xData;let u,d;e=N(e,!0);const f={series:this};this.pointClass.prototype.applyOptions.apply(f,[t]);const p=f.x;if(d=h.length,this.requireSorting&&p<h[d-1])for(u=!0;d&&h[d-1]>p;)d--;this.updateParallelArrays(f,"splice",[d,0,0]),this.updateParallelArrays(f,d),c&&f.name&&(c[p]=f.name),l.splice(d,0,t),(u||this.processedData)&&(this.data.splice(d,0,null),this.processData()),"point"===r.legendType&&this.generatePoints(),n&&(o[0]&&o[0].remove?o[0].remove(!1):(o.shift(),this.updateParallelArrays(f,"shift"),l.shift())),!1!==s&&C(this,"addPoint",{point:f}),this.isDirtyData=this.isDirty=!0,e&&a.redraw(i)}removePoint(t,e,n){const i=this,s=i.data,r=s[t],o=i.points,a=i.chart,c=function(){o&&o.length===s.length&&o.splice(t,1),s.splice(t,1),i.options.data.splice(t,1),i.updateParallelArrays(r||{series:i},"splice",[t,1]),r&&r.destroy(),i.isDirty=!0,i.isDirtyData=!0,e&&a.redraw()};u(n,a),e=N(e,!0),r?r.firePointEvent("remove",null,c):c()}remove(t,e,n,i){function s(){r.destroy(i),o.isDirtyLegend=o.isDirtyBox=!0,o.linkSeries(i),N(t,!0)&&o.redraw(e)}const r=this,o=r.chart;!1!==n?C(r,"remove",null,s):s()}update(t,e){t=x(t,this.userOptions),C(this,"update",{options:t});const n=this,i=n.chart;var s=n.userOptions;const r=n.initialType||n.type;var o=i.options.plotOptions;const a=y[r].prototype;var c=n.finishedAnimating&&{animation:!1};const l={};let h,u=["eventOptions","navigatorSeries","baseSeries"],d=t.type||s.type||i.options.chart.type;const f=!(this.hasDerivedData||d&&d!==this.type||"undefined"!==typeof t.pointStart||"undefined"!==typeof t.pointInterval||"undefined"!==typeof t.relativeXValue||t.joinBy||t.mapData||n.hasOptionChanged("dataGrouping")||n.hasOptionChanged("pointStart")||n.hasOptionChanged("pointInterval")||n.hasOptionChanged("pointIntervalUnit")||n.hasOptionChanged("keys"));if(d=d||r,f&&(u.push("data","isDirtyData","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","_hasPointLabels","clips","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX"),!1!==t.visible&&u.push("area","graph"),n.parallelArrays.forEach((function(t){u.push(t+"Data")})),t.data&&(t.dataSorting&&k(n.options.dataSorting,t.dataSorting),this.setData(t.data,!1))),t=D(s,c,{index:"undefined"===typeof s.index?n.index:s.index,pointStart:N(o&&o.series&&o.series.pointStart,s.pointStart,n.xData[0])},!f&&{data:n.options.data},t),f&&t.data&&(t.data=n.options.data),u=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(u),u.forEach((function(t){u[t]=n[t],delete n[t]})),o=!1,y[d]){if(o=d!==n.type,n.remove(!1,!1,!1,!0),o)if(Object.setPrototypeOf)Object.setPrototypeOf(n,y[d].prototype);else{for(h in c=Object.hasOwnProperty.call(n,"hcEvents")&&n.hcEvents,a)n[h]=void 0;k(n,y[d].prototype),c?n.hcEvents=c:delete n.hcEvents}}else I(17,!0,i,{missingModuleFor:d});if(u.forEach((function(t){n[t]=u[t]})),n.init(i,t),f&&this.points){if(t=n.options,!1===t.visible)l.graphic=1,l.dataLabel=1;else if(!n._hasPointLabels){const{marker:e,dataLabels:n}=t;s=s.marker||{},!e||!1!==e.enabled&&s.symbol===e.symbol&&s.height===e.height&&s.width===e.width||(l.graphic=1),n&&!1===n.enabled&&(l.dataLabel=1)}for(const e of this.points)e&&e.series&&(e.resolveColor(),Object.keys(l).length&&e.destroyElements(l),!1===t.showInLegend&&e.legendItem&&i.legend.destroyItem(e))}n.initialType=r,i.linkSeries(),o&&n.linkedSeries.length&&(n.isDirtyData=!0),C(this,"afterUpdate"),N(e,!0)&&i.redraw(!!f&&void 0)}setName(t){this.name=this.options.name=this.userOptions.name=t,this.chart.isDirtyLegend=!0}hasOptionChanged(t){const e=this.options[t],n=this.chart.options.plotOptions,i=this.userOptions[t];return i?e!==i:e!==N(n&&n[this.type]&&n[this.type][t],n&&n.series&&n.series[t],e)}onMouseOver(){const t=this.chart,e=t.hoverSeries;t.pointer.setHoverChartIndex(),e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&C(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this}onMouseOut(){const t=this.options,e=this.chart,n=e.tooltip,i=e.hoverPoint;e.hoverSeries=null,i&&i.onMouseOut(),this&&t.events.mouseOut&&C(this,"mouseOut"),!n||this.stickyTracking||n.shared&&!this.noSharedTooltip||n.hide(),e.series.forEach((function(t){t.setState("",!0)}))}setState(t,e){const n=this;var i=n.options;const s=n.graph,r=i.inactiveOtherPoints,o=i.states,a=N(o[t||"normal"]&&o[t||"normal"].animation,n.chart.options.chart.animation);let c=i.lineWidth,l=0,h=i.opacity;if(t=t||"",n.state!==t&&([n.group,n.markerGroup,n.dataLabelsGroup].forEach((function(e){e&&(n.state&&e.removeClass("highcharts-series-"+n.state),t&&e.addClass("highcharts-series-"+t))})),n.state=t,!n.chart.styledMode)){if(o[t]&&!1===o[t].enabled)return;if(t&&(c=o[t].lineWidth||c+(o[t].lineWidthPlus||0),h=N(o[t].opacity,h)),s&&!s.dashstyle&&P(c))for(i={"stroke-width":c},s.animate(i,a);n["zone-graph-"+l];)n["zone-graph-"+l].animate(i,a),l+=1;r||[n.group,n.markerGroup,n.dataLabelsGroup,n.labelBySeries].forEach((function(t){t&&t.animate({opacity:h},a)}))}e&&r&&n.points&&n.setAllPointsToState(t||void 0)}setAllPointsToState(t){this.points.forEach((function(e){e.setState&&e.setState(t)}))}setVisible(t,e){const n=this,i=n.chart,s=i.options.chart.ignoreHiddenSeries,r=n.visible,o=(n.visible=t=n.options.visible=n.userOptions.visible="undefined"===typeof t?!r:t)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((function(t){n[t]&&n[t][o]()})),i.hoverSeries!==n&&(i.hoverPoint&&i.hoverPoint.series)!==n||n.onMouseOut(),n.legendItem&&i.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&i.series.forEach((function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)})),n.linkedSeries.forEach((function(e){e.setVisible(t,!1)})),s&&(i.isDirtyBox=!0),C(n,o),!1!==e&&i.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(t){this.selected=t=this.options.selected="undefined"===typeof t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),C(this,t?"select":"unselect")}shouldShowTooltip(t,e,n={}){return n.series=this,n.visiblePlotOnly=!0,this.chart.isInsidePlot(t,e,n)}drawLegendSymbol(t,e){var n;null===(n=s[this.options.legendSymbol||"rectangle"])||void 0===n||n.call(this,t,e)}}return B.defaultOptions=o,B.types=a.seriesTypes,B.registerType=a.registerSeriesType,k(B.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:r,requireSorting:!0,sorted:!0}),a.series=B,B})),e(n,"Extensions/ScrollablePlotArea.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/Chart/Chart.js"],n["Core/Series/Series.js"],n["Core/Renderer/RendererRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r){const{stop:o}=t,{addEvent:a,createElement:c,defined:l,merge:h,pick:u}=r;a(n,"afterSetChartSize",(function(t){var n=this.options.chart.scrollablePlotArea,i=n&&n.minWidth;let s;n=n&&n.minHeight,this.renderer.forExport||(i?(this.scrollablePixelsX=i=Math.max(0,i-this.chartWidth))&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=h(this.plotBox),this.plotBox.width=this.plotWidth+=i,this.inverted?this.clipBox.height+=i:this.clipBox.width+=i,s={1:{name:"right",value:i}}):n&&(this.scrollablePixelsY=i=Math.max(0,n-this.chartHeight),l(i)&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=h(this.plotBox),this.plotBox.height=this.plotHeight+=i,this.inverted?this.clipBox.width+=i:this.clipBox.height+=i,s={2:{name:"bottom",value:i}})),s&&!t.skipAxes&&this.axes.forEach((function(t){s[t.side]?t.getPlotLinePath=function(){let n,i=s[t.side].name,r=this[i];return this[i]=r-s[t.side].value,n=e.prototype.getPlotLinePath.apply(this,arguments),this[i]=r,n}:(t.setAxisSize(),t.setAxisTranslation())})))})),a(n,"render",(function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()})),n.prototype.setUpScrolling=function(){const t={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};let e;this.scrollablePixelsX&&(t.overflowX="auto"),this.scrollablePixelsY&&(t.overflowY="auto"),this.scrollingParent=c("div",{className:"highcharts-scrolling-parent"},{position:"relative"},this.renderTo),this.scrollingContainer=c("div",{className:"highcharts-scrolling"},t,this.scrollingParent),a(this.scrollingContainer,"scroll",(()=>{this.pointer&&(delete this.pointer.chartPosition,this.hoverPoint&&(e=this.hoverPoint),this.pointer.runPointActions(void 0,e,!0))})),this.innerContainer=c("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},n.prototype.moveFixedElements=function(){let t,e=this.container,n=this.fixedRenderer,i=".highcharts-breadcrumbs-group .highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-drillup-button .highcharts-scrollbar .highcharts-subtitle .highcharts-title".split(" ");this.scrollablePixelsX&&!this.inverted?t=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?t=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(t=".highcharts-yaxis"),t&&i.push(`${t}:not(.highcharts-radial-axis)`,`${t}-labels:not(.highcharts-radial-axis-labels)`),i.forEach((function(t){[].forEach.call(e.querySelectorAll(t),(function(t){(t.namespaceURI===n.SVG_NS?n.box:n.box.parentNode).appendChild(t),t.style.pointerEvents="auto"}))}))},n.prototype.applyFixed=function(){var t=!this.fixedDiv,e=this.options.chart,n=e.scrollablePlotArea,i=s.getRendererType();t?(this.fixedDiv=c("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(e.style&&e.style.zIndex||0)+2,top:0},null,!0),this.scrollingContainer&&this.scrollingContainer.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow="visible",this.fixedRenderer=e=new i(this.fixedDiv,this.chartWidth,this.chartHeight,this.options.chart.style),this.scrollableMask=e.path().attr({fill:this.options.chart.backgroundColor||"#fff","fill-opacity":u(n.opacity,.85),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),a(this,"afterShowResetZoom",this.moveFixedElements),a(this,"afterApplyDrilldown",this.moveFixedElements),a(this,"afterLayOutTitles",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),(this.scrollableDirty||t)&&(this.scrollableDirty=!1,this.moveFixedElements()),e=this.chartWidth+(this.scrollablePixelsX||0),i=this.chartHeight+(this.scrollablePixelsY||0),o(this.container),this.container.style.width=e+"px",this.container.style.height=i+"px",this.renderer.boxWrapper.attr({width:e,height:i,viewBox:[0,0,e,i].join(" ")}),this.chartBackground.attr({width:e,height:i}),this.scrollingContainer.style.height=this.chartHeight+"px",t&&(n.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*n.scrollPositionX),n.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*n.scrollPositionY)),i=this.axisOffset,t=this.plotTop-i[0]-1,n=this.plotLeft-i[3]-1,e=this.plotTop+this.plotHeight+i[2]+1,i=this.plotLeft+this.plotWidth+i[1]+1;let r=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),l=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);t=this.scrollablePixelsX?[["M",0,t],["L",this.plotLeft-1,t],["L",this.plotLeft-1,e],["L",0,e],["Z"],["M",r,t],["L",this.chartWidth,t],["L",this.chartWidth,e],["L",r,e],["Z"]]:this.scrollablePixelsY?[["M",n,0],["L",n,this.plotTop-1],["L",i,this.plotTop-1],["L",i,0],["Z"],["M",n,l],["L",n,this.chartHeight],["L",i,this.chartHeight],["L",i,l],["Z"]]:[["M",0,0]],"adjustHeight"!==this.redrawTrigger&&this.scrollableMask.attr({d:t})},a(e,"afterInit",(function(){this.chart.scrollableDirty=!0})),a(i,"show",(function(){this.chart.scrollableDirty=!0}))})),e(n,"Core/Axis/Stacking/StackItem.js",[n["Core/FormatUtilities.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){const{format:i}=t,{series:s}=e,{destroyObjectProperties:r,fireEvent:o,isNumber:a,pick:c}=n;class l{constructor(t,e,n,i,s){const r=t.chart.inverted,o=t.reversed;this.axis=t,t=this.isNegative=!!n!==!!o,this.options=e=e||{},this.x=i,this.cumulative=this.total=null,this.points={},this.hasValidPoints=!1,this.stack=s,this.rightCliff=this.leftCliff=0,this.alignOptions={align:e.align||(r?t?"left":"right":"center"),verticalAlign:e.verticalAlign||(r?"middle":t?"bottom":"top"),y:e.y,x:e.x},this.textAlign=e.textAlign||(r?t?"right":"left":"center")}destroy(){r(this,this.axis)}render(t){const e=this.axis.chart,n=this.options;var s=n.format;s=s?i(s,this,e):n.formatter.call(this),this.label?this.label.attr({text:s,visibility:"hidden"}):(this.label=e.renderer.label(s,null,void 0,n.shape,void 0,void 0,n.useHTML,!1,"stack-labels"),s={r:n.borderRadius||0,text:s,padding:c(n.padding,5),visibility:"hidden"},e.styledMode||(s.fill=n.backgroundColor,s.stroke=n.borderColor,s["stroke-width"]=n.borderWidth,this.label.css(n.style||{})),this.label.attr(s),this.label.added||this.label.add(t)),this.label.labelrank=e.plotSizeY,o(this,"afterRender")}setOffset(t,e,n,i,r,l){const{alignOptions:h,axis:u,label:d,options:f,textAlign:p}=this,g=u.chart;n=this.getStackBox({xOffset:t,width:e,boxBottom:n,boxTop:i,defaultX:r,xAxis:l});var{verticalAlign:m}=h;if(d&&n){i=d.getBBox(),r=d.padding,l="justify"===c(f.overflow,"justify"),h.x=f.x||0,h.y=f.y||0;const{x:t,y:e}=this.adjustStackPosition({labelBox:i,verticalAlign:m,textAlign:p});n.x-=t,n.y-=e,d.align(h,!1,n),(m=g.isInsidePlot(d.alignAttr.x+h.x+t,d.alignAttr.y+h.y+e))||(l=!1),l&&s.prototype.justifyDataLabel.call(u,d,h,d.alignAttr,i,n),d.attr({x:d.alignAttr.x,y:d.alignAttr.y,rotation:f.rotation,rotationOriginX:i.width/2,rotationOriginY:i.height/2}),c(!l&&f.crop,!0)&&(m=a(d.x)&&a(d.y)&&g.isInsidePlot(d.x-r+d.width,d.y)&&g.isInsidePlot(d.x+r,d.y)),d[m?"show":"hide"]()}o(this,"afterSetOffset",{xOffset:t,width:e})}adjustStackPosition({labelBox:t,verticalAlign:e,textAlign:n}){const i={bottom:0,middle:1,top:2,right:1,center:0,left:-1};return{x:t.width/2+t.width/2*i[n],y:t.height/2*i[e]}}getStackBox(t){var e=this.axis;const n=e.chart,{boxTop:i,defaultX:s,xOffset:r,width:o,boxBottom:l}=t;var h=e.stacking.usePercentage?100:c(i,this.total,0);h=e.toPixels(h),t=t.xAxis||n.xAxis[0];const u=c(s,t.translate(this.x))+r;e=e.toPixels(l||a(e.min)&&e.logarithmic&&e.logarithmic.lin2log(e.min)||0),e=Math.abs(h-e);const d=this.isNegative;return n.inverted?{x:(d?h:h-e)-n.plotLeft,y:t.height-u-o,width:e,height:o}:{x:u+t.transB-n.plotLeft,y:(d?h-e:h)-n.plotTop,width:o,height:e}}}return l})),e(n,"Core/Axis/Stacking/StackingAxis.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Axis/Axis.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Axis/Stacking/StackItem.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s){function r(){const t=this,e=t.inverted;t.yAxis.forEach((t=>{t.stacking&&t.stacking.stacks&&t.hasVisibleSeries&&(t.stacking.oldStacks=t.stacking.stacks)})),t.series.forEach((n=>{const i=n.xAxis&&n.xAxis.options||{};!n.options.stacking||!0!==n.visible&&!1!==t.options.chart.ignoreHiddenSeries||(n.stackKey=[n.type,T(n.options.stack,""),e?i.top:i.left,e?i.height:i.width].join())}))}function o(){const t=this.stacking;if(t){var e=t.stacks;_(e,(function(t,n){v(t),e[n]=null})),t&&t.stackTotalGroup&&t.stackTotalGroup.destroy()}}function a(){"yAxis"!==this.coll||this.stacking||(this.stacking=new S(this))}function c(t,e,n,i){return!y(t)||t.x!==e||i&&t.stackKey!==i?t={x:e,index:0,key:i,stackKey:i}:t.index++,t.key=[n,e,t.index].join(),t}function l(){const t=this,e=t.stackKey,n=t.yAxis.stacking.stacks,i=t.processedXData,s=t[t.options.stacking+"Stacker"];let r;s&&[e,"-"+e].forEach((e=>{let o,a=i.length;for(;a--;){var c=i[a];r=t.getStackIndicator(r,c,t.index,e),(o=(c=n[e]&&n[e][c])&&c.points[r.key])&&s.call(t,o,c,a)}}))}function h(t,e,n){e=e.total?100/e.total:0,t[0]=m(t[0]*e),t[1]=m(t[1]*e),this.stackedYData[n]=t[1]}function u(){const t=this.yAxis.stacking;this.options.centerInCategory&&(this.is("column")||this.is("columnrange"))&&!this.options.stacking&&1<this.chart.series.length?p.setStackedPoints.call(this,"group"):t&&_(t.stacks,((e,n)=>{"group"===n.slice(-5)&&(_(e,(t=>t.destroy())),delete t.stacks[n])}))}function d(t){var e=this.chart;const n=t||this.options.stacking;if(n&&(!0===this.visible||!1===e.options.chart.ignoreHiddenSeries)){var s=this.processedXData,r=this.processedYData,o=[],a=r.length,c=this.options,l=c.threshold,h=T(c.startFromThreshold&&l,0);c=c.stack,t=t?`${this.type},${n}`:this.stackKey;var u="-"+t,d=this.negStacks;e="group"===n?e.yAxis[0]:this.yAxis;var f,p,g=e.stacking.stacks,v=e.stacking.oldStacks;for(e.stacking.stacksTouched+=1,p=0;p<a;p++){var b=s[p],x=r[p],_=this.getStackIndicator(_,b,this.index),S=_.key,I=(f=d&&x<(h?0:l))?u:t;g[I]||(g[I]={}),g[I][b]||(v[I]&&v[I][b]?(g[I][b]=v[I][b],g[I][b].total=null):g[I][b]=new i(e,e.options.stackLabels,!!f,b,c)),I=g[I][b],null!==x?(I.points[S]=I.points[this.index]=[T(I.cumulative,h)],y(I.cumulative)||(I.base=S),I.touched=e.stacking.stacksTouched,0<_.index&&!1===this.singleStacks&&(I.points[S][0]=I.points[this.index+","+b+",0"][0])):I.points[S]=I.points[this.index]=null,"percent"===n?(f=f?t:u,d&&g[f]&&g[f][b]?(f=g[f][b],I.total=f.total=Math.max(f.total,I.total)+Math.abs(x)||0):I.total=m(I.total+(Math.abs(x)||0))):"group"===n?(w(x)&&(x=x[0]),null!==x&&(I.total=(I.total||0)+1)):I.total=m(I.total+(x||0)),I.cumulative="group"===n?(I.total||1)-1:m(T(I.cumulative,h)+(x||0)),null!==x&&(I.points[S].push(I.cumulative),o[p]=I.cumulative,I.hasValidPoints=!0)}"percent"===n&&(e.stacking.usePercentage=!0),"group"!==n&&(this.stackedYData=o),e.stacking.oldStacks={}}}const{getDeferredAnimation:f}=t,{series:{prototype:p}}=n,{addEvent:g,correctFloat:m,defined:y,destroyObjectProperties:v,fireEvent:b,isArray:w,isNumber:x,objectEach:_,pick:T}=s;class S{constructor(t){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=t}buildStacks(){const t=this.axis,e=t.series,n=t.options.reversedStacks,i=e.length;let s,r;for(this.usePercentage=!1,r=i;r--;)s=e[n?r:i-r-1],s.setStackedPoints(),s.setGroupedPoints();for(r=0;r<i;r++)e[r].modifyStacks();b(t,"afterBuildStacks")}cleanStacks(){let t;this.oldStacks&&(t=this.stacks=this.oldStacks),_(t,(function(t){_(t,(function(t){t.cumulative=t.total}))}))}resetStacks(){_(this.stacks,(t=>{_(t,((e,n)=>{x(e.touched)&&e.touched<this.stacksTouched?(e.destroy(),delete t[n]):(e.total=null,e.cumulative=null)}))}))}renderStackTotals(){var t=this.axis;const e=t.chart,n=e.renderer,i=this.stacks;t=f(e,t.options.stackLabels&&t.options.stackLabels.animation||!1);const s=this.stackTotalGroup=this.stackTotalGroup||n.g("stack-labels").attr({zIndex:6,opacity:0}).add();s.translate(e.plotLeft,e.plotTop),_(i,(function(t){_(t,(function(t){t.render(s)}))})),s.animate({opacity:1},t)}}var I;return function(t){const e=[];t.compose=function(t,n,i){s.pushUnique(e,t)&&(g(t,"init",a),g(t,"destroy",o)),s.pushUnique(e,n)&&(n.prototype.getStacks=r),s.pushUnique(e,i)&&(t=i.prototype,t.getStackIndicator=c,t.modifyStacks=l,t.percentStacker=h,t.setGroupedPoints=u,t.setStackedPoints=d)}}(I||(I={})),I})),e(n,"Series/Line/LineSeries.js",[n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){const{defined:i,merge:s}=n;class r extends t{constructor(){super(...arguments),this.points=this.options=this.data=void 0}drawGraph(){const t=this,e=this.options,n=(this.gappedPath||this.getGraphPath).call(this),i=this.chart.styledMode;let s=[["graph","highcharts-graph"]];i||s[0].push(e.lineColor||this.color||"#cccccc",e.dashStyle),s=t.getZonesGraphs(s),s.forEach((function(s,r){var o=s[0];let a=t[o];const c=a?"animate":"attr";a?(a.endX=t.preventGraphAnimation?null:n.xMap,a.animate({d:n})):n.length&&(t[o]=a=t.chart.renderer.path(n).addClass(s[1]).attr({zIndex:1}).add(t.group)),a&&!i&&(o={stroke:s[2],"stroke-width":e.lineWidth||0,fill:t.fillGraph&&t.color||"none"},s[3]?o.dashstyle=s[3]:"square"!==e.linecap&&(o["stroke-linecap"]=o["stroke-linejoin"]="round"),a[c](o).shadow(2>r&&e.shadow)),a&&(a.startX=n.xMap,a.isArea=n.isArea)}))}getGraphPath(t,e,n){const s=this,r=s.options,o=[],a=[];let c,l=r.step;t=t||s.points;const h=t.reversed;return h&&t.reverse(),(l={right:1,center:2}[l]||l&&3)&&h&&(l=4-l),t=this.getValidPoints(t,!1,!(r.connectNulls&&!e&&!n)),t.forEach((function(h,u){const d=h.plotX,f=h.plotY,p=t[u-1],g=h.isNull||"number"!==typeof f;(h.leftCliff||p&&p.rightCliff)&&!n&&(c=!0),g&&!i(e)&&0<u?c=!r.connectNulls:g&&!e?c=!0:(0===u||c?u=[["M",h.plotX,h.plotY]]:s.getPointSpline?u=[s.getPointSpline(t,h,u)]:l?(u=1===l?[["L",p.plotX,f]]:2===l?[["L",(p.plotX+d)/2,p.plotY],["L",(p.plotX+d)/2,f]]:[["L",d,p.plotY]],u.push(["L",d,f])):u=[["L",d,f]],a.push(h.x),l&&(a.push(h.x),2===l&&a.push(h.x)),o.push.apply(o,u),c=!1)})),o.xMap=a,s.graphPath=o}getZonesGraphs(t){return this.zones.forEach((function(e,n){n=["zone-graph-"+n,"highcharts-graph highcharts-zone-graph-"+n+" "+(e.className||"")],this.chart.styledMode||n.push(e.color||this.color,e.dashStyle||this.options.dashStyle),t.push(n)}),this),t}}return r.defaultOptions=s(t.defaultOptions,{legendSymbol:"lineMarker"}),e.registerSeriesType("line",r),r})),e(n,"Series/Area/AreaSeries.js",[n["Core/Color/Color.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){const{parse:i}=t,{seriesTypes:{line:s}}=e,{extend:r,merge:o,objectEach:a,pick:c}=n;class l extends s{constructor(){super(...arguments),this.points=this.options=this.data=void 0}drawGraph(){this.areaPath=[],super.drawGraph.apply(this);const t=this,e=this.areaPath,n=this.options,s=[["area","highcharts-area",this.color,n.fillColor]];this.zones.forEach((function(e,i){s.push(["zone-area-"+i,"highcharts-area highcharts-zone-area-"+i+" "+e.className,e.color||t.color,e.fillColor||n.fillColor])})),s.forEach((function(s){const r=s[0],o={};let a=t[r];const l=a?"animate":"attr";a?(a.endX=t.preventGraphAnimation?null:e.xMap,a.animate({d:e})):(o.zIndex=0,a=t[r]=t.chart.renderer.path(e).addClass(s[1]).add(t.group),a.isArea=!0),t.chart.styledMode||(o.fill=c(s[3],i(s[2]).setOpacity(c(n.fillOpacity,.75)).get())),a[l](o),a.startX=e.xMap,a.shiftUnit=n.step?2:1}))}getGraphPath(t){var e=s.prototype.getGraphPath,n=this.options;const i=n.stacking,r=this.yAxis,o=[],a=[],l=this.index,h=r.stacking.stacks[this.stackKey],u=n.threshold,d=Math.round(r.getThreshold(n.threshold));n=c(n.connectNulls,"percent"===i);var f=function(e,n,s){var c=t[e];e=i&&h[c.x].points[l];const f=c[s+"Null"]||0;let g,m;s=c[s+"Cliff"]||0,c=!0,s||f?(g=(f?e[0]:e[1])+s,m=e[0]+s,c=!!f):!i&&t[n]&&t[n].isNull&&(g=m=u),"undefined"!==typeof g&&(a.push({plotX:p,plotY:null===g?d:r.getThreshold(g),isNull:c,isCliff:!0}),o.push({plotX:p,plotY:null===m?d:r.getThreshold(m),doCurve:!1}))};let p;t=t||this.points,i&&(t=this.getStackPoints(t));for(let s=0,y=t.length;s<y;++s){i||(t[s].leftCliff=t[s].rightCliff=t[s].leftNull=t[s].rightNull=void 0);var g=t[s].isNull;p=c(t[s].rectPlotX,t[s].plotX);var m=i?c(t[s].yBottom,d):d;g&&!n||(n||f(s,s-1,"left"),g&&!i&&n||(a.push(t[s]),o.push({x:s,plotX:p,plotY:m})),n||f(s,s+1,"right"))}return f=e.call(this,a,!0,!0),o.reversed=!0,g=e.call(this,o,!0,!0),(m=g[0])&&"M"===m[0]&&(g[0]=["L",m[1],m[2]]),g=f.concat(g),g.length&&g.push(["Z"]),e=e.call(this,a,!1,n),g.xMap=f.xMap,this.areaPath=g,e}getStackPoints(t){const e=this,n=[],i=[],s=this.xAxis,r=this.yAxis,o=r.stacking.stacks[this.stackKey],l={},h=r.series,u=h.length,d=r.options.reversedStacks?1:-1,f=h.indexOf(e);if(t=t||this.points,this.options.stacking){for(let e=0;e<t.length;e++)t[e].leftNull=t[e].rightNull=void 0,l[t[e].x]=t[e];a(o,(function(t,e){null!==t.total&&i.push(e)})),i.sort((function(t,e){return t-e}));const p=h.map((t=>t.visible));i.forEach((function(t,a){let g,m,y=0;if(l[t]&&!l[t].isNull)n.push(l[t]),[-1,1].forEach((function(n){const s=1===n?"rightNull":"leftNull",r=o[i[a+n]];let c=0;if(r){let n=f;for(;0<=n&&n<u;){const i=h[n].index;g=r.points[i],g||(i===e.index?l[t][s]=!0:p[n]&&(m=o[t].points[i])&&(c-=m[1]-m[0])),n+=d}}l[t][1===n?"rightCliff":"leftCliff"]=c}));else{let e=f;for(;0<=e&&e<u;){if(g=o[t].points[h[e].index]){y=g[1];break}e+=d}y=c(y,0),y=r.translate(y,0,1,0,1),n.push({isNull:!0,plotX:s.translate(t,0,0,0,1),x:t,plotY:y,yBottom:y})}}))}return n}}return l.defaultOptions=o(s.defaultOptions,{threshold:0,legendSymbol:"rectangle"}),r(l.prototype,{singleStacks:!1}),e.registerSeriesType("area",l),l})),e(n,"Series/Spline/SplineSeries.js",[n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e){const{line:n}=t.seriesTypes,{merge:i,pick:s}=e;class r extends n{constructor(){super(...arguments),this.points=this.options=this.data=void 0}getPointSpline(t,e,n){const i=e.plotX||0,r=e.plotY||0,o=t[n-1];let a,c,l;if(n=t[n+1],o&&!o.isNull&&!1!==o.doCurve&&!e.isCliff&&n&&!n.isNull&&!1!==n.doCurve&&!e.isCliff){t=o.plotY||0;var h=n.plotX||0;n=n.plotY||0;let s=0;a=(1.5*i+(o.plotX||0))/2.5,c=(1.5*r+t)/2.5,h=(1.5*i+h)/2.5,l=(1.5*r+n)/2.5,h!==a&&(s=(l-c)*(h-i)/(h-a)+r-l),c+=s,l+=s,c>t&&c>r?(c=Math.max(t,r),l=2*r-c):c<t&&c<r&&(c=Math.min(t,r),l=2*r-c),l>n&&l>r?(l=Math.max(n,r),c=2*r-l):l<n&&l<r&&(l=Math.min(n,r),c=2*r-l),e.rightContX=h,e.rightContY=l}return e=["C",s(o.rightContX,o.plotX,0),s(o.rightContY,o.plotY,0),s(a,i,0),s(c,r,0),i,r],o.rightContX=o.rightContY=void 0,e}}return r.defaultOptions=i(n.defaultOptions),t.registerSeriesType("spline",r),r})),e(n,"Series/AreaSpline/AreaSplineSeries.js",[n["Series/Spline/SplineSeries.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){const{area:i,area:{prototype:s}}=e.seriesTypes,{extend:r,merge:o}=n;class a extends t{constructor(){super(...arguments),this.options=this.points=this.data=void 0}}return a.defaultOptions=o(t.defaultOptions,i.defaultOptions),r(a.prototype,{getGraphPath:s.getGraphPath,getStackPoints:s.getStackPoints,drawGraph:s.drawGraph}),e.registerSeriesType("areaspline",a),a})),e(n,"Series/Column/ColumnSeriesDefaults.js",[],(function(){return{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}})),e(n,"Series/Column/ColumnSeries.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Color/Color.js"],n["Series/Column/ColumnSeriesDefaults.js"],n["Core/Globals.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r,o){const{animObject:a}=t,{parse:c}=e,{hasTouch:l,noop:h}=i,{clamp:u,defined:d,extend:f,fireEvent:p,isArray:g,isNumber:m,merge:y,pick:v,objectEach:b}=o;class w extends s{constructor(){super(...arguments),this.points=this.options=this.group=this.data=this.borderWidth=void 0}animate(t){const e=this,n=this.yAxis,i=n.pos,s=e.options,r=this.chart.inverted,o={},c=r?"translateX":"translateY";let l;t?(o.scaleY=.001,t=u(n.toPixels(s.threshold),i,i+n.len),r?o.translateX=t-n.len:o.translateY=t,e.clipBox&&e.setClip(),e.group.attr(o)):(l=Number(e.group.attr(c)),e.group.animate({scaleY:1},f(a(e.options.animation),{step:function(t,n){e.group&&(o[c]=l+n.pos*(i-l),e.group.attr(o))}})))}init(t,e){super.init.apply(this,arguments);const n=this;t=n.chart,t.hasRendered&&t.series.forEach((function(t){t.type===n.type&&(t.isDirty=!0)}))}getColumnMetrics(){const t=this;var e=t.options;const n=t.xAxis,i=t.yAxis;var s=n.options.reversedStacks;s=n.reversed&&!s||!n.reversed&&s;const r={};let o,a=0;!1===e.grouping?a=1:t.chart.series.forEach((function(e){const n=e.yAxis,s=e.options;let c;e.type!==t.type||!e.visible&&t.chart.options.chart.ignoreHiddenSeries||i.len!==n.len||i.pos!==n.pos||(s.stacking&&"group"!==s.stacking?(o=e.stackKey,"undefined"===typeof r[o]&&(r[o]=a++),c=r[o]):!1!==s.grouping&&(c=a++),e.columnIndex=c)}));const c=Math.min(Math.abs(n.transA)*(n.ordinal&&n.ordinal.slope||e.pointRange||n.closestPointRange||n.tickInterval||1),n.len),l=c*e.groupPadding,h=(c-2*l)/(a||1);return e=Math.min(e.maxPointWidth||n.len,v(e.pointWidth,h*(1-2*e.pointPadding))),t.columnMetrics={width:e,offset:(h-e)/2+(l+((t.columnIndex||0)+(s?1:0))*h-c/2)*(s?-1:1),paddedWidth:h,columnCount:a},t.columnMetrics}crispCol(t,e,n,i){var s=this.borderWidth,r=-(s%2?.5:0);return s=s%2?.5:1,this.options.crisp&&(n=Math.round(t+n)+r,t=Math.round(t)+r,n-=t),i=Math.round(e+i)+s,r=.5>=Math.abs(e)&&.5<i,e=Math.round(e)+s,i-=e,r&&i&&(--e,i+=1),{x:t,y:e,width:n,height:i}}adjustForMissingColumns(t,e,n,i){const s=this.options.stacking;if(!n.isNull&&1<i.columnCount){const r=this.yAxis.options.reversedStacks;let o=0,a=r?0:-i.columnCount;b(this.yAxis.stacking&&this.yAxis.stacking.stacks,(t=>{if("number"===typeof n.x){const e=t[n.x.toString()];e&&(t=e.points[this.index],s?(t&&(o=a),e.hasValidPoints&&(r?a++:a--)):g(t)&&(t=Object.keys(e.points).filter((t=>!t.match(",")&&e.points[t]&&1<e.points[t].length)).map(parseFloat).sort(((t,e)=>e-t)),o=t.indexOf(this.index),a=t.length))}})),t=(n.plotX||0)+((a-1)*i.paddedWidth+e)/2-e-o*i.paddedWidth}return t}translate(){const t=this,e=t.chart,n=t.options;var i=t.dense=2>t.closestPointRange*t.xAxis.transA;i=t.borderWidth=v(n.borderWidth,i?0:1);const r=t.xAxis,o=t.yAxis,a=n.threshold,c=v(n.minPointLength,5),l=t.getColumnMetrics(),h=l.width,f=t.pointXOffset=l.offset,g=t.dataMin,y=t.dataMax;let b=t.barW=Math.max(h,1+2*i),w=t.translatedThreshold=o.getThreshold(a);e.inverted&&(w-=.5),n.pointPadding&&(b=Math.ceil(b)),s.prototype.translate.apply(t),t.points.forEach((function(i){const s=v(i.yBottom,w);var p=999+Math.abs(s),x=i.plotX||0;p=u(i.plotY,-p,o.len+p);let _=Math.min(p,s),T=Math.max(p,s)-_,S=h,I=x+f,k=b;c&&Math.abs(T)<c&&(T=c,x=!o.reversed&&!i.negative||o.reversed&&i.negative,m(a)&&m(y)&&i.y===a&&y<=a&&(o.min||0)<a&&(g!==y||(o.max||0)<=a)&&(x=!x),_=Math.abs(_-w)>c?s-c:w-(x?c:0)),d(i.options.pointWidth)&&(S=k=Math.ceil(i.options.pointWidth),I-=Math.round((S-h)/2)),n.centerInCategory&&(I=t.adjustForMissingColumns(I,S,i,l)),i.barX=I,i.pointWidth=S,i.tooltipPos=e.inverted?[u(o.len+o.pos-e.plotLeft-p,o.pos-e.plotLeft,o.len+o.pos-e.plotLeft),r.len+r.pos-e.plotTop-I-k/2,T]:[r.left-e.plotLeft+I+k/2,u(p+o.pos-e.plotTop,o.pos-e.plotTop,o.len+o.pos-e.plotTop),T],i.shapeType=t.pointClass.prototype.shapeType||"roundedRect",i.shapeArgs=t.crispCol(I,i.isNull?w:_,k,i.isNull?0:T)})),p(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(t,e){const n=this.options;var i=this.pointAttrToOptions||{},s=i.stroke||"borderColor";const r=i["stroke-width"]||"borderWidth";let o,a=t&&t.color||this.color,l=t&&t[s]||n[s]||a;i=t&&t.options.dashStyle||n.dashStyle;let h=t&&t[r]||n[r]||this[r]||0,u=v(t&&t.opacity,n.opacity,1);return t&&this.zones.length&&(o=t.getZone(),a=t.options.color||o&&(o.color||t.nonZonedColor)||this.color,o&&(l=o.borderColor||l,i=o.dashStyle||i,h=o.borderWidth||h)),e&&t&&(t=y(n.states[e],t.options.states&&t.options.states[e]||{}),e=t.brightness,a=t.color||"undefined"!==typeof e&&c(a).brighten(t.brightness).get()||a,l=t[s]||l,h=t[r]||h,i=t.dashStyle||i,u=v(t.opacity,u)),s={fill:a,stroke:l,"stroke-width":h,opacity:u},i&&(s.dashstyle=i),s}drawPoints(t=this.points){const e=this,n=this.chart,i=e.options,s=n.renderer,r=i.animationLimit||250;let o;t.forEach((function(t){let a=t.graphic,c=!!a,l=a&&n.pointCount<r?"animate":"attr";m(t.plotY)&&null!==t.y?(o=t.shapeArgs,a&&t.hasNewShapeType()&&(a=a.destroy()),e.enabledDataSorting&&(t.startXPos=e.xAxis.reversed?-(o&&o.width||0):e.xAxis.width),a||(t.graphic=a=s[t.shapeType](o).add(t.group||e.group))&&e.enabledDataSorting&&n.hasRendered&&n.pointCount<r&&(a.attr({x:t.startXPos}),c=!0,l="animate"),a&&c&&a[l](y(o)),n.styledMode||a[l](e.pointAttribs(t,t.selected&&"select")).shadow(!1!==t.allowShadow&&i.shadow),a&&(a.addClass(t.getClassName(),!0),a.attr({visibility:t.visible?"inherit":"hidden"}))):a&&(t.graphic=a.destroy())}))}drawTracker(t=this.points){const e=this,n=e.chart,i=n.pointer,s=function(t){const e=i.getPointFromEvent(t);"undefined"!==typeof e&&(i.isDirectTouch=!0,e.onMouseOver(t))};let r;t.forEach((function(t){r=g(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[],t.graphic&&(t.graphic.element.point=t),r.forEach((function(e){e.div?e.div.point=t:e.element.point=t}))})),e._hasTracking||(e.trackerGroups.forEach((function(t){e[t]&&(e[t].addClass("highcharts-tracker").on("mouseover",s).on("mouseout",(function(t){i.onTrackerMouseOut(t)})),l&&e[t].on("touchstart",s),!n.styledMode&&e.options.cursor&&e[t].css({cursor:e.options.cursor}))})),e._hasTracking=!0),p(this,"afterDrawTracker")}remove(){const t=this,e=t.chart;e.hasRendered&&e.series.forEach((function(e){e.type===t.type&&(e.isDirty=!0)})),s.prototype.remove.apply(t,arguments)}}return w.defaultOptions=y(s.defaultOptions,n),f(w.prototype,{cropShoulder:0,directTouch:!0,getSymbol:h,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),r.registerSeriesType("column",w),w})),e(n,"Core/Series/DataLabel.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/FormatUtilities.js"],n["Core/Utilities.js"]],(function(t,e,n){const{getDeferredAnimation:i}=t,{format:s}=e,{defined:r,extend:o,fireEvent:a,isArray:c,isString:l,merge:h,objectEach:u,pick:d,splat:f}=n;var p;return function(t){function e(t,e,n,i,s){const a=this.chart;var c=this.isCartesian&&a.inverted;const l=this.enabledDataSorting;var h=t.plotX,u=t.plotY;const f=n.rotation;var p=n.align;u=r(h)&&r(u)&&a.isInsidePlot(h,Math.round(u),{inverted:c,paneCoordinates:!0,series:this});let g="justify"===d(n.overflow,l?"none":"justify");if(c=this.visible&&!1!==t.visible&&r(h)&&(t.series.forceDL||l&&!g||u||d(n.inside,!!this.options.stacking)&&i&&a.isInsidePlot(h,c?i.x+1:i.y+i.height-1,{inverted:c,paneCoordinates:!0,series:this})),h=t.pos(),c&&h){f&&e.attr({align:p}),p=e.getBBox(!0);var m=[0,0],y=a.renderer.fontMetrics(e).b;if(i=o({x:h[0],y:Math.round(h[1]),width:0,height:0},i),o(n,{width:p.width,height:p.height}),f?(g=!1,m=a.renderer.rotCorr(y,f),y={x:i.x+(n.x||0)+i.width/2+m.x,y:i.y+(n.y||0)+{top:0,middle:.5,bottom:1}[n.verticalAlign]*i.height},m=[p.x-Number(e.attr("x")),p.y-Number(e.attr("y"))],l&&this.xAxis&&!g&&this.setDataLabelStartPos(t,e,s,u,y),e[s?"attr":"animate"](y)):(l&&this.xAxis&&!g&&this.setDataLabelStartPos(t,e,s,u,i),e.align(n,void 0,i),y=e.alignAttr),g&&0<=i.height)this.justifyDataLabel(e,n,y,p,i,s);else if(d(n.crop,!0)){let{x:t,y:e}=y;t+=m[0],e+=m[1],c=a.isInsidePlot(t,e,{paneCoordinates:!0,series:this})&&a.isInsidePlot(t+p.width,e+p.height,{paneCoordinates:!0,series:this})}n.shape&&!f&&e[s?"attr":"animate"]({anchorX:h[0],anchorY:h[1]})}s&&l&&(e.placed=!1),c||l&&!g?e.show():(e.hide(),e.placed=!1)}function p(t,e){var n=e.filter;return!n||(e=n.operator,t=t[n.property],n=n.value,">"===e&&t>n||"<"===e&&t<n||">="===e&&t>=n||"<="===e&&t<=n||"=="===e&&t==n||"==="===e&&t===n)}function g(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6)}function m(t){const e=this.hasRendered||0,n=this.initDataLabelsGroup().attr({opacity:+e});return!e&&n&&(this.visible&&n.show(),this.options.animation?n.animate({opacity:1},t):n.attr({opacity:1})),n}function y(t=this.points){const e=this,n=e.chart,o=e.options,h=n.renderer,{backgroundColor:g,plotBackgroundColor:m}=n.options.chart,y=h.getContrast(l(m)&&m||l(g)&&g||"#000000");let v,w,x=o.dataLabels;var _=f(x)[0];const T=_.animation;_=_.defer?i(n,T,e):{defer:0,duration:0},x=b(b(n.options.plotOptions&&n.options.plotOptions.series&&n.options.plotOptions.series.dataLabels,n.options.plotOptions&&n.options.plotOptions[e.type]&&n.options.plotOptions[e.type].dataLabels),x),a(this,"drawDataLabels"),(c(x)||x.enabled||e._hasPointLabels)&&(w=this.initDataLabels(_),t.forEach((t=>{v=f(b(x,t.dlOptions||t.options&&t.options.dataLabels)),v.forEach(((i,a)=>{const c=i.enabled&&(!t.isNull||t.dataLabelOnNull)&&p(t,i),l=t.connectors?t.connectors[a]:t.connector;let f,g,m=t.dataLabels?t.dataLabels[a]:t.dataLabel,v=!m;const b=d(i.distance,t.labelDistance);if(c){var x=t.getLabelConfig(),_=d(i[t.formatPrefix+"Format"],i.format);if(x=r(_)?s(_,x,n):(i[t.formatPrefix+"Formatter"]||i.formatter).call(x,i),_=i.style,f=i.rotation,n.styledMode||(_.color=d(i.color,_.color,e.color,"#000000"),"contrast"===_.color?(t.contrastColor=h.getContrast(t.color||e.color),_.color=!r(b)&&i.inside||0>b||o.stacking?t.contrastColor:y):delete t.contrastColor,o.cursor&&(_.cursor=o.cursor)),g={r:i.borderRadius||0,rotation:f,padding:i.padding,zIndex:1},!n.styledMode){const{backgroundColor:e,borderColor:n}=i;g.fill="auto"===e?t.color:e,g.stroke="auto"===n?t.color:n,g["stroke-width"]=i.borderWidth}u(g,(function(t,e){"undefined"===typeof t&&delete g[e]}))}!m||c&&r(x)&&!!m.div===!!i.useHTML&&(m.rotation&&i.rotation||m.rotation===i.rotation)||(v=!0,t.dataLabel=m=t.dataLabel&&t.dataLabel.destroy(),t.dataLabels&&(1===t.dataLabels.length?delete t.dataLabels:delete t.dataLabels[a]),a||delete t.dataLabel,l&&(t.connector=t.connector.destroy(),t.connectors&&(1===t.connectors.length?delete t.connectors:delete t.connectors[a]))),c&&r(x)?(m?g.text=x:(t.dataLabels=t.dataLabels||[],m=t.dataLabels[a]=f?h.text(x,0,0,i.useHTML).addClass("highcharts-data-label"):h.label(x,0,0,i.shape,null,null,i.useHTML,null,"data-label"),a||(t.dataLabel=m),m.addClass(" highcharts-data-label-color-"+t.colorIndex+" "+(i.className||"")+(i.useHTML?" highcharts-tracker":""))),m.options=i,m.attr(g),n.styledMode||m.css(_).shadow(i.shadow),(a=i[t.formatPrefix+"TextPath"]||i.textPath)&&!i.useHTML&&(m.setTextPath(t.getDataLabelPath&&t.getDataLabelPath(m)||t.graphic,a),t.dataLabelPath&&!a.enabled&&(t.dataLabelPath=t.dataLabelPath.destroy())),m.added||m.add(w),e.alignDataLabel(t,m,i,null,v)):m&&m.hide()}))}))),a(this,"afterDrawDataLabels")}function v(t,e,n,i,s,r){const o=this.chart,a=e.align,c=e.verticalAlign,l=t.box?0:t.padding||0;let h,u,{x:d=0,y:f=0}=e;return h=(n.x||0)+l,0>h&&("right"===a&&0<=d?(e.align="left",e.inside=!0):d-=h,u=!0),h=(n.x||0)+i.width-l,h>o.plotWidth&&("left"===a&&0>=d?(e.align="right",e.inside=!0):d+=o.plotWidth-h,u=!0),h=n.y+l,0>h&&("bottom"===c&&0<=f?(e.verticalAlign="top",e.inside=!0):f-=h,u=!0),h=(n.y||0)+i.height-l,h>o.plotHeight&&("top"===c&&0>=f?(e.verticalAlign="bottom",e.inside=!0):f+=o.plotHeight-h,u=!0),u&&(e.x=d,e.y=f,t.placed=!r,t.align(e,void 0,s)),u}function b(t,e){let n,i=[];if(c(t)&&!c(e))i=t.map((function(t){return h(t,e)}));else if(c(e)&&!c(t))i=e.map((function(e){return h(t,e)}));else if(c(t)||c(e))for(n=Math.max(t.length,e.length);n--;)i[n]=h(t[n],e[n]);else i=h(t,e);return i}function w(t,e,n,i,s){const r=this.chart,o=r.inverted,a=this.xAxis,c=a.reversed,l=o?e.height/2:e.width/2;t=(t=t.pointWidth)?t/2:0,e.startXPos=o?s.x:c?-l-t:a.width-l+t,e.startYPos=o?c?this.yAxis.height-l+t:-l-t:s.y,i?"hidden"===e.visibility&&(e.show(),e.attr({opacity:0}).animate({opacity:1})):e.attr({opacity:1}).animate({opacity:0},void 0,e.hide),r.hasRendered&&(n&&e.attr({x:e.startXPos,y:e.startYPos}),e.placed=!0)}const x=[];t.compose=function(t){n.pushUnique(x,t)&&(t=t.prototype,t.initDataLabelsGroup=g,t.initDataLabels=m,t.alignDataLabel=e,t.drawDataLabels=y,t.justifyDataLabel=v,t.setDataLabelStartPos=w)}}(p||(p={})),p})),e(n,"Series/Column/ColumnDataLabel.js",[n["Core/Series/DataLabel.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){const{series:i}=e,{merge:s,pick:r}=n;var o;return function(e){function o(t,e,n,o,a){let c=this.chart.inverted;var l=t.series;let h=(l.xAxis?l.xAxis.len:this.chart.plotSizeX)||0;l=(l.yAxis?l.yAxis.len:this.chart.plotSizeY)||0;var u=t.dlBox||t.shapeArgs;let d=r(t.below,t.plotY>r(this.translatedThreshold,l)),f=r(n.inside,!!this.options.stacking);u&&(o=s(u),0>o.y&&(o.height+=o.y,o.y=0),u=o.y+o.height-l,0<u&&u<o.height&&(o.height-=u),c&&(o={x:l-o.y-o.height,y:h-o.x-o.width,width:o.height,height:o.width}),f||(c?(o.x+=d?0:o.width,o.width=0):(o.y+=d?o.height:0,o.height=0))),n.align=r(n.align,!c||f?"center":d?"right":"left"),n.verticalAlign=r(n.verticalAlign,c||f?"middle":d?"top":"bottom"),i.prototype.alignDataLabel.call(this,t,e,n,o,a),n.inside&&t.contrastColor&&e.css({color:t.contrastColor})}const a=[];e.compose=function(e){t.compose(i),n.pushUnique(a,e)&&(e.prototype.alignDataLabel=o)}}(o||(o={})),o})),e(n,"Series/Bar/BarSeries.js",[n["Series/Column/ColumnSeries.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){const{extend:i,merge:s}=n;class r extends t{constructor(){super(...arguments),this.points=this.options=this.data=void 0}}return r.defaultOptions=s(t.defaultOptions,{}),i(r.prototype,{inverted:!0}),e.registerSeriesType("bar",r),r})),e(n,"Series/Scatter/ScatterSeriesDefaults.js",[],(function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}"></span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}})),e(n,"Series/Scatter/ScatterSeries.js",[n["Series/Scatter/ScatterSeriesDefaults.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n){const{column:i,line:s}=e.seriesTypes,{addEvent:r,extend:o,merge:a}=n;class c extends s{constructor(){super(...arguments),this.points=this.options=this.data=void 0}applyJitter(){const t=this,e=this.options.jitter,n=this.points.length;e&&this.points.forEach((function(i,s){["x","y"].forEach((function(r,o){let a,c,l="plot"+r.toUpperCase();if(e[r]&&!i.isNull){var h=t[r+"Axis"];c=e[r]*h.transA,h&&!h.isLog&&(a=Math.max(0,i[l]-c),h=Math.min(h.len,i[l]+c),o=1e4*Math.sin(s+o*n),o-=Math.floor(o),i[l]=a+(h-a)*o,"x"===r&&(i.clientX=i.plotX))}}))}))}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}return c.defaultOptions=a(s.defaultOptions,t),o(c.prototype,{drawTracker:i.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1}),r(c,"afterTranslate",(function(){this.applyJitter()})),e.registerSeriesType("scatter",c),c})),e(n,"Series/CenteredUtilities.js",[n["Core/Globals.js"],n["Core/Series/Series.js"],n["Core/Utilities.js"]],(function(t,e,n){const{deg2rad:i}=t,{fireEvent:s,isNumber:r,pick:o,relativeLength:a}=n;var c;return function(t){t.getCenter=function(){var t=this.options,n=this.chart;const i=2*(t.slicedOffset||0),c=n.plotWidth-2*i,l=n.plotHeight-2*i;var h=t.center;const u=Math.min(c,l),d=t.thickness;var f=t.size;let p=t.innerSize||0;for("string"===typeof f&&(f=parseFloat(f)),"string"===typeof p&&(p=parseFloat(p)),t=[o(h[0],"50%"),o(h[1],"50%"),o(f&&0>f?void 0:t.size,"100%"),o(p&&0>p?void 0:t.innerSize||0,"0%")],!n.angular||this instanceof e||(t[3]=0),h=0;4>h;++h)f=t[h],n=2>h||2===h&&/%$/.test(f),t[h]=a(f,[c,l,u,t[2]][h])+(n?i:0);return t[3]>t[2]&&(t[3]=t[2]),r(d)&&2*d<t[2]&&0<d&&(t[3]=t[2]-2*d),s(this,"afterGetCenter",{positions:t}),t},t.getStartAndEndRadians=function(t,e){return t=r(t)?t:0,e=r(e)&&e>t&&360>e-t?e:t+360,{start:i*(t+-90),end:i*(e+-90)}}}(c||(c={})),c})),e(n,"Series/Pie/PiePoint.js",[n["Core/Animation/AnimationUtilities.js"],n["Core/Series/Point.js"],n["Core/Utilities.js"]],(function(t,e,n){const{setAnimation:i}=t,{addEvent:s,defined:r,extend:o,isNumber:a,pick:c,relativeLength:l}=n;class h extends e{constructor(){super(...arguments),this.series=this.options=this.labelDistance=void 0}getConnectorPath(){const t=this.labelPosition,e=this.series.options.dataLabels,n=this.connectorShapes;let i=e.connectorShape;return n[i]&&(i=n[i]),i.call(this,{x:t.computed.x,y:t.computed.y,alignment:t.alignment},t.connectorPosition,e)}getTranslate(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}}haloPath(t){const e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:e.r-1,start:e.start,end:e.end,borderRadius:e.borderRadius})}init(){super.init.apply(this,arguments),this.name=c(this.name,"Slice");const t=t=>{this.slice("select"===t.type)};return s(this,"select",t),s(this,"unselect",t),this}isValid(){return a(this.y)&&0<=this.y}setVisible(t,e){const n=this.series,i=n.chart,s=n.options.ignoreHiddenPoint;e=c(e,s),t!==this.visible&&(this.visible=this.options.visible=t="undefined"===typeof t?!this.visible:t,n.options.data[n.data.indexOf(this)]=this.options,["graphic","dataLabel","connector"].forEach((e=>{this[e]&&this[e][t?"show":"hide"](t)})),this.legendItem&&i.legend.colorizeItem(this,t),t||"hover"!==this.state||this.setState(""),s&&(n.isDirty=!0),e&&i.redraw())}slice(t,e,n){const s=this.series;i(n,s.chart),c(e,!0),this.sliced=this.options.sliced=r(t)?t:!this.sliced,s.options.data[s.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}return o(h.prototype,{connectorShapes:{fixedOffset:function(t,e,n){const i=e.breakAt;return e=e.touchingSliceAt,[["M",t.x,t.y],n.softConnector?["C",t.x+("left"===t.alignment?-5:5),t.y,2*i.x-e.x,2*i.y-e.y,i.x,i.y]:["L",i.x,i.y],["L",e.x,e.y]]},straight:function(t,e){return e=e.touchingSliceAt,[["M",t.x,t.y],["L",e.x,e.y]]},crookedLine:function(t,e,n){const{breakAt:i,touchingSliceAt:s}=e;({series:e}=this);const[r,o,a]=e.center,c=a/2,h=e.chart.plotWidth,u=e.chart.plotLeft;e="left"===t.alignment;const{x:d,y:f}=t;return n.crookDistance?(t=l(n.crookDistance,1),t=e?r+c+(h+u-r-c)*(1-t):u+(r-c)*t):t=r+(o-f)*Math.tan((this.angle||0)-Math.PI/2),n=[["M",d,f]],(e?t<=d&&t>=i.x:t>=d&&t<=i.x)&&n.push(["L",t,f]),n.push(["L",i.x,i.y],["L",s.x,s.y]),n}}}),h})),e(n,"Series/Pie/PieSeriesDefaults.js",[],(function(){return{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}})),e(n,"Series/Pie/PieSeries.js",[n["Series/CenteredUtilities.js"],n["Series/Column/ColumnSeries.js"],n["Core/Globals.js"],n["Series/Pie/PiePoint.js"],n["Series/Pie/PieSeriesDefaults.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/Symbols.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r,o,a,c){const{getStartAndEndRadians:l}=t;({noop:n}=n);const{clamp:h,extend:u,fireEvent:d,merge:f,pick:p,relativeLength:g}=c;class m extends r{constructor(){super(...arguments),this.points=this.options=this.maxLabelDistance=this.data=this.center=void 0}animate(t){const e=this,n=e.points,i=e.startAngleRad;t||n.forEach((function(t){const n=t.graphic,s=t.shapeArgs;n&&s&&(n.attr({r:p(t.startR,e.center&&e.center[3]/2),start:i,end:i}),n.animate({r:s.r,start:s.start,end:s.end},e.options.animation))}))}drawEmpty(){const t=this.startAngleRad,e=this.endAngleRad,n=this.options;let i,s;0===this.total&&this.center?(i=this.center[0],s=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(i,s,this.center[1]/2,0,t,e).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:a.arc(i,s,this.center[2]/2,0,{start:t,end:e,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":n.borderWidth,fill:n.fillColor||"none",stroke:n.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){const t=this.chart.renderer;this.points.forEach((function(e){e.graphic&&e.hasNewShapeType()&&(e.graphic=e.graphic.destroy()),e.graphic||(e.graphic=t[e.shapeType](e.shapeArgs).add(e.series.group),e.delayedRendering=!0)}))}generatePoints(){super.generatePoints(),this.updateTotals()}getX(t,e,n){const i=this.center,s=this.radii?this.radii[n.index]||0:i[2]/2;return t=Math.asin(h((t-i[1])/(s+n.labelDistance),-1,1)),i[0]+(e?-1:1)*Math.cos(t)*(s+n.labelDistance)+(0<n.labelDistance?(e?-1:1)*this.options.dataLabels.padding:0)}hasData(){return!!this.processedXData.length}redrawPoints(){const t=this,e=t.chart;let n,i,s,r;this.drawEmpty(),t.group&&!e.styledMode&&t.group.shadow(t.options.shadow),t.points.forEach((function(o){const a={};i=o.graphic,!o.isNull&&i?(r=o.shapeArgs,n=o.getTranslate(),e.styledMode||(s=t.pointAttribs(o,o.selected&&"select")),o.delayedRendering?(i.setRadialReference(t.center).attr(r).attr(n),e.styledMode||i.attr(s).attr({"stroke-linejoin":"round"}),o.delayedRendering=!1):(i.setRadialReference(t.center),e.styledMode||f(!0,a,s),f(!0,a,r,n),i.animate(a)),i.attr({visibility:o.visible?"inherit":"hidden"}),i.addClass(o.getClassName(),!0)):i&&(o.graphic=i.destroy())}))}sortByAngle(t,e){t.sort((function(t,n){return"undefined"!==typeof t.angle&&(n.angle-t.angle)*e}))}translate(t){d(this,"translate"),this.generatePoints();var e=this.options;const n=e.slicedOffset,i=n+(e.borderWidth||0);var s=l(e.startAngle,e.endAngle);const r=this.startAngleRad=s.start;s=(this.endAngleRad=s.end)-r;const o=this.points,a=e.dataLabels.distance;e=e.ignoreHiddenPoint;const c=o.length;let h,u,f,m=0;for(t||(this.center=t=this.getCenter()),u=0;u<c;u++){f=o[u];var y=r+m*s;!f.isValid()||e&&!f.visible||(m+=f.percentage/100);var v=r+m*s,b={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1e3*y)/1e3,end:Math.round(1e3*v)/1e3};f.shapeType="arc",f.shapeArgs=b,f.labelDistance=p(f.options.dataLabels&&f.options.dataLabels.distance,a),f.labelDistance=g(f.labelDistance,b.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,f.labelDistance),v=(v+y)/2,v>1.5*Math.PI?v-=2*Math.PI:v<-Math.PI/2&&(v+=2*Math.PI),f.slicedTranslation={translateX:Math.round(Math.cos(v)*n),translateY:Math.round(Math.sin(v)*n)},b=Math.cos(v)*t[2]/2,h=Math.sin(v)*t[2]/2,f.tooltipPos=[t[0]+.7*b,t[1]+.7*h],f.half=v<-Math.PI/2||v>Math.PI/2?1:0,f.angle=v,y=Math.min(i,f.labelDistance/5),f.labelPosition={natural:{x:t[0]+b+Math.cos(v)*f.labelDistance,y:t[1]+h+Math.sin(v)*f.labelDistance},computed:{},alignment:0>f.labelDistance?"center":f.half?"right":"left",connectorPosition:{breakAt:{x:t[0]+b+Math.cos(v)*y,y:t[1]+h+Math.sin(v)*y},touchingSliceAt:{x:t[0]+b,y:t[1]+h}}}}d(this,"afterTranslate")}updateTotals(){const t=this.points,e=t.length,n=this.options.ignoreHiddenPoint;let i,s,r=0;for(i=0;i<e;i++)s=t[i],!s.isValid()||n&&!s.visible||(r+=s.y);for(this.total=r,i=0;i<e;i++)s=t[i],s.percentage=0<r&&(s.visible||!n)?s.y/r*100:0,s.total=r}}return m.defaultOptions=f(r.defaultOptions,s),u(m.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:e.prototype.drawTracker,getCenter:t.getCenter,getSymbol:n,isCartesian:!1,noSharedTooltip:!0,pointAttribs:e.prototype.pointAttribs,pointClass:i,requireSorting:!1,searchPoint:n,trackerGroups:["group","dataLabelsGroup"]}),o.registerSeriesType("pie",m),m})),e(n,"Series/Pie/PieDataLabel.js",[n["Core/Series/DataLabel.js"],n["Core/Globals.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s){const{noop:r}=e,{distribute:o}=n,{series:a}=i,{arrayMax:c,clamp:l,defined:h,merge:u,pick:d,relativeLength:f}=s;var p;return function(e){function n(){const t=this,e=t.data,n=t.chart,i=t.options.dataLabels||{},s=i.connectorPadding,r=n.plotWidth,l=n.plotHeight,f=n.plotLeft,p=Math.round(n.chartWidth/3),g=t.center,m=g[2]/2,y=g[1],v=[[],[]],b=[0,0,0,0],w=t.dataLabelPositioners;let x,_,T,S,I,k,E,C,A,O,P,M;t.visible&&(i.enabled||t._hasPointLabels)&&(e.forEach((function(t){t.dataLabel&&t.visible&&t.dataLabel.shortened&&(t.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),t.dataLabel.shortened=!1)})),a.prototype.drawDataLabels.apply(t),e.forEach((function(t){t.dataLabel&&(t.visible?(v[t.half].push(t),t.dataLabel._pos=null,!h(i.style.width)&&!h(t.options.dataLabels&&t.options.dataLabels.style&&t.options.dataLabels.style.width)&&t.dataLabel.getBBox().width>p&&(t.dataLabel.css({width:Math.round(.7*p)+"px"}),t.dataLabel.shortened=!0)):(t.dataLabel=t.dataLabel.destroy(),t.dataLabels&&1===t.dataLabels.length&&delete t.dataLabels))})),v.forEach(((e,a)=>{const c=e.length,u=[];let p,v=0;if(c){if(t.sortByAngle(e,a-.5),0<t.maxLabelDistance){var _=Math.max(0,y-m-t.maxLabelDistance);p=Math.min(y+m+t.maxLabelDistance,n.plotHeight),e.forEach((function(t){0<t.labelDistance&&t.dataLabel&&(t.top=Math.max(0,y-m-t.labelDistance),t.bottom=Math.min(y+m+t.labelDistance,n.plotHeight),v=t.dataLabel.getBBox().height||21,t.distributeBox={target:t.labelPosition.natural.y-t.top+v/2,size:v,rank:t.y},u.push(t.distributeBox))})),_=p+v-_,o(u,_,_/5)}for(P=0;P<c;P++){if(x=e[P],k=x.labelPosition,S=x.dataLabel,O=!1===x.visible?"hidden":"inherit",A=_=k.natural.y,u&&h(x.distributeBox)&&("undefined"===typeof x.distributeBox.pos?O="hidden":(E=x.distributeBox.size,A=w.radialDistributionY(x))),delete x.positionIndex,i.justify)C=w.justify(x,m,g);else switch(i.alignTo){case"connectors":C=w.alignToConnectors(e,a,r,f);break;case"plotEdges":C=w.alignToPlotEdges(S,a,r,f);break;default:C=w.radialDistributionX(t,x,A,_)}S._attr={visibility:O,align:k.alignment},M=x.options.dataLabels||{},S._pos={x:C+d(M.x,i.x)+({left:s,right:-s}[k.alignment]||0),y:A+d(M.y,i.y)-S.getBBox().height/2},k&&(k.computed.x=C,k.computed.y=A),d(i.crop,!0)&&(I=S.getBBox().width,_=null,C-I<s&&1===a?(_=Math.round(I-C+s),b[3]=Math.max(_,b[3])):C+I>r-s&&0===a&&(_=Math.round(C+I-r+s),b[1]=Math.max(_,b[1])),0>A-E/2?b[0]=Math.max(Math.round(E/2-A),b[0]):A+E/2>l&&(b[2]=Math.max(Math.round(A+E/2-l),b[2])),S.sideOverflow=_)}}})),0===c(b)||this.verifyDataLabelOverflow(b))&&(this.placeDataLabels(),this.points.forEach((function(e){if(M=u(i,e.options.dataLabels),_=d(M.connectorWidth,1)){let i;T=e.connector,(S=e.dataLabel)&&S._pos&&e.visible&&0<e.labelDistance?(O=S._attr.visibility,(i=!T)&&(e.connector=T=n.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+e.colorIndex+(e.className?" "+e.className:"")).add(t.dataLabelsGroup),n.styledMode||T.attr({"stroke-width":_,stroke:M.connectorColor||e.color||"#666666"})),T[i?"attr":"animate"]({d:e.getConnectorPath()}),T.attr("visibility",O)):T&&(e.connector=T.destroy())}})))}function i(){this.points.forEach((function(t){let e,n=t.dataLabel;n&&t.visible&&((e=n._pos)?(n.sideOverflow&&(n._attr.width=Math.max(n.getBBox().width-n.sideOverflow,0),n.css({width:n._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),n.shortened=!0),n.attr(n._attr),n[n.moved?"animate":"attr"](e),n.moved=!0):n&&n.attr({y:-9999})),delete t.distributeBox}),this)}function p(t){let e,n=this.center,i=this.options,s=i.center,r=i.minSize||80,o=null!==i.size;return o||(null!==s[0]?e=Math.max(n[2]-Math.max(t[1],t[3]),r):(e=Math.max(n[2]-t[1]-t[3],r),n[0]+=(t[3]-t[1])/2),null!==s[1]?e=l(e,r,n[2]-Math.max(t[0],t[2])):(e=l(e,r,n[2]-t[0]-t[2]),n[1]+=(t[0]-t[2])/2),e<n[2]?(n[2]=e,n[3]=Math.min(i.thickness?Math.max(0,e-2*i.thickness):Math.max(0,f(i.innerSize||0,e)),e),this.translate(n),this.drawDataLabels&&this.drawDataLabels()):o=!0),o}const g=[],m={radialDistributionY:function(t){return t.top+t.distributeBox.pos},radialDistributionX:function(t,e,n,i){return t.getX(n<e.top+2||n>e.bottom-2?i:n,e.half,e)},justify:function(t,e,n){return n[0]+(t.half?-1:1)*(e+t.labelDistance)},alignToPlotEdges:function(t,e,n,i){return t=t.getBBox().width,e?t+i:n-t-i},alignToConnectors:function(t,e,n,i){let s,r=0;return t.forEach((function(t){s=t.dataLabel.getBBox().width,s>r&&(r=s)})),e?r+i:n-r-i}};e.compose=function(e){t.compose(a),s.pushUnique(g,e)&&(e=e.prototype,e.dataLabelPositioners=m,e.alignDataLabel=r,e.drawDataLabels=n,e.placeDataLabels=i,e.verifyDataLabelOverflow=p)}}(p||(p={})),p})),e(n,"Extensions/OverlappingDataLabels.js",[n["Core/Chart/Chart.js"],n["Core/Utilities.js"]],(function(t,e){function n(t,e){let n,i=!1;return t&&(n=t.newOpacity,t.oldOpacity!==n&&(t.alignAttr&&t.placed?(t[n?"removeClass":"addClass"]("highcharts-data-label-hidden"),i=!0,t.alignAttr.opacity=n,t[t.isOld?"animate":"attr"](t.alignAttr,null,(function(){e.styledMode||t.css({pointerEvents:n?"auto":"none"})})),s(e,"afterHideOverlappingLabel")):t.attr({opacity:n})),t.isOld=!0),i}const{addEvent:i,fireEvent:s,isArray:r,isNumber:o,objectEach:a,pick:c}=e;i(t,"render",(function(){let t=this,e=[];(this.labelCollectors||[]).forEach((function(t){e=e.concat(t())})),(this.yAxis||[]).forEach((function(t){t.stacking&&t.options.stackLabels&&!t.options.stackLabels.allowOverlap&&a(t.stacking.stacks,(function(t){a(t,(function(t){t.label&&e.push(t.label)}))}))})),(this.series||[]).forEach((function(i){var s=i.options.dataLabels;i.visible&&(!1!==s.enabled||i._hasPointLabels)&&(s=i=>i.forEach((i=>{i.visible&&(r(i.dataLabels)?i.dataLabels:i.dataLabel?[i.dataLabel]:[]).forEach((function(s){const r=s.options;s.labelrank=c(r.labelrank,i.labelrank,i.shapeArgs&&i.shapeArgs.height),r.allowOverlap?(s.oldOpacity=s.opacity,s.newOpacity=1,n(s,t)):e.push(s)}))})),s(i.nodes||[]),s(i.points))})),this.hideOverlappingLabels(e)})),t.prototype.hideOverlappingLabels=function(t){let e=this,i=t.length,r=e.renderer;var a;let c,l,h,u,d=!1;var f=function(t){let e,n;var i;let s,a,c=t.box?0:t.padding||0,l=i=0;if(t&&(!t.alignAttr||t.placed))return e=t.alignAttr||{x:t.attr("x"),y:t.attr("y")},n=t.parentGroup,t.width||(i=t.getBBox(),t.width=i.width,t.height=i.height,i=r.fontMetrics(t.element).h),s=t.width-2*c,(a={left:"0",center:"0.5",right:"1"}[t.alignValue])?l=+a*s:o(t.x)&&Math.round(t.x)!==t.translateX&&(l=t.x-t.translateX),{x:e.x+(n.translateX||0)+c-(l||0),y:e.y+(n.translateY||0)+c-i,width:t.width-2*c,height:t.height-2*c}};for(c=0;c<i;c++)(a=t[c])&&(a.oldOpacity=a.opacity,a.newOpacity=1,a.absoluteBox=f(a));for(t.sort((function(t,e){return(e.labelrank||0)-(t.labelrank||0)})),c=0;c<i;c++)for(h=(f=t[c])&&f.absoluteBox,a=c+1;a<i;++a)u=(l=t[a])&&l.absoluteBox,!h||!u||f===l||0===f.newOpacity||0===l.newOpacity||"hidden"===f.visibility||"hidden"===l.visibility||u.x>=h.x+h.width||u.x+u.width<=h.x||u.y>=h.y+h.height||u.y+u.height<=h.y||((f.labelrank<l.labelrank?f:l).newOpacity=0);t.forEach((function(t){n(t,e)&&(d=!0)})),d&&s(e,"afterHideAllOverlappingLabels")}})),e(n,"Extensions/BorderRadius.js",[n["Core/Defaults.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Utilities.js"]],(function(t,e,n,i,s,r){const{defaultOptions:o}=t;({seriesTypes:t}=n);const{addEvent:a,extend:c,isObject:l,merge:h,relativeLength:u}=r,d={radius:0,scope:"stack",where:void 0},f=(t,e)=>(l(t)||(t={radius:t||0}),h(d,e,t));if(-1===i.symbolCustomAttribs.indexOf("borderRadius")){i.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY");const n=s.prototype.symbols.arc;s.prototype.symbols.arc=function(t,e,i,s,r={}){t=n(t,e,i,s,r);const{innerR:o=0,r:a=i,start:c=0,end:l=0}=r;if(r.open||!r.borderRadius)return t;for(i=l-c,e=Math.sin(i/2),r=Math.max(Math.min(u(r.borderRadius||0,a-o),(a-o)/2,a*e/(1+e)),0),i=Math.min(r,i/Math.PI*2*o),e=t.length-1;e--;){let n,o,a;s=t;var h=e,d=1<e?i:r,f=s[h],p=s[h+1];if("Z"===p[0]&&(p=s[0]),"M"!==f[0]&&"L"!==f[0]||"A"!==p[0]?"A"!==f[0]||"M"!==p[0]&&"L"!==p[0]||(a=p,o=f):(a=f,o=p,n=!0),a&&o&&o.params){f=o[1];var g=o[5];p=o.params;const{start:t,end:e,cx:i,cy:r}=p;var m=g?f-d:f+d;const c=m?Math.asin(d/m):0;g=g?c:-c,m*=Math.cos(c),n?(p.start=t+g,a[1]=i+m*Math.cos(t),a[2]=r+m*Math.sin(t),s.splice(h+1,0,["A",d,d,0,0,1,i+f*Math.cos(p.start),r+f*Math.sin(p.start)])):(p.end=e-g,o[6]=i+f*Math.cos(p.end),o[7]=r+f*Math.sin(p.end),s.splice(h+1,0,["A",d,d,0,0,1,i+m*Math.cos(e),r+m*Math.sin(e)])),o[4]=Math.abs(p.end-p.start)<Math.PI?0:1}}return t};const r=s.prototype.symbols.roundedRect;s.prototype.symbols.roundedRect=function(t,e,n,i,s={}){const o=r(t,e,n,i,s),{r:a=0,brBoxHeight:c=i,brBoxY:l=e}=s;var h=e-l,u=l+c-(e+i);s=-.1<h-a?0:a;const d=-.1<u-a?0:a;var f=Math.max(s&&h,0);const p=Math.max(d&&u,0);u=[t+s,e],h=[t+n-s,e];const g=[t+n,e+s],m=[t+n,e+i-d],y=[t+n-d,e+i],v=[t+d,e+i],b=[t,e+i-d],w=[t,e+s];if(f){const t=Math.sqrt(Math.pow(s,2)-Math.pow(s-f,2));u[0]-=t,h[0]+=t,g[1]=w[1]=e+s-f}return i<s-f&&(f=Math.sqrt(Math.pow(s,2)-Math.pow(s-f-i,2)),g[0]=m[0]=t+n-s+f,y[0]=Math.min(g[0],y[0]),v[0]=Math.max(m[0],v[0]),b[0]=w[0]=t+s-f,g[1]=w[1]=e+i),p&&(f=Math.sqrt(Math.pow(d,2)-Math.pow(d-p,2)),y[0]+=f,v[0]-=f,m[1]=b[1]=e+i-d+p),i<d-p&&(i=Math.sqrt(Math.pow(d,2)-Math.pow(d-p-i,2)),g[0]=m[0]=t+n-d+i,h[0]=Math.min(g[0],h[0]),u[0]=Math.max(m[0],u[0]),b[0]=w[0]=t+d-i,m[1]=b[1]=e),o.length=0,o.push(["M",...u],["L",...h],["A",s,s,0,0,1,...g],["L",...m],["A",d,d,0,0,1,...y],["L",...v],["A",d,d,0,0,1,...b],["L",...w],["A",s,s,0,0,1,...u],["Z"]),o},a(t.pie,"afterTranslate",(function(){const t=f(this.options.borderRadius);for(const e of this.points){const n=e.shapeArgs;n&&(n.borderRadius=u(t.radius,(n.r||0)-(n.innerR||0)))}})),a(e,"afterColumnTranslate",(function(){var t,e;if(this.options.borderRadius&&(!this.chart.is3d||!this.chart.is3d())){const{options:r,yAxis:a}=this,h="percent"===r.stacking;var n=null===(e=null===(t=o.plotOptions)||void 0===t?void 0:t[this.type])||void 0===e?void 0:e.borderRadius;t=f(r.borderRadius,l(n)?n:{}),e=a.options.reversed;for(const o of this.points)if(({shapeArgs:n}=o),"roundedRect"===o.shapeType&&n){const{width:l=0,height:d=0,y:f=0}=n;var i=f,s=d;"stack"===t.scope&&o.stackTotal&&(i=a.translate(h?100:o.stackTotal,!1,!0,!1,!0),s=a.translate(r.threshold||0,!1,!0,!1,!0),s=this.crispCol(0,Math.min(i,s),0,Math.abs(i-s)),i=s.y,s=s.height);const p=-1===(o.negative?-1:1)*(e?-1:1);let g=t.where;!g&&this.is("waterfall")&&Math.abs((o.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(g="all"),g||(g="end");const m=Math.min(u(t.radius,l),l/2,"all"===g?d/2:1/0)||0;"end"===g&&(p&&(i-=m),s+=m),c(n,{brBoxHeight:s,brBoxY:i,r:m})}}}),{order:9})}return e={optionsToObject:f},e})),e(n,"Core/Responsive.js",[n["Core/Utilities.js"]],(function(t){const{extend:e,find:n,isArray:i,isObject:s,merge:r,objectEach:o,pick:a,splat:c,uniqueKey:l}=t;var h;return function(h){function u(t){function e(t,r,a,l){let h;o(t,(function(t,o){if(!l&&-1<n.collectionsWithUpdate.indexOf(o)&&r[o])for(t=c(t),a[o]=[],h=0;h<Math.max(t.length,r[o].length);h++)r[o][h]&&(void 0===t[h]?a[o][h]=r[o][h]:(a[o][h]={},e(t[h],r[o][h],a[o][h],l+1)));else s(t)?(a[o]=i(t)?[]:{},e(t,r[o]||{},a[o],l+1)):a[o]="undefined"===typeof r[o]?null:r[o]}))}const n=this,r={};return e(t,this.options,r,0),r}function d(t,e){const n=t.condition;(n.callback||function(){return this.chartWidth<=a(n.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=a(n.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=a(n.minWidth,0)&&this.chartHeight>=a(n.minHeight,0)}).call(this)&&e.push(t._id)}function f(t,e){const i=this.options.responsive;var s=this.currentResponsive;let o=[];!e&&i&&i.rules&&i.rules.forEach((t=>{"undefined"===typeof t._id&&(t._id=l()),this.matchResponsiveRule(t,o)}),this),e=r(...o.map((t=>n((i||{}).rules||[],(e=>e._id===t)))).map((t=>t&&t.chartOptions))),e.isResponsiveOptions=!0,o=o.toString()||void 0,o!==(s&&s.ruleIds)&&(s&&this.update(s.undoOptions,t,!0),o?(s=this.currentOptions(e),s.isResponsiveOptions=!0,this.currentResponsive={ruleIds:o,mergedOptions:e,undoOptions:s},this.update(e,t,!0)):this.currentResponsive=void 0)}const p=[];h.compose=function(n){return t.pushUnique(p,n)&&e(n.prototype,{currentOptions:u,matchResponsiveRule:d,setResponsive:f}),n}}(h||(h={})),h})),e(n,"masters/highcharts.src.js",[n["Core/Globals.js"],n["Core/Utilities.js"],n["Core/Defaults.js"],n["Core/Animation/Fx.js"],n["Core/Animation/AnimationUtilities.js"],n["Core/Renderer/HTML/AST.js"],n["Core/FormatUtilities.js"],n["Core/Renderer/RendererUtilities.js"],n["Core/Renderer/SVG/SVGElement.js"],n["Core/Renderer/SVG/SVGRenderer.js"],n["Core/Renderer/HTML/HTMLElement.js"],n["Core/Renderer/HTML/HTMLRenderer.js"],n["Core/Axis/Axis.js"],n["Core/Axis/DateTimeAxis.js"],n["Core/Axis/LogarithmicAxis.js"],n["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],n["Core/Axis/Tick.js"],n["Core/Tooltip.js"],n["Core/Series/Point.js"],n["Core/Pointer.js"],n["Core/Legend/Legend.js"],n["Core/Chart/Chart.js"],n["Core/Axis/Stacking/StackingAxis.js"],n["Core/Axis/Stacking/StackItem.js"],n["Core/Series/Series.js"],n["Core/Series/SeriesRegistry.js"],n["Series/Column/ColumnSeries.js"],n["Series/Column/ColumnDataLabel.js"],n["Series/Pie/PieSeries.js"],n["Series/Pie/PieDataLabel.js"],n["Core/Series/DataLabel.js"],n["Core/Responsive.js"],n["Core/Color/Color.js"],n["Core/Time.js"]],(function(t,e,n,i,s,r,o,a,c,l,h,u,d,f,p,g,m,y,v,b,w,x,_,T,S,I,k,E,C,A,O,P,M,D){return t.animate=s.animate,t.animObject=s.animObject,t.getDeferredAnimation=s.getDeferredAnimation,t.setAnimation=s.setAnimation,t.stop=s.stop,t.timers=i.timers,t.AST=r,t.Axis=d,t.Chart=x,t.chart=x.chart,t.Fx=i,t.Legend=w,t.PlotLineOrBand=g,t.Point=v,t.Pointer=b,t.Series=S,t.StackItem=T,t.SVGElement=c,t.SVGRenderer=l,t.Tick=m,t.Time=D,t.Tooltip=y,t.Color=M,t.color=M.parse,u.compose(l),h.compose(c),b.compose(x),w.compose(x),t.defaultOptions=n.defaultOptions,t.getOptions=n.getOptions,t.time=n.defaultTime,t.setOptions=n.setOptions,t.dateFormat=o.dateFormat,t.format=o.format,t.numberFormat=o.numberFormat,t.addEvent=e.addEvent,t.arrayMax=e.arrayMax,t.arrayMin=e.arrayMin,t.attr=e.attr,t.clearTimeout=e.clearTimeout,t.correctFloat=e.correctFloat,t.createElement=e.createElement,t.css=e.css,t.defined=e.defined,t.destroyObjectProperties=e.destroyObjectProperties,t.discardElement=e.discardElement,t.distribute=a.distribute,t.erase=e.erase,t.error=e.error,t.extend=e.extend,t.extendClass=e.extendClass,t.find=e.find,t.fireEvent=e.fireEvent,t.getMagnitude=e.getMagnitude,t.getStyle=e.getStyle,t.inArray=e.inArray,t.isArray=e.isArray,t.isClass=e.isClass,t.isDOMElement=e.isDOMElement,t.isFunction=e.isFunction,t.isNumber=e.isNumber,t.isObject=e.isObject,t.isString=e.isString,t.keys=e.keys,t.merge=e.merge,t.normalizeTickInterval=e.normalizeTickInterval,t.objectEach=e.objectEach,t.offset=e.offset,t.pad=e.pad,t.pick=e.pick,t.pInt=e.pInt,t.relativeLength=e.relativeLength,t.removeEvent=e.removeEvent,t.seriesType=I.seriesType,t.splat=e.splat,t.stableSort=e.stableSort,t.syncTimeout=e.syncTimeout,t.timeUnits=e.timeUnits,t.uniqueKey=e.uniqueKey,t.useSerialIds=e.useSerialIds,t.wrap=e.wrap,E.compose(k),O.compose(S),f.compose(d),p.compose(d),A.compose(C),g.compose(d),P.compose(x),_.compose(d,x,S),y.compose(b),t})),n["masters/highcharts.src.js"]._modules=n,n["masters/highcharts.src.js"]}))},3744:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n}},8180:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var i=n(4444),s=n(8463),r=n(5816),o=n(3333);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(t,e){this._delegate=t,this.firebase=e,(0,r._addComponent)(t,new s.wA("app-compat",(()=>this),"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((t=>{this._delegate.checkDestroyed(),t()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,r.deleteApp)(this._delegate))))}_getService(t,e=r._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=r._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,r._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,r._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},l=new i.LL("app-compat","Firebase",c);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function h(t){const e={},n={__esModule:!0,initializeApp:a,app:o,registerVersion:r.registerVersion,setLogLevel:r.setLogLevel,onLog:r.onLog,apps:null,SDK_VERSION:r.SDK_VERSION,INTERNAL:{registerComponent:h,removeApp:s,useAsService:u,modularAPIs:r}};function s(t){delete e[t]}function o(t){if(t=t||r._DEFAULT_ENTRY_NAME,!(0,i.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function a(s,o={}){const a=r.initializeApp(s,o);if((0,i.r3)(e,a.name))return e[a.name];const c=new t(a,n);return e[a.name]=c,c}function c(){return Object.keys(e).map((t=>e[t]))}function h(e){const s=e.name,a=s.replace("-compat","");if(r._registerComponent(e)&&"PUBLIC"===e.type){const r=(t=o())=>{if("function"!==typeof t[a])throw l.create("invalid-app-argument",{appName:s});return t[a]()};void 0!==e.serviceProps&&(0,i.ZB)(r,e.serviceProps),n[a]=r,t.prototype[a]=function(...t){const n=this._getService.bind(this,s);return n.apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[a]:null}function u(t,e){if("serverAuth"===e)return null;const n=e;return n}return n["default"]=n,Object.defineProperty(n,"apps",{get:c}),o["App"]=t,n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(){const t=h(a);function e(e){(0,i.ZB)(t,e)}return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:u,extendNamespace:e,createSubscribe:i.ne,ErrorFactory:i.LL,deepExtend:i.ZB}),t}const d=u(),f=new o.Yd("@firebase/app-compat"),p="@firebase/app-compat",g="0.2.10";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function m(t){(0,r.registerVersion)(p,g,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,i.jU)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const y=d;m()},5816:function(t,e,n){"use strict";n.r(e),n.d(e,{FirebaseError:function(){return r.ZR},SDK_VERSION:function(){return vt},_DEFAULT_ENTRY_NAME:function(){return rt},_addComponent:function(){return lt},_addOrOverwriteComponent:function(){return ht},_apps:function(){return at},_clearComponents:function(){return pt},_components:function(){return ct},_getProvider:function(){return dt},_registerComponent:function(){return ut},_removeServiceInstance:function(){return ft},deleteApp:function(){return _t},getApp:function(){return wt},getApps:function(){return xt},initializeApp:function(){return bt},onLog:function(){return St},registerVersion:function(){return Tt},setLogLevel:function(){return It}});var i=n(8463),s=n(3333),r=n(4444);const o=(t,e)=>e.some((e=>t instanceof e));let a,c;function l(){return a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h(){return c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap;function m(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",r)},s=()=>{e(_(t.result)),i()},r=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",r)}));return e.then((e=>{e instanceof IDBCursor&&u.set(e,t)})).catch((()=>{})),g.set(e,t),e}function y(t){if(d.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",r),t.removeEventListener("abort",r)},s=()=>{e(),i()},r=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",r),t.addEventListener("abort",r)}));d.set(t,e)}let v={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return d.get(t);if("objectStoreNames"===e)return t.objectStoreNames||f.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function b(t){v=t(v)}function w(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?h().includes(t)?function(...e){return t.apply(T(this),e),_(u.get(this))}:function(...e){return _(t.apply(T(this),e))}:function(e,...n){const i=t.call(T(this),e,...n);return f.set(i,e.sort?e.sort():[e]),_(i)}}function x(t){return"function"===typeof t?w(t):(t instanceof IDBTransaction&&y(t),o(t,l())?new Proxy(t,v):t)}function _(t){if(t instanceof IDBRequest)return m(t);if(p.has(t))return p.get(t);const e=x(t);return e!==t&&(p.set(t,e),g.set(e,t)),e}const T=t=>g.get(t);function S(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=_(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(_(o.result),t.oldVersion,t.newVersion,_(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{r&&t.addEventListener("close",(()=>r())),s&&t.addEventListener("versionchange",(t=>s(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const I=["get","getKey","getAll","getAllKeys","count"],k=["put","add","delete","clear"],E=new Map;function C(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(E.get(e))return E.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=k.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!I.includes(n))return;const r=async function(t,...e){const r=this.transaction(t,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),s&&r.done]))[0]};return E.set(e,r),r}b((t=>({...t,get:(e,n,i)=>C(e,n)||t.get(e,n,i),has:(e,n)=>!!C(e,n)||t.has(e,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class A{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(O(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function O(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const P="@firebase/app",M="0.9.10",D=new s.Yd("@firebase/app"),L="@firebase/app-compat",N="@firebase/analytics-compat",R="@firebase/analytics",F="@firebase/app-check-compat",j="@firebase/app-check",B="@firebase/auth",U="@firebase/auth-compat",V="@firebase/database",z="@firebase/database-compat",G="@firebase/functions",$="@firebase/functions-compat",q="@firebase/installations",W="@firebase/installations-compat",H="@firebase/messaging",K="@firebase/messaging-compat",X="@firebase/performance",Y="@firebase/performance-compat",Q="@firebase/remote-config",J="@firebase/remote-config-compat",Z="@firebase/storage",tt="@firebase/storage-compat",et="@firebase/firestore",nt="@firebase/firestore-compat",it="firebase",st="9.22.0",rt="[DEFAULT]",ot={[P]:"fire-core",[L]:"fire-core-compat",[R]:"fire-analytics",[N]:"fire-analytics-compat",[j]:"fire-app-check",[F]:"fire-app-check-compat",[B]:"fire-auth",[U]:"fire-auth-compat",[V]:"fire-rtdb",[z]:"fire-rtdb-compat",[G]:"fire-fn",[$]:"fire-fn-compat",[q]:"fire-iid",[W]:"fire-iid-compat",[H]:"fire-fcm",[K]:"fire-fcm-compat",[X]:"fire-perf",[Y]:"fire-perf-compat",[Q]:"fire-rc",[J]:"fire-rc-compat",[Z]:"fire-gcs",[tt]:"fire-gcs-compat",[et]:"fire-fst",[nt]:"fire-fst-compat","fire-js":"fire-js",[it]:"fire-js-all"},at=new Map,ct=new Map;function lt(t,e){try{t.container.addComponent(e)}catch(n){D.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ht(t,e){t.container.addOrOverwriteComponent(e)}function ut(t){const e=t.name;if(ct.has(e))return D.debug(`There were multiple attempts to register component ${e}.`),!1;ct.set(e,t);for(const n of at.values())lt(n,t);return!0}function dt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ft(t,e,n=rt){dt(t,e).clearInstance(n)}function pt(){ct.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},mt=new r.LL("app","Firebase",gt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt=st;function bt(t,e={}){let n=t;if("object"!==typeof e){const t=e;e={name:t}}const s=Object.assign({name:rt,automaticDataCollectionEnabled:!1},e),o=s.name;if("string"!==typeof o||!o)throw mt.create("bad-app-name",{appName:String(o)});if(n||(n=(0,r.aH)()),!n)throw mt.create("no-options");const a=at.get(o);if(a){if((0,r.vZ)(n,a.options)&&(0,r.vZ)(s,a.config))return a;throw mt.create("duplicate-app",{appName:o})}const c=new i.H0(o);for(const i of ct.values())c.addComponent(i);const l=new yt(n,s,c);return at.set(o,l),l}function wt(t=rt){const e=at.get(t);if(!e&&t===rt&&(0,r.aH)())return bt();if(!e)throw mt.create("no-app",{appName:t});return e}function xt(){return Array.from(at.values())}async function _t(t){const e=t.name;at.has(e)&&(at.delete(e),await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function Tt(t,e,n){var s;let r=null!==(s=ot[t])&&void 0!==s?s:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${r}" with version "${e}":`];return o&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void D.warn(t.join(" "))}ut(new i.wA(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}function St(t,e){if(null!==t&&"function"!==typeof t)throw mt.create("invalid-log-argument");(0,s.Am)(t,e)}function It(t){(0,s.Ub)(t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="firebase-heartbeat-database",Et=1,Ct="firebase-heartbeat-store";let At=null;function Ot(){return At||(At=S(kt,Et,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ct)}}}).catch((t=>{throw mt.create("idb-open",{originalErrorMessage:t.message})}))),At}async function Pt(t){try{const e=await Ot(),n=await e.transaction(Ct).objectStore(Ct).get(Dt(t));return n}catch(e){if(e instanceof r.ZR)D.warn(e.message);else{const t=mt.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});D.warn(t.message)}}}async function Mt(t,e){try{const n=await Ot(),i=n.transaction(Ct,"readwrite"),s=i.objectStore(Ct);await s.put(e,Dt(t)),await i.done}catch(n){if(n instanceof r.ZR)D.warn(n.message);else{const t=mt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});D.warn(t.message)}}}function Dt(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=1024,Nt=2592e6;class Rt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Bt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate(),e=t.getPlatformInfoString(),n=Ft();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((t=>t.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf(),n=Date.now();return n-e<=Nt})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ft(),{heartbeatsToSend:e,unsentEntries:n}=jt(this._heartbeatsCache.heartbeats),i=(0,r.L)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ft(){const t=new Date;return t.toISOString().substring(0,10)}function jt(t,e=Lt){const n=[];let i=t.slice();for(const s of t){const t=n.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),Ut(n)>e){t.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ut(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Bt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,r.hl)()&&(0,r.eu)().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await Pt(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Mt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Mt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Ut(t){return(0,r.L)(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){ut(new i.wA("platform-logger",(t=>new A(t)),"PRIVATE")),ut(new i.wA("heartbeat",(t=>new Rt(t)),"PRIVATE")),Tt(P,M,t),Tt(P,M,"esm2017"),Tt("fire-js","")}Vt("")},8463:function(t,e,n){"use strict";n.d(e,{H0:function(){return l},wA:function(){return s}});var i=n(4444);class s{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new i.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(c(t))try{this.getOrInitializeService({instanceIdentifier:r})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=r){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=r){return this.instances.has(t)}getOptions(t=r){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,r]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(s);n===t&&r.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const s of n)try{s(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:a(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}return n||null}normalizeInstanceIdentifier(t=r){return this.component?this.component.multipleInstances?t:r:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(t){return t===r?void 0:t}function c(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},3333:function(t,e,n){"use strict";n.d(e,{Am:function(){return u},Ub:function(){return h},Yd:function(){return l},in:function(){return s}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=[];var s;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(s||(s={}));const r={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},c=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),s=a[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${i}]  ${t.name}:`,...n)};class l{constructor(t){this.name=t,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in s))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?r[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}function h(t){i.forEach((e=>{e.setLogLevel(t)}))}function u(t,e){for(const n of i){let i=null;e&&e.level&&(i=r[e.level]),n.userLogHandler=null===t?null:(e,n,...r)=>{const o=r.map((t=>{if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((t=>t)).join(" ");n>=(null!==i&&void 0!==i?i:e.logLevel)&&t({level:s[n].toLowerCase(),message:o,args:r,type:e.name})}}}},4866:function(t,e,n){"use strict";n.d(e,{Z:function(){return i.Z}});var i=n(8180),s="firebase",r="9.22.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.Z.registerVersion(s,r,"app-compat")},2148:function(t,e,n){"use strict";var i=n(8180),s=n(4444),r=n(5816);function o(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n}Object.create;Object.create;var a=n(3333),c=n(8463);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const l={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},h={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend."}}function d(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f=u,p=d,g=new s.LL("auth","Firebase",d()),m=new a.Yd("@firebase/auth");function y(t,...e){m.logLevel<=a["in"].WARN&&m.warn(`Auth (${r.SDK_VERSION}): ${t}`,...e)}function v(t,...e){m.logLevel<=a["in"].ERROR&&m.error(`Auth (${r.SDK_VERSION}): ${t}`,...e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(t,...e){throw T(t,...e)}function w(t,...e){return T(t,...e)}function x(t,e,n){const i=Object.assign(Object.assign({},p()),{[e]:n}),r=new s.LL("auth","Firebase",i);return r.create(e,{appName:t.name})}function _(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&b(t,"argument-error"),x(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function T(t,...e){if("string"!==typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return g.create(t,...e)}function S(t,e,...n){if(!t)throw T(e,...n)}function I(t){const e="INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function k(t,e){t||I(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function C(){return"http:"===A()||"https:"===A()}function A(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(C()||(0,s.ru)()||"connection"in navigator))||navigator.onLine}function P(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(t,e){this.shortDelay=t,this.longDelay=e,k(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return O()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t,e){k(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void I("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void I("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void I("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"},R=new M(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function j(t,e,n,i,r={}){return B(t,r,(async()=>{let r={},o={};i&&("GET"===e?o=i:r={body:JSON.stringify(i)});const a=(0,s.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),L.fetch()(V(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},r))}))}async function B(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},N),e);try{const e=new z(t),s=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const r=await s.json();if("needConfirmation"in r)throw G(t,"account-exists-with-different-credential",r);if(s.ok&&!("errorMessage"in r))return r;{const e=s.ok?r.errorMessage:r.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw G(t,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw G(t,"email-already-in-use",r);if("USER_DISABLED"===n)throw G(t,"user-disabled",r);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw x(t,a,o);b(t,a)}}catch(r){if(r instanceof s.ZR)throw r;b(t,"network-request-failed",{message:String(r)})}}async function U(t,e,n,i,s={}){const r=await j(t,e,n,i,s);return"mfaPendingCredential"in r&&b(t,"multi-factor-auth-required",{_serverResponse:r}),r}function V(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?D(t.config,s):`${t.config.apiScheme}://${s}`}class z{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(w(this.auth,"network-request-failed"))),R.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function G(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=w(t,e,i);return s.customData._tokenResponse=n,s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $(t,e){return j(t,"POST","/v1/accounts:delete",e)}async function q(t,e){return j(t,"POST","/v1/accounts:update",e)}async function W(t,e){return j(t,"POST","/v1/accounts:lookup",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K(t,e=!1){const n=(0,s.m9)(t),i=await n.getIdToken(e),r=Y(i);S(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"===typeof r.firebase?r.firebase:void 0,a=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:r,token:i,authTime:H(X(r.auth_time)),issuedAtTime:H(X(r.iat)),expirationTime:H(X(r.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function X(t){return 1e3*Number(t)}function Y(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return v("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,s.tV)(n);return t?JSON.parse(t):(v("Failed to decode base64 JWT payload"),null)}catch(r){return v("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Q(t){const e=Y(t);return S(e,"internal-error"),S("undefined"!==typeof e.exp,"internal-error"),S("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof s.ZR&&Z(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Z({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0,n=t-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===t||void 0===t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=H(this.lastLoginAt),this.creationTime=H(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nt(t){var e;const n=t.auth,i=await t.getIdToken(),s=await J(t,W(n,{idToken:i}));S(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=(null===(e=r.providerUserInfo)||void 0===e?void 0:e.length)?rt(r.providerUserInfo):[],a=st(t.providerData,o),c=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!c&&l,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new et(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,u)}async function it(t){const e=(0,s.m9)(t);await nt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function st(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}function rt(t){return t.map((t=>{var{providerId:e}=t,n=o(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ot(t,e){const n=await B(t,{},(async()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=V(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",L.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){S(t.idToken,"internal-error"),S("undefined"!==typeof t.idToken,"internal-error"),S("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):Q(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return S(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:s}=await ot(t,e);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:s}=e,r=new at;return n&&(S("string"===typeof n,"internal-error",{appName:t}),r.refreshToken=n),i&&(S("string"===typeof i,"internal-error",{appName:t}),r.accessToken=i),s&&(S("number"===typeof s,"internal-error",{appName:t}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new at,this.toJSON())}_performRefresh(){return I("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t,e){S("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class lt{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,s=o(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new et(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await J(this,this.stsTokenManager.getToken(this.auth,t));return S(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return K(this,t)}reload(){return it(this)}_assign(t){this!==t&&(S(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new lt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await nt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await J(this,$(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,s,r,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(s=e.phoneNumber)&&void 0!==s?s:void 0,f=null!==(r=e.photoURL)&&void 0!==r?r:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=e;S(v&&_,t,"internal-error");const T=at.fromJSON(this.name,_);S("string"===typeof v,t,"internal-error"),ct(h,t.name),ct(u,t.name),S("boolean"===typeof b,t,"internal-error"),S("boolean"===typeof w,t,"internal-error"),ct(d,t.name),ct(f,t.name),ct(p,t.name),ct(g,t.name),ct(m,t.name),ct(y,t.name);const I=new lt({uid:v,auth:t,email:u,emailVerified:b,displayName:h,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:y});return x&&Array.isArray(x)&&(I.providerData=x.map((t=>Object.assign({},t)))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new at;i.updateFromServerResponse(e);const s=new lt({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await nt(s),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht=new Map;function ut(t){k(t instanceof Function,"Expected a class definition");let e=ht.get(t);return e?(k(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ht.set(t,e),e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}dt.type="NONE";const ft=dt;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e,n){return`firebase:${t}:${e}:${n}`}class gt{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=pt(this.userKey,i.apiKey,s),this.fullPersistenceKey=pt("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?lt._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new gt(ut(ft),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let s=i[0]||ut(ft);const r=pt(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const e=await l._get(r);if(e){const n=lt._fromJSON(t,e);l!==s&&(o=n),s=l;break}}catch(c){}const a=i.filter((t=>t._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==s)try{await t._remove(r)}catch(c){}}))),new gt(s,t,n)):new gt(s,t,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_t(e))return"Blackberry";if(Tt(e))return"Webos";if(vt(e))return"Safari";if((e.includes("chrome/")||bt(e))&&!e.includes("edge/"))return"Chrome";if(xt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function yt(t=(0,s.z$)()){return/firefox\//i.test(t)}function vt(t=(0,s.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bt(t=(0,s.z$)()){return/crios\//i.test(t)}function wt(t=(0,s.z$)()){return/iemobile/i.test(t)}function xt(t=(0,s.z$)()){return/android/i.test(t)}function _t(t=(0,s.z$)()){return/blackberry/i.test(t)}function Tt(t=(0,s.z$)()){return/webos/i.test(t)}function St(t=(0,s.z$)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function It(t=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function kt(t=(0,s.z$)()){var e;return St(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Et(){return(0,s.w1)()&&10===document.documentMode}function Ct(t=(0,s.z$)()){return St(t)||xt(t)||Tt(t)||_t(t)||/windows phone/i.test(t)||wt(t)}function At(){try{return!(!window||window===window.top)}catch(t){return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e=[]){let n;switch(t){case"Browser":n=mt((0,s.z$)());break;case"Worker":n=`${mt((0,s.z$)())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.SDK_VERSION}/${i}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pt(t){return(await j(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Mt(t,e){return j(t,"GET","/v2/recaptchaConfig",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return void 0!==t&&void 0!==t.getResponse}function Lt(t){return void 0!==t&&void 0!==t.enterprise}class Nt{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}function Ft(t){return new Promise(((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=w("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",Rt().appendChild(i)}))}function jt(t){return`__${t}${Math.floor(1e6*Math.random())}`}const Bt="https://www.google.com/recaptcha/enterprise.js?render=",Ut="recaptcha-enterprise",Vt="NO_RECAPTCHA";class zt{constructor(t){this.type=Ut,this.auth=Wt(t)}async verify(t="verify",e=!1){async function n(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{Mt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Nt(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))}function i(e,n,i){const s=window.grecaptcha;Lt(s)?s.enterprise.ready((()=>{s.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n(Vt)}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,s)=>{n(this.auth).then((n=>{if(!e&&Lt(window.grecaptcha))i(n,t,s);else{if("undefined"===typeof window)return void s(new Error("RecaptchaVerifier is only supported in browser"));Ft(Bt+n).then((()=>{i(n,t,s)})).catch((t=>{s(t)}))}})).catch((t=>{s(t)}))}))}}async function Gt(t,e,n,i=!1){const s=new zt(t);let r;try{r=await s.verify(n)}catch(a){r=await s.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{const i=t(e);n(i)}catch(s){i(s)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ht(this),this.idTokenSubscription=new Ht(this),this.beforeStateQueue=new $t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ut(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await gt.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==r||!(null===o||void 0===o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(r){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(r)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await nt(t)}catch(e){if("auth/network-request-failed"!==(null===e||void 0===e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=P()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,s.m9)(t):null;return e&&S(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&S(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ut(t))}))}async initializeRecaptchaConfig(){const t=await Mt(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),e=new Nt(t);if(null==this.tenantId?this._agentRecaptchaConfig=e:this._tenantRecaptchaConfigs[this.tenantId]=e,e.emailPasswordEnabled){const t=new zt(this);t.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new s.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ut(t)||this._popupRedirectResolver;S(e,this,"argument-error"),this.redirectPersistenceManager=await gt.create(this,[ut(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const s="function"===typeof e?e:e.next.bind(e),r=this._isInitialized?Promise.resolve():this._initializationPromise;return S(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"===typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ot(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null===e||void 0===e?void 0:e.error)&&y(`Error while retrieving App Check token: ${e.error}`),null===e||void 0===e?void 0:e.token}}function Wt(t){return(0,s.m9)(t)}class Ht{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,s.ne)((t=>this.observer=t))}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ut);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}function Xt(t,e,n){const i=Wt(t);S(i._canInitEmulator,i,"emulator-config-failed"),S(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),r=Yt(e),{host:o,port:a}=Qt(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${r}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||Zt()}function Yt(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Qt(t){const e=Yt(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const t=s[1];return{host:t,port:Jt(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Jt(e)}}}function Jt(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Zt(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return I("not implemented")}_getIdTokenResponse(t){return I("not implemented")}_linkToIdToken(t,e){return I("not implemented")}_getReauthenticationResolver(t){return I("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ee(t,e){return j(t,"POST","/v1/accounts:resetPassword",F(t,e))}async function ne(t,e){return j(t,"POST","/v1/accounts:update",e)}async function ie(t,e){return j(t,"POST","/v1/accounts:update",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function se(t,e){return U(t,"POST","/v1/accounts:signInWithPassword",F(t,e))}async function re(t,e){return j(t,"POST","/v1/accounts:sendOobCode",F(t,e))}async function oe(t,e){return re(t,e)}async function ae(t,e){return re(t,e)}async function ce(t,e){return re(t,e)}async function le(t,e){return re(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function he(t,e){return U(t,"POST","/v1/accounts:signInWithEmailLink",F(t,e))}async function ue(t,e){return U(t,"POST","/v1/accounts:signInWithEmailLink",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de extends te{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new de(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new de(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){var e;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(e=t._getRecaptchaConfig())||void 0===e?void 0:e.emailPasswordEnabled){const e=await Gt(t,n,"signInWithPassword");return se(t,e)}return se(t,n).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await Gt(t,n,"signInWithPassword");return se(t,e)}return Promise.reject(e)}));case"emailLink":return he(t,{email:this._email,oobCode:this._password});default:b(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return ne(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ue(t,{idToken:e,email:this._email,oobCode:this._password});default:b(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fe(t,e){return U(t,"POST","/v1/accounts:signInWithIdp",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe="http://localhost";class ge extends te{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ge(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):b("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,s=o(e,["providerId","signInMethod"]);if(!n||!i)return null;const r=new ge(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(t){const e=this.buildRequest();return fe(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,fe(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,fe(t,e)}buildRequest(){const t={requestUri:pe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e["id_token"]=this.idToken),this.accessToken&&(e["access_token"]=this.accessToken),this.secret&&(e["oauth_token_secret"]=this.secret),e["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(e["nonce"]=this.nonce),t.postBody=(0,s.xO)(e)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function me(t,e){return j(t,"POST","/v1/accounts:sendVerificationCode",F(t,e))}async function ye(t,e){return U(t,"POST","/v1/accounts:signInWithPhoneNumber",F(t,e))}async function ve(t,e){const n=await U(t,"POST","/v1/accounts:signInWithPhoneNumber",F(t,e));if(n.temporaryProof)throw G(t,"account-exists-with-different-credential",n);return n}const be={["USER_NOT_FOUND"]:"user-not-found"};async function we(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return U(t,"POST","/v1/accounts:signInWithPhoneNumber",F(t,n),be)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe extends te{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new xe({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new xe({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return ye(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return ve(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return we(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:s}=t;return n||e||i||s?new xe({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Te(t){const e=(0,s.zd)((0,s.pd)(t))["link"],n=e?(0,s.zd)((0,s.pd)(e))["deep_link_id"]:null,i=(0,s.zd)((0,s.pd)(t))["deep_link_id"],r=i?(0,s.zd)((0,s.pd)(i))["link"]:null;return r||i||n||e||t}class Se{constructor(t){var e,n,i,r,o,a;const c=(0,s.zd)((0,s.pd)(t)),l=null!==(e=c["apiKey"])&&void 0!==e?e:null,h=null!==(n=c["oobCode"])&&void 0!==n?n:null,u=_e(null!==(i=c["mode"])&&void 0!==i?i:null);S(l&&h&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=h,this.continueUrl=null!==(r=c["continueUrl"])&&void 0!==r?r:null,this.languageCode=null!==(o=c["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(a=c["tenantId"])&&void 0!==a?a:null}static parseLink(t){const e=Te(t);try{return new Se(e)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ie{constructor(){this.providerId=Ie.PROVIDER_ID}static credential(t,e){return de._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Se.parseLink(e);return S(n,"argument-error"),de._fromEmailAndCode(t,n.code,n.tenantId)}}Ie.PROVIDER_ID="password",Ie.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ie.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ke{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee extends ke{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ce extends Ee{static credentialFromJSON(t){const e="string"===typeof t?JSON.parse(t):t;return S("providerId"in e&&"signInMethod"in e,"argument-error"),ge._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return S(t.idToken||t.accessToken,"argument-error"),ge._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return Ce.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Ce.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:s,nonce:r,providerId:o}=t;if(!n&&!i&&!e&&!s)return null;if(!o)return null;try{return new Ce(o)._credential({idToken:e,accessToken:n,nonce:r,pendingToken:s})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends Ee{constructor(){super("facebook.com")}static credential(t){return ge._fromParams({providerId:Ae.PROVIDER_ID,signInMethod:Ae.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ae.credentialFromTaggedObject(t)}static credentialFromError(t){return Ae.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ae.credential(t.oauthAccessToken)}catch(e){return null}}}Ae.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ae.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oe extends Ee{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ge._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Oe.credentialFromTaggedObject(t)}static credentialFromError(t){return Oe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Oe.credential(e,n)}catch(i){return null}}}Oe.GOOGLE_SIGN_IN_METHOD="google.com",Oe.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pe extends Ee{constructor(){super("github.com")}static credential(t){return ge._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pe.credentialFromTaggedObject(t)}static credentialFromError(t){return Pe.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pe.credential(t.oauthAccessToken)}catch(e){return null}}}Pe.GITHUB_SIGN_IN_METHOD="github.com",Pe.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Me="http://localhost";class De extends te{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return fe(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,fe(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,fe(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:s}=e;return n&&i&&s&&n===i?new De(n,s):null}static _create(t,e){return new De(t,e)}buildRequest(){return{requestUri:Me,returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le="saml.";class Ne extends ke{constructor(t){S(t.startsWith(Le),"argument-error"),super(t)}static credentialFromResult(t){return Ne.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Ne.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=De.fromJSON(t);return S(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return De._create(n,e)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re extends Ee{constructor(){super("twitter.com")}static credential(t,e){return ge._fromParams({providerId:Re.PROVIDER_ID,signInMethod:Re.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Re.credentialFromTaggedObject(t)}static credentialFromError(t){return Re.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Re.credential(e,n)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Fe(t,e){return U(t,"POST","/v1/accounts:signUp",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Re.TWITTER_SIGN_IN_METHOD="twitter.com",Re.PROVIDER_ID="twitter.com";class je{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const s=await lt._fromIdTokenResponse(t,n,i),r=Be(n),o=new je({user:s,providerId:r,_tokenResponse:n,operationType:e});return o}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Be(n);return new je({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Be(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ue(t){var e;const n=Wt(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new je({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Fe(n,{returnSecureToken:!0}),s=await je._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve extends s.ZR{constructor(t,e,n,i){var s;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ve.prototype),this.customData={appName:t.name,tenantId:null!==(s=t.tenantId)&&void 0!==s?s:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Ve(t,e,n,i)}}function ze(t,e,n,i){const s="reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t);return s.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ve._fromErrorAndOperation(t,n,e,i);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $e(t,e){const n=(0,s.m9)(t);await We(!0,n,e);const{providerUserInfo:i}=await q(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=Ge(i||[]);return n.providerData=n.providerData.filter((t=>r.has(t.providerId))),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function qe(t,e,n=!1){const i=await J(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return je._forOperation(t,"link",i)}async function We(t,e,n){await nt(e);const i=Ge(e.providerData),s=!1===t?"provider-already-linked":"no-such-provider";S(i.has(n)===t,e.auth,s)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function He(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await J(t,ze(i,s,e,t),n);S(r.idToken,i,"internal-error");const o=Y(r.idToken);S(o,i,"internal-error");const{sub:a}=o;return S(t.uid===a,i,"user-mismatch"),je._forOperation(t,s,r)}catch(r){throw"auth/user-not-found"===(null===r||void 0===r?void 0:r.code)&&b(i,"user-mismatch"),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ke(t,e,n=!1){const i="signIn",s=await ze(t,i,e),r=await je._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function Xe(t,e){return Ke(Wt(t),e)}async function Ye(t,e){const n=(0,s.m9)(t);return await We(!1,n,e.providerId),qe(n,e)}async function Qe(t,e){return He((0,s.m9)(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Je(t,e){return U(t,"POST","/v1/accounts:signInWithCustomToken",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ze(t,e){const n=Wt(t),i=await Je(n,{token:e,returnSecureToken:!0}),s=await je._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?en._fromServerResponse(t,e):"totpInfo"in e?nn._fromServerResponse(t,e):b(t,"internal-error")}}class en extends tn{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new en(e)}}class nn extends tn{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new nn(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,e,n){var i;S((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),S("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(S(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(S(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rn(t,e,n){var i;const s=Wt(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const t=await Gt(s,r,"getOobCode",!0);n&&sn(s,t,n),await ae(s,t)}else n&&sn(s,r,n),await ae(s,r).catch((async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const t=await Gt(s,r,"getOobCode",!0);n&&sn(s,t,n),await ae(s,t)}}))}async function on(t,e,n){await ee((0,s.m9)(t),{oobCode:e,newPassword:n})}async function an(t,e){await ie((0,s.m9)(t),{oobCode:e})}async function cn(t,e){const n=(0,s.m9)(t),i=await ee(n,{oobCode:e}),r=i.requestType;switch(S(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":S(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":S(i.mfaInfo,n,"internal-error");default:S(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=tn._fromServerResponse(Wt(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:r}}async function ln(t,e){const{data:n}=await cn((0,s.m9)(t),e);return n.email}async function hn(t,e,n){var i;const s=Wt(t),r={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const t=await Gt(s,r,"signUpPassword");o=Fe(s,t)}else o=Fe(s,r).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const t=await Gt(s,r,"signUpPassword");return Fe(s,t)}return Promise.reject(t)}));const a=await o.catch((t=>Promise.reject(t))),c=await je._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(c.user),c}function un(t,e,n){return Xe((0,s.m9)(t),Ie.credential(e,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dn(t,e,n){var i;const s=Wt(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(t,e){S(e.handleCodeInApp,s,"argument-error"),e&&sn(s,t,e)}if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const t=await Gt(s,r,"getOobCode",!0);o(t,n),await ce(s,t)}else o(r,n),await ce(s,r).catch((async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Gt(s,r,"getOobCode",!0);o(t,n),await ce(s,t)}}))}function fn(t,e){const n=Se.parseLink(e);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function pn(t,e,n){const i=(0,s.m9)(t),r=Ie.credentialWithLink(e,n||E());return S(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Xe(i,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gn(t,e){return j(t,"POST","/v1/accounts:createAuthUri",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mn(t,e){const n=C()?E():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await gn((0,s.m9)(t),i);return r||[]}async function yn(t,e){const n=(0,s.m9)(t),i=await t.getIdToken(),r={requestType:"VERIFY_EMAIL",idToken:i};e&&sn(n.auth,r,e);const{email:o}=await oe(n.auth,r);o!==t.email&&await t.reload()}async function vn(t,e,n){const i=(0,s.m9)(t),r=await t.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:r,newEmail:e};n&&sn(i.auth,o,n);const{email:a}=await le(i.auth,o);a!==t.email&&await t.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bn(t,e){return j(t,"POST","/v1/accounts:update",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wn(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const i=(0,s.m9)(t),r=await i.getIdToken(),o={idToken:r,displayName:e,photoUrl:n,returnSecureToken:!0},a=await J(i,bn(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const c=i.providerData.find((({providerId:t})=>"password"===t));c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function xn(t,e){return Tn((0,s.m9)(t),e,null)}function _n(t,e){return Tn((0,s.m9)(t),null,e)}async function Tn(t,e,n){const{auth:i}=t,s=await t.getIdToken(),r={idToken:s,returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const o=await J(t,ne(i,r));await t._updateTokensIfNecessary(o,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t){var e,n;if(!t)return null;const{providerId:i}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null===t||void 0===t?void 0:t.idToken)){const i=null===(n=null===(e=Y(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n["sign_in_provider"];if(i){const t="anonymous"!==i&&"custom"!==i?i:null;return new In(r,t)}}if(!i)return null;switch(i){case"facebook.com":return new En(r,s);case"github.com":return new Cn(r,s);case"google.com":return new An(r,s);case"twitter.com":return new On(r,s,t.screenName||null);case"custom":case"anonymous":return new In(r,null);default:return new In(r,i,s)}}class In{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class kn extends In{constructor(t,e,n,i){super(t,e,n),this.username=i}}class En extends In{constructor(t,e){super(t,"facebook.com",e)}}class Cn extends kn{constructor(t,e){super(t,"github.com",e,"string"===typeof(null===e||void 0===e?void 0:e.login)?null===e||void 0===e?void 0:e.login:null)}}class An extends In{constructor(t,e){super(t,"google.com",e)}}class On extends kn{constructor(t,e,n){super(t,"twitter.com",e,n)}}function Pn(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Sn(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t,e,n){this.type=t,this.credential=e,this.auth=n}static _fromIdtoken(t,e){return new Mn("enroll",t,e)}static _fromMfaPendingCredential(t){return new Mn("signin",t)}toJSON(){const t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[t]:this.credential}}}static fromJSON(t){var e,n;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return Mn._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return Mn._fromIdtoken(t.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=Wt(t),i=e.customData._serverResponse,s=(i.mfaInfo||[]).map((t=>tn._fromServerResponse(n,t)));S(i.mfaPendingCredential,n,"internal-error");const r=Mn._fromMfaPendingCredential(i.mfaPendingCredential);return new Dn(r,s,(async t=>{const s=await t._process(n,r);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:s.idToken,refreshToken:s.refreshToken});switch(e.operationType){case"signIn":const t=await je._fromIdTokenResponse(n,e.operationType,o);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return S(e.user,n,"internal-error"),je._forOperation(e.user,e.operationType,o);default:b(n,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function Ln(t,e){var n;const i=(0,s.m9)(t),r=e;return S(e.customData.operationType,i,"argument-error"),S(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),Dn._fromError(i,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,e){return j(t,"POST","/v2/accounts/mfaEnrollment:start",F(t,e))}function Rn(t,e){return j(t,"POST","/v2/accounts/mfaEnrollment:finalize",F(t,e))}function Fn(t,e){return j(t,"POST","/v2/accounts/mfaEnrollment:start",F(t,e))}function jn(t,e){return j(t,"POST","/v2/accounts/mfaEnrollment:finalize",F(t,e))}function Bn(t,e){return j(t,"POST","/v2/accounts/mfaEnrollment:withdraw",F(t,e))}class Un{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>tn._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new Un(t)}async getSession(){return Mn._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(t,e){const n=t,i=await this.getSession(),s=await J(this.user,n._process(this.user.auth,i,e));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(t){const e="string"===typeof t?t:t.uid,n=await this.user.getIdToken();try{const t=await J(this.user,Bn(this.user.auth,{idToken:n,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==e)),await this.user._updateTokensIfNecessary(t),await this.user.reload()}catch(i){throw i}}}const Vn=new WeakMap;function zn(t){const e=(0,s.m9)(t);return Vn.has(e)||Vn.set(e,Un._fromUser(e)),Vn.get(e)}const Gn="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Gn,"1"),this.storage.removeItem(Gn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){const t=(0,s.z$)();return vt(t)||St(t)}const Wn=1e3,Hn=10;class Kn extends $n{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=qn()&&At(),this.fallbackToPolling=Ct(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},s=this.storage.getItem(n);Et()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Hn):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),Wn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Kn.type="LOCAL";const Xn=Kn;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn extends $n{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Yn.type="SESSION";const Qn=Yn;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t){return Promise.all(t.map((async t=>{try{const e=await t;return{fulfilled:!0,value:e}}catch(e){return{fulfilled:!1,reason:e}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Zn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:s}=e.data,r=this.handlersMap[i];if(!(null===r||void 0===r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async t=>t(e.origin,s))),a=await Jn(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ti(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn.receivers=[];class ei{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=ti("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(e.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return window}function ii(t){ni().location.href=t}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return"undefined"!==typeof ni()["WorkerGlobalScope"]&&"function"===typeof ni()["importScripts"]}async function ri(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const t=await navigator.serviceWorker.ready;return t.active}catch(t){return null}}function oi(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}function ai(){return si()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="firebaseLocalStorageDb",li=1,hi="firebaseLocalStorage",ui="fbase_key";class di{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function fi(t,e){return t.transaction([hi],e?"readwrite":"readonly").objectStore(hi)}function pi(){const t=indexedDB.deleteDatabase(ci);return new di(t).toPromise()}function gi(){const t=indexedDB.open(ci,li);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(hi,{keyPath:ui})}catch(i){n(i)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(hi)?e(n):(n.close(),await pi(),e(await gi()))}))}))}async function mi(t,e,n){const i=fi(t,!0).put({[ui]:e,value:n});return new di(i).toPromise()}async function yi(t,e){const n=fi(t,!1).get(e),i=await new di(n).toPromise();return void 0===i?null:i.value}function vi(t,e){const n=fi(t,!0).delete(e);return new di(n).toPromise()}const bi=800,wi=3;class xi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await gi()),this.db}async _withRetries(t){let e=0;while(1)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>wi)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return si()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zn._getInstance(ai()),this.receiver._subscribe("keyChanged",(async(t,e)=>{const n=await this._poll();return{keyProcessed:n.includes(e.key)}})),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await ri(),!this.activeServiceWorker)return;this.sender=new ei(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&oi()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gi();return await mi(t,Gn,"1"),await vi(t,Gn),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>mi(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>yi(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>vi(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=fi(t,!1).getAll();return new di(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:s}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),bi)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xi.type="LOCAL";const _i=xi;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){return j(t,"POST","/v2/accounts/mfaSignIn:start",F(t,e))}function Si(t,e){return j(t,"POST","/v2/accounts/mfaSignIn:finalize",F(t,e))}function Ii(t,e){return j(t,"POST","/v2/accounts/mfaSignIn:finalize",F(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=500,Ei=6e4,Ci=1e12;class Ai{constructor(t){this.auth=t,this.counter=Ci,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new Oi(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||Ci;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||Ci;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||Ci;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class Oi{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"===typeof t?document.getElementById(t):t;S(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=Pi(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(n){}this.isVisible&&this.execute()}),Ei)}),ki))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Pi(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=jt("rcb"),Di=new M(3e4,6e4),Li="https://www.google.com/recaptcha/api.js?";class Ni{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=ni().grecaptcha)||void 0===t?void 0:t.render)}load(t,e=""){return S(Ri(e),t,"argument-error"),this.shouldResolveImmediately(e)&&Dt(ni().grecaptcha)?Promise.resolve(ni().grecaptcha):new Promise(((n,i)=>{const r=ni().setTimeout((()=>{i(w(t,"network-request-failed"))}),Di.get());ni()[Mi]=()=>{ni().clearTimeout(r),delete ni()[Mi];const s=ni().grecaptcha;if(!s||!Dt(s))return void i(w(t,"internal-error"));const o=s.render;s.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(s)};const o=`${Li}?${(0,s.xO)({onload:Mi,render:"explicit",hl:e})}`;Ft(o).catch((()=>{clearTimeout(r),i(w(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var e;return!!(null===(e=ni().grecaptcha)||void 0===e?void 0:e.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Ri(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Fi{async load(t){return new Ai(t)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="recaptcha",Bi={theme:"light",type:"image"};class Ui{constructor(t,e=Object.assign({},Bi),n){this.parameters=e,this.type=ji,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wt(n),this.isInvisible="invisible"===this.parameters.size,S("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"===typeof t?document.getElementById(t):t;S(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fi:new Ni,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),n=e.getResponse(t);return n||new Promise((n=>{const i=t=>{t&&(this.tokenChangeListeners.delete(i),n(t))};this.tokenChangeListeners.add(i),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){S(!this.parameters.sitekey,this.auth,"argument-error"),S(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),S("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"===typeof t)t(e);else if("string"===typeof t){const n=ni()[t];"function"===typeof n&&n(e)}}}assertNotDestroyed(){S(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){S(C()&&!si(),this.auth,"internal-error"),await Vi(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await Pt(this.auth);S(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return S(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function Vi(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=xe._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function Gi(t,e,n){const i=Wt(t),r=await Wi(i,e,(0,s.m9)(n));return new zi(r,(t=>Xe(i,t)))}async function $i(t,e,n){const i=(0,s.m9)(t);await We(!1,i,"phone");const r=await Wi(i.auth,e,(0,s.m9)(n));return new zi(r,(t=>Ye(i,t)))}async function qi(t,e,n){const i=(0,s.m9)(t),r=await Wi(i.auth,e,(0,s.m9)(n));return new zi(r,(t=>Qe(i,t)))}async function Wi(t,e,n){var i;const s=await n.verify();try{let r;if(S("string"===typeof s,t,"argument-error"),S(n.type===ji,t,"argument-error"),r="string"===typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){S("enroll"===e.type,t,"internal-error");const n=await Nn(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{S("signin"===e.type,t,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;S(n,t,"missing-multi-factor-info");const o=await Ti(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await me(t,{phoneNumber:r.phoneNumber,recaptchaToken:s});return e}}finally{n._reset()}}async function Hi(t,e){await qe((0,s.m9)(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t){this.providerId=Ki.PROVIDER_ID,this.auth=Wt(t)}verifyPhoneNumber(t,e){return Wi(this.auth,t,(0,s.m9)(e))}static credential(t,e){return xe._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Ki.credentialFromTaggedObject(e)}static credentialFromError(t){return Ki.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?xe._fromTokenResponse(e,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xi(t,e){return e?ut(e):(S(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ki.PROVIDER_ID="phone",Ki.PHONE_SIGN_IN_METHOD="phone";class Yi extends te{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fe(t,this._buildIdpRequest())}_linkToIdToken(t,e){return fe(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return fe(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Qi(t){return Ke(t.auth,new Yi(t),t.bypassAuthState)}function Ji(t){const{auth:e,user:n}=t;return S(n,e,"internal-error"),He(n,new Yi(t),t.bypassAuthState)}async function Zi(t){const{auth:e,user:n}=t;return S(n,e,"internal-error"),qe(n,new Yi(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t,e,n,i,s=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=t;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Qi;case"linkViaPopup":case"linkViaRedirect":return Zi;case"reauthViaPopup":case"reauthViaRedirect":return Ji;default:b(this.auth,"internal-error")}}resolve(t){k(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){k(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new M(2e3,1e4);async function ns(t,e,n){const i=Wt(t);_(t,e,ke);const s=Xi(i,n),r=new rs(i,"signInViaPopup",e,s);return r.executeNotNull()}async function is(t,e,n){const i=(0,s.m9)(t);_(i.auth,e,ke);const r=Xi(i.auth,n),o=new rs(i.auth,"reauthViaPopup",e,r,i);return o.executeNotNull()}async function ss(t,e,n){const i=(0,s.m9)(t);_(i.auth,e,ke);const r=Xi(i.auth,n),o=new rs(i.auth,"linkViaPopup",e,r,i);return o.executeNotNull()}class rs extends ts{constructor(t,e,n,i,s){super(t,e,i,s),this.provider=n,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return S(t,this.auth,"internal-error"),t}async onExecution(){k(1===this.filter.length,"Popup operations only handle one event");const t=ti();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(w(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(w(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(w(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,es.get())};t()}}rs.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const os="pendingRedirect",as=new Map;class cs extends ts{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=as.get(this.auth._key());if(!t){try{const e=await ls(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}as.set(this.auth._key(),t)}return this.bypassAuthState||as.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ls(t,e){const n=ps(e),i=fs(t);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}async function hs(t,e){return fs(t)._set(ps(e),"true")}function us(){as.clear()}function ds(t,e){as.set(t._key(),e)}function fs(t){return ut(t._redirectPersistence)}function ps(t){return pt(os,t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,e,n){return ms(t,e,n)}async function ms(t,e,n){const i=Wt(t);_(t,e,ke),await i._initializationPromise;const s=Xi(i,n);return await hs(s,i),s._openRedirect(i,e,"signInViaRedirect")}function ys(t,e,n){return vs(t,e,n)}async function vs(t,e,n){const i=(0,s.m9)(t);_(i.auth,e,ke),await i.auth._initializationPromise;const r=Xi(i.auth,n);await hs(r,i.auth);const o=await Ts(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",o)}function bs(t,e,n){return ws(t,e,n)}async function ws(t,e,n){const i=(0,s.m9)(t);_(i.auth,e,ke),await i.auth._initializationPromise;const r=Xi(i.auth,n);await We(!1,i,e.providerId),await hs(r,i.auth);const o=await Ts(i);return r._openRedirect(i.auth,e,"linkViaRedirect",o)}async function xs(t,e){return await Wt(t)._initializationPromise,_s(t,e,!1)}async function _s(t,e,n=!1){const i=Wt(t),s=Xi(i,e),r=new cs(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function Ts(t){const e=ti(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=6e5;class Is{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!Cs(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Es(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(w(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Ss&&this.cachedEventUids.clear(),this.cachedEventUids.has(ks(t))}saveEventToCache(t){this.cachedEventUids.add(ks(t)),this.lastProcessedEventTime=Date.now()}}function ks(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Es({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null===e||void 0===e?void 0:e.code)}function Cs(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Es(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function As(t,e={}){return j(t,"GET","/v1/projects",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ps=/^https?/;async function Ms(t){if(t.config.emulator)return;const{authorizedDomains:e}=await As(t);for(const i of e)try{if(Ds(i))return}catch(n){}b(t,"unauthorized-domain")}function Ds(t){const e=E(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!Ps.test(n))return!1;if(Os.test(t))return i===t;const s=t.replace(/\./g,"\\."),r=new RegExp("^(.+\\."+s+"|"+s+")$","i");return r.test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=new M(3e4,6e4);function Ns(){const t=ni().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Rs(t){return new Promise(((e,n)=>{var i,s,r;function o(){Ns(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ns(),n(w(t,"network-request-failed"))},timeout:Ls.get()})}if(null===(s=null===(i=ni().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)e(gapi.iframes.getContext());else{if(!(null===(r=ni().gapi)||void 0===r?void 0:r.load)){const e=jt("iframefcb");return ni()[e]=()=>{gapi.load?o():n(w(t,"network-request-failed"))},Ft(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw Fs=null,t}))}let Fs=null;function js(t){return Fs=Fs||Rs(t),Fs}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new M(5e3,15e3),Us="__/auth/iframe",Vs="emulator/auth/iframe",zs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $s(t){const e=t.config;S(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?D(e,Vs):`https://${t.config.authDomain}/${Us}`,i={apiKey:e.apiKey,appName:t.name,v:r.SDK_VERSION},o=Gs.get(t.config.apiHost);o&&(i.eid=o);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${(0,s.xO)(i).slice(1)}`}async function qs(t){const e=await js(t),n=ni().gapi;return S(n,t,"internal-error"),e.open({where:document.body,url:$s(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zs,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const s=w(t,"network-request-failed"),r=ni().setTimeout((()=>{i(s)}),Bs.get());function o(){ni().clearTimeout(r),n(e)}e.ping(o).then(o,(()=>{i(s)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hs=500,Ks=600,Xs="_blank",Ys="http://localhost";class Qs{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Js(t,e,n,i=Hs,r=Ks){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Ws),{width:i.toString(),height:r.toString(),top:o,left:a}),h=(0,s.z$)().toLowerCase();n&&(c=bt(h)?Xs:n),yt(h)&&(e=e||Ys,l.scrollbars="yes");const u=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(kt(h)&&"_self"!==c)return Zs(e||"",c),new Qs(null);const d=window.open(e||"",c,u);S(d,t,"popup-blocked");try{d.focus()}catch(f){}return new Qs(d)}function Zs(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="__/auth/handler",er="emulator/auth/handler",nr=encodeURIComponent("fac");async function ir(t,e,n,i,o,a){S(t.config.authDomain,t,"auth-domain-config-required"),S(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:r.SDK_VERSION,eventId:o};if(e instanceof ke){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,s.xb)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof Ee){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const s of Object.keys(l))void 0===l[s]&&delete l[s];const h=await t._getAppCheckToken(),u=h?`#${nr}=${encodeURIComponent(h)}`:"";return`${sr(t)}?${(0,s.xO)(l).slice(1)}${u}`}function sr({config:t}){return t.emulator?D(t,er):`https://${t.authDomain}/${tr}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="webStorageSupport";class or{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qn,this._completeRedirectFn=_s,this._overrideRedirectResult=ds}async _openPopup(t,e,n,i){var s;k(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const r=await ir(t,e,n,E(),i);return Js(t,r,ti())}async _openRedirect(t,e,n,i){await this._originValidation(t);const s=await ir(t,e,n,E(),i);return ii(s),new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(k(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await qs(t),n=new Is(t);return e.register("authEvent",(e=>{S(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");const i=n.onEvent(e.authEvent);return{status:i?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){const n=this.iframes[t._key()];n.send(rr,{type:rr},(n=>{var i;const s=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[rr];void 0!==s&&e(!!s),b(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Ms(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Ct()||vt()||St()}}const ar=or;class cr{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return I("unexpected MultiFactorSessionType")}}}class lr extends cr{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new lr(t)}_finalizeEnroll(t,e,n){return Rn(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return Si(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class hr{constructor(){}static assertion(t){return lr._fromCredential(t)}}hr.FACTOR_ID="phone";class ur{static assertionForEnrollment(t,e){return dr._fromSecret(t,e)}static assertionForSignIn(t,e){return dr._fromEnrollmentId(t,e)}static async generateSecret(t){const e=t;S("undefined"!==typeof e.auth,"internal-error");const n=await Fn(e.auth,{idToken:e.credential,totpEnrollmentInfo:{}});return fr._fromStartTotpMfaEnrollmentResponse(n,e.auth)}}ur.FACTOR_ID="totp";class dr extends cr{constructor(t,e,n){super("totp"),this.otp=t,this.enrollmentId=e,this.secret=n}static _fromSecret(t,e){return new dr(e,void 0,t)}static _fromEnrollmentId(t,e){return new dr(e,t)}async _finalizeEnroll(t,e,n){return S("undefined"!==typeof this.secret,t,"argument-error"),jn(t,{idToken:e,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,e){S(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error");const n={verificationCode:this.otp};return Ii(t,{mfaPendingCredential:e,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class fr{constructor(t,e,n,i,s,r,o){this.sessionInfo=r,this.auth=o,this.secretKey=t,this.hashingAlgorithm=e,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(t,e){return new fr(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,e)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,e){var n;let i=!1;return(pr(t)||pr(e))&&(i=!0),i&&(pr(t)&&(t=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),pr(e)&&(e=this.auth.name)),`otpauth://totp/${e}:${t}?secret=${this.secretKey}&issuer=${e}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function pr(t){return"undefined"===typeof t||0===(null===t||void 0===t?void 0:t.length)}var gr="@firebase/auth",mr="0.23.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yr{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const e=await this.auth.currentUser.getIdToken(t);return{accessToken:e}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function br(t){(0,r._registerComponent)(new c.wA("auth",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;S(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ot(t)},l=new qt(i,s,r,c);return Kt(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{const i=t.getProvider("auth-internal");i.initialize()}))),(0,r._registerComponent)(new c.wA("auth-internal",(t=>{const e=Wt(t.getProvider("auth").getImmediate());return(t=>new yr(t))(e)}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.registerVersion)(gr,mr,vr(t)),(0,r.registerVersion)(gr,mr,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=300;(0,s.Pz)("authIdTokenMaxAge");
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xr(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br("Browser");const _r=2e3;async function Tr(t,e,n){var i;const{BuildInfo:s}=xr();k(e.sessionId,"AuthEvent did not contain a session ID");const r=await Cr(e.sessionId),o={};return St()?o["ibi"]=s.packageName:xt()?o["apn"]=s.packageName:b(t,"operation-not-supported-in-this-environment"),s.displayName&&(o["appDisplayName"]=s.displayName),o["sessionId"]=r,ir(t,n,e.type,void 0,null!==(i=e.eventId)&&void 0!==i?i:void 0,o)}async function Sr(t){const{BuildInfo:e}=xr(),n={};St()?n.iosBundleId=e.packageName:xt()?n.androidPackageName=e.packageName:b(t,"operation-not-supported-in-this-environment"),await As(t,n)}function Ir(t){const{cordova:e}=xr();return new Promise((n=>{e.plugins.browsertab.isAvailable((i=>{let s=null;i?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,It()?"_blank":"_system","location=yes"),n(s)}))}))}async function kr(t,e,n){const{cordova:i}=xr();let s=()=>{};try{await new Promise(((r,o)=>{let a=null;function c(){var t;r();const e=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof e&&e(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(w(t,"redirect-cancelled-by-user"))}),_r))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}e.addPassiveListener(c),document.addEventListener("resume",l,!1),xt()&&document.addEventListener("visibilitychange",h,!1),s=()=>{e.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}}))}finally{s()}}function Er(t){var e,n,i,s,r,o,a,c,l,h;const u=xr();S("function"===typeof(null===(e=null===u||void 0===u?void 0:u.universalLinks)||void 0===e?void 0:e.subscribe),t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),S("undefined"!==typeof(null===(n=null===u||void 0===u?void 0:u.BuildInfo)||void 0===n?void 0:n.packageName),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),S("function"===typeof(null===(r=null===(s=null===(i=null===u||void 0===u?void 0:u.cordova)||void 0===i?void 0:i.plugins)||void 0===s?void 0:s.browsertab)||void 0===r?void 0:r.openUrl),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),S("function"===typeof(null===(c=null===(a=null===(o=null===u||void 0===u?void 0:u.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),S("function"===typeof(null===(h=null===(l=null===u||void 0===u?void 0:u.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===h?void 0:h.open),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Cr(t){const e=Ar(t),n=await crypto.subtle.digest("SHA-256",e),i=Array.from(new Uint8Array(n));return i.map((t=>t.toString(16).padStart(2,"0"))).join("")}function Ar(t){if(k(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=20;class Pr extends Is{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((t=>{this.resolveInialized=t}))}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInialized(),this.passiveListeners.forEach((e=>e(t))),super.onEvent(t)}async initialized(){await this.initPromise}}function Mr(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Rr(),postBody:null,tenantId:t.tenantId,error:w(t,"no-auth-event")}}function Dr(t,e){return Fr()._set(jr(t),e)}async function Lr(t){const e=await Fr()._get(jr(t));return e&&await Fr()._remove(jr(t)),e}function Nr(t,e){var n,i;const s=Ur(e);if(s.includes("/__/auth/callback")){const e=Vr(s),r=e["firebaseError"]?Br(decodeURIComponent(e["firebaseError"])):null,o=null===(i=null===(n=null===r||void 0===r?void 0:r["code"])||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=o?w(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function Rr(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Or;n++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function Fr(){return ut(Xn)}function jr(t){return pt("authEvent",t.config.apiKey,t.name)}function Br(t){try{return JSON.parse(t)}catch(e){return null}}function Ur(t){const e=Vr(t),n=e["link"]?decodeURIComponent(e["link"]):void 0,i=Vr(n)["link"],s=e["deep_link_id"]?decodeURIComponent(e["deep_link_id"]):void 0,r=Vr(s)["link"];return r||s||i||n||t}function Vr(t){if(!(null===t||void 0===t?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return(0,s.zd)(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=500;class Gr{constructor(){this._redirectPersistence=Qn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_s,this._overrideRedirectResult=ds}async _initialize(t){const e=t._key();let n=this.eventManagers.get(e);return n||(n=new Pr(t),this.eventManagers.set(e,n),this.attachCallbackListeners(t,n)),n}_openPopup(t){b(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,n,i){Er(t);const s=await this._initialize(t);await s.initialized(),s.resetRedirect(),us(),await this._originValidation(t);const r=Mr(t,n,i);await Dr(t,r);const o=await Tr(t,r,e),a=await Ir(o);return kr(t,s,a)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Sr(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=xr(),r=setTimeout((async()=>{await Lr(t),e.onEvent(qr())}),zr),o=async n=>{clearTimeout(r);const i=await Lr(t);let s=null;i&&(null===n||void 0===n?void 0:n["url"])&&(s=Nr(i,n["url"])),e.onEvent(s||qr())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=i,c=`${s.packageName.toLowerCase()}://`;xr().handleOpenURL=async t=>{if(t.toLowerCase().startsWith(c)&&o({url:t}),"function"===typeof a)try{a(t)}catch(e){console.error(e)}}}}const $r=Gr;function qr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:w("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t,e){Wt(t)._logFramework(e)}var Hr="@firebase/auth-compat",Kr="0.4.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xr=1e3;function Yr(){var t;return(null===(t=null===self||void 0===self?void 0:self.location)||void 0===t?void 0:t.protocol)||null}function Qr(){return"http:"===Yr()||"https:"===Yr()}function Jr(t=(0,s.z$)()){return!("file:"!==Yr()&&"ionic:"!==Yr()&&"capacitor:"!==Yr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zr(){return(0,s.b$)()||(0,s.UG)()}function to(){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)}function eo(t=(0,s.z$)()){return/Edge\/\d+/.test(t)}function no(t=(0,s.z$)()){return to()||eo(t)}function io(){try{const t=self.localStorage,e=ti();if(t)return t["setItem"](e,"1"),t["removeItem"](e),!no()||(0,s.hl)()}catch(t){return so()&&(0,s.hl)()}return!1}function so(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ro(){return(Qr()||(0,s.ru)()||Jr())&&!Zr()&&io()&&!so()}function oo(){return Jr()&&"undefined"!==typeof document}async function ao(){return!!oo()&&new Promise((t=>{const e=setTimeout((()=>{t(!1)}),Xr);document.addEventListener("deviceready",(()=>{clearTimeout(e),t(!0)}))}))}function co(){return"undefined"!==typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo={LOCAL:"local",NONE:"none",SESSION:"session"},ho=S,uo="persistence";function fo(t,e){ho(Object.values(lo).includes(e),t,"invalid-persistence-type"),(0,s.b$)()?ho(e!==lo.SESSION,t,"unsupported-persistence-type"):(0,s.UG)()?ho(e===lo.NONE,t,"unsupported-persistence-type"):so()?ho(e===lo.NONE||e===lo.LOCAL&&(0,s.hl)(),t,"unsupported-persistence-type"):ho(e===lo.NONE||io(),t,"unsupported-persistence-type")}async function po(t){await t._initializationPromise;const e=mo(),n=pt(uo,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function go(t,e){const n=mo();if(!n)return[];const i=pt(uo,t,e),s=n.getItem(i);switch(s){case lo.NONE:return[ft];case lo.LOCAL:return[_i,Qn];case lo.SESSION:return[Qn];default:return[]}}function mo(){var t;try{return(null===(t=co())||void 0===t?void 0:t.sessionStorage)||null}catch(e){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=S;class vo{constructor(){this.browserResolver=ut(ar),this.cordovaResolver=ut($r),this.underlyingResolver=null,this._redirectPersistence=Qn,this._completeRedirectFn=_s,this._overrideRedirectResult=ds}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,n,i)}async _openRedirect(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,n,i)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return oo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yo(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await ao();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){return t.unwrap()}function wo(t){return t.wrapped()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){return To(t)}function _o(t,e){var n;const i=null===(n=e.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===e||void 0===e?void 0:e.code)){const n=e;n.resolver=new ko(t,Ln(t,e))}else if(i){const t=To(e),n=e;t&&(n.credential=t,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}function To(t){const{_tokenResponse:e}=t instanceof s.ZR?t.customData:t;if(!e)return null;if(!(t instanceof s.ZR)&&"temporaryProof"in e&&"phoneNumber"in e)return Ki.credentialFromResult(t);const n=e.providerId;if(!n||n===l.PASSWORD)return null;let i;switch(n){case l.GOOGLE:i=Oe;break;case l.FACEBOOK:i=Ae;break;case l.GITHUB:i=Pe;break;case l.TWITTER:i=Re;break;default:const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:r,pendingToken:o,nonce:a}=e;return s||r||t||o?o?n.startsWith("saml.")?De._create(n,o):ge._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:t,accessToken:s}):new Ce(n).credential({idToken:t,accessToken:s,rawNonce:a}):null}return t instanceof s.ZR?i.credentialFromError(t):i.credentialFromResult(t)}function So(t,e){return e.catch((e=>{throw e instanceof s.ZR&&_o(t,e),e})).then((t=>{const e=t.operationType,n=t.user;return{operationType:e,credential:xo(t),additionalUserInfo:Pn(t),user:Eo.getOrCreate(n)}}))}async function Io(t,e){const n=await e;return{verificationId:n.verificationId,confirm:e=>So(t,n.confirm(e))}}class ko{constructor(t,e){this.resolver=e,this.auth=wo(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return So(bo(this.auth),this.resolver.resolveSignIn(t))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this._delegate=t,this.multiFactor=zn(t)}static getOrCreate(t){return Eo.USER_MAP.has(t)||Eo.USER_MAP.set(t,new Eo(t)),Eo.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return So(this.auth,Ye(this._delegate,t))}async linkWithPhoneNumber(t,e){return Io(this.auth,$i(this._delegate,t,e))}async linkWithPopup(t){return So(this.auth,ss(this._delegate,t,vo))}async linkWithRedirect(t){return await po(Wt(this.auth)),bs(this._delegate,t,vo)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return So(this.auth,Qe(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return Io(this.auth,qi(this._delegate,t,e))}reauthenticateWithPopup(t){return So(this.auth,is(this._delegate,t,vo))}async reauthenticateWithRedirect(t){return await po(Wt(this.auth)),ys(this._delegate,t,vo)}sendEmailVerification(t){return yn(this._delegate,t)}async unlink(t){return await $e(this._delegate,t),this}updateEmail(t){return xn(this._delegate,t)}updatePassword(t){return _n(this._delegate,t)}updatePhoneNumber(t){return Hi(this._delegate,t)}updateProfile(t){return wn(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return vn(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Eo.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Co=S;class Ao{constructor(t,e){if(this.app=t,e.isInitialized())return this._delegate=e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=t.options;Co(n,"invalid-api-key",{appName:t.name}),Co(n,"invalid-api-key",{appName:t.name});const i="undefined"!==typeof window?vo:void 0;this._delegate=e.initialize({options:{persistence:Po(n,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(f),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){Xt(this._delegate,t,e)}applyActionCode(t){return an(this._delegate,t)}checkActionCode(t){return cn(this._delegate,t)}confirmPasswordReset(t,e){return on(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return So(this._delegate,hn(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return mn(this._delegate,t)}isSignInWithEmailLink(t){return fn(this._delegate,t)}async getRedirectResult(){Co(ro(),this._delegate,"operation-not-supported-in-this-environment");const t=await xs(this._delegate,vo);return t?So(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){Wr(this._delegate,t)}onAuthStateChanged(t,e,n){const{next:i,error:s,complete:r}=Oo(t,e,n);return this._delegate.onAuthStateChanged(i,s,r)}onIdTokenChanged(t,e,n){const{next:i,error:s,complete:r}=Oo(t,e,n);return this._delegate.onIdTokenChanged(i,s,r)}sendSignInLinkToEmail(t,e){return dn(this._delegate,t,e)}sendPasswordResetEmail(t,e){return rn(this._delegate,t,e||void 0)}async setPersistence(t){let e;switch(fo(this._delegate,t),t){case lo.SESSION:e=Qn;break;case lo.LOCAL:const t=await ut(_i)._isAvailable();e=t?_i:Xn;break;case lo.NONE:e=ft;break;default:return b("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return So(this._delegate,Ue(this._delegate))}signInWithCredential(t){return So(this._delegate,Xe(this._delegate,t))}signInWithCustomToken(t){return So(this._delegate,Ze(this._delegate,t))}signInWithEmailAndPassword(t,e){return So(this._delegate,un(this._delegate,t,e))}signInWithEmailLink(t,e){return So(this._delegate,pn(this._delegate,t,e))}signInWithPhoneNumber(t,e){return Io(this._delegate,Gi(this._delegate,t,e))}async signInWithPopup(t){return Co(ro(),this._delegate,"operation-not-supported-in-this-environment"),So(this._delegate,ns(this._delegate,t,vo))}async signInWithRedirect(t){return Co(ro(),this._delegate,"operation-not-supported-in-this-environment"),await po(this._delegate),gs(this._delegate,t,vo)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return ln(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Oo(t,e,n){let i=t;"function"!==typeof t&&({next:i,error:e,complete:n}=t);const s=i,r=t=>s(t&&Eo.getOrCreate(t));return{next:r,error:e,complete:n}}function Po(t,e){const n=go(t,e);if("undefined"===typeof self||n.includes(_i)||n.push(_i),"undefined"!==typeof window)for(const i of[Xn,Qn])n.includes(i)||n.push(i);return n.includes(ft)||n.push(ft),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ao.Persistence=lo;class Mo{constructor(){this.providerId="phone",this._delegate=new Ki(bo(i.Z.auth()))}static credential(t,e){return Ki.credential(t,e)}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}Mo.PHONE_SIGN_IN_METHOD=Ki.PHONE_SIGN_IN_METHOD,Mo.PROVIDER_ID=Ki.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Do=S;class Lo{constructor(t,e,n=i.Z.app()){var s;Do(null===(s=n.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Ui(t,e,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="auth-compat";function Ro(t){t.INTERNAL.registerComponent(new c.wA(No,(t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("auth");return new Ao(e,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:h.EMAIL_SIGNIN,PASSWORD_RESET:h.PASSWORD_RESET,RECOVER_EMAIL:h.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:h.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:h.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:h.VERIFY_EMAIL}},EmailAuthProvider:Ie,FacebookAuthProvider:Ae,GithubAuthProvider:Pe,GoogleAuthProvider:Oe,OAuthProvider:Ce,SAMLAuthProvider:Ne,PhoneAuthProvider:Mo,PhoneMultiFactorGenerator:hr,RecaptchaVerifier:Lo,TwitterAuthProvider:Re,Auth:Ao,AuthCredential:te,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Hr,Kr)}Ro(i.Z)},4673:function(t,e,n){"use strict";var i,s=n(8180),r=n(5816),o=n(8463),a=n(3333),c=n(4444),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},h={},u=u||{},d=l||self;function f(){}function p(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++v)}var y="closure_uid_"+(1e9*Math.random()>>>0),v=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function x(t,e,n){return x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w,x.apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function T(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[n].apply(t,s)}}function S(){this.s=this.s,this.o=this.o}var I=0;S.prototype.s=!1,S.prototype.ra=function(){this.s||(this.s=!0,this.N(),0==I)||m(this)},S.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const k=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function E(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function C(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(p(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let s=0;s<i;s++)t[n+s]=e[s]}else t.push(e)}}function A(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{d.addEventListener("test",f,e),d.removeEventListener("test",f,e)}catch(n){}return t}();function P(t){return/^[\s\xa0]*$/.test(t)}var M=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function D(t,e){return t<e?-1:t>e?1:0}function L(){var t=d.navigator;return t&&(t=t.userAgent)?t:""}function N(t){return-1!=L().indexOf(t)}function R(t){return R[" "](t),t}function F(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}R[" "]=f;var j,B=N("Opera"),U=N("Trident")||N("MSIE"),V=N("Edge"),z=V||U,G=N("Gecko")&&!(-1!=L().toLowerCase().indexOf("webkit")&&!N("Edge"))&&!(N("Trident")||N("MSIE"))&&!N("Edge"),$=-1!=L().toLowerCase().indexOf("webkit")&&!N("Edge");function q(){var t=d.document;return t?t.documentMode:void 0}t:{var W="",H=function(){var t=L();return G?/rv:([^\);]+)(\)|;)/.exec(t):V?/Edge\/([\d\.]+)/.exec(t):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):$?/WebKit\/(\S+)/.exec(t):B?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(H&&(W=H?H[1]:""),U){var K=q();if(null!=K&&K>parseFloat(W)){j=String(K);break t}}j=W}var X,Y={};function Q(){return F(Y,9,(function(){let t=0;const e=M(String(j)).split("."),n=M("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var s=e[o]||"",r=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;t=D(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||D(0==s[2].length,0==r[2].length)||D(s[2],r[2]),s=s[3],r=r[3]}while(0==t)}return 0<=t}))}if(d.document&&U){var J=q();X=J||(parseInt(j,10)||void 0)}else X=void 0;var Z=X;function tt(t,e){if(A.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(G){t:{try{R(e.nodeName);var s=!0;break t}catch(r){}s=!1}s||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:et[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&tt.$.h.call(this)}}T(tt,A);var et={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),it=0;function st(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=s,this.key=++it,this.fa=this.ia=!1}function rt(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ot(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function at(t){const e={};for(const n in t)e[n]=t[n];return e}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){let n,i;for(let s=1;s<arguments.length;s++){for(n in i=arguments[s],i)t[n]=i[n];for(let e=0;e<ct.length;e++)n=ct[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function ht(t){this.src=t,this.g={},this.h=0}function ut(t,e){var n=e.type;if(n in t.g){var i,s=t.g[n],r=k(s,e);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(rt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.fa&&r.listener==e&&r.capture==!!n&&r.la==i)return s}return-1}ht.prototype.add=function(t,e,n,i,s){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=dt(t,e,i,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new st(e,this.src,r,!!i,s),e.ia=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),pt={};function gt(t,e,n,i,s){if(i&&i.once)return vt(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)gt(t,e[r],n,i,s);return null}return n=It(n),t&&t[nt]?t.O(e,n,g(i)?!!i.capture:!!i,s):mt(t,e,n,!1,i,s)}function mt(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var o=g(s)?!!s.capture:!!s,a=Tt(t);if(a||(t[ft]=a=new ht(t)),n=a.add(e,n,i,o,r),n.proxy)return n;if(i=yt(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)O||(s=o),void 0===s&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(xt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function yt(){function t(n){return e.call(t.src,t.listener,n)}const e=_t;return t}function vt(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)vt(t,e[r],n,i,s);return null}return n=It(n),t&&t[nt]?t.P(e,n,g(i)?!!i.capture:!!i,s):mt(t,e,n,!0,i,s)}function bt(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)bt(t,e[r],n,i,s);else i=g(i)?!!i.capture:!!i,n=It(n),t&&t[nt]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=dt(r,n,i,s),-1<n&&(rt(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--)))):t&&(t=Tt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,i,s)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[nt])ut(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(xt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Tt(e))?(ut(n,t),0==n.h&&(n.src=null,e[ft]=null)):rt(t)}}}function xt(t){return t in pt?pt[t]:pt[t]="on"+t}function _t(t,e){if(t.fa)t=!0;else{e=new tt(e,this);var n=t.listener,i=t.la||t.src;t.ia&&wt(t),t=n.call(i,e)}return t}function Tt(t){return t=t[ft],t instanceof ht?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(t){return"function"===typeof t?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function kt(){S.call(this),this.i=new ht(this),this.S=this,this.J=null}function Et(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new A(e,t);else if(e instanceof A)e.target=e.target||t;else{var s=e;e=new A(i,t),lt(e,s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];s=Ct(o,i,!0,e)&&s}if(o=e.g=t,s=Ct(o,i,!0,e)&&s,s=Ct(o,i,!1,e)&&s,n)for(r=0;r<n.length;r++)o=e.g=n[r],s=Ct(o,i,!1,e)&&s}function Ct(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ut(t.i,o),s=!1!==a.call(c,i)&&s}}return s&&!i.defaultPrevented}T(kt,S),kt.prototype[nt]=!0,kt.prototype.removeEventListener=function(t,e,n,i){bt(this,t,e,n,i)},kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)rt(n[i]);delete e.g[t],e.h--}}this.J=null},kt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},kt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var At=d.JSON.stringify;function Ot(){var t=Bt;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Pt{constructor(){this.h=this.g=null}add(t,e){const n=Dt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var Mt,Dt=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Lt),(t=>t.reset()));class Lt{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Nt(t){d.setTimeout((()=>{throw t}),0)}function Rt(t,e){Mt||Ft(),jt||(Mt(),jt=!0),Bt.add(t,e)}function Ft(){var t=d.Promise.resolve(void 0);Mt=function(){t.then(Ut)}}var jt=!1,Bt=new Pt;function Ut(){for(var t;t=Ot();){try{t.h.call(t.g)}catch(n){Nt(n)}var e=Dt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}jt=!1}function Vt(t,e){kt.call(this),this.h=t||1,this.g=e||d,this.j=x(this.qb,this),this.l=Date.now()}function zt(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Gt(t,e,n){if("function"===typeof t)n&&(t=x(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=x(t.handleEvent,t)}return 2147483647<Number(e)?-1:d.setTimeout(t,e||0)}function $t(t){t.g=Gt((()=>{t.g=null,t.i&&(t.i=!1,$t(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}T(Vt,kt),i=Vt.prototype,i.ga=!1,i.T=null,i.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Et(this,"tick"),this.ga&&(zt(this),this.start()))}},i.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.N=function(){Vt.$.N.call(this),zt(this),delete this.g};class qt extends S{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:$t(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wt(t){S.call(this),this.h=t,this.g={}}T(Wt,S);var Ht=[];function Kt(t,e,n,i){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var s=0;s<n.length;s++){var r=gt(e,n[s],i||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function Xt(t){ot(t.g,(function(t,e){this.g.hasOwnProperty(e)&&wt(t)}),t),t.g={}}function Yt(){this.g=!0}function Qt(t,e,n,i,s,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o}))}function Jt(t,e,n,i,s,r,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+r+" "+o}))}function Zt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+ee(t,n)+(i?" "+i:"")}))}function te(t,e){t.info((function(){return"TIMEOUT: "+e}))}function ee(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return At(n)}catch(a){return e}}Wt.prototype.N=function(){Wt.$.N.call(this),Xt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yt.prototype.Ea=function(){this.g=!1},Yt.prototype.info=function(){};var ne={},ie=null;function se(){return ie=ie||new kt}function re(t){A.call(this,ne.Ta,t)}function oe(t){const e=se();Et(e,new re(e))}function ae(t,e){A.call(this,ne.STAT_EVENT,t),this.stat=e}function ce(t){const e=se();Et(e,new ae(e,t))}function le(t,e){A.call(this,ne.Ua,t),this.size=e}function he(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){t()}),e)}ne.Ta="serverreachability",T(re,A),ne.STAT_EVENT="statevent",T(ae,A),ne.Ua="timingevent",T(le,A);var ue={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},de={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function fe(){}function pe(t){return t.h||(t.h=t.i())}function ge(){}fe.prototype.h=null;var me,ye={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ve(){A.call(this,"d")}function be(){A.call(this,"c")}function we(){}function xe(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Wt(this),this.P=Te,t=z?125:void 0,this.V=new Vt(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}T(ve,A),T(be,A),T(we,fe),we.prototype.g=function(){return new XMLHttpRequest},we.prototype.i=function(){return{}},me=new we;var Te=45e3,Se={},Ie={};function ke(t,e,n){t.L=1,t.v=Ke(Ge(e)),t.s=n,t.S=!0,Ee(t,null)}function Ee(t,e){t.G=Date.now(),Pe(t),t.A=Ge(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),cn(n.i,"t",i),t.C=0,n=t.l.I,t.h=new _e,t.g=di(t.l,n?e:null,!t.s),0<t.O&&(t.M=new qt(x(t.Pa,t,t.g),t.O)),Kt(t.U,t.g,"readystatechange",t.nb),e=t.I?at(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),oe(),Qt(t.j,t.u,t.A,t.m,t.W,t.s)}function Ce(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.l.Ha)}function Ae(t,e,n){let i,s=!0;for(;!t.J&&t.C<n.length;){if(i=Oe(t,n),i==Ie){4==e&&(t.o=4,ce(14),s=!1),Zt(t.j,t.m,null,"[Incomplete Response]");break}if(i==Se){t.o=4,ce(15),Zt(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}Zt(t.j,t.m,i,null),Re(t,i)}Ce(t)&&i!=Ie&&i!=Se&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ce(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),si(e),e.L=!0,ce(11))):(Zt(t.j,t.m,n,"[Invalid Chunked Response]"),Ne(t),Le(t))}function Oe(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ie:(n=Number(e.substring(n,i)),isNaN(n)?Se:(i+=1,i+n>e.length?Ie:(e=e.substr(i,n),t.C=i+n,e)))}function Pe(t){t.Y=Date.now()+t.P,Me(t,t.P)}function Me(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=he(x(t.lb,t),e)}function De(t){t.B&&(d.clearTimeout(t.B),t.B=null)}function Le(t){0==t.l.H||t.J||ai(t.l,t)}function Ne(t){De(t);var e=t.M;e&&"function"==typeof e.ra&&e.ra(),t.M=null,zt(t.V),Xt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Re(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||mn(n.h,t)))if(!t.K&&mn(n.h,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(l){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;oi(n),Xn(n)}ii(n),ce(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.M&&0==n.A&&!n.v&&(n.v=he(x(n.ib,n),6e3));if(1>=gn(n.h)&&n.na){try{n.na()}catch(l){}n.na=void 0}}else li(n,11)}else if((t.K||n.g==t)&&oi(n),!P(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.J=l[1],n.oa=l[2];const e=l[3];null!=e&&(n.qa=e,n.j.info("VER="+n.qa));const s=l[4];null!=s&&(n.Ga=s,n.j.info("SVER="+n.Ga));const h=l[5];null!=h&&"number"===typeof h&&0<h&&(i=1.5*h,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=i.h;r.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(yn(r,r.h),r.h=null))}if(i.F){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,He(i.G,i.F,t))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=ui(i,i.I?i.oa:null,i.Y),o.K){vn(i.h,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(De(a),Pe(a)),i.g=o}else ni(i);0<n.i.length&&Qn(n)}else"stop"!=l[0]&&"close"!=l[0]||li(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?li(n,7):Kn(n):"noop"!=l[0]&&n.l&&n.l.Aa(l),n.A=0)}oe(4)}catch(l){}}function Fe(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function je(t){if(t.sa&&"function"==typeof t.sa)return t.sa();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(p(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Be(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=je(t),i=Fe(t),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],n&&n[r],t)}i=xe.prototype,i.setTimeout=function(t){this.P=t},i.nb=function(t){t=t.target;const e=this.M;e&&3==zn(t)?e.l():this.Pa(t)},i.Pa=function(t){try{if(t==this.g)t:{const h=zn(this.g);var e=this.g.Ia();const u=this.g.da();if(!(3>h)&&(3!=h||z||this.g&&(this.h.h||this.g.ja()||Gn(this.g)))){this.J||4!=h||7==e||oe(8==e||0>=u?3:2),De(this);var n=this.g.da();this.aa=n;e:if(Ce(this)){var i=Gn(this.g);t="";var s=i.length,r=4==zn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ne(this),Le(this);var o="";break e}this.h.i=new d.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,Jt(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.ba&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,ce(12),Ne(this),Le(this);break t}Zt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Re(this,n)}this.S?(Ae(this,h,o),z&&this.i&&3==h&&(Kt(this.U,this.V,"tick",this.mb),this.V.start())):(Zt(this.j,this.m,o,null),Re(this,o)),4==h&&Ne(this),this.i&&!this.J&&(4==h?ai(this.l,this):(this.i=!1,Pe(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ce(12)):(this.o=0,ce(13)),Ne(this),Le(this)}}}catch(h){}},i.mb=function(){if(this.g){var t=zn(this.g),e=this.g.ja();this.C<e.length&&(De(this),Ae(this,t,e),this.i&&4!=t&&Pe(this))}},i.cancel=function(){this.J=!0,Ne(this)},i.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(te(this.j,this.A),2!=this.L&&(oe(),ce(17)),Ne(this),this.o=2,Le(this)):Me(this,this.Y-t)};var Ue=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ze(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ze){this.h=void 0!==e?e:t.h,$e(this,t.j),this.s=t.s,this.g=t.g,qe(this,t.m),this.l=t.l,e=t.i;var n=new sn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),We(this,n),this.o=t.o}else t&&(n=String(t).match(Ue))?(this.h=!!e,$e(this,n[1]||"",!0),this.s=Xe(n[2]||""),this.g=Xe(n[3]||"",!0),qe(this,n[4]),this.l=Xe(n[5]||"",!0),We(this,n[6]||"",!0),this.o=Xe(n[7]||"")):(this.h=!!e,this.i=new sn(null,this.h))}function Ge(t){return new ze(t)}function $e(t,e,n){t.j=n?Xe(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function We(t,e,n){e instanceof sn?(t.i=e,hn(t.i,t.h)):(n||(e=Ye(e,en)),t.i=new sn(e,t.h))}function He(t,e,n){t.i.set(e,n)}function Ke(t){return He(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Xe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ye(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}ze.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ye(e,Je,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ye(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ye(n,"/"==n.charAt(0)?tn:Ze,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ye(n,nn)),t.join("")};var Je=/[#\/\?@]/g,Ze=/[#\?:]/g,tn=/[#\?]/g,en=/[#\?@]/g,nn=/#/g;function sn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function rn(t){t.g||(t.g=new Map,t.h=0,t.i&&Ve(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function on(t,e){rn(t),e=ln(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function an(t,e){return rn(t),e=ln(t,e),t.g.has(e)}function cn(t,e,n){on(t,e),0<n.length&&(t.i=null,t.g.set(ln(t,e),E(n)),t.h+=n.length)}function ln(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function hn(t,e){e&&!t.j&&(rn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(on(this,e),cn(this,n,t))}),t)),t.j=e}i=sn.prototype,i.add=function(t,e){rn(this),this.i=null,t=ln(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},i.forEach=function(t,e){rn(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},i.sa=function(){rn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let t=0;t<s.length;t++)n.push(e[i])}return n},i.Z=function(t){rn(this);let e=[];if("string"===typeof t)an(this,t)&&(e=e.concat(this.g.get(ln(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},i.set=function(t,e){return rn(this),this.i=null,t=ln(this,t),an(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},i.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const r=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var s=r;""!==o[i]&&(s+="="+encodeURIComponent(String(o[i]))),t.push(s)}}return this.i=t.join("&")};var un=class{constructor(t,e){this.h=t,this.g=e}};function dn(t){this.l=t||fn,d.PerformanceNavigationTiming?(t=d.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(d.g&&d.g.Ka&&d.g.Ka()&&d.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fn=10;function pn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function gn(t){return t.h?1:t.g?t.g.size:0}function mn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function yn(t,e){t.g?t.g.add(e):t.h=e}function vn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function bn(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return E(t.i)}function wn(){}function xn(){this.g=new wn}function _n(t,e,n){const i=n||"";try{Be(t,(function(t,n){let s=t;g(t)&&(s=At(t)),e.push(i+n+"="+encodeURIComponent(s))}))}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function Tn(t,e){const n=new Yt;if(d.Image){const i=new Image;i.onload=_(Sn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=_(Sn,n,i,"TestLoadImage: error",!1,e),i.onabort=_(Sn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=_(Sn,n,i,"TestLoadImage: timeout",!1,e),d.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}function Sn(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch(r){}}function In(t){this.l=t.fc||null,this.j=t.ob||!1}function kn(t,e){kt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=En,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dn.prototype.cancel=function(){if(this.i=bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},wn.prototype.stringify=function(t){return d.JSON.stringify(t,void 0)},wn.prototype.parse=function(t){return d.JSON.parse(t,void 0)},T(In,fe),In.prototype.g=function(){return new kn(this.l,this.j)},In.prototype.i=function(t){return function(){return t}}({}),T(kn,kt);var En=0;function Cn(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function An(t){t.readyState=4,t.l=null,t.j=null,t.A=null,On(t)}function On(t){t.onreadystatechange&&t.onreadystatechange.call(t)}i=kn.prototype,i.open=function(t,e){if(this.readyState!=En)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,On(this)},i.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||d).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,An(this)),this.readyState=En},i.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cn(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},i.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?An(this):On(this),3==this.readyState&&Cn(this)}},i.Za=function(t){this.g&&(this.response=this.responseText=t,An(this))},i.Ya=function(t){this.g&&(this.response=t,An(this))},i.ka=function(){this.g&&An(this)},i.setRequestHeader=function(t,e){this.v.append(t,e)},i.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(kn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Pn=d.JSON.parse;function Mn(t){kt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Dn,this.L=this.M=!1}T(Mn,kt);var Dn="",Ln=/^https?$/i,Nn=["POST","PUT"];function Rn(t){return U&&Q()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Fn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,jn(t),Un(t)}function jn(t){t.F||(t.F=!0,Et(t,"complete"),Et(t,"error"))}function Bn(t){if(t.h&&"undefined"!=typeof u&&(!t.C[1]||4!=zn(t)||2!=t.da()))if(t.v&&4==zn(t))Gt(t.La,0,t);else if(Et(t,"readystatechange"),4==zn(t)){t.h=!1;try{const c=t.da();t:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===c){var s=String(t.I).match(Ue)[1]||null;if(!s&&d.self&&d.self.location){var r=d.self.location.protocol;s=r.substr(0,r.length-1)}i=!Ln.test(s?s.toLowerCase():"")}n=i}if(n)Et(t,"complete"),Et(t,"success");else{t.m=6;try{var o=2<zn(t)?t.g.statusText:""}catch(a){o=""}t.j=o+" ["+t.da()+"]",jn(t)}}finally{Un(t)}}}function Un(t,e){if(t.g){Vn(t);const i=t.g,s=t.C[0]?f:null;t.g=null,t.C=null,e||Et(t,"ready");try{i.onreadystatechange=s}catch(n){}}}function Vn(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(d.clearTimeout(t.A),t.A=null)}function zn(t){return t.g?t.g.readyState:0}function Gn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Dn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Qi){return null}}function $n(t){let e="";return ot(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function qn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=$n(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):He(t,e,n))}function Wn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Hn(t){this.Ga=0,this.i=[],this.j=new Yt,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wn("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wn("baseRetryDelayMs",5e3,t),this.hb=Wn("retryDelaySeedMs",1e4,t),this.eb=Wn("forwardChannelMaxRetries",2,t),this.xa=Wn("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new dn(t&&t.concurrentRequestLimit),this.Ja=new xn,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Kn(t){if(Yn(t),3==t.H){var e=t.W++,n=Ge(t.G);He(n,"SID",t.J),He(n,"RID",e),He(n,"TYPE","terminate"),ti(t,n),e=new xe(t,t.j,e,void 0),e.L=2,e.v=Ke(Ge(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(e.v.toString(),"")),!n&&d.Image&&((new Image).src=e.v,n=!0),n||(e.g=di(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Pe(e)}hi(t)}function Xn(t){t.g&&(si(t),t.g.cancel(),t.g=null)}function Yn(t){Xn(t),t.u&&(d.clearTimeout(t.u),t.u=null),oi(t),t.h.cancel(),t.m&&("number"===typeof t.m&&d.clearTimeout(t.m),t.m=null)}function Qn(t){pn(t.h)||t.m||(t.m=!0,Rt(t.Na,t),t.C=0)}function Jn(t,e){return!(gn(t.h)>=t.h.j-(t.m?1:0))&&(t.m?(t.i=e.F.concat(t.i),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=he(x(t.Na,t,e),ci(t,t.C)),t.C++,!0))}function Zn(t,e){var n;n=e?e.m:t.W++;const i=Ge(t.G);He(i,"SID",t.J),He(i,"RID",n),He(i,"AID",t.V),ti(t,i),t.o&&t.s&&qn(i,t.o,t.s),n=new xe(t,t.j,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=ei(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),yn(t.h,n),ke(n,i,e)}function ti(t,e){t.ma&&ot(t.ma,(function(t,n){He(e,n,t)})),t.l&&Be({},(function(t,n){He(e,n,t)}))}function ei(t,e,n){n=Math.min(t.i.length,n);var i=t.l?x(t.l.Va,t.l,t):null;t:{var s=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=s[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let r=!0;for(let o=0;o<n;o++){let n=s[o].h;const a=s[o].g;if(n-=e,0>n)e=Math.max(0,s[o].h-100),r=!1;else try{_n(a,t,"req"+n+"_")}catch(hs){i&&i(a)}}if(r){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.F=t,i}function ni(t){t.g||t.u||(t.ba=1,Rt(t.Ma,t),t.A=0)}function ii(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=he(x(t.Ma,t),ci(t,t.A)),t.A++,!0)}function si(t){null!=t.B&&(d.clearTimeout(t.B),t.B=null)}function ri(t){t.g=new xe(t,t.j,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ge(t.wa);He(e,"RID","rpc"),He(e,"SID",t.J),He(e,"CI",t.M?"0":"1"),He(e,"AID",t.V),He(e,"TYPE","xmlhttp"),ti(t,e),t.o&&t.s&&qn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=Ke(Ge(e)),n.s=null,n.S=!0,Ee(n,t)}function oi(t){null!=t.v&&(d.clearTimeout(t.v),t.v=null)}function ai(t,e){var n=null;if(t.g==e){oi(t),si(t),t.g=null;var i=2}else{if(!mn(t.h,e))return;n=e.F,vn(t.h,e),i=1}if(0!=t.H)if(t.ta=e.aa,e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;i=se(),Et(i,new le(i,n)),Qn(t)}else ni(t);else if(s=e.o,3==s||0==s&&0<t.ta||!(1==i&&Jn(t,e)||2==i&&ii(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:li(t,5);break;case 4:li(t,10);break;case 3:li(t,6);break;default:li(t,2)}}function ci(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function li(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var i=x(t.pb,t);n||(n=new ze("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||$e(n,"https"),Ke(n)),Tn(n.toString(),i)}else ce(2);t.H=0,t.l&&t.l.za(e),hi(t),Yn(t)}function hi(t){if(t.H=0,t.pa=[],t.l){const e=bn(t.h);0==e.length&&0==t.i.length||(C(t.pa,e),C(t.pa,t.i),t.h.i.length=0,E(t.i),t.i.length=0),t.l.ya()}}function ui(t,e,n){var i=n instanceof ze?Ge(n):new ze(n,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),qe(i,i.m);else{var s=d.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new ze(null,void 0);i&&$e(r,i),e&&(r.g=e),s&&qe(r,s),n&&(r.l=n),i=r}return n=t.F,e=t.Da,n&&e&&He(i,n,e),He(i,"VER",t.qa),ti(t,i),i}function di(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Mn(new In({ob:!0})):new Mn(t.va),e.Oa(t.I),e}function fi(){}function pi(){if(U&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function gi(t,e){kt.call(this),this.g=new Hn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!P(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!P(e)&&(this.g.F=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new vi(this)}function mi(t){ve.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function yi(){be.call(this),this.status=1}function vi(t){this.g=t}function bi(){this.blockSize=-1}function wi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xi(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var s=0;16>s;++s)i[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var r=t.g[3],o=e+(r^n&(s^r))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[1]+3905402710&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[2]+606105819&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[5]+1200080426&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[6]+2821735955&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[9]+2336552879&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[10]+4294925233&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[13]+4254626195&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[14]+2792965006&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^r&(n^s))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[6]+3225465664&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[11]+643717713&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[10]+38016083&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[15]+3634488961&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[14]+3275163606&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[3]+4107603335&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[2]+4243563512&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[7]+1735328473&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^r)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[8]+2272392833&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[11]+1839030562&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[4]+1272893353&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[7]+4139469664&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[0]+3936430074&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[3]+3572445317&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[12]+3873151461&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[15]+530742520&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~r))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[7]+1126891415&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[14]+2878612391&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[3]+2399980690&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[10]+4293915773&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[15]+4264355552&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[6]+2734768916&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[11]+3174756917&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[2]+718787259&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+r&4294967295}function _i(t,e){this.h=e;for(var n=[],i=!0,s=t.length-1;0<=s;s--){var r=0|t[s];i&&r==e||(n[s]=r,i=!1)}this.g=n}i=Mn.prototype,i.Oa=function(t){this.M=t},i.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():me.g(),this.C=this.u?pe(this.u):pe(me),this.g.onreadystatechange=x(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(r){return void Fn(this,r)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=d.FormData&&t instanceof d.FormData,!(0<=k(Nn,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Vn(this),0<this.B&&((this.L=Rn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=x(this.ua,this)):this.A=Gt(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){Fn(this,r)}},i.ua=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Et(this,"timeout"),this.abort(8))},i.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Et(this,"complete"),Et(this,"abort"),Un(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Un(this,!0)),Mn.$.N.call(this)},i.La=function(){this.s||(this.G||this.v||this.l?Bn(this):this.kb())},i.kb=function(){Bn(this)},i.da=function(){try{return 2<zn(this)?this.g.status:-1}catch(t){return-1}},i.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},i.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Pn(e)}},i.Ia=function(){return this.m},i.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},i=Hn.prototype,i.qa=8,i.H=1,i.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new xe(this,this.j,t,void 0);let r=this.s;if(this.U&&(r?(r=at(r),lt(r,this.U)):r=this.U),null!==this.o||this.O||(s.I=r,r=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(i="__data__"in i.g&&(i=i.g.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(e+=i,4096<e){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ei(this,s,e),n=Ge(this.G),He(n,"RID",t),He(n,"CVER",22),this.F&&He(n,"X-HTTP-Session-Id",this.F),ti(this,n),r&&(this.O?e="headers="+encodeURIComponent(String($n(r)))+"&"+e:this.o&&qn(n,this.o,r)),yn(this.h,s),this.bb&&He(n,"TYPE","init"),this.P?(He(n,"$req",e),He(n,"SID","null"),s.ba=!0,ke(s,n,null)):ke(s,n,e),this.H=2}}else 3==this.H&&(t?Zn(this,t):0==this.i.length||pn(this.h)||Zn(this))},i.Ma=function(){if(this.u=null,ri(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=he(x(this.jb,this),t)}},i.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,ce(10),Xn(this),ri(this))},i.ib=function(){null!=this.v&&(this.v=null,Xn(this),ii(this),ce(19))},i.pb=function(t){t?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))},i=fi.prototype,i.Ba=function(){},i.Aa=function(){},i.za=function(){},i.ya=function(){},i.Va=function(){},pi.prototype.g=function(t,e){return new gi(t,e)},T(gi,kt),gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;ce(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=ui(t,null,t.Y),Qn(t)},gi.prototype.close=function(){Kn(this.g)},gi.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=At(t),t=n);e.i.push(new un(e.fb++,t)),3==e.H&&Qn(e)},gi.prototype.N=function(){this.g.l=null,delete this.j,Kn(this.g),delete this.g,gi.$.N.call(this)},T(mi,ve),T(yi,be),T(vi,fi),vi.prototype.Ba=function(){Et(this.g,"a")},vi.prototype.Aa=function(t){Et(this.g,new mi(t))},vi.prototype.za=function(t){Et(this.g,new yi)},vi.prototype.ya=function(){Et(this.g,"b")},T(wi,bi),wi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,s=this.h,r=0;r<e;){if(0==s)for(;r<=n;)xi(this,t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[s++]=t.charCodeAt(r++),s==this.blockSize){xi(this,i),s=0;break}}else for(;r<e;)if(i[s++]=t[r++],s==this.blockSize){xi(this,i),s=0;break}}this.h=s,this.i+=e},wi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var Ti={};function Si(t){return-128<=t&&128>t?F(Ti,t,(function(t){return new _i([0|t],0>t?-1:0)})):new _i([0|t],0>t?-1:0)}function Ii(t){if(isNaN(t)||!isFinite(t))return Ci;if(0>t)return Di(Ii(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Ei;return new _i(e,0)}function ki(t,e){if(0==t.length)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Di(ki(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ii(Math.pow(e,8)),i=Ci,s=0;s<t.length;s+=8){var r=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+r),e);8>r?(r=Ii(Math.pow(e,r)),i=i.R(r).add(Ii(o))):(i=i.R(n),i=i.add(Ii(o)))}return i}var Ei=4294967296,Ci=Si(0),Ai=Si(1),Oi=Si(16777216);function Pi(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Mi(t){return-1==t.h}function Di(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new _i(n,~t.h).add(Ai)}function Li(t,e){return t.add(Di(e))}function Ni(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ri(t,e){this.g=t,this.h=e}function Fi(t,e){if(Pi(e))throw Error("division by zero");if(Pi(t))return new Ri(Ci,Ci);if(Mi(t))return e=Fi(Di(t),e),new Ri(Di(e.g),Di(e.h));if(Mi(e))return e=Fi(t,Di(e)),new Ri(Di(e.g),e.h);if(30<t.g.length){if(Mi(t)||Mi(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ai,i=e;0>=i.X(t);)n=ji(n),i=ji(i);var s=Bi(n,1),r=Bi(i,1);for(i=Bi(i,2),n=Bi(n,2);!Pi(i);){var o=r.add(i);0>=o.X(t)&&(s=s.add(n),r=o),i=Bi(i,1),n=Bi(n,1)}return e=Li(t,s.R(e)),new Ri(s,e)}for(s=Ci;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),r=Ii(n),o=r.R(e);Mi(o)||0<o.X(t);)n-=i,r=Ii(n),o=r.R(e);Pi(r)&&(r=Ai),s=s.add(r),t=Li(t,o)}return new Ri(s,t)}function ji(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new _i(n,t.h)}function Bi(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,s=[],r=0;r<i;r++)s[r]=0<e?t.D(r+n)>>>e|t.D(r+n+1)<<32-e:t.D(r+n);return new _i(s,t.h)}i=_i.prototype,i.ea=function(){if(Mi(this))return-Di(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Ei+i)*e,e*=Ei}return t},i.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Pi(this))return"0";if(Mi(this))return"-"+Di(this).toString(t);for(var e=Ii(Math.pow(t,6)),n=this,i="";;){var s=Fi(n,e).g;n=Li(n,s.R(e));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Pi(n))return r+i;for(;6>r.length;)r="0"+r;i=r+i}},i.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},i.X=function(t){return t=Li(this,t),Mi(t)?-1:Pi(t)?0:1},i.abs=function(){return Mi(this)?Di(this):this},i.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,s=0;s<=e;s++){var r=i+(65535&this.D(s))+(65535&t.D(s)),o=(r>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);i=o>>>16,r&=65535,o&=65535,n[s]=o<<16|r}return new _i(n,-2147483648&n[n.length-1]?-1:0)},i.R=function(t){if(Pi(this)||Pi(t))return Ci;if(Mi(this))return Mi(t)?Di(this).R(Di(t)):Di(Di(this).R(t));if(Mi(t))return Di(this.R(Di(t)));if(0>this.X(Oi)&&0>t.X(Oi))return Ii(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<t.g.length;s++){var r=this.D(i)>>>16,o=65535&this.D(i),a=t.D(s)>>>16,c=65535&t.D(s);n[2*i+2*s]+=o*c,Ni(n,2*i+2*s),n[2*i+2*s+1]+=r*c,Ni(n,2*i+2*s+1),n[2*i+2*s+1]+=o*a,Ni(n,2*i+2*s+1),n[2*i+2*s+2]+=r*a,Ni(n,2*i+2*s+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new _i(n,0)},i.gb=function(t){return Fi(this,t).h},i.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new _i(n,this.h&t.h)},i.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new _i(n,this.h|t.h)},i.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new _i(n,this.h^t.h)},pi.prototype.createWebChannel=pi.prototype.g,gi.prototype.send=gi.prototype.u,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,de.COMPLETE="complete",ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",kt.prototype.listen=kt.prototype.O,Mn.prototype.listenOnce=Mn.prototype.P,Mn.prototype.getLastError=Mn.prototype.Sa,Mn.prototype.getLastErrorCode=Mn.prototype.Ia,Mn.prototype.getStatus=Mn.prototype.da,Mn.prototype.getResponseJson=Mn.prototype.Wa,Mn.prototype.getResponseText=Mn.prototype.ja,Mn.prototype.send=Mn.prototype.ha,Mn.prototype.setWithCredentials=Mn.prototype.Oa,wi.prototype.digest=wi.prototype.l,wi.prototype.reset=wi.prototype.reset,wi.prototype.update=wi.prototype.j,_i.prototype.add=_i.prototype.add,_i.prototype.multiply=_i.prototype.R,_i.prototype.modulo=_i.prototype.gb,_i.prototype.compare=_i.prototype.X,_i.prototype.toNumber=_i.prototype.ea,_i.prototype.toString=_i.prototype.toString,_i.prototype.getBits=_i.prototype.D,_i.fromNumber=Ii,_i.fromString=ki;var Ui=h.createWebChannelTransport=function(){return new pi},Vi=h.getStatEventTarget=function(){return se()},zi=h.ErrorCode=ue,Gi=h.EventType=de,$i=h.Event=ne,qi=h.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wi=h.FetchXmlHttpFactory=In,Hi=h.WebChannel=ge,Ki=h.XhrIo=Mn,Xi=h.Md5=wi,Yi=h.Integer=_i;const Qi="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Zi="9.22.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new a.Yd("@firebase/firestore");function es(){return ts.logLevel}function ns(t){ts.setLogLevel(t)}function is(t,...e){if(ts.logLevel<=a["in"].DEBUG){const n=e.map(os);ts.debug(`Firestore (${Zi}): ${t}`,...n)}}function ss(t,...e){if(ts.logLevel<=a["in"].ERROR){const n=e.map(os);ts.error(`Firestore (${Zi}): ${t}`,...n)}}function rs(t,...e){if(ts.logLevel<=a["in"].WARN){const n=e.map(os);ts.warn(`Firestore (${Zi}): ${t}`,...n)}}function os(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t="Unexpected state"){const e=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: `+t;throw ss(e),new Error(e)}function cs(t,e){t||as()}function ls(t,e){t||as()}function hs(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ds extends c.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ji.UNAUTHENTICATED)))}shutdown(){}}class ms{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class ys{constructor(t){this.t=t,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let s=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fs,t.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{is("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(is("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fs)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(is("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(cs("string"==typeof e.accessToken),new ps(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return cs(null===t||"string"==typeof t),new Ji(t)}}class vs{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class bs{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new vs(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(Ji.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ws{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xs{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const n=t=>{null!=t.error&&is("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.T;return this.T=t.token,is("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{is("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.I.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.I.getImmediate({optional:!0});t?i(t):is("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(cs("string"==typeof t.token),this.T=t.token,new ws(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _s(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=_s(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<e&&(n+=t.charAt(i[s]%t.length))}return n}}function Ss(t,e){return t<e?-1:t>e?1:0}function Is(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}function ks(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ds(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ds(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ds(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ds(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Es.fromMillis(Date.now())}static fromDate(t){return Es.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Es(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ss(this.nanoseconds,t.nanoseconds):Ss(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Cs(t)}static min(){return new Cs(new Es(0,0))}static max(){return new Cs(new Es(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(t,e,n){void 0===e?e=0:e>t.length&&as(),void 0===n?n=t.length-e:n>t.length-e&&as(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===As.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof As?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),s=e.get(i);if(n<s)return-1;if(n>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Os extends As{construct(t,e,n){return new Os(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new ds(us.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Os(e)}static emptyPath(){return new Os([])}}const Ps=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ms extends As{construct(t,e,n){return new Ms(t,e,n)}static isValidIdentifier(t){return Ps.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ms.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ms(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const s=()=>{if(0===n.length)throw new ds(us.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ds(us.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ds(us.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(r=!r,i++):"."!==e||r?(n+=e,i++):(s(),i++)}if(s(),r)throw new ds(us.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ms(e)}static emptyPath(){return new Ms([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t){this.path=t}static fromPath(t){return new Ds(Os.fromString(t))}static fromName(t){return new Ds(Os.fromString(t).popFirst(5))}static empty(){return new Ds(Os.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Os.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Os.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ds(new Os(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}function Ns(t){return t.fields.find((t=>2===t.kind))}function Rs(t){return t.fields.filter((t=>2!==t.kind))}Ls.UNKNOWN_ID=-1;class Fs{constructor(t,e){this.fieldPath=t,this.kind=e}}class js{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new js(0,Vs.min())}}function Bs(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Cs.fromTimestamp(1e9===i?new Es(n+1,0):new Es(n,i));return new Vs(s,Ds.empty(),e)}function Us(t){return new Vs(t.readTime,t.key,-1)}class Vs{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Vs(Cs.min(),Ds.empty(),-1)}static max(){return new Vs(Cs.max(),Ds.empty(),-1)}}function zs(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ds.comparator(t.documentKey,e.documentKey),0!==n?n:Ss(t.largestBatchId,e.largestBatchId))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $s{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t){if(t.code!==us.FAILED_PRECONDITION||t.message!==Gs)throw t;is("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&as(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ws(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Ws?e:Ws.resolve(e)}catch(t){return Ws.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Ws.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Ws.reject(e)}static resolve(t){return new Ws(((e,n)=>{e(t)}))}static reject(t){return new Ws(((e,n)=>{n(t)}))}static waitFor(t){return new Ws(((e,n)=>{let i=0,s=0,r=!1;t.forEach((t=>{++i,t.next((()=>{++s,r&&s===i&&e()}),(t=>n(t)))})),r=!0,s===i&&e()}))}static or(t){let e=Ws.resolve(!1);for(const n of t)e=e.next((t=>t?Ws.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Ws(((n,i)=>{const s=t.length,r=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;e(t[c]).next((t=>{r[c]=t,++o,o===s&&n(r)}),(t=>i(t)))}}))}static doWhile(t,e){return new Ws(((n,i)=>{const s=()=>{!0===t()?e().next((()=>{s()}),i):n()};s()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new fs,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new Ys(t,e.error)):this.v.resolve()},this.transaction.onerror=e=>{const n=er(e.target.error);this.v.reject(new Ys(t,n))}}static open(t,e,n,i){try{return new Hs(e,t.transaction(i,n))}catch(t){throw new Ys(e,t)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(is("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Js(e)}}class Ks{constructor(t,e,n){this.name=t,this.version=e,this.V=n,12.2===Ks.S((0,c.z$)())&&ss("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return is("SimpleDb","Removing database:",t),Zs(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,c.hl)())return!1;if(Ks.C())return!0;const t=(0,c.z$)(),e=Ks.S(t),n=0<e&&e<10,i=Ks.N(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||s)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/expense-tracker2/"})||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(t){return this.db||(is("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Ys(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new ds(us.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new ds(us.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Ys(t,i))},i.onupgradeneeded=t=>{is("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.V.O(e,i.transaction,t.oldVersion,this.version).next((()=>{is("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=t=>this.F(t)),this.db}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const s="readonly"===e;let r=0;for(;;){++r;try{this.db=await this.$(t);const e=Hs.open(this.db,t,s?"readonly":"readwrite",n),r=i(e).next((t=>(e.P(),t))).catch((t=>(e.abort(t),Ws.reject(t)))).toPromise();return r.catch((()=>{})),await e.R,r}catch(t){const e=t,n="FirebaseError"!==e.name&&r<3;if(is("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Xs{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return Zs(this.L.delete())}}class Ys extends ds{constructor(t,e){super(us.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Qs(t){return"IndexedDbTransactionError"===t.name}class Js{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(is("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(is("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Zs(n)}add(t){return is("SimpleDb","ADD",this.store.name,t,t),Zs(this.store.add(t))}get(t){return Zs(this.store.get(t)).next((e=>(void 0===e&&(e=null),is("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return is("SimpleDb","DELETE",this.store.name,t),Zs(this.store.delete(t))}count(){return is("SimpleDb","COUNT",this.store.name),Zs(this.store.count())}j(t,e){const n=this.options(t,e);if(n.index||"function"!=typeof this.store.getAll){const t=this.cursor(n),e=[];return this.W(t,((t,n)=>{e.push(n)})).next((()=>e))}{const t=this.store.getAll(n.range);return new Ws(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}}H(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Ws(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}J(t,e){is("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.Y=!1;const i=this.cursor(n);return this.W(i,((t,e,n)=>n.delete()))}X(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.W(i,e)}Z(t){const e=this.cursor({});return new Ws(((n,i)=>{e.onerror=t=>{const e=er(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}W(t,e){const n=[];return new Ws(((i,s)=>{t.onerror=t=>{s(t.target.error)},t.onsuccess=t=>{const s=t.target.result;if(!s)return void i();const r=new Xs(s),o=e(s.primaryKey,s.value,r);if(o instanceof Ws){const t=o.catch((t=>(r.done(),Ws.reject(t))));n.push(t)}r.isDone?i():null===r.K?s.continue():s.continue(r.K)}})).next((()=>Ws.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.Y?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Zs(t){return new Ws(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=er(t.target.error);n(e)}}))}let tr=!1;function er(t){const e=Ks.S((0,c.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new ds("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tr||(tr=!0,setTimeout((()=>{throw t}),0)),t}}return t}class nr{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){is("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{is("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(t){Qs(t)?is("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):await qs(t)}await this.et(6e4)}))}}class ir{constructor(t,e){this.localStore=t,this.persistence=e}async nt(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.st(e,t)))}st(t,e){const n=new Set;let i=e,s=!0;return Ws.doWhile((()=>!0===s&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((e=>{if(null!==e&&!n.has(e))return is("IndexBackiller",`Processing collection: ${e}`),this.it(t,e,i).next((t=>{i-=t,n.add(e)}));s=!1})))).next((()=>e-i))}it(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((i=>this.localStore.localDocuments.getNextDocuments(t,e,i,n).next((n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next((()=>this.rt(i,n))).next((n=>(is("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(t,e,n)))).next((()=>s.size))}))))}rt(t,e){let n=t;return e.changes.forEach(((t,e)=>{const i=Us(e);zs(i,n)>0&&(n=i)})),new Vs(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ot(t),this.ut=t=>e.writeSequenceNumber(t))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}function rr(t){return null==t}function or(t){return 0===t&&1/t==-1/0}function ar(t){return"number"==typeof t&&Number.isInteger(t)&&!or(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hr(e)),e=lr(t.get(n),e);return hr(e)}function lr(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const e=t.charAt(s);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function hr(t){return t+""}function ur(t){const e=t.length;if(cs(e>=2),2===e)return cs(""===t.charAt(0)&&""===t.charAt(1)),Os.emptyPath();const n=e-2,i=[];let s="";for(let r=0;r<e;){const e=t.indexOf("",r);switch((e<0||e>n)&&as(),t.charAt(e+1)){case"":const n=t.substring(r,e);let o;0===s.length?o=n:(s+=n,o=s,s=""),i.push(o);break;case"":s+=t.substring(r,e),s+="\0";break;case"":s+=t.substring(r,e+1);break;default:as()}r=e+2}return new Os(i)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.ct=-1;const dr=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){return[t,cr(e)]}function pr(t,e,n){return[t,cr(e),n]}const gr={},mr=["prefixPath","collectionGroup","readTime","documentId"],yr=["prefixPath","collectionGroup","documentId"],vr=["collectionGroup","readTime","prefixPath","documentId"],br=["canonicalId","targetId"],wr=["targetId","path"],xr=["path","targetId"],_r=["collectionId","parent"],Tr=["indexId","uid"],Sr=["uid","sequenceNumber"],Ir=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kr=["indexId","uid","orderedDocumentKey"],Er=["userId","collectionPath","documentId"],Cr=["userId","collectionPath","largestBatchId"],Ar=["userId","collectionGroup","largestBatchId"],Or=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pr=[...Or,"documentOverlays"],Mr=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dr=Mr,Lr=[...Dr,"indexConfiguration","indexState","indexEntries"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends $s{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function Rr(t,e){const n=hs(t);return Ks.M(n.ht,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Br(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,e){this.comparator=t,this.root=e||zr.EMPTY}insert(t,e){return new Ur(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(t){return new Ur(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Vr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Vr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Vr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Vr(this.root,t,this.comparator,!0)}}class Vr{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zr{constructor(t,e,n,i,s){this.key=t,this.value=e,this.color=null!=n?n:zr.RED,this.left=null!=i?i:zr.EMPTY,this.right=null!=s?s:zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,s){return new zr(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const s=n(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===s?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return zr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw as();if(this.right.isRed())throw as();const t=this.left.check();if(t!==this.right.check())throw as();return t+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1,zr.EMPTY=new class{constructor(){this.size=0}get key(){throw as()}get value(){throw as()}get color(){throw as()}get left(){throw as()}get right(){throw as()}copy(t,e,n,i,s){return this}insert(t,e,n){return new zr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gr{constructor(t){this.comparator=t,this.data=new Ur(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new $r(this.data.getIterator())}getIteratorFrom(t){return new $r(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Gr))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Gr(this.comparator);return e.data=t,e}}class $r{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qr(t){return t.hasNext()?t.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.fields=t,t.sort(Ms.comparator)}static empty(){return new Wr([])}unionWith(t){let e=new Gr(Ms.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Wr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Is(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Hr("Invalid base64 string: "+t):t}}(t);return new Xr(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Xr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ss(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Xr.EMPTY_BYTE_STRING=new Xr("");const Yr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(cs(!!t),"string"==typeof t){let e=0;const n=Yr.exec(t);if(cs(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Jr(t.seconds),nanos:Jr(t.nanos)}}function Jr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zr(t){return"string"==typeof t?Xr.fromBase64String(t):Xr.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function eo(t){const e=t.mapValue.fields.__previous_value__;return to(e)?eo(e):e}function no(t){const e=Qr(t.mapValue.fields.__local_write_time__.timestampValue);return new Es(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(t,e,n,i,s,r,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class so{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new so("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof so&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oo={nullValue:"NULL_VALUE"};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?to(t)?4:_o(t)?9007199254740991:10:as()}function co(t,e){if(t===e)return!0;const n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return no(t).isEqual(no(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Qr(t.timestampValue),i=Qr(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zr(t.bytesValue).isEqual(Zr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Jr(t.geoPointValue.latitude)===Jr(e.geoPointValue.latitude)&&Jr(t.geoPointValue.longitude)===Jr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Jr(t.integerValue)===Jr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Jr(t.doubleValue),i=Jr(e.doubleValue);return n===i?or(n)===or(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Is(t.arrayValue.values||[],e.arrayValue.values||[],co);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Fr(n)!==Fr(i))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===i[s]||!co(n[s],i[s])))return!1;return!0}(t,e);default:return as()}}function lo(t,e){return void 0!==(t.values||[]).find((t=>co(t,e)))}function ho(t,e){if(t===e)return 0;const n=ao(t),i=ao(e);if(n!==i)return Ss(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ss(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Jr(t.integerValue||t.doubleValue),i=Jr(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return uo(t.timestampValue,e.timestampValue);case 4:return uo(no(t),no(e));case 5:return Ss(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Zr(t),i=Zr(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let s=0;s<n.length&&s<i.length;s++){const t=Ss(n[s],i[s]);if(0!==t)return t}return Ss(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ss(Jr(t.latitude),Jr(e.latitude));return 0!==n?n:Ss(Jr(t.longitude),Jr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const t=ho(n[s],i[s]);if(t)return t}return Ss(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===ro.mapValue&&e===ro.mapValue)return 0;if(t===ro.mapValue)return 1;if(e===ro.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),s=e.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let o=0;o<i.length&&o<r.length;++o){const t=Ss(i[o],r[o]);if(0!==t)return t;const e=ho(n[i[o]],s[r[o]]);if(0!==e)return e}return Ss(i.length,r.length)}(t.mapValue,e.mapValue);default:throw as()}}function uo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ss(t,e);const n=Qr(t),i=Qr(e),s=Ss(n.seconds,i.seconds);return 0!==s?s:Ss(n.nanos,i.nanos)}function fo(t){return po(t)}function po(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Qr(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ds.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=po(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const s of e)i?i=!1:n+=",",n+=`${s}:${po(t.fields[s])}`;return n+"}"}(t.mapValue):as();var e,n}function go(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mo(t){return!!t&&"integerValue"in t}function yo(t){return!!t&&"arrayValue"in t}function vo(t){return!!t&&"nullValue"in t}function bo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wo(t){return!!t&&"mapValue"in t}function xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return jr(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=xo(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _o(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function To(t){return"nullValue"in t?oo:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?go(so.empty(),Ds.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:as()}function So(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?go(so.empty(),Ds.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ro:as()}function Io(t,e){const n=ho(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ko(t,e){const n=ho(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this.value=t}static empty(){return new Eo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!wo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=xo(e)}setAll(t){let e=Ms.emptyPath(),n={},i=[];t.forEach(((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=s.popLast()}t?n[s.lastSegment()]=xo(t):i.push(s.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,n,i)}delete(t){const e=this.field(t.popLast());wo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return co(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];wo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){jr(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new Eo(xo(this.value))}}function Co(t){const e=[];return jr(t.fields,((t,n)=>{const i=new Ms([t]);if(wo(n)){const t=Co(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Wr(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ao{constructor(t,e,n,i,s,r,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=s,this.data=r,this.documentState=o}static newInvalidDocument(t){return new Ao(t,0,Cs.min(),Cs.min(),Cs.min(),Eo.empty(),0)}static newFoundDocument(t,e,n,i){return new Ao(t,1,e,Cs.min(),n,i,0)}static newNoDocument(t,e){return new Ao(t,2,e,Cs.min(),Cs.min(),Eo.empty(),0)}static newUnknownDocument(t,e){return new Ao(t,3,e,Cs.min(),Cs.min(),Eo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Cs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Eo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cs.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ao&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ao(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,e){this.position=t,this.inclusive=e}}function Po(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(i=r.field.isKeyField()?Ds.comparator(Ds.fromName(o.referenceValue),n.key):ho(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function Mo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!co(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,e="asc"){this.field=t,this.dir=e}}function Lo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{}class Ro extends No{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Wo(t,e,n):"array-contains"===e?new Yo(t,n):"in"===e?new Qo(t,n):"not-in"===e?new Jo(t,n):"array-contains-any"===e?new Zo(t,n):new Ro(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ho(t,n):new Ko(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(ho(e,this.value)):null!==e&&ao(this.value)===ao(e)&&this.matchesComparison(ho(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return as()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fo extends No{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new Fo(t,e)}matches(t){return jo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft((t=>t.isInequality()));return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function jo(t){return"and"===t.op}function Bo(t){return"or"===t.op}function Uo(t){return Vo(t)&&jo(t)}function Vo(t){for(const e of t.filters)if(e instanceof Fo)return!1;return!0}function zo(t){if(t instanceof Ro)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(Uo(t))return t.filters.map((t=>zo(t))).join(",");{const e=t.filters.map((t=>zo(t))).join(",");return`${t.op}(${e})`}}function Go(t,e){return t instanceof Ro?function(t,e){return e instanceof Ro&&t.op===e.op&&t.field.isEqual(e.field)&&co(t.value,e.value)}(t,e):t instanceof Fo?function(t,e){return e instanceof Fo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Go(n,e.filters[i])),!0)}(t,e):void as()}function $o(t,e){const n=t.filters.concat(e);return Fo.create(n,t.op)}function qo(t){return t instanceof Ro?function(t){return`${t.field.canonicalString()} ${t.op} ${fo(t.value)}`}(t):t instanceof Fo?function(t){return t.op.toString()+" {"+t.getFilters().map(qo).join(" ,")+"}"}(t):"Filter"}class Wo extends Ro{constructor(t,e,n){super(t,e,n),this.key=Ds.fromName(n.referenceValue)}matches(t){const e=Ds.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ho extends Ro{constructor(t,e){super(t,"in",e),this.keys=Xo("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ko extends Ro{constructor(t,e){super(t,"not-in",e),this.keys=Xo("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Xo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Ds.fromName(t.referenceValue)))}class Yo extends Ro{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return yo(e)&&lo(e.arrayValue,this.value)}}class Qo extends Ro{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&lo(this.value.arrayValue,e)}}class Jo extends Ro{constructor(t,e){super(t,"not-in",e)}matches(t){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!lo(this.value.arrayValue,e)}}class Zo extends Ro{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!yo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>lo(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t,e=null,n=[],i=[],s=null,r=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.dt=null}}function ea(t,e=null,n=[],i=[],s=null,r=null,o=null){return new ta(t,e,n,i,s,r,o)}function na(t){const e=hs(t);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>zo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),rr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>fo(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>fo(t))).join(",")),e.dt=t}return e.dt}function ia(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Lo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Go(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mo(t.startAt,e.startAt)&&Mo(t.endAt,e.endAt)}function sa(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ra(t,e){return t.filters.filter((t=>t instanceof Ro&&t.field.isEqual(e)))}function oa(t,e,n){let i=oo,s=!0;for(const r of ra(t,e)){let t=oo,e=!0;switch(r.op){case"<":case"<=":t=To(r.value);break;case"==":case"in":case">=":t=r.value;break;case">":t=r.value,e=!1;break;case"!=":case"not-in":t=oo}Io({value:i,inclusive:s},{value:t,inclusive:e})<0&&(i=t,s=e)}if(null!==n)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const t=n.position[r];Io({value:i,inclusive:s},{value:t,inclusive:n.inclusive})<0&&(i=t,s=n.inclusive);break}return{value:i,inclusive:s}}function aa(t,e,n){let i=ro,s=!0;for(const r of ra(t,e)){let t=ro,e=!0;switch(r.op){case">=":case">":t=So(r.value),e=!1;break;case"==":case"in":case"<=":t=r.value;break;case"<":t=r.value,e=!1;break;case"!=":case"not-in":t=ro}ko({value:i,inclusive:s},{value:t,inclusive:e})>0&&(i=t,s=e)}if(null!==n)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const t=n.position[r];ko({value:i,inclusive:s},{value:t,inclusive:n.inclusive})>0&&(i=t,s=n.inclusive);break}return{value:i,inclusive:s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,e=null,n=[],i=[],s=null,r="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function la(t,e,n,i,s,r,o,a){return new ca(t,e,n,i,s,r,o,a)}function ha(t){return new ca(t)}function ua(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function da(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function fa(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function pa(t){return null!==t.collectionGroup}function ga(t){const e=hs(t);if(null===e.wt){e.wt=[];const t=fa(e),n=da(e);if(null!==t&&null===n)t.isKeyField()||e.wt.push(new Do(t)),e.wt.push(new Do(Ms.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.wt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Do(Ms.keyField(),t))}}}return e.wt}function ma(t){const e=hs(t);if(!e._t)if("F"===e.limitType)e._t=ea(e.path,e.collectionGroup,ga(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of ga(e)){const e="desc"===s.dir?"asc":"desc";t.push(new Do(s.field,e))}const n=e.endAt?new Oo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Oo(e.startAt.position,e.startAt.inclusive):null;e._t=ea(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e._t}function ya(t,e){e.getFirstInequalityField(),fa(t);const n=t.filters.concat([e]);return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function va(t,e,n){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ba(t,e){return ia(ma(t),ma(e))&&t.limitType===e.limitType}function wa(t){return`${na(ma(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>qo(t))).join(", ")}]`),rr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>fo(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>fo(t))).join(",")),`Target(${e})`}(ma(t))}; limitType=${t.limitType})`}function _a(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ds.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of ga(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Po(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,ga(t),e))&&!(t.endAt&&!function(t,e,n){const i=Po(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,ga(t),e))}(t,e)}function Ta(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sa(t){return(e,n)=>{let i=!1;for(const s of ga(t)){const t=Ia(s,e,n);if(0!==t)return t;i=i||s.field.isKeyField()}return 0}}function Ia(t,e,n){const i=t.field.isKeyField()?Ds.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),s=n.data.field(t);return null!==i&&null!==s?ho(i,s):as()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return as()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,s]of n)if(this.equalsFn(i,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){jr(this.inner,((e,n)=>{for(const[i,s]of n)t(i,s)}))}isEmpty(){return Br(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Ur(Ds.comparator);function Ca(){return Ea}const Aa=new Ur(Ds.comparator);function Oa(...t){let e=Aa;for(const n of t)e=e.insert(n.key,n);return e}function Pa(t){let e=Aa;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ma(){return La()}function Da(){return La()}function La(){return new ka((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Na=new Ur(Ds.comparator),Ra=new Gr(Ds.comparator);function Fa(...t){let e=Ra;for(const n of t)e=e.add(n);return e}const ja=new Gr(Ss);function Ba(){return ja}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:or(e)?"-0":e}}function Va(t){return{integerValue:""+t}}function za(t,e){return ar(e)?Va(e):Ua(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this._=void 0}}function $a(t,e,n){return t instanceof Ha?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&to(e)&&(e=eo(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ka?Xa(t,e):t instanceof Ya?Qa(t,e):function(t,e){const n=Wa(t,e),i=Za(n)+Za(t.gt);return mo(n)&&mo(t.gt)?Va(i):Ua(t.serializer,i)}(t,e)}function qa(t,e,n){return t instanceof Ka?Xa(t,e):t instanceof Ya?Qa(t,e):n}function Wa(t,e){return t instanceof Ja?mo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Ha extends Ga{}class Ka extends Ga{constructor(t){super(),this.elements=t}}function Xa(t,e){const n=tc(e);for(const i of t.elements)n.some((t=>co(t,i)))||n.push(i);return{arrayValue:{values:n}}}class Ya extends Ga{constructor(t){super(),this.elements=t}}function Qa(t,e){let n=tc(e);for(const i of t.elements)n=n.filter((t=>!co(t,i)));return{arrayValue:{values:n}}}class Ja extends Ga{constructor(t,e){super(),this.serializer=t,this.gt=e}}function Za(t){return Jr(t.integerValue||t.doubleValue)}function tc(t){return yo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t,e){this.field=t,this.transform=e}}function nc(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ka&&e instanceof Ka||t instanceof Ya&&e instanceof Ya?Is(t.elements,e.elements,co):t instanceof Ja&&e instanceof Ja?co(t.gt,e.gt):t instanceof Ha&&e instanceof Ha}(t.transform,e.transform)}class ic{constructor(t,e){this.version=t,this.transformResults=e}}class sc{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new sc}static exists(t){return new sc(void 0,t)}static updateTime(t){return new sc(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class oc{}function ac(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new yc(t.key,sc.none()):new dc(t.key,t.data,sc.none());{const n=t.data,i=Eo.empty();let s=new Gr(Ms.comparator);for(let t of e.fields)if(!s.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),s=s.add(t)}return new fc(t.key,i,new Wr(s.toArray()),sc.none())}}function cc(t,e,n){t instanceof dc?function(t,e,n){const i=t.value.clone(),s=gc(t.fieldTransforms,e,n.transformResults);i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof fc?function(t,e,n){if(!rc(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=gc(t.fieldTransforms,e,n.transformResults),s=e.data;s.setAll(pc(t)),s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,i){return t instanceof dc?function(t,e,n,i){if(!rc(t.precondition,e))return n;const s=t.value.clone(),r=mc(t.fieldTransforms,i,e);return s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null}(t,e,n,i):t instanceof fc?function(t,e,n,i){if(!rc(t.precondition,e))return n;const s=mc(t.fieldTransforms,i,e),r=e.data;return r.setAll(pc(t)),r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return rc(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function hc(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),s=Wa(i.transform,t||null);null!=s&&(null===n&&(n=Eo.empty()),n.set(i.field,s))}return n||null}function uc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Is(t,e,((t,e)=>nc(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dc extends oc{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fc extends oc{constructor(t,e,n,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pc(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function gc(t,e,n){const i=new Map;cs(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,qa(o,a,n[s]))}return i}function mc(t,e,n){const i=new Map;for(const s of t){const t=s.transform,r=n.data.field(s.field);i.set(s.field,$a(t,r,e))}return i}class yc extends oc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vc extends oc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&cc(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=lc(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=lc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Da();return this.mutations.forEach((i=>{const s=t.get(i.key),r=s.overlayedDocument;let o=this.applyToLocalView(r,s.mutatedFields);o=e.has(i.key)?null:o;const a=ac(r,o);null!==a&&n.set(i.key,a),r.isValidDocument()||r.convertToNoDocument(Cs.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Fa())}isEqual(t){return this.batchId===t.batchId&&Is(this.mutations,t.mutations,((t,e)=>uc(t,e)))&&Is(this.baseMutations,t.baseMutations,((t,e)=>uc(t,e)))}}class wc{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){cs(t.mutations.length===n.length);let i=Na;const s=t.mutations;for(let r=0;r<s.length;r++)i=i.insert(s[r].key,n[r].version);return new wc(t,e,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _c{constructor(t,e){this.count=t,this.unchangedNames=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tc,Sc;function Ic(t){switch(t){default:return as();case us.CANCELLED:case us.UNKNOWN:case us.DEADLINE_EXCEEDED:case us.RESOURCE_EXHAUSTED:case us.INTERNAL:case us.UNAVAILABLE:case us.UNAUTHENTICATED:return!1;case us.INVALID_ARGUMENT:case us.NOT_FOUND:case us.ALREADY_EXISTS:case us.PERMISSION_DENIED:case us.FAILED_PRECONDITION:case us.ABORTED:case us.OUT_OF_RANGE:case us.UNIMPLEMENTED:case us.DATA_LOSS:return!0}}function kc(t){if(void 0===t)return ss("GRPC error has no .code"),us.UNKNOWN;switch(t){case Tc.OK:return us.OK;case Tc.CANCELLED:return us.CANCELLED;case Tc.UNKNOWN:return us.UNKNOWN;case Tc.DEADLINE_EXCEEDED:return us.DEADLINE_EXCEEDED;case Tc.RESOURCE_EXHAUSTED:return us.RESOURCE_EXHAUSTED;case Tc.INTERNAL:return us.INTERNAL;case Tc.UNAVAILABLE:return us.UNAVAILABLE;case Tc.UNAUTHENTICATED:return us.UNAUTHENTICATED;case Tc.INVALID_ARGUMENT:return us.INVALID_ARGUMENT;case Tc.NOT_FOUND:return us.NOT_FOUND;case Tc.ALREADY_EXISTS:return us.ALREADY_EXISTS;case Tc.PERMISSION_DENIED:return us.PERMISSION_DENIED;case Tc.FAILED_PRECONDITION:return us.FAILED_PRECONDITION;case Tc.ABORTED:return us.ABORTED;case Tc.OUT_OF_RANGE:return us.OUT_OF_RANGE;case Tc.UNIMPLEMENTED:return us.UNIMPLEMENTED;case Tc.DATA_LOSS:return us.DATA_LOSS;default:return as()}}(Sc=Tc||(Tc={}))[Sc.OK=0]="OK",Sc[Sc.CANCELLED=1]="CANCELLED",Sc[Sc.UNKNOWN=2]="UNKNOWN",Sc[Sc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sc[Sc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sc[Sc.NOT_FOUND=5]="NOT_FOUND",Sc[Sc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sc[Sc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sc[Sc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sc[Sc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sc[Sc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sc[Sc.ABORTED=10]="ABORTED",Sc[Sc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sc[Sc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sc[Sc.INTERNAL=13]="INTERNAL",Sc[Sc.UNAVAILABLE=14]="UNAVAILABLE",Sc[Sc.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ec{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Cc}static getOrCreateInstance(){return null===Cc&&(Cc=new Ec),Cc}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach((e=>e(t)))}}let Cc=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Yi([4294967295,4294967295],0);function Pc(t){const e=Ac().encode(t),n=new Xi;return n.update(e),new Uint8Array(n.digest())}function Mc(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Yi([n,i],0),new Yi([s,r],0)]}class Dc{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Lc(`Invalid padding: ${e}`);if(n<0)throw new Lc(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Lc(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Lc(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=Yi.fromNumber(this.It)}Et(t,e,n){let i=t.add(e.multiply(Yi.fromNumber(n)));return 1===i.compare(Oc)&&(i=new Yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=Pc(t),[n,i]=Mc(e);for(let s=0;s<this.hashCount;s++){const t=this.Et(n,i,s);if(!this.At(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),r=new Dc(s,i,e);return n.forEach((t=>r.insert(t))),r}insert(t){if(0===this.It)return;const e=Pc(t),[n,i]=Mc(e);for(let s=0;s<this.hashCount;s++){const t=this.Et(n,i,s);this.Rt(t)}}Rt(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,e,n,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Rc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Nc(Cs.min(),i,new Ur(Ss),Ca(),Fa())}}class Rc{constructor(t,e,n,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Rc(n,e,Fa(),Fa(),Fa())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,e,n,i){this.Pt=t,this.removedTargetIds=e,this.key=n,this.bt=i}}class jc{constructor(t,e){this.targetId=t,this.Vt=e}}class Bc{constructor(t,e,n=Xr.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Uc{constructor(){this.St=0,this.Dt=Gc(),this.Ct=Xr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=Fa(),e=Fa(),n=Fa();return this.Dt.forEach(((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:as()}})),new Rc(this.Ct,this.xt,t,e,n)}Ft(){this.Nt=!1,this.Dt=Gc()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Vc{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=Ca(),this.zt=zc(),this.Wt=new Ur(Ss)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,(e=>{const n=this.Zt(e);switch(t.state){case 0:this.te(e)&&n.$t(t.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(t.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(e);break;case 3:this.te(e)&&(n.Kt(),n.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),n.$t(t.resumeToken));break;default:as()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach(((t,n)=>{this.te(n)&&e(n)}))}ne(t){var e;const n=t.targetId,i=t.Vt.count,s=this.se(n);if(s){const r=s.target;if(sa(r))if(0===i){const t=new Ds(r.path);this.Yt(n,t,Ao.newNoDocument(t,Cs.min()))}else cs(1===i);else{const s=this.ie(n);if(s!==i){const i=this.re(t,s);if(0!==i){this.ee(n);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,t)}null===(e=Ec.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(t,e,n){var i,s,r,o,a,c;const l={localCacheCount:e,existenceFilterCount:n.count},h=n.unchangedNames;return h&&(l.bloomFilter={applied:0===t,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===(r=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===r?void 0:r.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),l}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i,s,t.Vt))}}}}re(t,e){const{unchangedNames:n,count:i}=t.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:r=0},hashCount:o=0}=n;let a,c;try{a=Zr(s).toUint8Array()}catch(t){if(t instanceof Hr)return rs("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw t}try{c=new Dc(a,r,o)}catch(t){return rs(t instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",t),1}return 0===c.It?1:i!==e-this.oe(t.targetId,c)?2:0}oe(t,e){const n=this.Gt.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const s=this.Gt.ue(),r=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.vt(r)||(this.Yt(t,n,null),i++)})),i}ce(t){const e=new Map;this.Qt.forEach(((n,i)=>{const s=this.se(i);if(s){if(n.current&&sa(s.target)){const e=new Ds(s.target.path);null!==this.jt.get(e)||this.ae(i,e)||this.Yt(i,e,Ao.newNoDocument(e,t))}n.Mt&&(e.set(i,n.Ot()),n.Ft())}}));let n=Fa();this.zt.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.se(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.jt.forEach(((e,n)=>n.setReadTime(t)));const i=new Nc(t,e,this.Wt,this.jt,n);return this.jt=Ca(),this.zt=zc(),this.Wt=new Ur(Ss),i}Jt(t,e){if(!this.te(t))return;const n=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,n),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,n){if(!this.te(t))return;const i=this.Zt(t);this.ae(t,e)?i.Bt(e,1):i.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),n&&(this.jt=this.jt.insert(e,n))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new Uc,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new Gr(Ss),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||is("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new Uc),this.Gt.getRemoteKeysForTarget(t).forEach((e=>{this.Yt(t,e,null)}))}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function zc(){return new Ur(Ds.comparator)}function Gc(){return new Ur(Ds.comparator)}const $c=(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"};return t})(),qc=(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return t})(),Wc=(()=>{const t={and:"AND",or:"OR"};return t})();class Hc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Kc(t,e){return t.useProto3Json||rr(e)?e:{value:e}}function Xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Qc(t,e){return Xc(t,e.toTimestamp())}function Jc(t){return cs(!!t),Cs.fromTimestamp(function(t){const e=Qr(t);return new Es(e.seconds,e.nanos)}(t))}function Zc(t,e){return function(t){return new Os(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function tl(t){const e=Os.fromString(t);return cs(kl(e)),e}function el(t,e){return Zc(t.databaseId,e.path)}function nl(t,e){const n=tl(e);if(n.get(1)!==t.databaseId.projectId)throw new ds(us.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ds(us.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ds(ol(n))}function il(t,e){return Zc(t.databaseId,e)}function sl(t){const e=tl(t);return 4===e.length?Os.emptyPath():ol(e)}function rl(t){return new Os(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ol(t){return cs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function al(t,e,n){return{name:el(t,e),fields:n.value.mapValue.fields}}function cl(t,e,n){const i=nl(t,e.name),s=Jc(e.updateTime),r=e.createTime?Jc(e.createTime):Cs.min(),o=new Eo({mapValue:{fields:e.fields}}),a=Ao.newFoundDocument(i,s,r,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ll(t,e){return"found"in e?function(t,e){cs(!!e.found),e.found.name,e.found.updateTime;const n=nl(t,e.found.name),i=Jc(e.found.updateTime),s=e.found.createTime?Jc(e.found.createTime):Cs.min(),r=new Eo({mapValue:{fields:e.found.fields}});return Ao.newFoundDocument(n,i,s,r)}(t,e):"missing"in e?function(t,e){cs(!!e.missing),cs(!!e.readTime);const n=nl(t,e.missing),i=Jc(e.readTime);return Ao.newNoDocument(n,i)}(t,e):as()}function hl(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:as()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(t,e){return t.useProto3Json?(cs(void 0===e||"string"==typeof e),Xr.fromBase64String(e||"")):(cs(void 0===e||e instanceof Uint8Array),Xr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?us.UNKNOWN:kc(t.code);return new ds(e,t.message||"")}(o);n=new Bc(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=nl(t,i.document.name),r=Jc(i.document.updateTime),o=i.document.createTime?Jc(i.document.createTime):Cs.min(),a=new Eo({mapValue:{fields:i.document.fields}}),c=Ao.newFoundDocument(s,r,o,a),l=i.targetIds||[],h=i.removedTargetIds||[];n=new Fc(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=nl(t,i.document),r=i.readTime?Jc(i.readTime):Cs.min(),o=Ao.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Fc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=nl(t,i.document),r=i.removedTargetIds||[];n=new Fc([],r,s,null)}else{if(!("filter"in e))return as();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:s}=t,r=new _c(i,s),o=t.targetId;n=new jc(o,r)}}return n}function ul(t,e){let n;if(e instanceof dc)n={update:al(t,e.key,e.value)};else if(e instanceof yc)n={delete:el(t,e.key)};else if(e instanceof fc)n={update:al(t,e.key,e.data),updateMask:Il(e.fieldMask)};else{if(!(e instanceof vc))return as();n={verify:el(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Ha)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ka)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ya)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ja)return{fieldPath:e.field.canonicalString(),increment:n.gt};throw as()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Qc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:as()}(t,e.precondition)),n}function dl(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?sc.updateTime(Jc(t.updateTime)):void 0!==t.exists?sc.exists(t.exists):sc.none()}(e.currentDocument):sc.none(),i=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)cs("REQUEST_TIME"===e.setToServerValue),n=new Ha;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new Ka(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new Ya(t)}else"increment"in e?n=new Ja(t,e.increment):as();const i=Ms.fromServerFormat(e.fieldPath);return new ec(i,n)}(t,e))):[];if(e.update){e.update.name;const s=nl(t,e.update.name),r=new Eo({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new Wr(e.map((t=>Ms.fromServerFormat(t))))}(e.updateMask);return new fc(s,r,t,n,i)}return new dc(s,r,n,i)}if(e.delete){const i=nl(t,e.delete);return new yc(i,n)}if(e.verify){const i=nl(t,e.verify);return new vc(i,n)}return as()}function fl(t,e){return t&&t.length>0?(cs(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Jc(t.updateTime):Jc(e);return n.isEqual(Cs.min())&&(n=Jc(e)),new ic(n,t.transformResults||[])}(t,e)))):[]}function pl(t,e){return{documents:[il(t,e.path)]}}function gl(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=il(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=il(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(t){if(0!==t.length)return Sl(Fo.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const r=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:_l(t.field),direction:bl(t.dir)}}(t)))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=Kc(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function ml(t){let e=sl(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){cs(1===i);const t=n.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=function(t){const e=vl(t);return e instanceof Fo&&Uo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Do(Tl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,rr(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Oo(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Oo(n,e)}(n.endAt)),la(e,s,o,r,a,"F",c,l)}function yl(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return as()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}function vl(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Tl(t.unaryFilter.field);return Ro.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Tl(t.unaryFilter.field);return Ro.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Tl(t.unaryFilter.field);return Ro.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Tl(t.unaryFilter.field);return Ro.create(s,"!=",{nullValue:"NULL_VALUE"});default:return as()}}(t):void 0!==t.fieldFilter?function(t){return Ro.create(Tl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return as()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Fo.create(t.compositeFilter.filters.map((t=>vl(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return as()}}(t.compositeFilter.op))}(t):as()}function bl(t){return $c[t]}function wl(t){return qc[t]}function xl(t){return Wc[t]}function _l(t){return{fieldPath:t.canonicalString()}}function Tl(t){return Ms.fromServerFormat(t.fieldPath)}function Sl(t){return t instanceof Ro?function(t){if("=="===t.op){if(bo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(vo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(bo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(vo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:wl(t.op),value:t.value}}}(t):t instanceof Fo?function(t){const e=t.getFilters().map((t=>Sl(t)));return 1===e.length?e[0]:{compositeFilter:{op:xl(t.op),filters:e}}}(t):as()}function Il(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function kl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,e,n,i,s=Cs.min(),r=Cs.min(),o=Xr.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new El(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new El(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t){this.fe=t}}function Al(t,e){let n;if(e.document)n=cl(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=Ds.fromSegments(e.noDocument.path),i=Dl(e.noDocument.readTime);n=Ao.newNoDocument(t,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return as();{const t=Ds.fromSegments(e.unknownDocument.path),i=Dl(e.unknownDocument.version);n=Ao.newUnknownDocument(t,i)}}return e.readTime&&n.setReadTime(function(t){const e=new Es(t[0],t[1]);return Cs.fromTimestamp(e)}(e.readTime)),n}function Ol(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(t,e){return{name:el(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Xc(t,e.version.toTimestamp()),createTime:Xc(t,e.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Ml(e.version)};else{if(!e.isUnknownDocument())return as();i.unknownDocument={path:n.path.toArray(),version:Ml(e.version)}}return i}function Pl(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ml(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dl(t){const e=new Es(t.seconds,t.nanoseconds);return Cs.fromTimestamp(e)}function Ll(t,e){const n=(e.baseMutations||[]).map((e=>dl(t.fe,e)));for(let r=0;r<e.mutations.length-1;++r){const t=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){const n=e.mutations[r+1];t.updateTransforms=n.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}const i=e.mutations.map((e=>dl(t.fe,e))),s=Es.fromMillis(e.localWriteTimeMs);return new bc(e.batchId,s,n,i)}function Nl(t){const e=Dl(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Dl(t.lastLimboFreeSnapshotVersion):Cs.min();let i;var s;return void 0!==t.query.documents?(cs(1===(s=t.query).documents.length),i=ma(ha(sl(s.documents[0])))):i=function(t){return ma(ml(t))}(t.query),new El(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Xr.fromBase64String(t.resumeToken))}function Rl(t,e){const n=Ml(e.snapshotVersion),i=Ml(e.lastLimboFreeSnapshotVersion);let s;s=sa(e.target)?pl(t.fe,e.target):gl(t.fe,e.target);const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:na(e.target),readTime:n,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function Fl(t){const e=ml({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?va(e,e.limit,"L"):e}function jl(t,e){return new xc(e.largestBatchId,dl(t.fe,e.overlayMutation))}function Bl(t,e){const n=e.path.lastSegment();return[t,cr(e.path.popLast()),n]}function Ul(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ml(i.readTime),documentKey:cr(i.documentKey.path),largestBatchId:i.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{getBundleMetadata(t,e){return zl(t).get(e).next((t=>{if(t)return{id:(e=t).bundleId,createTime:Dl(e.createTime),version:e.version};var e}))}saveBundleMetadata(t,e){return zl(t).put({bundleId:(n=e).id,createTime:Ml(Jc(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return Gl(t).get(e).next((t=>{if(t)return{name:(e=t).name,query:Fl(e.bundledQuery),readTime:Dl(e.readTime)};var e}))}saveNamedQuery(t,e){return Gl(t).put(function(t){return{name:t.name,readTime:Ml(Jc(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function zl(t){return Rr(t,"bundles")}function Gl(t){return Rr(t,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){const n=e.uid||"";return new $l(t,n)}getOverlay(t,e){return ql(t).get(Bl(this.userId,e)).next((t=>t?jl(this.serializer,t):null))}getOverlays(t,e){const n=Ma();return Ws.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){const i=[];return n.forEach(((n,s)=>{const r=new xc(e,s);i.push(this.we(t,r))})),Ws.waitFor(i)}removeOverlaysForBatchId(t,e,n){const i=new Set;e.forEach((t=>i.add(cr(t.getCollectionPath()))));const s=[];return i.forEach((e=>{const i=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);s.push(ql(t).J("collectionPathOverlayIndex",i))})),Ws.waitFor(s)}getOverlaysForCollection(t,e,n){const i=Ma(),s=cr(e),r=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ql(t).j("collectionPathOverlayIndex",r).next((t=>{for(const e of t){const t=jl(this.serializer,e);i.set(t.getKey(),t)}return i}))}getOverlaysForCollectionGroup(t,e,n,i){const s=Ma();let r;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ql(t).X({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=jl(this.serializer,e);s.size()<i||o.largestBatchId===r?(s.set(o.getKey(),o),r=o.largestBatchId):n.done()})).next((()=>s))}we(t,e){return ql(t).put(function(t,e,n){const[i,s,r]=Bl(e,n.mutation.key);return{userId:e,collectionPath:s,documentId:r,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ul(t.fe,n.mutation)}}(this.serializer,this.userId,e))}}function ql(t){return Rr(t,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(Jr(t.integerValue));else if("doubleValue"in t){const n=Jr(t.doubleValue);isNaN(n)?this.ye(e,13):(this.ye(e,15),or(n)?e.pe(0):e.pe(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ye(e,20),"string"==typeof n?e.Ie(n):(e.Ie(`${n.seconds||""}`),e.pe(n.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(Zr(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ye(e,45),e.pe(n.latitude||0),e.pe(n.longitude||0)}else"mapValue"in t?_o(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):as()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const n=t.fields||{};this.ye(e,55);for(const i of Object.keys(n))this.Te(i,e),this.me(n[i],e)}Pe(t,e){const n=t.values||[];this.ye(e,50);for(const i of n)this.me(i,e)}ve(t,e){this.ye(e,37),Ds.fromName(t).path.forEach((t=>{this.ye(e,60),this.be(t,e)}))}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function Hl(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Kl(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const i=Hl(255&t[n]);if(e+=i,8!==i)break}return e}(t);return Math.ceil(e/8)}Wl.Ve=new Wl;class Xl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.De(n.value),n=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Ne(n.value),n=e.next();this.ke()}Me(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.De(t);else if(t<2048)this.De(960|t>>>6),this.De(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.De(480|t>>>12),this.De(128|63&t>>>6),this.De(128|63&t);else{const t=e.codePointAt(0);this.De(240|t>>>18),this.De(128|63&t>>>12),this.De(128|63&t>>>6),this.De(128|63&t)}}this.Ce()}$e(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Ne(t);else if(t<2048)this.Ne(960|t>>>6),this.Ne(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|t>>>12),this.Ne(128|63&t>>>6),this.Ne(128|63&t);else{const t=e.codePointAt(0);this.Ne(240|t>>>18),this.Ne(128|63&t>>>12),this.Ne(128|63&t>>>6),this.Ne(128|63&t)}}this.ke()}Oe(t){const e=this.Fe(t),n=Kl(e);this.Be(1+n),this.buffer[this.position++]=255&n;for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Le(t){const e=this.Fe(t),n=Kl(e);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let i=1;i<e.length;++i)e[i]^=n?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Yl{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class Ql{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class Jl{constructor(){this.je=new Xl,this.ze=new Yl(this.je),this.We=new Ql(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new Zl(this.indexId,this.documentKey,this.arrayValue,n)}}function th(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=eh(t.arrayValue,e.arrayValue),0!==n?n:(n=eh(t.directionalValue,e.directionalValue),0!==n?n:Ds.comparator(t.documentKey,e.documentKey)))}function eh(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(0!==i)return i}return t.length-e.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const t=e;t.isInequality()?this.Ze=t:this.Xe.push(t)}}tn(t){cs(t.collectionGroup===this.collectionId);const e=Ns(t);if(void 0!==e&&!this.en(e))return!1;const n=Rs(t);let i=0,s=0;for(;i<n.length&&this.en(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Ze){const t=n[i];if(!this.nn(this.Ze,t)||!this.sn(this.Ye[s++],t))return!1;++i}for(;i<n.length;++i){const t=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],t))return!1}return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t){var e,n;if(cs(t instanceof Ro||t instanceof Fo),t instanceof Ro){if(t instanceof Qo){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map((e=>Ro.create(t.field,"==",e))))||[];return Fo.create(i,"or")}return t}const i=t.filters.map((t=>ih(t)));return Fo.create(i,t.op)}function sh(t){if(0===t.getFilters().length)return[];const e=ch(ih(t));return cs(ah(e)),rh(e)||oh(e)?[e]:e.getFilters()}function rh(t){return t instanceof Ro}function oh(t){return t instanceof Fo&&Uo(t)}function ah(t){return rh(t)||oh(t)||function(t){if(t instanceof Fo&&Bo(t)){for(const e of t.getFilters())if(!rh(e)&&!oh(e))return!1;return!0}return!1}(t)}function ch(t){if(cs(t instanceof Ro||t instanceof Fo),t instanceof Ro)return t;if(1===t.filters.length)return ch(t.filters[0]);const e=t.filters.map((t=>ch(t)));let n=Fo.create(e,t.op);return n=uh(n),ah(n)?n:(cs(n instanceof Fo),cs(jo(n)),cs(n.filters.length>1),n.filters.reduce(((t,e)=>lh(t,e))))}function lh(t,e){let n;return cs(t instanceof Ro||t instanceof Fo),cs(e instanceof Ro||e instanceof Fo),n=t instanceof Ro?e instanceof Ro?function(t,e){return Fo.create([t,e],"and")}(t,e):hh(t,e):e instanceof Ro?hh(e,t):function(t,e){if(cs(t.filters.length>0&&e.filters.length>0),jo(t)&&jo(e))return $o(t,e.getFilters());const n=Bo(t)?t:e,i=Bo(t)?e:t,s=n.filters.map((t=>lh(t,i)));return Fo.create(s,"or")}(t,e),uh(n)}function hh(t,e){if(jo(e))return $o(e,t.getFilters());{const n=e.filters.map((e=>lh(t,e)));return Fo.create(n,"or")}}function uh(t){if(cs(t instanceof Ro||t instanceof Fo),t instanceof Ro)return t;const e=t.getFilters();if(1===e.length)return uh(e[0]);if(Vo(t))return t;const n=e.map((t=>uh(t))),i=[];return n.forEach((e=>{e instanceof Ro?i.push(e):e instanceof Fo&&(e.op===t.op?i.push(...e.filters):i.push(e))})),1===i.length?i[0]:Fo.create(i,t.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class dh{constructor(){this.rn=new fh}addToCollectionParentIndex(t,e){return this.rn.add(e),Ws.resolve()}getCollectionParents(t,e){return Ws.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return Ws.resolve()}deleteFieldIndex(t,e){return Ws.resolve()}getDocumentsMatchingTarget(t,e){return Ws.resolve(null)}getIndexType(t,e){return Ws.resolve(0)}getFieldIndexes(t,e){return Ws.resolve([])}getNextCollectionGroupToUpdate(t){return Ws.resolve(null)}getMinOffset(t,e){return Ws.resolve(Vs.min())}getMinOffsetFromCollectionGroup(t,e){return Ws.resolve(Vs.min())}updateCollectionGroup(t,e,n){return Ws.resolve()}updateIndexEntries(t,e){return Ws.resolve()}}class fh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Gr(Os.comparator),s=!i.has(n);return this.index[e]=i.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Gr(Os.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new Uint8Array(0);class gh{constructor(t,e){this.user=t,this.databaseId=e,this.on=new fh,this.un=new ka((t=>na(t)),((t,e)=>ia(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((()=>{this.on.add(e)}));const s={collectionId:n,parent:cr(i)};return mh(t).put(s)}return Ws.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[ks(e),""],!1,!0);return mh(t).j(i).next((t=>{for(const i of t){if(i.collectionId!==e)break;n.push(ur(i.parent))}return n}))}addFieldIndex(t,e){const n=vh(t),i=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);delete i.indexId;const s=n.add(i);if(e.indexState){const n=bh(t);return s.next((t=>{n.put(Ul(t,this.user,e.indexState.sequenceNumber,e.indexState.offset))}))}return s.next()}deleteFieldIndex(t,e){const n=vh(t),i=bh(t),s=yh(t);return n.delete(e.indexId).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}getDocumentsMatchingTarget(t,e){const n=yh(t);let i=!0;const s=new Map;return Ws.forEach(this.cn(e),(e=>this.an(t,e).next((t=>{i&&(i=!!t),s.set(e,t)})))).next((()=>{if(i){let t=Fa();const i=[];return Ws.forEach(s,((s,r)=>{var o;is("IndexedDbIndexManager",`Using index ${o=s,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`} to execute ${na(e)}`);const a=function(t,e){const n=Ns(e);if(void 0===n)return null;for(const i of ra(t,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(r,s),c=function(t,e){const n=new Map;for(const i of Rs(e))for(const e of ra(t,i.fieldPath))switch(e.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(r,s),l=function(t,e){const n=[];let i=!0;for(const s of Rs(e)){const e=0===s.kind?oa(t,s.fieldPath,t.startAt):aa(t,s.fieldPath,t.startAt);n.push(e.value),i&&(i=e.inclusive)}return new Oo(n,i)}(r,s),h=function(t,e){const n=[];let i=!0;for(const s of Rs(e)){const e=0===s.kind?aa(t,s.fieldPath,t.endAt):oa(t,s.fieldPath,t.endAt);n.push(e.value),i&&(i=e.inclusive)}return new Oo(n,i)}(r,s),u=this.hn(s,r,l),d=this.hn(s,r,h),f=this.ln(s,r,c),p=this.fn(s.indexId,a,u,l.inclusive,d,h.inclusive,f);return Ws.forEach(p,(s=>n.H(s,e.limit).next((e=>{e.forEach((e=>{const n=Ds.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),i.push(n))}))}))))})).next((()=>i))}return Ws.resolve(null)}))}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:sh(Fo.create(t.filters,"and")).map((e=>ea(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt))),this.un.set(t,e),e)}fn(t,e,n,i,s,r,o){const a=(null!=e?e.length:1)*Math.max(n.length,s.length),c=a/(null!=e?e.length:1),l=[];for(let h=0;h<a;++h){const a=e?this.dn(e[h/c]):ph,u=this.wn(t,a,n[h%c],i),d=this._n(t,a,s[h%c],r),f=o.map((e=>this.wn(t,a,e,!0)));l.push(...this.createRange(u,d,f))}return l}wn(t,e,n,i){const s=new Zl(t,Ds.empty(),e,n);return i?s:s.Je()}_n(t,e,n,i){const s=new Zl(t,Ds.empty(),e,n);return i?s.Je():s}an(t,e){const n=new nh(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next((t=>{let e=null;for(const i of t)n.tn(i)&&(!e||i.fields.length>e.fields.length)&&(e=i);return e}))}getIndexType(t,e){let n=2;const i=this.cn(e);return Ws.forEach(i,(e=>this.an(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new Gr(Ms.comparator),n=!1;for(const i of t.filters)for(const t of i.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const i of t.orderBy)i.field.isKeyField()||(e=e.add(i.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>function(t){return null!==t.limit}(e)&&i.length>1&&2===n?1:n))}mn(t,e){const n=new Jl;for(const i of Rs(t)){const t=e.data.field(i.fieldPath);if(null==t)return null;const s=n.He(i.kind);Wl.Ve._e(t,s)}return n.Qe()}dn(t){const e=new Jl;return Wl.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const n=new Jl;return Wl.Ve._e(go(this.databaseId,e),n.He(function(t){const e=Rs(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Qe()}ln(t,e,n){if(null===n)return[];let i=[];i.push(new Jl);let s=0;for(const r of Rs(t)){const t=n[s++];for(const n of i)if(this.yn(e,r.fieldPath)&&yo(t))i=this.pn(i,r,t);else{const e=n.He(r.kind);Wl.Ve._e(t,e)}}return this.In(i)}hn(t,e,n){return this.ln(t,e,n.position)}In(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Qe();return e}pn(t,e,n){const i=[...t],s=[];for(const r of n.arrayValue.values||[])for(const t of i){const n=new Jl;n.seed(t.Qe()),Wl.Ve._e(r,n.He(e.kind)),s.push(n)}return s}yn(t,e){return!!t.filters.find((t=>t instanceof Ro&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=vh(t),i=bh(t);return(e?n.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.j()).next((t=>{const e=[];return Ws.forEach(t,(t=>i.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new js(e.sequenceNumber,new Vs(Dl(e.readTime),new Ds(ur(e.documentKey)),e.largestBatchId)):js.empty(),i=t.fields.map((([t,e])=>new Fs(Ms.fromServerFormat(t),e)));return new Ls(t.indexId,t.collectionGroup,i,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:Ss(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const i=vh(t),s=bh(t);return this.Tn(t).next((t=>i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>Ws.forEach(e,(e=>s.put(Ul(e.indexId,this.user,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return Ws.forEach(e,((e,i)=>{const s=n.get(e.collectionGroup);return(s?Ws.resolve(s):this.getFieldIndexes(t,e.collectionGroup)).next((s=>(n.set(e.collectionGroup,s),Ws.forEach(s,(n=>this.En(t,e,n).next((e=>{const s=this.An(i,n);return e.isEqual(s)?Ws.resolve():this.vn(t,i,n,e,s)})))))))}))}Rn(t,e,n,i){return yh(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(n,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,n,i){return yh(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(n,e.key),e.key.path.toArray()])}En(t,e,n){const i=yh(t);let s=new Gr(th);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,e)])},((t,i)=>{s=s.add(new Zl(n.indexId,e,i.arrayValue,i.directionalValue))})).next((()=>s))}An(t,e){let n=new Gr(th);const i=this.mn(e,t);if(null==i)return n;const s=Ns(e);if(null!=s){const r=t.data.field(s.fieldPath);if(yo(r))for(const s of r.arrayValue.values||[])n=n.add(new Zl(e.indexId,t.key,this.dn(s),i))}else n=n.add(new Zl(e.indexId,t.key,ph,i));return n}vn(t,e,n,i,s){is("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const r=[];return function(t,e,n,i,s){const r=t.getIterator(),o=e.getIterator();let a=qr(r),c=qr(o);for(;a||c;){let t=!1,e=!1;if(a&&c){const i=n(a,c);i<0?e=!0:i>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(i(c),c=qr(o)):e?(s(a),a=qr(r)):(a=qr(r),c=qr(o))}}(i,s,th,(i=>{r.push(this.Rn(t,e,n,i))}),(i=>{r.push(this.Pn(t,e,n,i))})),Ws.waitFor(r)}Tn(t){let e=1;return bh(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,i)=>{i.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>th(t,e))).filter(((t,e,n)=>!e||0!==th(t,n[e-1])));const i=[];i.push(t);for(const r of n){const n=th(r,t),s=th(r,e);if(0===n)i[0]=t.Je();else if(n>0&&s<0)i.push(r),i.push(r.Je());else if(s>0)break}i.push(e);const s=[];for(let r=0;r<i.length;r+=2){if(this.bn(i[r],i[r+1]))return[];const t=[i[r].indexId,this.uid,i[r].arrayValue,i[r].directionalValue,ph,[]],e=[i[r+1].indexId,this.uid,i[r+1].arrayValue,i[r+1].directionalValue,ph,[]];s.push(IDBKeyRange.bound(t,e))}return s}bn(t,e){return th(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(wh)}getMinOffset(t,e){return Ws.mapArray(this.cn(e),(e=>this.an(t,e).next((t=>t||as())))).next(wh)}}function mh(t){return Rr(t,"collectionParents")}function yh(t){return Rr(t,"indexEntries")}function vh(t){return Rr(t,"indexConfiguration")}function bh(t){return Rr(t,"indexState")}function wh(t){cs(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const s=t[i].indexState.offset;zs(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Vs(e.readTime,e.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _h{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new _h(t,_h.DEFAULT_COLLECTION_PERCENTILE,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t,e,n){const i=t.store("mutations"),s=t.store("documentMutations"),r=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=i.X({range:o},((t,e,n)=>(a++,n.delete())));r.push(c.next((()=>{cs(1===a)})));const l=[];for(const h of n.mutations){const t=pr(e,h.key.path,n.batchId);r.push(s.delete(t)),l.push(h.key)}return Ws.waitFor(r).next((()=>l))}function Sh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw as();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_h.DEFAULT_COLLECTION_PERCENTILE=10,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_h.DEFAULT=new _h(41943040,_h.DEFAULT_COLLECTION_PERCENTILE,_h.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_h.DISABLED=new _h(-1,0,0);class Ih{constructor(t,e,n,i){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=i,this.Vn={}}static de(t,e,n,i){cs(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new Ih(s,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Eh(t).X({index:"userMutationsIndex",range:n},((t,n,i)=>{e=!1,i.done()})).next((()=>e))}addMutationBatch(t,e,n,i){const s=Ch(t),r=Eh(t);return r.add({}).next((o=>{cs("number"==typeof o);const a=new bc(o,e,n,i),c=function(t,e,n){const i=n.baseMutations.map((e=>ul(t.fe,e))),s=n.mutations.map((e=>ul(t.fe,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:s}}(this.serializer,this.userId,a),l=[];let h=new Gr(((t,e)=>Ss(t.canonicalString(),e.canonicalString())));for(const t of i){const e=pr(this.userId,t.key.path,o);h=h.add(t.key.path.popLast()),l.push(r.put(c)),l.push(s.put(e,gr))}return h.forEach((e=>{l.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),Ws.waitFor(l).next((()=>a))}))}lookupMutationBatch(t,e){return Eh(t).get(e).next((t=>t?(cs(t.userId===this.userId),Ll(this.serializer,t)):null))}Sn(t,e){return this.Vn[e]?Ws.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.Vn[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Eh(t).X({index:"userMutationsIndex",range:i},((t,e,i)=>{e.userId===this.userId&&(cs(e.batchId>=n),s=Ll(this.serializer,e)),i.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Eh(t).X({index:"userMutationsIndex",range:e,reverse:!0},((t,e,i)=>{n=e.batchId,i.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Eh(t).j("userMutationsIndex",e).next((t=>t.map((t=>Ll(this.serializer,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=fr(this.userId,e.path),i=IDBKeyRange.lowerBound(n),s=[];return Ch(t).X({range:i},((n,i,r)=>{const[o,a,c]=n,l=ur(a);if(o===this.userId&&e.path.isEqual(l))return Eh(t).get(c).next((t=>{if(!t)throw as();cs(t.userId===this.userId),s.push(Ll(this.serializer,t))}));r.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Gr(Ss);const i=[];return e.forEach((e=>{const s=fr(this.userId,e.path),r=IDBKeyRange.lowerBound(s),o=Ch(t).X({range:r},((t,i,s)=>{const[r,o,a]=t,c=ur(o);r===this.userId&&e.path.isEqual(c)?n=n.add(a):s.done()}));i.push(o)})),Ws.waitFor(i).next((()=>this.Dn(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,s=fr(this.userId,n),r=IDBKeyRange.lowerBound(s);let o=new Gr(Ss);return Ch(t).X({range:r},((t,e,s)=>{const[r,a,c]=t,l=ur(a);r===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(c)):s.done()})).next((()=>this.Dn(t,o)))}Dn(t,e){const n=[],i=[];return e.forEach((e=>{i.push(Eh(t).get(e).next((t=>{if(null===t)throw as();cs(t.userId===this.userId),n.push(Ll(this.serializer,t))})))})),Ws.waitFor(i).next((()=>n))}removeMutationBatch(t,e){return Th(t.ht,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.Cn(e.batchId)})),Ws.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return Ws.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return Ch(t).X({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=ur(t[1]);i.push(e)}else n.done()})).next((()=>{cs(0===i.length)}))}))}containsKey(t,e){return kh(t,this.userId,e)}xn(t){return Ah(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function kh(t,e,n){const i=fr(e,n.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return Ch(t).X({range:r,Y:!0},((t,n,i)=>{const[r,a,c]=t;r===e&&a===s&&(o=!0),i.done()})).next((()=>o))}function Eh(t){return Rr(t,"mutations")}function Ch(t){return Rr(t,"documentMutations")}function Ah(t){return Rr(t,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Oh(0)}static Mn(){return new Oh(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next((e=>{const n=new Oh(e.highestTargetId);return e.highestTargetId=n.next(),this.On(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.$n(t).next((t=>Cs.fromTimestamp(new Es(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.$n(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.$n(t).next((i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.On(t,i))))}addTargetData(t,e){return this.Fn(t,e).next((()=>this.$n(t).next((n=>(n.targetCount+=1,this.Bn(e,n),this.On(t,n))))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Mh(t).delete(e.targetId))).next((()=>this.$n(t))).next((e=>(cs(e.targetCount>0),e.targetCount-=1,this.On(t,e))))}removeTargets(t,e,n){let i=0;const s=[];return Mh(t).X(((r,o)=>{const a=Nl(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,s.push(this.removeTargetData(t,a)))})).next((()=>Ws.waitFor(s))).next((()=>i))}forEachTarget(t,e){return Mh(t).X(((t,n)=>{const i=Nl(n);e(i)}))}$n(t){return Dh(t).get("targetGlobalKey").next((t=>(cs(null!==t),t)))}On(t,e){return Dh(t).put("targetGlobalKey",e)}Fn(t,e){return Mh(t).put(Rl(this.serializer,e))}Bn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.$n(t).next((t=>t.targetCount))}getTargetData(t,e){const n=na(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Mh(t).X({range:i,index:"queryTargetsIndex"},((t,n,i)=>{const r=Nl(n);ia(e,r.target)&&(s=r,i.done())})).next((()=>s))}addMatchingKeys(t,e,n){const i=[],s=Lh(t);return e.forEach((e=>{const r=cr(e.path);i.push(s.put({targetId:n,path:r})),i.push(this.referenceDelegate.addReference(t,n,e))})),Ws.waitFor(i)}removeMatchingKeys(t,e,n){const i=Lh(t);return Ws.forEach(e,(e=>{const s=cr(e.path);return Ws.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=Lh(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=Lh(t);let s=Fa();return i.X({range:n,Y:!0},((t,e,n)=>{const i=ur(t[1]),r=new Ds(i);s=s.add(r)})).next((()=>s))}containsKey(t,e){const n=cr(e.path),i=IDBKeyRange.bound([n],[ks(n)],!1,!0);let s=0;return Lh(t).X({index:"documentTargetsIndex",Y:!0,range:i},(([t,e],n,i)=>{0!==t&&(s++,i.done())})).next((()=>s>0))}le(t,e){return Mh(t).get(e).next((t=>t?Nl(t):null))}}function Mh(t){return Rr(t,"targets")}function Dh(t){return Rr(t,"targetGlobal")}function Lh(t){return Rr(t,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh([t,e],[n,i]){const s=Ss(t,n);return 0===s?Ss(e,i):s}class Rh{constructor(t){this.Ln=t,this.buffer=new Gr(Nh),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Nh(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Fh{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){is("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qs(t)?is("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await qs(t)}await this.Qn(3e5)}))}}class jh{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return Ws.resolve(sr.ct);const n=new Rh(e);return this.jn.forEachTarget(t,(t=>n.Kn(t.sequenceNumber))).next((()=>this.jn.Wn(t,(t=>n.Kn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.jn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(is("LruGarbageCollector","Garbage collection skipped; disabled"),Ws.resolve(xh)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(is("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xh):this.Hn(t,e)))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let n,i,s,r,o,c,l;const h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(is("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,r=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,o=Date.now(),this.removeTargets(t,n,e)))).next((e=>(s=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(l=Date.now(),es()<=a["in"].DEBUG&&is("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-h}ms\n\tDetermined least recently used ${i} in `+(o-r)+"ms\n"+`\tRemoved ${s} targets in `+(c-o)+"ms\n"+`\tRemoved ${t} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-h}ms`),Ws.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:t}))))}}function Bh(t,e){return new jh(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(t,e){this.db=t,this.garbageCollector=Bh(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Jn(t){let e=0;return this.Wn(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,((t,n)=>e(n)))}addReference(t,e,n){return Vh(t,n)}removeReference(t,e,n){return Vh(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Vh(t,e)}Xn(t,e){return function(t,e){let n=!1;return Ah(t).Z((i=>kh(t,i,e).next((t=>(t&&(n=!0),Ws.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(t,((r,o)=>{if(o<=e){const e=this.Xn(t,r).next((e=>{if(!e)return s++,n.getEntry(t,r).next((()=>(n.removeEntry(r,Cs.min()),Lh(t).delete([0,cr(r.path)]))))}));i.push(e)}})).next((()=>Ws.waitFor(i))).next((()=>n.apply(t))).next((()=>s))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Vh(t,e)}Yn(t,e){const n=Lh(t);let i,s=sr.ct;return n.X({index:"documentTargetsIndex"},(([t,n],{path:r,sequenceNumber:o})=>{0===t?(s!==sr.ct&&e(new Ds(ur(i)),s),s=o,i=r):s=sr.ct})).next((()=>{s!==sr.ct&&e(new Ds(ur(i)),s)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Vh(t,e){return Lh(t).put(function(t,e){return{targetId:0,path:cr(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this.changes=new ka((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ao.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ws.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return Hh(t).put(n)}removeEntry(t,e,n){return Hh(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Pl(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.Zn(t,n))))}getEntry(t,e){let n=Ao.newInvalidDocument(e);return Hh(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Kh(e))},((t,i)=>{n=this.ts(e,i)})).next((()=>n))}es(t,e){let n={size:0,document:Ao.newInvalidDocument(e)};return Hh(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Kh(e))},((t,i)=>{n={document:this.ts(e,i),size:Sh(i)}})).next((()=>n))}getEntries(t,e){let n=Ca();return this.ns(t,e,((t,e)=>{const i=this.ts(t,e);n=n.insert(t,i)})).next((()=>n))}ss(t,e){let n=Ca(),i=new Ur(Ds.comparator);return this.ns(t,e,((t,e)=>{const s=this.ts(t,e);n=n.insert(t,s),i=i.insert(t,Sh(e))})).next((()=>({documents:n,rs:i})))}ns(t,e,n){if(e.isEmpty())return Ws.resolve();let i=new Gr(Yh);e.forEach((t=>i=i.add(t)));const s=IDBKeyRange.bound(Kh(i.first()),Kh(i.last())),r=i.getIterator();let o=r.getNext();return Hh(t).X({index:"documentKeyIndex",range:s},((t,e,i)=>{const s=Ds.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&Yh(o,s)<0;)n(o,null),o=r.getNext();o&&o.isEqual(s)&&(n(o,e),o=r.hasNext()?r.getNext():null),o?i.G(Kh(o)):i.done()})).next((()=>{for(;o;)n(o,null),o=r.hasNext()?r.getNext():null}))}getDocumentsMatchingQuery(t,e,n,i){const s=e.path,r=[s.popLast().toArray(),s.lastSegment(),Pl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hh(t).j(IDBKeyRange.bound(r,o,!0)).next((t=>{let n=Ca();for(const s of t){const t=this.ts(Ds.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);t.isFoundDocument()&&(_a(e,t)||i.has(t.key))&&(n=n.insert(t.key,t))}return n}))}getAllFromCollectionGroup(t,e,n,i){let s=Ca();const r=Xh(e,n),o=Xh(e,Vs.max());return Hh(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(r,o,!0)},((t,e,n)=>{const r=this.ts(Ds.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);s=s.insert(r.key,r),s.size===i&&n.done()})).next((()=>s))}newChangeBuffer(t){return new qh(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return Wh(t).get("remoteDocumentGlobalKey").next((t=>(cs(!!t),t)))}Zn(t,e){return Wh(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const t=Al(this.serializer,e);if(!t.isNoDocument()||!t.version.isEqual(Cs.min()))return t}return Ao.newInvalidDocument(t)}}function $h(t){return new Gh(t)}class qh extends zh{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new ka((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,i=new Gr(((t,e)=>Ss(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((s,r)=>{const o=this.us.get(s);if(e.push(this.os.removeEntry(t,s,o.readTime)),r.isValidDocument()){const a=Ol(this.os.serializer,r);i=i.add(s.path.popLast());const c=Sh(a);n+=c-o.size,e.push(this.os.addEntry(t,s,a))}else if(n-=o.size,this.trackRemovals){const n=Ol(this.os.serializer,r.convertToNoDocument(Cs.min()));e.push(this.os.addEntry(t,s,n))}})),i.forEach((n=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.os.updateMetadata(t,n)),Ws.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next((t=>(this.us.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.os.ss(t,e).next((({documents:t,rs:e})=>(e.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t)))}}function Wh(t){return Rr(t,"remoteDocumentGlobal")}function Hh(t){return Rr(t,"remoteDocumentsV14")}function Kh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xh(t,e){const n=e.documentKey.path.toArray();return[t,Pl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Yh(t,e){const n=t.path.toArray(),i=e.path.toArray();let s=0;for(let r=0;r<n.length-2&&r<i.length-2;++r)if(s=Ss(n[r],i[r]),s)return s;return s=Ss(n.length,i.length),s||(s=Ss(n[n.length-2],i[i.length-2]),s||Ss(n[n.length-1],i[i.length-1]))
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Qh{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&lc(n.mutation,t,Wr.empty(),Es.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Fa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Fa()){const i=Ma();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Oa();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Ma();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Fa())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let s=Ca();const r=La(),o=La();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof fc)?s=s.insert(e.key,e):void 0!==o?(r.set(e.key,o.mutation.getFieldMask()),lc(o.mutation,e,o.mutation.getFieldMask(),Es.now())):r.set(e.key,Wr.empty())})),this.recalculateAndSaveOverlays(t,s).next((t=>(t.forEach(((t,e)=>r.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Qh(e,null!==(n=r.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=La();let i=new Ur(((t,e)=>t-e)),s=Fa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const s of t)s.keys().forEach((t=>{const r=e.get(t);if(null===r)return;let o=n.get(t)||Wr.empty();o=s.applyToLocalView(r,o),n.set(t,o);const a=(i.get(s.batchId)||Fa()).add(t);i=i.insert(s.batchId,a)}))})).next((()=>{const r=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Da();c.forEach((t=>{if(!s.has(t)){const i=ac(e.get(t),n.get(t));null!==i&&l.set(t,i),s=s.add(t)}})),r.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Ws.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Ds.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):pa(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((s=>{const r=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-s.size):Ws.resolve(Ma());let o=-1,a=s;return r.next((e=>Ws.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(e)?Ws.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,s))).next((()=>this.computeViews(t,a,e,Fa()))).next((t=>({batchId:o,changes:Pa(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ds(e)).next((t=>{let e=Oa();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const i=e.collectionGroup;let s=Oa();return this.indexManager.getCollectionParents(t,i).next((r=>Ws.forEach(r,(r=>{const o=function(t,e){return new ca(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,r.child(i));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i)))).next((t=>{i.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Ao.newInvalidDocument(i)))}));let n=Oa();return t.forEach(((t,s)=>{const r=i.get(t);void 0!==r&&lc(r.mutation,s,Wr.empty(),Es.now()),_a(e,s)&&(n=n.insert(t,s))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return Ws.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var n;return this.cs.set(e.id,{id:(n=e).id,version:n.version,createTime:Jc(n.createTime)}),Ws.resolve()}getNamedQuery(t,e){return Ws.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,function(t){return{name:t.name,query:Fl(t.bundledQuery),readTime:Jc(t.readTime)}}(e)),Ws.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.overlays=new Ur(Ds.comparator),this.ls=new Map}getOverlay(t,e){return Ws.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Ma();return Ws.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.we(t,e,i)})),Ws.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.ls.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.ls.delete(n)),Ws.resolve()}getOverlaysForCollection(t,e,n){const i=Ma(),s=e.length+1,r=new Ds(e.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const t=o.getNext().value,r=t.getKey();if(!e.isPrefixOf(r.path))break;r.path.length===s&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Ws.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let s=new Ur(((t,e)=>t-e));const r=this.overlays.getIterator();for(;r.hasNext();){const t=r.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=s.get(t.largestBatchId);null===e&&(e=Ma(),s=s.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Ma(),a=s.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((t,e)=>o.set(t,e))),o.size()>=i)break;return Ws.resolve(o)}we(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new xc(e,n));let s=this.ls.get(e);void 0===s&&(s=Fa(),this.ls.set(e,s)),this.ls.set(e,s.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.fs=new Gr(nu.ds),this.ws=new Gr(nu._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const n=new nu(t,e);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.ys(new nu(t,e))}ps(t,e){t.forEach((t=>this.removeReference(t,e)))}Is(t){const e=new Ds(new Os([])),n=new nu(e,t),i=new nu(e,t+1),s=[];return this.ws.forEachInRange([n,i],(t=>{this.ys(t),s.push(t.key)})),s}Ts(){this.fs.forEach((t=>this.ys(t)))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new Ds(new Os([])),n=new nu(e,t),i=new nu(e,t+1);let s=Fa();return this.ws.forEachInRange([n,i],(t=>{s=s.add(t.key)})),s}containsKey(t){const e=new nu(t,0),n=this.fs.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class nu{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return Ds.comparator(t.key,e.key)||Ss(t.As,e.As)}static _s(t,e){return Ss(t.As,e.As)||Ds.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new Gr(nu.ds)}checkEmpty(t){return Ws.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new bc(s,e,n,i);this.mutationQueue.push(r);for(const o of i)this.Rs=this.Rs.add(new nu(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Ws.resolve(r)}lookupMutationBatch(t,e){return Ws.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.bs(n),s=i<0?0:i;return Ws.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ws.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return Ws.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new nu(e,0),i=new nu(e,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,i],(t=>{const e=this.Ps(t.As);s.push(e)})),Ws.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Gr(Ss);return e.forEach((t=>{const e=new nu(t,0),i=new nu(t,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([e,i],(t=>{n=n.add(t.As)}))})),Ws.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let s=n;Ds.isDocumentKey(s)||(s=s.child(""));const r=new nu(new Ds(s),0);let o=new Gr(Ss);return this.Rs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.As)),!0)}),r),Ws.resolve(this.Vs(o))}Vs(t){const e=[];return t.forEach((t=>{const n=this.Ps(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){cs(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Ws.forEach(e.mutations,(i=>{const s=new nu(i.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Rs=n}))}Cn(t){}containsKey(t,e){const n=new nu(e,0),i=this.Rs.firstAfterOrEqual(n);return Ws.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ws.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t){this.Ds=t,this.docs=new Ur(Ds.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),s=i?i.size:0,r=this.Ds(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ws.resolve(n?n.document.mutableCopy():Ao.newInvalidDocument(e))}getEntries(t,e){let n=Ca();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ao.newInvalidDocument(t))})),Ws.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let s=Ca();const r=e.path,o=new Ds(r.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!r.isPrefixOf(t.path))break;t.path.length>r.length+1||zs(Us(o),n)<=0||(i.has(o.key)||_a(e,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Ws.resolve(s)}getAllFromCollectionGroup(t,e,n,i){as()}Cs(t,e){return Ws.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new ru(this)}getSize(t){return Ws.resolve(this.size)}}class ru extends zh{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.os.addEntry(t,i)):this.os.removeEntry(n)})),Ws.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(t){this.persistence=t,this.xs=new ka((t=>na(t)),ia),this.lastRemoteSnapshotVersion=Cs.min(),this.highestTargetId=0,this.Ns=0,this.ks=new eu,this.targetCount=0,this.Ms=Oh.kn()}forEachTarget(t,e){return this.xs.forEach(((t,n)=>e(n))),Ws.resolve()}getLastRemoteSnapshotVersion(t){return Ws.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ws.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),Ws.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ns&&(this.Ns=e),Ws.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new Oh(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,Ws.resolve()}updateTargetData(t,e){return this.Fn(e),Ws.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,Ws.resolve()}removeTargets(t,e,n){let i=0;const s=[];return this.xs.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.xs.delete(r),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Ws.waitFor(s).next((()=>i))}getTargetCount(t){return Ws.resolve(this.targetCount)}getTargetData(t,e){const n=this.xs.get(e)||null;return Ws.resolve(n)}addMatchingKeys(t,e,n){return this.ks.gs(e,n),Ws.resolve()}removeMatchingKeys(t,e,n){this.ks.ps(e,n);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach((e=>{s.push(i.markPotentiallyOrphaned(t,e))})),Ws.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),Ws.resolve()}getMatchingKeysForTargetId(t,e){const n=this.ks.Es(e);return Ws.resolve(n)}containsKey(t,e){return Ws.resolve(this.ks.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(t,e){this.$s={},this.overlays={},this.Os=new sr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new ou(this),this.indexManager=new dh,this.remoteDocumentCache=function(t){return new su(t)}((t=>this.referenceDelegate.Ls(t))),this.serializer=new Cl(e),this.qs=new Zh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new tu,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.$s[t.toKey()];return n||(n=new iu(e,this.referenceDelegate),this.$s[t.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,n){is("MemoryPersistence","Starting transaction:",t);const i=new cu(this.Os.next());return this.referenceDelegate.Us(),n(i).next((t=>this.referenceDelegate.Ks(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gs(t,e){return Ws.or(Object.values(this.$s).map((n=>()=>n.containsKey(t,e))))}}class cu extends $s{constructor(t){super(),this.currentSequenceNumber=t}}class lu{constructor(t){this.persistence=t,this.Qs=new eu,this.js=null}static zs(t){return new lu(t)}get Ws(){if(this.js)return this.js;throw as()}addReference(t,e,n){return this.Qs.addReference(n,e),this.Ws.delete(n.toString()),Ws.resolve()}removeReference(t,e,n){return this.Qs.removeReference(n,e),this.Ws.add(n.toString()),Ws.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),Ws.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach((t=>this.Ws.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Ws.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ws.forEach(this.Ws,(n=>{const i=Ds.fromPath(n);return this.Hs(t,i).next((t=>{t||e.removeEntry(i,Cs.min())}))})).next((()=>(this.js=null,e.apply(t))))}updateLimboDocument(t,e){return this.Hs(t,e).next((t=>{t?this.Ws.delete(e.toString()):this.Ws.add(e.toString())}))}Ls(t){return 0}Hs(t,e){return Ws.or([()=>Ws.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this.serializer=t}O(t,e,n,i){const s=new Hs("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dr,{unique:!0}),t.createObjectStore("documentMutations")}(t),uu(t),function(t){t.createObjectStore("remoteDocuments")}(t));let r=Ws.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),uu(t)),r=r.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Cs.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(s)))),n<4&&i>=4&&(0!==n&&(r=r.next((()=>function(t,e){return e.store("mutations").j().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dr,{unique:!0});const i=e.store("mutations"),s=n.map((t=>i.put(t)));return Ws.waitFor(s)}))}(t,s)))),r=r.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&i>=5&&(r=r.next((()=>this.Ys(s)))),n<6&&i>=6&&(r=r.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(s))))),n<7&&i>=7&&(r=r.next((()=>this.Zs(s)))),n<8&&i>=8&&(r=r.next((()=>this.ti(t,s)))),n<9&&i>=9&&(r=r.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&i>=10&&(r=r.next((()=>this.ei(s)))),n<11&&i>=11&&(r=r.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&i>=12&&(r=r.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:Er});e.createIndex("collectionPathOverlayIndex",Cr,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",Ar,{unique:!1})}(t)}))),n<13&&i>=13&&(r=r.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:mr});e.createIndex("documentKeyIndex",yr),e.createIndex("collectionGroupIndex",vr)}(t))).next((()=>this.ni(t,s))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(r=r.next((()=>this.si(t,s)))),n<15&&i>=15&&(r=r.next((()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:Tr}).createIndex("sequenceNumberIndex",Sr,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:Ir}).createIndex("documentKeyIndex",kr,{unique:!1})}(t)))),r}Xs(t){let e=0;return t.store("remoteDocuments").X(((t,n)=>{e+=Sh(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.j().next((e=>Ws.forEach(e,(e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",i).next((n=>Ws.forEach(n,(n=>{cs(n.userId===e.userId);const i=Ll(this.serializer,n);return Th(t,e.userId,i).next((()=>{}))}))))}))))}Zs(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const i=[];return n.X(((n,s)=>{const r=new Os(n),o=function(t){return[0,cr(t)]}(r);i.push(e.get(o).next((n=>n?Ws.resolve():(n=>e.put({targetId:0,path:cr(n),sequenceNumber:t.highestListenSequenceNumber}))(r))))})).next((()=>Ws.waitFor(i)))}))}ti(t,e){t.createObjectStore("collectionParents",{keyPath:_r});const n=e.store("collectionParents"),i=new fh,s=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:cr(i)})}};return e.store("remoteDocuments").X({Y:!0},((t,e)=>{const n=new Os(t);return s(n.popLast())})).next((()=>e.store("documentMutations").X({Y:!0},(([t,e,n],i)=>{const r=ur(e);return s(r.popLast())}))))}ei(t){const e=t.store("targets");return e.X(((t,n)=>{const i=Nl(n),s=Rl(this.serializer,i);return e.put(s)}))}ni(t,e){const n=e.store("remoteDocuments"),i=[];return n.X(((t,n)=>{const s=e.store("remoteDocumentsV14"),r=(o=n,o.document?new Ds(Os.fromString(o.document.name).popFirst(5)):o.noDocument?Ds.fromSegments(o.noDocument.path):o.unknownDocument?Ds.fromSegments(o.unknownDocument.path):as()).path.toArray();var o;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a={prefixPath:r.slice(0,r.length-2),collectionGroup:r[r.length-2],documentId:r[r.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(s.put(a))})).next((()=>Ws.waitFor(i)))}si(t,e){const n=e.store("mutations"),i=$h(this.serializer),s=new au(lu.zs,this.serializer.fe);return n.j().next((t=>{const n=new Map;return t.forEach((t=>{var e;let i=null!==(e=n.get(t.userId))&&void 0!==e?e:Fa();Ll(this.serializer,t).keys().forEach((t=>i=i.add(t))),n.set(t.userId,i)})),Ws.forEach(n,((t,n)=>{const r=new Ji(n),o=$l.de(this.serializer,r),a=s.getIndexManager(r),c=Ih.de(r,this.serializer,a,s.referenceDelegate);return new Jh(i,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Nr(e,sr.ct),t).next()}))}))}}function uu(t){t.createObjectStore("targetDocuments",{keyPath:wr}).createIndex("documentTargetsIndex",xr,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",br,{unique:!0}),t.createObjectStore("targetGlobal")}const du="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fu{constructor(t,e,n,i,s,r,o,a,c,l,h=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.ii=s,this.window=r,this.document=o,this.ri=c,this.oi=l,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=t=>Promise.resolve(),!fu.D())throw new ds(us.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uh(this,i),this.di=e+"main",this.serializer=new Cl(a),this.wi=new Ks(this.di,this.ui,new hu(this.serializer)),this.Bs=new Ph(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$h(this.serializer),this.qs=new Vl,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&ss("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ds(us.FAILED_PRECONDITION,du);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Bs.getHighestSequenceNumber(t)))})).then((t=>{this.Os=new sr(t,this.ri)})).then((()=>{this.Fs=!0})).catch((t=>(this.wi&&this.wi.close(),Promise.reject(t))))}Ii(t){return this.fi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>gu(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(t).next((t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(t))).next((e=>this.isPrimary&&!e?this.Ai(t).next((()=>!1)):!!e&&this.vi(t).next((()=>!0)))))).catch((t=>{if(Qs(t))return is("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return is("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.ii.enqueueRetryable((()=>this.fi(t))),this.isPrimary=t}))}Ti(t){return pu(t).get("owner").next((t=>Ws.resolve(this.Ri(t))))}Pi(t){return gu(t).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=Rr(t,"clientMetadata");return e.j().next((t=>{const n=this.Si(t,18e5),i=t.filter((t=>-1===n.indexOf(t)));return Ws.forEach(i,(t=>e.delete(t.clientId))).next((()=>i))}))})).catch((()=>[]));if(this._i)for(const e of t)this._i.removeItem(this.Di(e.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?Ws.resolve(!0):pu(t).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new ds(us.FAILED_PRECONDITION,du);return!1}}return!(!this.networkEnabled||!this.inForeground)||gu(t).j().next((t=>void 0===this.Si(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(e||n&&i)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&is("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new Nr(t,sr.ct);return this.Ai(e).next((()=>this.Pi(e)))})),this.wi.close(),this.Mi()}Si(t,e){return t.filter((t=>this.Vi(t.updateTimeMs,e)&&!this.Ci(t.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(t=>gu(t).j().next((t=>this.Si(t,18e5).map((t=>t.clientId))))))}get started(){return this.Fs}getMutationQueue(t,e){return Ih.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new gh(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return $l.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,n){is("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",s=15===(r=this.ui)?Lr:14===r?Dr:13===r?Mr:12===r?Pr:11===r?Or:void as();var r;let o;return this.wi.runTransaction(t,i,s,(i=>(o=new Nr(i,this.Os?this.Os.next():sr.ct),"readwrite-primary"===e?this.Ti(o).next((t=>!!t||this.Ei(o))).next((e=>{if(!e)throw ss(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new ds(us.FAILED_PRECONDITION,Gs);return n(o)})).next((t=>this.vi(o).next((()=>t)))):this.Oi(o).next((()=>n(o)))))).then((t=>(o.raiseOnCommittedEvent(),t)))}Oi(t){return pu(t).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ds(us.FAILED_PRECONDITION,du)}))}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pu(t).put("owner",e)}static D(){return Ks.D()}Ai(t){const e=pu(t);return e.get("owner").next((t=>this.Ri(t)?(is("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Ws.resolve()))}Vi(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(ss(`Detected an update time that is in the future: ${t} > ${n}`),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,c.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const n=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return is("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return ss("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){ss("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(t){}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function pu(t){return Rr(t,"owner")}function gu(t){return Rr(t,"clientMetadata")}function mu(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class yu{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Fi=n,this.Bi=i}static Li(t,e){let n=Fa(),i=Fa();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yu(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,n,i){return this.Ki(t,e).next((s=>s||this.Gi(t,e,i,n))).next((n=>n||this.Qi(t,e)))}Ki(t,e){if(ua(e))return Ws.resolve(null);let n=ma(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=va(e,null,"F"),n=ma(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const s=Fa(...i);return this.Ui.getDocuments(t,s).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const r=this.ji(e,i);return this.zi(e,r,s,n.readTime)?this.Ki(t,va(e,null,"F")):this.Wi(t,r,e,n)}))))})))))}Gi(t,e,n,i){return ua(e)||i.isEqual(Cs.min())?this.Qi(t,e):this.Ui.getDocuments(t,n).next((s=>{const r=this.ji(e,s);return this.zi(e,r,n,i)?this.Qi(t,e):(es()<=a["in"].DEBUG&&is("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xa(e)),this.Wi(t,r,e,Bs(i,-1)))}))}ji(t,e){let n=new Gr(Sa(t));return e.forEach(((e,i)=>{_a(t,i)&&(n=n.add(i))})),n}zi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(t,e){return es()<=a["in"].DEBUG&&is("QueryEngine","Using full collection scan to execute query:",xa(e)),this.Ui.getDocumentsMatchingQuery(t,e,Vs.min())}Wi(t,e,n,i){return this.Ui.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,e,n,i){this.persistence=t,this.Hi=e,this.serializer=i,this.Ji=new Ur(Ss),this.Yi=new ka((t=>na(t)),ia),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(n)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Jh(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ji)))}}function wu(t,e,n,i){return new bu(t,e,n,i)}async function xu(t,e){const n=hs(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const s=[],r=[];let o=Fa();for(const t of i){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({er:t,removedBatchIds:s,addedBatchIds:r})))}))}))}function _u(t,e){const n=hs(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const s=n.batch,r=s.keys();let o=Ws.resolve();return r.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);cs(null!==r),e.version.compareTo(r)<0&&(s.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,s)))}(n,t,e,s).next((()=>s.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Fa();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}function Tu(t){const e=hs(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Bs.getLastRemoteSnapshotVersion(t)))}function Su(t,e){const n=hs(t),i=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const o=[];e.targetChanges.forEach(((r,a)=>{const c=s.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(t,r.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(t,r.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(Xr.EMPTY_BYTE_STRING,Cs.min()).withLastLimboFreeSnapshotVersion(Cs.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,r)&&o.push(n.Bs.updateTargetData(t,l))}));let a=Ca(),c=Fa();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(Iu(t,r,e.documentUpdates).next((t=>{a=t.nr,c=t.sr}))),!i.isEqual(Cs.min())){const e=n.Bs.getLastRemoteSnapshotVersion(t).next((e=>n.Bs.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Ws.waitFor(o).next((()=>r.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ji=s,t)))}function Iu(t,e,n){let i=Fa(),s=Fa();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=Ca();return n.forEach(((n,r)=>{const o=t.get(n);r.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),r.isNoDocument()&&r.version.isEqual(Cs.min())?(e.removeEntry(n,r.readTime),i=i.insert(n,r)):!o.isValidDocument()||r.version.compareTo(o.version)>0||0===r.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(r),i=i.insert(n,r)):is("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",r.version)})),{nr:i,sr:s}}))}function ku(t,e){const n=hs(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Eu(t,e){const n=hs(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Bs.getTargetData(t,e).next((s=>s?(i=s,Ws.resolve(i)):n.Bs.allocateTargetId(t).next((s=>(i=new El(e,s,"TargetPurposeListen",t.currentSequenceNumber),n.Bs.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.Ji.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(t.targetId,t),n.Yi.set(e,t.targetId)),t}))}async function Cu(t,e,n){const i=hs(t),s=i.Ji.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(t=>i.persistence.referenceDelegate.removeTarget(t,s)))}catch(t){if(!Qs(t))throw t;is("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(s.target)}function Au(t,e,n){const i=hs(t);let s=Cs.min(),r=Fa();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=hs(t),s=i.Yi.get(n);return void 0!==s?Ws.resolve(i.Ji.get(s)):i.Bs.getTargetData(e,n)}(i,t,ma(e)).next((e=>{if(e)return s=e.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>i.Hi.getDocumentsMatchingQuery(t,e,n?s:Cs.min(),n?r:Fa()))).next((t=>(Mu(i,Ta(e),t),{documents:t,ir:r})))))}function Ou(t,e){const n=hs(t),i=hs(n.Bs),s=n.Ji.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(t=>i.le(t,e).next((t=>t?t.target:null))))}function Pu(t,e){const n=hs(t),i=n.Xi.get(e)||Cs.min();return n.persistence.runTransaction("Get new document changes","readonly",(t=>n.Zi.getAllFromCollectionGroup(t,e,Bs(i,-1),Number.MAX_SAFE_INTEGER))).then((t=>(Mu(n,e,t),t)))}function Mu(t,e,n){let i=t.Xi.get(e)||Cs.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.Xi.set(e,i)}async function Du(t,e,n,i){const s=hs(t);let r=Fa(),o=Ca();for(const l of n){const t=e.rr(l.metadata.name);l.document&&(r=r.add(t));const n=e.ur(l);n.setReadTime(e.cr(l.metadata.readTime)),o=o.insert(t,n)}const a=s.Zi.newChangeBuffer({trackRemovals:!0}),c=await Eu(s,function(t){return ma(ha(Os.fromString(`__bundle__/docs/${t}`)))}(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(t=>Iu(t,a,o).next((e=>(a.apply(t),e))).next((e=>s.Bs.removeMatchingKeysForTargetId(t,c.targetId).next((()=>s.Bs.addMatchingKeys(t,r,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(t,e.nr,e.sr))).next((()=>e.nr))))))}async function Lu(t,e,n=Fa()){const i=await Eu(t,ma(Fl(e.bundledQuery))),s=hs(t);return s.persistence.runTransaction("Save named query","readwrite",(t=>{const r=Jc(e.readTime);if(i.snapshotVersion.compareTo(r)>=0)return s.qs.saveNamedQuery(t,e);const o=i.withResumeToken(Xr.EMPTY_BYTE_STRING,r);return s.Ji=s.Ji.insert(o.targetId,o),s.Bs.updateTargetData(t,o).next((()=>s.Bs.removeMatchingKeysForTargetId(t,i.targetId))).next((()=>s.Bs.addMatchingKeys(t,n,i.targetId))).next((()=>s.qs.saveNamedQuery(t,e)))}))}function Nu(t,e){return`firestore_clients_${t}_${e}`}function Ru(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Fu(t,e){return`firestore_targets_${t}_${e}`}class ju{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static ar(t,e,n){const i=JSON.parse(n);let s,r="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code,r&&(s=new ds(i.error.code,i.error.message))),r?new ju(t,e,i.state,s):(ss("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Bu{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static ar(t,e){const n=JSON.parse(e);let i,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(i=new ds(n.error.code,n.error.message))),s?new Bu(t,n.state,i):(ss("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Uu{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,s=Ba();for(let r=0;i&&r<n.activeTargetIds.length;++r)i=ar(n.activeTargetIds[r]),s=s.add(n.activeTargetIds[r]);return i?new Uu(t,s):(ss("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Vu{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Vu(e.clientId,e.onlineState):(ss("SharedClientState",`Failed to parse online state: ${t}`),null)}}class zu{constructor(){this.activeTargetIds=Ba()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Gu{constructor(t,e,n,i,s){this.window=t,this.ii=e,this.persistenceKey=n,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ur(Ss),this.started=!1,this.yr=[];const r=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=Nu(this.persistenceKey,this.wr),this.Ir=function(t){return`firestore_sequence_number_${t}`}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.gr=this.gr.insert(this.wr,new zu),this.Tr=new RegExp(`^firestore_clients_${r}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${r}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${r}_(\\d+)$`),this.vr=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Rr=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.$i();for(const n of t){if(n===this.wr)continue;const t=this.getItem(Nu(this.persistenceKey,n));if(t){const e=Uu.ar(n,t);e&&(this.gr=this.gr.insert(e.clientId,e))}}this.Pr();const e=this.storage.getItem(this.vr);if(e){const t=this.br(e);t&&this.Vr(t)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach(((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,n){this.Dr(t,e,n),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(Fu(this.persistenceKey,t));if(n){const i=Bu.ar(t,n);i&&(e=i.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Fu(this.persistenceKey,t))}updateQueryState(t,e,n){this.kr(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.Cr(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return is("SharedClientState","READ",t,e),e}setItem(t,e){is("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){is("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){const e=t;if(e.storageArea===this.storage){if(is("SharedClientState","EVENT",e.key,e.newValue),e.key===this.pr)return void ss("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.Tr.test(e.key)){if(null==e.newValue){const t=this.Or(e.key);return this.Fr(t,null)}{const t=this.Br(e.key,e.newValue);if(t)return this.Fr(t.clientId,t)}}else if(this.Er.test(e.key)){if(null!==e.newValue){const t=this.Lr(e.key,e.newValue);if(t)return this.qr(t)}}else if(this.Ar.test(e.key)){if(null!==e.newValue){const t=this.Ur(e.key,e.newValue);if(t)return this.Kr(t)}}else if(e.key===this.vr){if(null!==e.newValue){const t=this.br(e.newValue);if(t)return this.Vr(t)}}else if(e.key===this.Ir){const t=function(t){let e=sr.ct;if(null!=t)try{const n=JSON.parse(t);cs("number"==typeof n),e=n}catch(t){ss("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==sr.ct&&this.sequenceNumberHandler(t)}else if(e.key===this.Rr){const t=this.Gr(e.newValue);await Promise.all(t.map((t=>this.syncEngine.Qr(t))))}}else this.yr.push(e)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,n){const i=new ju(this.currentUser,t,e,n),s=Ru(this.persistenceKey,this.currentUser,t);this.setItem(s,i.hr())}Cr(t){const e=Ru(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){const e={clientId:this.wr,onlineState:t};this.storage.setItem(this.vr,JSON.stringify(e))}kr(t,e,n){const i=Fu(this.persistenceKey,t),s=new Bu(t,e,n);this.setItem(i,s.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const n=this.Or(t);return Uu.ar(n,e)}Lr(t,e){const n=this.Er.exec(t),i=Number(n[1]),s=void 0!==n[2]?n[2]:null;return ju.ar(new Ji(s),i,e)}Ur(t,e){const n=this.Ar.exec(t),i=Number(n[1]);return Bu.ar(i,e)}br(t){return Vu.ar(t)}Gr(t){return JSON.parse(t)}async qr(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.jr(t.batchId,t.state,t.error);is("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const n=e?this.gr.insert(t,e):this.gr.remove(t),i=this.Sr(this.gr),s=this.Sr(n),r=[],o=[];return s.forEach((t=>{i.has(t)||r.push(t)})),i.forEach((t=>{s.has(t)||o.push(t)})),this.syncEngine.Wr(r,o).then((()=>{this.gr=n}))}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=Ba();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class $u{constructor(){this.Hr=new zu,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,n){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new zu,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{Yr(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){is("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){is("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu=null;function Ku(){return null===Hu?Hu=268435456+Math.round(2147483648*Math.random()):Hu++,"0x"+Hu.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Xu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="WebChannelConnection";class Ju extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.mo=e+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,n,i,s){const r=Ku(),o=this.To(t,e);is("RestConnection",`Sending RPC '${t}' ${r}:`,o,n);const a={};return this.Eo(a,i,s),this.Ao(t,o,a,n).then((e=>(is("RestConnection",`Received RPC '${t}' ${r}: `,e),e)),(e=>{throw rs("RestConnection",`RPC '${t}' ${r} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,s,r){return this.Io(t,e,n,i,s)}Eo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Zi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}To(t,e){const n=Xu[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,n,i){const s=Ku();return new Promise(((r,o)=>{const a=new Ki;a.setWithCredentials(!0),a.listenOnce(Gi.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case zi.NO_ERROR:const e=a.getResponseJson();is(Qu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(e)),r(e);break;case zi.TIMEOUT:is(Qu,`RPC '${t}' ${s} timed out`),o(new ds(us.DEADLINE_EXCEEDED,"Request time out"));break;case zi.HTTP_ERROR:const n=a.getStatus();if(is(Qu,`RPC '${t}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(us).indexOf(e)>=0?e:us.UNKNOWN}(e.status);o(new ds(t,e.message))}else o(new ds(us.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ds(us.UNAVAILABLE,"Connection failed."));break;default:as()}}finally{is(Qu,`RPC '${t}' ${s} completed.`)}}));const c=JSON.stringify(i);is(Qu,`RPC '${t}' ${s} sending request:`,i),a.send(e,"POST",c,n,15)}))}Ro(t,e,n){const i=Ku(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Ui(),o=Vi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Wi({})),this.Eo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=s.join("");is(Qu,`Creating RPC '${t}' stream ${i}: ${l}`,a);const h=r.createWebChannel(l,a);let u=!1,d=!1;const f=new Yu({ro:e=>{d?is(Qu,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(u||(is(Qu,`Opening RPC '${t}' stream ${i} transport.`),h.open(),u=!0),is(Qu,`RPC '${t}' stream ${i} sending:`,e),h.send(e))},oo:()=>h.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(h,Hi.EventType.OPEN,(()=>{d||is(Qu,`RPC '${t}' stream ${i} transport opened.`)})),p(h,Hi.EventType.CLOSE,(()=>{d||(d=!0,is(Qu,`RPC '${t}' stream ${i} transport closed`),f.wo())})),p(h,Hi.EventType.ERROR,(e=>{d||(d=!0,rs(Qu,`RPC '${t}' stream ${i} transport errored:`,e),f.wo(new ds(us.UNAVAILABLE,"The operation could not be completed")))})),p(h,Hi.EventType.MESSAGE,(e=>{var n;if(!d){const s=e.data[0];cs(!!s);const r=s,o=r.error||(null===(n=r[0])||void 0===n?void 0:n.error);if(o){is(Qu,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=Tc[t];if(void 0!==e)return kc(e)}(e),s=o.message;void 0===n&&(n=us.INTERNAL,s="Unknown error status: "+e+" with message "+o.message),d=!0,f.wo(new ds(n,s)),h.close()}else is(Qu,`RPC '${t}' stream ${i} received:`,s),f._o(s)}})),p(o,$i.STAT_EVENT,(e=>{e.stat===qi.PROXY?is(Qu,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===qi.NOPROXY&&is(Qu,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(){return"undefined"!=typeof window?window:null}function td(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new Hc(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t,e,n=1e3,i=1.5,s=6e4){this.ii=t,this.timerId=e,this.Po=n,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,e-n);i>0&&is("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(()=>(this.Co=Date.now(),t()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t,e,n,i,s,r,o,a){this.ii=t,this.$o=n,this.Oo=i,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new nd(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(t){this.Ho(),this.stream.send(t)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(t,e){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():e&&e.code===us.RESOURCE_EXHAUSTED?(ss(e.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):e&&e.code===us.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.ao(e)}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Fo===e&&this.Zo(t,n)}),(e=>{t((()=>{const t=new ds(us.UNKNOWN,"Fetching auth token failed: "+e.message);return this.tu(t)}))}))}Zo(t,e){const n=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((t=>{n((()=>this.tu(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(t){return is("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget((()=>this.Fo===t?e():(is("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sd extends id{constructor(t,e,n,i,s,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,r),this.serializer=s}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=hl(this.serializer,t),n=function(t){if(!("targetChange"in t))return Cs.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Cs.min():e.readTime?Jc(e.readTime):Cs.min()}(t);return this.listener.nu(e,n)}su(t){const e={};e.database=rl(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=sa(i)?{documents:pl(t,i)}:{query:gl(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Yc(t,e.resumeToken);const i=Kc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(Cs.min())>0){n.readTime=Xc(t,e.snapshotVersion.toTimestamp());const i=Kc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=yl(this.serializer,t);n&&(e.labels=n),this.Wo(e)}iu(t){const e={};e.database=rl(this.serializer),e.removeTarget=t,this.Wo(e)}}class rd extends id{constructor(t,e,n,i,s,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,r),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(cs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=fl(t.writeResults,t.commitTime),n=Jc(t.commitTime);return this.listener.cu(n,e)}return cs(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=rl(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>ul(this.serializer,t)))};this.Wo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ds(us.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Io(t,e,n,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ds(us.UNKNOWN,t.toString())}))}vo(t,e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,r])=>this.connection.vo(t,e,n,s,r,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ds(us.UNKNOWN,t.toString())}))}terminate(){this.lu=!0}}class ad{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ss(e),this.mu=!1):is("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t,e,n,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr((t=>{n.enqueueAndForget((async()=>{yd(this)&&(is("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=hs(t);e.vu.add(4),await hd(e),e.bu.set("Unknown"),e.vu.delete(4),await ld(e)}(this))}))})),this.bu=new ad(n,i)}}async function ld(t){if(yd(t))for(const e of t.Ru)await e(!0)}async function hd(t){for(const e of t.Ru)await e(!1)}function ud(t,e){const n=hs(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),md(n)?gd(n):Nd(n).Ko()&&fd(n,e))}function dd(t,e){const n=hs(t),i=Nd(n);n.Au.delete(e),i.Ko()&&pd(n,e),0===n.Au.size&&(i.Ko()?i.jo():yd(n)&&n.bu.set("Unknown"))}function fd(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Cs.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nd(t).su(e)}function pd(t,e){t.Vu.qt(e),Nd(t).iu(e)}function gd(t){t.Vu=new Vc({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Nd(t).start(),t.bu.gu()}function md(t){return yd(t)&&!Nd(t).Uo()&&t.Au.size>0}function yd(t){return 0===hs(t).vu.size}function vd(t){t.Vu=void 0}async function bd(t){t.Au.forEach(((e,n)=>{fd(t,e)}))}async function wd(t,e){vd(t),md(t)?(t.bu.Iu(e),gd(t)):t.bu.set("Unknown")}async function xd(t,e,n){if(t.bu.set("Online"),e instanceof Bc&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.Au.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.Au.delete(i),t.Vu.removeTarget(i))}(t,e)}catch(n){is("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await _d(t,n)}else if(e instanceof Fc?t.Vu.Ht(e):e instanceof jc?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(Cs.min()))try{const e=await Tu(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Vu.ce(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=t.Au.get(i);s&&t.Au.set(i,s.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.Au.get(e);if(!i)return;t.Au.set(e,i.withResumeToken(Xr.EMPTY_BYTE_STRING,i.snapshotVersion)),pd(t,e);const s=new El(i.target,e,n,i.sequenceNumber);fd(t,s)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){is("RemoteStore","Failed to raise snapshot:",e),await _d(t,e)}}async function _d(t,e,n){if(!Qs(e))throw e;t.vu.add(1),await hd(t),t.bu.set("Offline"),n||(n=()=>Tu(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{is("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await ld(t)}))}function Td(t,e){return e().catch((n=>_d(t,n,e)))}async function Sd(t){const e=hs(t),n=Rd(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Id(e);)try{const t=await ku(e.localStore,i);if(null===t){0===e.Eu.length&&n.jo();break}i=t.batchId,kd(e,t)}catch(t){await _d(e,t)}Ed(e)&&Cd(e)}function Id(t){return yd(t)&&t.Eu.length<10}function kd(t,e){t.Eu.push(e);const n=Rd(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Ed(t){return yd(t)&&!Rd(t).Uo()&&t.Eu.length>0}function Cd(t){Rd(t).start()}async function Ad(t){Rd(t).hu()}async function Od(t){const e=Rd(t);for(const n of t.Eu)e.uu(n.mutations)}async function Pd(t,e,n){const i=t.Eu.shift(),s=wc.from(i,e,n);await Td(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Sd(t)}async function Md(t,e){e&&Rd(t).ou&&await async function(t,e){if(n=e.code,Ic(n)&&n!==us.ABORTED){const n=t.Eu.shift();Rd(t).Qo(),await Td(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Sd(t)}var n}(t,e),Ed(t)&&Cd(t)}async function Dd(t,e){const n=hs(t);n.asyncQueue.verifyOperationInProgress(),is("RemoteStore","RemoteStore received new credentials");const i=yd(n);n.vu.add(3),await hd(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await ld(n)}async function Ld(t,e){const n=hs(t);e?(n.vu.delete(2),await ld(n)):e||(n.vu.add(2),await hd(n),n.bu.set("Unknown"))}function Nd(t){return t.Su||(t.Su=function(t,e,n){const i=hs(t);return i.fu(),new sd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t.datastore,t.asyncQueue,{uo:bd.bind(null,t),ao:wd.bind(null,t),nu:xd.bind(null,t)}),t.Ru.push((async e=>{e?(t.Su.Qo(),md(t)?gd(t):t.bu.set("Unknown")):(await t.Su.stop(),vd(t))}))),t.Su}function Rd(t){return t.Du||(t.Du=function(t,e,n){const i=hs(t);return i.fu(),new rd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{uo:Ad.bind(null,t),ao:Md.bind(null,t),au:Od.bind(null,t),cu:Pd.bind(null,t)}),t.Ru.push((async e=>{e?(t.Du.Qo(),await Sd(t)):(await t.Du.stop(),t.Eu.length>0&&(is("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))}))),t.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Fd{constructor(t,e,n,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,s){const r=Date.now()+n,o=new Fd(t,e,r,i,s);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ds(us.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jd(t,e){if(ss("AsyncQueue",`${e}: ${t}`),Qs(t))return new ds(us.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Ds.comparator(e.key,n.key):(t,e)=>Ds.comparator(t.key,e.key),this.keyedMap=Oa(),this.sortedSet=new Ur(this.comparator)}static emptySet(t){return new Bd(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Bd))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Bd;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.Cu=new Ur(Ds.comparator)}track(t){const e=t.doc.key,n=this.Cu.get(e);n?0!==t.type&&3===n.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==n.type?this.Cu=this.Cu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Cu=this.Cu.remove(e):1===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):as():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Vd{constructor(t,e,n,i,s,r,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,s){const r=[];return e.forEach((t=>{r.push({type:0,doc:t})})),new Vd(t,e,Bd.emptySet(e),r,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ba(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this.Nu=void 0,this.listeners=[]}}class Gd{constructor(){this.queries=new ka((t=>wa(t)),ba),this.onlineState="Unknown",this.ku=new Set}}async function $d(t,e){const n=hs(t),i=e.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new zd),s)try{r.Nu=await n.onListen(i)}catch(t){const n=jd(t,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,r),r.listeners.push(e),e.Mu(n.onlineState),r.Nu&&e.$u(r.Nu)&&Kd(n)}async function qd(t,e){const n=hs(t),i=e.query;let s=!1;const r=n.queries.get(i);if(r){const t=r.listeners.indexOf(e);t>=0&&(r.listeners.splice(t,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function Wd(t,e){const n=hs(t);let i=!1;for(const s of e){const t=s.query,e=n.queries.get(t);if(e){for(const t of e.listeners)t.$u(s)&&(i=!0);e.Nu=s}}i&&Kd(n)}function Hd(t,e,n){const i=hs(t),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(n);i.queries.delete(e)}function Kd(t){t.ku.forEach((t=>{t.next()}))}class Xd{constructor(t,e,n){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Vd(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Ku||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){if(t.docChanges.length>0)return!0;const e=this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Uu(t){t=Vd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t){this.serializer=t}rr(t){return nl(this.serializer,t)}ur(t){return t.metadata.exists?cl(this.serializer,t.document,!1):Ao.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return Jc(t)}}class Jd{constructor(t,e,n){this.ju=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zd(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const n=Os.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,n=new Qd(this.serializer);for(const i of t)if(i.metadata.queries){const t=n.rr(i.metadata.name);for(const n of i.metadata.queries){const i=(e.get(n)||Fa()).add(t);e.set(n,i)}}return e}async complete(){const t=await Du(this.localStore,new Qd(this.serializer),this.documents,this.ju.id),e=this.Wu(this.documents);for(const n of this.queries)await Lu(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}}}function Zd(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(t){this.key=t}}class ef{constructor(t){this.key=t}}class nf{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Fa(),this.mutatedKeys=Fa(),this.tc=Sa(t),this.ec=new Bd(this.tc)}get nc(){return this.Yu}sc(t,e){const n=e?e.ic:new Ud,i=e?e.ec:this.ec;let s=e?e.mutatedKeys:this.mutatedKeys,r=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),h=_a(this.query,e)?e:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),f=!0):this.rc(l,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.tc(h,a)>0||c&&this.tc(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),f=!0):l&&!h&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(h?(r=r.add(h),s=d?s.add(t):s.delete(t)):(r=r.delete(t),s=s.delete(t)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const t="F"===this.query.limitType?r.last():r.first();r=r.delete(t.key),s=s.delete(t.key),n.track({type:1,doc:t})}return{ec:r,ic:n,zi:o,mutatedKeys:s}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const s=t.ic.xu();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return as()}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||this.tc(t.doc,e.doc))),this.oc(n);const r=e?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==s.length||a?{snapshot:new Vd(this.query,t.ec,i,s,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:r}:{cc:r}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ud,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach((t=>this.Yu=this.Yu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Yu=this.Yu.delete(t))),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=Fa(),this.ec.forEach((t=>{this.ac(t.key)&&(this.Zu=this.Zu.add(t.key))}));const e=[];return t.forEach((t=>{this.Zu.has(t)||e.push(new ef(t))})),this.Zu.forEach((n=>{t.has(n)||e.push(new tf(n))})),e}hc(t){this.Yu=t.ir,this.Zu=Fa();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return Vd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class sf{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class rf{constructor(t){this.key=t,this.fc=!1}}class of{constructor(t,e,n,i,s,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.dc={},this.wc=new ka((t=>wa(t)),ba),this._c=new Map,this.mc=new Set,this.gc=new Ur(Ds.comparator),this.yc=new Map,this.Ic=new eu,this.Tc={},this.Ec=new Map,this.Ac=Oh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function af(t,e){const n=Rf(t);let i,s;const r=n.wc.get(e);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.lc();else{const t=await Eu(n.localStore,ma(e)),r=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,s=await cf(n,e,i,"current"===r,t.resumeToken),n.isPrimaryClient&&ud(n.remoteStore,t)}return s}async function cf(t,e,n,i,s){t.Rc=(e,n,i)=>async function(t,e,n,i){let s=e.view.sc(n);s.zi&&(s=await Au(t.localStore,e.query,!1).then((({documents:t})=>e.view.sc(t,s))));const r=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(s,t.isPrimaryClient,r);return xf(t,e.targetId,o.cc),o.snapshot}(t,e,n,i);const r=await Au(t.localStore,e,!0),o=new nf(e,r.ir),a=o.sc(r.documents),c=Rc.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,s),l=o.applyChanges(a,t.isPrimaryClient,c);xf(t,n,l.cc);const h=new sf(e,n,o);return t.wc.set(e,h),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),l.snapshot}async function lf(t,e){const n=hs(t),i=n.wc.get(e),s=n._c.get(i.targetId);if(s.length>1)return n._c.set(i.targetId,s.filter((t=>!ba(t,e)))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Cu(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),dd(n.remoteStore,i.targetId),bf(n,i.targetId)})).catch(qs)):(bf(n,i.targetId),await Cu(n.localStore,i.targetId,!0))}async function hf(t,e,n){const i=Ff(t);try{const t=await function(t,e){const n=hs(t),i=Es.now(),s=e.reduce(((t,e)=>t.add(e.key)),Fa());let r,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Ca(),c=Fa();return n.Zi.getEntries(t,s).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((s=>{r=s;const o=[];for(const t of e){const e=hc(t,r.get(t.key).overlayedDocument);null!=e&&o.push(new fc(t.key,e,Co(e.value.mapValue),sc.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(r,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Pa(r)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Tc[t.currentUser.toKey()];i||(i=new Ur(Ss)),i=i.insert(e,n),t.Tc[t.currentUser.toKey()]=i}(i,t.batchId,n),await Sf(i,t.changes),await Sd(i.remoteStore)}catch(t){const e=jd(t,"Failed to persist write");n.reject(e)}}async function uf(t,e){const n=hs(t);try{const t=await Su(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.yc.get(e);i&&(cs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.fc=!0:t.modifiedDocuments.size>0?cs(i.fc):t.removedDocuments.size>0&&(cs(i.fc),i.fc=!1))})),await Sf(n,t,e)}catch(t){await qs(t)}}function df(t,e,n){const i=hs(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.wc.forEach(((n,i)=>{const s=i.view.Mu(e);s.snapshot&&t.push(s.snapshot)})),function(t,e){const n=hs(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const s of n.listeners)s.Mu(e)&&(i=!0)})),i&&Kd(n)}(i.eventManager,e),t.length&&i.dc.nu(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function ff(t,e,n){const i=hs(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.yc.get(e),r=s&&s.key;if(r){let t=new Ur(Ds.comparator);t=t.insert(r,Ao.newNoDocument(r,Cs.min()));const n=Fa().add(r),s=new Nc(Cs.min(),new Map,new Ur(Ss),t,n);await uf(i,s),i.gc=i.gc.remove(r),i.yc.delete(e),Tf(i)}else await Cu(i.localStore,e,!1).then((()=>bf(i,e,n))).catch(qs)}async function pf(t,e){const n=hs(t),i=e.batch.batchId;try{const t=await _u(n.localStore,e);vf(n,i,null),yf(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Sf(n,t)}catch(t){await qs(t)}}async function gf(t,e,n){const i=hs(t);try{const t=await function(t,e){const n=hs(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(cs(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);vf(i,e,n),yf(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Sf(i,t)}catch(n){await qs(n)}}async function mf(t,e){const n=hs(t);yd(n.remoteStore)||is("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=hs(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.mutationQueue.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const i=n.Ec.get(t)||[];i.push(e),n.Ec.set(t,i)}catch(t){const n=jd(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}function yf(t,e){(t.Ec.get(e)||[]).forEach((t=>{t.resolve()})),t.Ec.delete(e)}function vf(t,e,n){const i=hs(t);let s=i.Tc[i.currentUser.toKey()];if(s){const t=s.get(e);t&&(n?t.reject(n):t.resolve(),s=s.remove(e)),i.Tc[i.currentUser.toKey()]=s}}function bf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach((e=>{t.Ic.containsKey(e)||wf(t,e)}))}function wf(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(dd(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Tf(t))}function xf(t,e,n){for(const i of n)i instanceof tf?(t.Ic.addReference(i.key,e),_f(t,i)):i instanceof ef?(is("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||wf(t,i.key)):as()}function _f(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(is("SyncEngine","New document in limbo: "+n),t.mc.add(i),Tf(t))}function Tf(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new Ds(Os.fromString(e)),i=t.Ac.next();t.yc.set(i,new rf(n)),t.gc=t.gc.insert(n,i),ud(t.remoteStore,new El(ma(ha(n.path)),i,"TargetPurposeLimboResolution",sr.ct))}}async function Sf(t,e,n){const i=hs(t),s=[],r=[],o=[];i.wc.isEmpty()||(i.wc.forEach(((t,a)=>{o.push(i.Rc(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){s.push(t);const e=yu.Li(a.targetId,t);r.push(e)}})))})),await Promise.all(o),i.dc.nu(s),await async function(t,e){const n=hs(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Ws.forEach(e,(e=>Ws.forEach(e.Fi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Ws.forEach(e.Bi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Qs(t))throw t;is("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.Ji.get(t),i=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(i);n.Ji=n.Ji.insert(t,s)}}}(i.localStore,r))}async function If(t,e){const n=hs(t);if(!n.currentUser.isEqual(e)){is("SyncEngine","User change. New user:",e.toKey());const t=await xu(n.localStore,e);n.currentUser=e,function(t,e){t.Ec.forEach((t=>{t.forEach((t=>{t.reject(new ds(us.CANCELLED,e))}))})),t.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Sf(n,t.er)}}function kf(t,e){const n=hs(t),i=n.yc.get(e);if(i&&i.fc)return Fa().add(i.key);{let t=Fa();const i=n._c.get(e);if(!i)return t;for(const e of i){const i=n.wc.get(e);t=t.unionWith(i.view.nc)}return t}}async function Ef(t,e){const n=hs(t),i=await Au(n.localStore,e.query,!0),s=e.view.hc(i);return n.isPrimaryClient&&xf(n,e.targetId,s.cc),s}async function Cf(t,e){const n=hs(t);return Pu(n.localStore,e).then((t=>Sf(n,t)))}async function Af(t,e,n,i){const s=hs(t),r=await function(t,e){const n=hs(t),i=hs(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>i.Sn(t,e).next((e=>e?n.localDocuments.getDocuments(t,e):Ws.resolve(null)))))}(s.localStore,e);null!==r?("pending"===n?await Sd(s.remoteStore):"acknowledged"===n||"rejected"===n?(vf(s,e,i||null),yf(s,e),function(t,e){hs(hs(t).mutationQueue).Cn(e)}(s.localStore,e)):as(),await Sf(s,r)):is("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Of(t,e){const n=hs(t);if(Rf(n),Ff(n),!0===e&&!0!==n.vc){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await Pf(n,t.toArray());n.vc=!0,await Ld(n.remoteStore,!0);for(const i of e)ud(n.remoteStore,i)}else if(!1===e&&!1!==n.vc){const t=[];let e=Promise.resolve();n._c.forEach(((i,s)=>{n.sharedClientState.isLocalQueryTarget(s)?t.push(s):e=e.then((()=>(bf(n,s),Cu(n.localStore,s,!0)))),dd(n.remoteStore,s)})),await e,await Pf(n,t),function(t){const e=hs(t);e.yc.forEach(((t,n)=>{dd(e.remoteStore,n)})),e.Ic.Ts(),e.yc=new Map,e.gc=new Ur(Ds.comparator)}(n),n.vc=!1,await Ld(n.remoteStore,!1)}}async function Pf(t,e,n){const i=hs(t),s=[],r=[];for(const o of e){let t;const e=i._c.get(o);if(e&&0!==e.length){t=await Eu(i.localStore,ma(e[0]));for(const t of e){const e=i.wc.get(t),n=await Ef(i,e);n.snapshot&&r.push(n.snapshot)}}else{const e=await Ou(i.localStore,o);t=await Eu(i.localStore,e),await cf(i,Mf(e),o,!1,t.resumeToken)}s.push(t)}return i.dc.nu(r),s}function Mf(t){return la(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Df(t){const e=hs(t);return hs(hs(e.localStore).persistence).$i()}async function Lf(t,e,n,i){const s=hs(t);if(s.vc)return void is("SyncEngine","Ignoring unexpected query state notification.");const r=s._c.get(e);if(r&&r.length>0)switch(n){case"current":case"not-current":{const t=await Pu(s.localStore,Ta(r[0])),i=Nc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Xr.EMPTY_BYTE_STRING);await Sf(s,t,i);break}case"rejected":await Cu(s.localStore,e,!0),bf(s,e,i);break;default:as()}}async function Nf(t,e,n){const i=Rf(t);if(i.vc){for(const t of e){if(i._c.has(t)){is("SyncEngine","Adding an already active target "+t);continue}const e=await Ou(i.localStore,t),n=await Eu(i.localStore,e);await cf(i,Mf(e),n.targetId,!1,n.resumeToken),ud(i.remoteStore,n)}for(const t of n)i._c.has(t)&&await Cu(i.localStore,t,!1).then((()=>{dd(i.remoteStore,t),bf(i,t)})).catch(qs)}}function Rf(t){const e=hs(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ff.bind(null,e),e.dc.nu=Wd.bind(null,e.eventManager),e.dc.Pc=Hd.bind(null,e.eventManager),e}function Ff(t){const e=hs(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gf.bind(null,e),e}function jf(t,e,n){const i=hs(t);(async function(t,e,n){try{const i=await e.getMetadata();if(await function(t,e){const n=hs(t),i=Jc(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n.qs.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(i)>=0))}(t.localStore,i))return await e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(Zd(i));const s=new Jd(i,t.localStore,e.serializer);let r=await e.bc();for(;r;){const t=await s.zu(r);t&&n._updateProgress(t),r=await e.bc()}const o=await s.complete();return await Sf(t,o.Ju,void 0),await function(t,e){const n=hs(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n.qs.saveBundleMetadata(t,e)))}(t.localStore,i),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(t){return rs("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,e,n).then((t=>{i.sharedClientState.notifyBundleLoaded(t)}))}class Bf{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=ed(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return wu(this.persistence,new vu,t.initialUser,this.serializer)}createPersistence(t){return new au(lu.zs,this.serializer)}createSharedClientState(t){return new $u}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Uf extends Bf{constructor(t,e,n){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Vc.initialize(this,t),await Ff(this.Vc.syncEngine),await Sd(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(t){return wu(this.persistence,new vu,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new Fh(n,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const n=new ir(e,this.persistence);return new nr(t.asyncQueue,n)}createPersistence(t){const e=mu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_h.withCacheSize(this.cacheSizeBytes):_h.DEFAULT;return new fu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Zu(),td(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new $u}}class Vf extends Uf{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Vc.syncEngine;this.sharedClientState instanceof Gu&&(this.sharedClientState.syncEngine={jr:Af.bind(null,e),zr:Lf.bind(null,e),Wr:Nf.bind(null,e),$i:Df.bind(null,e),Qr:Cf.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ii((async t=>{await Of(this.Vc.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start():t||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(t&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():t||this.indexBackfillerScheduler.stop())}))}createSharedClientState(t){const e=Zu();if(!Gu.D(e))throw new ds(us.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=mu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Gu(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class zf{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>df(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=If.bind(null,this.syncEngine),await Ld(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Gd}createDatastore(t){const e=ed(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Ju(i));var i;return function(t,e,n,i){return new od(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,s=t=>df(this.syncEngine,t,0),r=Wu.D()?new Wu:new qu,new cd(e,n,i,s,r);var e,n,i,s,r}createSyncEngine(t,e){return function(t,e,n,i,s,r,o){const a=new of(t,e,n,i,s,r);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=hs(t);is("RemoteStore","RemoteStore shutting down."),e.vu.add(5),await hd(e),e.Pu.shutdown(),e.bu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):ss("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new fs,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((t=>{t&&t.Qu()?this.metadata.resolve(t.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.Gu)}`))}),(t=>this.metadata.reject(t)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const t=await this.kc();if(null===t)return null;const e=this.xc.decode(t),n=Number(e);isNaN(n)&&this.Mc(`length string (${e}) is not valid number`);const i=await this.$c(n);return new Yd(JSON.parse(i),t.length+n)}Oc(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0;)if(await this.Fc())break;if(0===this.buffer.length)return null;const t=this.Oc();t<0&&this.Mc("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async $c(t){for(;this.buffer.length<t;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const e=this.xc.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}async Fc(){const t=await this.Cc.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ds(us.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const e=await async function(t,e){const n=hs(t),i=rl(n.serializer)+"/documents",s={documents:e.map((t=>el(n.serializer,t)))},r=await n.vo("BatchGetDocuments",i,s,e.length),o=new Map;r.forEach((t=>{const e=ll(n.serializer,t);o.set(e.key.toString(),e)}));const a=[];return e.forEach((t=>{const e=o.get(t.toString());cs(!!e),a.push(e)})),a}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new yc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=Ds.fromPath(e);this.mutations.push(new vc(n,this.precondition(n)))})),await async function(t,e){const n=hs(t),i=rl(n.serializer)+"/documents",s={writes:e.map((t=>ul(n.serializer,t)))};await n.Io("Commit",i,s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw as();e=Cs.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ds(us.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Cs.min())?sc.exists(!1):sc.updateTime(e):sc.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Cs.min()))throw new ds(us.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sc.updateTime(e)}return sc.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t,e,n,i,s){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=i,this.deferred=s,this.Bc=n.maxAttempts,this.qo=new nd(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const t=new Wf(this.datastore),e=this.qc(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.Uc(t)}))))})).catch((t=>{this.Uc(t)}))}))}qc(t){try{const e=this.updateFunction(t);return!rr(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!Ic(e)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Ji.UNAUTHENTICATED,this.clientId=Ts.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{is("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(is("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ds(us.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=jd(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Xf(t,e){t.asyncQueue.verifyOperationInProgress(),is("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await xu(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Yf(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Jf(t);is("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>Dd(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Dd(e.remoteStore,n))),t._onlineComponents=e}function Qf(t){return"FirebaseError"===t.name?t.code===us.FAILED_PRECONDITION||t.code===us.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function Jf(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){is("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Qf(n))throw n;rs("Error using user provided cache. Falling back to memory cache: "+n),await Xf(t,new Bf)}}else is("FirestoreClient","Using default OfflineComponentProvider"),await Xf(t,new Bf);return t._offlineComponents}async function Zf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(is("FirestoreClient","Using user provided OnlineComponentProvider"),await Yf(t,t._uninitializedComponentsProvider._online)):(is("FirestoreClient","Using default OnlineComponentProvider"),await Yf(t,new zf))),t._onlineComponents}function tp(t){return Jf(t).then((t=>t.persistence))}function ep(t){return Jf(t).then((t=>t.localStore))}function np(t){return Zf(t).then((t=>t.remoteStore))}function ip(t){return Zf(t).then((t=>t.syncEngine))}function sp(t){return Zf(t).then((t=>t.datastore))}async function rp(t){const e=await Zf(t),n=e.eventManager;return n.onListen=af.bind(null,e.syncEngine),n.onUnlisten=lf.bind(null,e.syncEngine),n}function op(t){return t.asyncQueue.enqueue((async()=>{const e=await tp(t),n=await np(t);return e.setNetworkEnabled(!0),function(t){const e=hs(t);return e.vu.delete(0),ld(e)}(n)}))}function ap(t){return t.asyncQueue.enqueue((async()=>{const e=await tp(t),n=await np(t);return e.setNetworkEnabled(!1),async function(t){const e=hs(t);e.vu.add(0),await hd(e),e.bu.set("Offline")}(n)}))}function cp(t,e){const n=new fs;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await function(t,e){const n=hs(t);return n.persistence.runTransaction("read document","readonly",(t=>n.localDocuments.getDocument(t,e)))}(t,e);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ds(us.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const i=jd(t,`Failed to get document '${e} from cache`);n.reject(i)}}(await ep(t),e,n))),n.promise}function lp(t,e,n={}){const i=new fs;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,s){const r=new $f({next:r=>{e.enqueueAndForget((()=>qd(t,o)));const a=r.docs.has(n);!a&&r.fromCache?s.reject(new ds(us.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&i&&"server"===i.source?s.reject(new ds(us.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(r)},error:t=>s.reject(t)}),o=new Xd(ha(n.path),r,{includeMetadataChanges:!0,Ku:!0});return $d(t,o)}(await rp(t),t.asyncQueue,e,n,i))),i.promise}function hp(t,e){const n=new fs;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await Au(t,e,!0),s=new nf(e,i.ir),r=s.sc(i.documents),o=s.applyChanges(r,!1);n.resolve(o.snapshot)}catch(t){const i=jd(t,`Failed to execute query '${e} against cache`);n.reject(i)}}(await ep(t),e,n))),n.promise}function up(t,e,n={}){const i=new fs;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,s){const r=new $f({next:n=>{e.enqueueAndForget((()=>qd(t,o))),n.fromCache&&"server"===i.source?s.reject(new ds(us.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:t=>s.reject(t)}),o=new Xd(n,r,{includeMetadataChanges:!0,Ku:!0});return $d(t,o)}(await rp(t),t.asyncQueue,e,n,i))),i.promise}function dp(t,e){const n=new $f(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){hs(t).ku.add(e),e.next()}(await rp(t),n))),()=>{n.Dc(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){hs(t).ku.delete(e)}(await rp(t),n)))}}function fp(t,e,n,i){const s=function(t,e){let n;return n="string"==typeof t?Ac().encode(t):t,function(t,e){return new qf(t,e)}(function(t,e){if(t instanceof Uint8Array)return Gf(t,e);if(t instanceof ArrayBuffer)return Gf(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,ed(e));t.asyncQueue.enqueueAndForget((async()=>{jf(await ip(t),s,i)}))}function pp(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=hs(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n.qs.getNamedQuery(t,e)))}(await ep(t),e)))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function gp(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const mp=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t,e,n){if(!n)throw new ds(us.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vp(t,e,n,i){if(!0===e&&!0===i)throw new ds(us.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bp(t){if(!Ds.isDocumentKey(t))throw new ds(us.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wp(t){if(Ds.isDocumentKey(t))throw new ds(us.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":as()}function _p(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ds(us.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xp(t);throw new ds(us.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Tp(t,e){if(e<=0)throw new ds(us.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new ds(us.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ds(us.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gp(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new ds(us.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new ds(us.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new ds(us.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class Ip{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ds(us.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ds(us.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sp(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new gs;switch(t.type){case"firstParty":return new bs(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ds(us.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=mp.get(t);e&&(is("ComponentProvider","Removing Datastore"),mp.delete(t),e.terminate())}(this),Promise.resolve()}}function kp(t,e,n,i={}){var s;const r=(t=_p(t,Ip))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==e&&rs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Ji.MOCK_USER;else{e=(0,c.Sg)(i.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new ds(us.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ji(r)}t._authCredentials=new ms(new ps(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ap(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ep(this.firestore,t,this._key)}}class Cp{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Cp(this.firestore,t,this._query)}}class Ap extends Cp{constructor(t,e,n){super(t,e,ha(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ep(this.firestore,null,new Ds(t))}withConverter(t){return new Ap(this.firestore,t,this._path)}}function Op(t,e,...n){if(t=(0,c.m9)(t),yp("collection","path",e),t instanceof Ip){const i=Os.fromString(e,...n);return wp(i),new Ap(t,null,i)}{if(!(t instanceof Ep||t instanceof Ap))throw new ds(us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Os.fromString(e,...n));return wp(i),new Ap(t.firestore,null,i)}}function Pp(t,e){if(t=_p(t,Ip),yp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ds(us.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cp(t,null,function(t){return new ca(Os.emptyPath(),t)}(e))}function Mp(t,e,...n){if(t=(0,c.m9)(t),1===arguments.length&&(e=Ts.A()),yp("doc","path",e),t instanceof Ip){const i=Os.fromString(e,...n);return bp(i),new Ep(t,null,new Ds(i))}{if(!(t instanceof Ep||t instanceof Ap))throw new ds(us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Os.fromString(e,...n));return bp(i),new Ep(t.firestore,t instanceof Ap?t.converter:null,new Ds(i))}}function Dp(t,e){return t=(0,c.m9)(t),e=(0,c.m9)(e),(t instanceof Ep||t instanceof Ap)&&(e instanceof Ep||e instanceof Ap)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Lp(t,e){return t=(0,c.m9)(t),e=(0,c.m9)(e),t instanceof Cp&&e instanceof Cp&&t.firestore===e.firestore&&ba(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Np{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new nd(this,"async_queue_retry"),this.Xc=()=>{const t=td();t&&is("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const t=td();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=td();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise((()=>{}));const e=new fs;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Qc.push(t),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(t){if(!Qs(t))throw t;is("AsyncQueue","Operation failed with retryable error: "+t)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(t){const e=this.Gc.then((()=>(this.Hc=!0,t().catch((t=>{this.Wc=t,this.Hc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);throw ss("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Hc=!1,t))))));return this.Gc=e,e}enqueueAfterDelay(t,e,n){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const i=Fd.createAndSchedule(this,t,e,n,(t=>this.na(t)));return this.zc.push(i),i}Zc(){this.Wc&&as()}verifyOperationInProgress(){}async sa(){let t;do{t=this.Gc,await t}while(t!==this.Gc)}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then((()=>{this.zc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()}))}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function Rp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"==typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,["next","error","complete"])}class Fp{constructor(){this._progressObserver={},this._taskCompletionResolver=new fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=-1;class Bp extends Ip{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Np,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vp(this),this._firestoreClient.terminate()}}function Up(t){return t._firestoreClient||Vp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Vp(t){var e,n,i;const s=t._freezeSettings(),r=function(t,e,n,i){return new io(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,gp(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new Kf(t._authCredentials,t._appCheckCredentials,t._queue,r),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=s.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function zp(t,e){Qp(t=_p(t,Bp));const n=Up(t);if(n._uninitializedComponentsProvider)throw new ds(us.FAILED_PRECONDITION,"SDK cache is already specified.");rs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),s=new zf;return $p(n,s,new Uf(s,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Gp(t){Qp(t=_p(t,Bp));const e=Up(t);if(e._uninitializedComponentsProvider)throw new ds(us.FAILED_PRECONDITION,"SDK cache is already specified.");rs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new zf;return $p(e,i,new Vf(i,n.cacheSizeBytes))}function $p(t,e,n){const i=new fs;return t.asyncQueue.enqueue((async()=>{try{await Xf(t,n),await Yf(t,e),i.resolve()}catch(t){const n=t;if(!Qf(n))throw n;rs("Error enabling indexeddb cache. Falling back to memory cache: "+n),i.reject(n)}})).then((()=>i.promise))}function qp(t){if(t._initialized&&!t._terminated)throw new ds(us.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fs;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!Ks.D())return Promise.resolve();const e=t+"main";await Ks.delete(e)}(mu(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Wp(t){return function(t){const e=new fs;return t.asyncQueue.enqueueAndForget((async()=>mf(await ip(t),e))),e.promise}(Up(t=_p(t,Bp)))}function Hp(t){return op(Up(t=_p(t,Bp)))}function Kp(t){return ap(Up(t=_p(t,Bp)))}function Xp(t,e){const n=Up(t=_p(t,Bp)),i=new Fp;return fp(n,t._databaseId,e,i),i}function Yp(t,e){return pp(Up(t=_p(t,Bp)),e).then((e=>e?new Cp(t,null,e.query):null))}function Qp(t){if(t._initialized||t._terminated)throw new ds(us.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jp{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Jp(Xr.fromBase64String(t))}catch(t){throw new ds(us.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Jp(Xr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ds(us.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ms(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tg{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ds(us.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ds(us.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ss(this._lat,t._lat)||Ss(this._long,t._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=/^__.*__$/;class ig{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new fc(t,this.data,this.fieldMask,e,this.fieldTransforms):new dc(t,this.data,e,this.fieldTransforms)}}class sg{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new fc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function rg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw as()}}class og{constructor(t,e,n,i,s,r){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new og(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.aa({path:n,la:!1});return i.fa(t),i}da(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.aa({path:n,la:!1});return i.ua(),i}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return kg(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(rg(this.ca)&&ng.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class ag{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||ed(t)}ya(t,e,n,i=!1){return new og({ca:t,methodName:e,ga:n,path:Ms.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cg(t){const e=t._freezeSettings(),n=ed(t._databaseId);return new ag(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lg(t,e,n,i,s,r={}){const o=t.ya(r.merge||r.mergeFields?2:0,e,n,s);_g("Data must be an object, but it was:",o,i);const a=wg(i,o);let c,l;if(r.merge)c=new Wr(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const i of r.mergeFields){const s=Tg(e,i,n);if(!o.contains(s))throw new ds(us.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Eg(t,s)||t.push(s)}c=new Wr(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new ig(new Eo(a),c,l)}class hg extends tg{_toFieldTransform(t){if(2!==t.ca)throw 1===t.ca?t._a(`${this._methodName}() can only appear at the top level of your update data`):t._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hg}}function ug(t,e,n){return new og({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dg extends tg{_toFieldTransform(t){return new ec(t.path,new Ha)}isEqual(t){return t instanceof dg}}class fg extends tg{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=ug(this,t,!0),n=this.pa.map((t=>bg(t,e))),i=new Ka(n);return new ec(t.path,i)}isEqual(t){return this===t}}class pg extends tg{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=ug(this,t,!0),n=this.pa.map((t=>bg(t,e))),i=new Ya(n);return new ec(t.path,i)}isEqual(t){return this===t}}class gg extends tg{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new Ja(t.serializer,za(t.serializer,this.Ia));return new ec(t.path,e)}isEqual(t){return this===t}}function mg(t,e,n,i){const s=t.ya(1,e,n);_g("Data must be an object, but it was:",s,i);const r=[],o=Eo.empty();jr(i,((t,i)=>{const a=Ig(e,t,n);i=(0,c.m9)(i);const l=s.da(a);if(i instanceof hg)r.push(a);else{const t=bg(i,l);null!=t&&(r.push(a),o.set(a,t))}}));const a=new Wr(r);return new sg(o,a,s.fieldTransforms)}function yg(t,e,n,i,s,r){const o=t.ya(1,e,n),a=[Tg(e,i,n)],l=[s];if(r.length%2!=0)throw new ds(us.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let c=0;c<r.length;c+=2)a.push(Tg(e,r[c])),l.push(r[c+1]);const h=[],u=Eo.empty();for(let f=a.length-1;f>=0;--f)if(!Eg(h,a[f])){const t=a[f];let e=l[f];e=(0,c.m9)(e);const n=o.da(t);if(e instanceof hg)h.push(t);else{const i=bg(e,n);null!=i&&(h.push(t),u.set(t,i))}}const d=new Wr(h);return new sg(u,d,o.fieldTransforms)}function vg(t,e,n,i=!1){return bg(n,t.ya(i?4:3,e))}function bg(t,e){if(xg(t=(0,c.m9)(t)))return _g("Unsupported field value:",e,t),wg(t,e);if(t instanceof tg)return function(t,e){if(!rg(e.ca))throw e._a(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e._a(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const s of t){let t=bg(s,e.wa(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,c.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return za(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Es.fromDate(t);return{timestampValue:Xc(e.serializer,n)}}if(t instanceof Es){const n=new Es(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Xc(e.serializer,n)}}if(t instanceof eg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Jp)return{bytesValue:Yc(e.serializer,t._byteString)};if(t instanceof Ep){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Zc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e._a(`Unsupported field value: ${xp(t)}`)}(t,e)}function wg(t,e){const n={};return Br(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,((t,i)=>{const s=bg(i,e.ha(t));null!=s&&(n[t]=s)})),{mapValue:{fields:n}}}function xg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Es||t instanceof eg||t instanceof Jp||t instanceof Ep||t instanceof tg)}function _g(t,e,n){if(!xg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=xp(n);throw"an object"===i?e._a(t+" a custom object"):e._a(t+" "+i)}}function Tg(t,e,n){if((e=(0,c.m9)(e))instanceof Zp)return e._internalPath;if("string"==typeof e)return Ig(t,e);throw kg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Sg=new RegExp("[~\\*/\\[\\]]");function Ig(t,e,n){if(e.search(Sg)>=0)throw kg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zp(...e.split("."))._internalPath}catch(i){throw kg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kg(t,e,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new ds(us.INVALID_ARGUMENT,a+t+c)}function Eg(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t,e,n,i,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ep(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Ag(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Og("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Ag extends Cg{data(){return super.data()}}function Og(t,e){return"string"==typeof e?Ig(t,e):e instanceof Zp?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new ds(us.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mg{}class Dg extends Mg{}function Lg(t,e,...n){let i=[];e instanceof Mg&&i.push(e),i=i.concat(n),function(t){const e=t.filter((t=>t instanceof Fg)).length,n=t.filter((t=>t instanceof Ng)).length;if(e>1||e>0&&n>0)throw new ds(us.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i);for(const s of i)t=s._apply(t);return t}class Ng extends Dg{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Ng(t,e,n)}_apply(t){const e=this._parse(t);return Jg(t._query,e),new Cp(t.firestore,t.converter,ya(t._query,e))}_parse(t){const e=cg(t.firestore),n=function(t,e,n,i,s,r,o){let a;if(s.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new ds(us.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){Qg(o,r);const e=[];for(const n of o)e.push(Yg(i,t,n));a={arrayValue:{values:e}}}else a=Yg(i,t,o)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||Qg(o,r),a=vg(n,e,o,"in"===r||"not-in"===r);return Ro.create(s,r,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function Rg(t,e,n){const i=e,s=Og("where",t);return Ng._create(s,i,n)}class Fg extends Mg{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Fg(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Fo.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const s of i)Jg(n,s),n=ya(n,s)}(t._query,e),new Cp(t.firestore,t.converter,ya(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jg extends Dg{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new jg(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new ds(us.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ds(us.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Do(e,n);return function(t,e){if(null===da(t)){const n=fa(t);null!==n&&Zg(t,n,e.field)}}(t,i),i}(t._query,this._field,this._direction);return new Cp(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new ca(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function Bg(t,e="asc"){const n=e,i=Og("orderBy",t);return jg._create(i,n)}class Ug extends Dg{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new Ug(t,e,n)}_apply(t){return new Cp(t.firestore,t.converter,va(t._query,this._limit,this._limitType))}}function Vg(t){return Tp("limit",t),Ug._create("limit",t,"F")}function zg(t){return Tp("limitToLast",t),Ug._create("limitToLast",t,"L")}class Gg extends Dg{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new Gg(t,e,n)}_apply(t){const e=Xg(t,this.type,this._docOrFields,this._inclusive);return new Cp(t.firestore,t.converter,function(t,e){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function $g(...t){return Gg._create("startAt",t,!0)}function qg(...t){return Gg._create("startAfter",t,!1)}class Wg extends Dg{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new Wg(t,e,n)}_apply(t){const e=Xg(t,this.type,this._docOrFields,this._inclusive);return new Cp(t.firestore,t.converter,function(t,e){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Hg(...t){return Wg._create("endBefore",t,!1)}function Kg(...t){return Wg._create("endAt",t,!0)}function Xg(t,e,n,i){if(n[0]=(0,c.m9)(n[0]),n[0]instanceof Cg)return function(t,e,n,i,s){if(!i)throw new ds(us.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const r=[];for(const o of ga(t))if(o.field.isKeyField())r.push(go(e,i.key));else{const t=i.data.field(o.field);if(to(t))throw new ds(us.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new ds(us.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}r.push(t)}return new Oo(r,s)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=cg(t.firestore);return function(t,e,n,i,s,r){const o=t.explicitOrderBy;if(s.length>o.length)throw new ds(us.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<s.length;c++){const r=s[c];if(o[c].field.isKeyField()){if("string"!=typeof r)throw new ds(us.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof r}`);if(!pa(t)&&-1!==r.indexOf("/"))throw new ds(us.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${r}' contains a slash.`);const n=t.path.child(Os.fromString(r));if(!Ds.isDocumentKey(n))throw new ds(us.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new Ds(n);a.push(go(e,s))}else{const t=vg(n,i,r);a.push(t)}}return new Oo(a,r)}(t._query,t.firestore._databaseId,s,e,n,i)}}function Yg(t,e,n){if("string"==typeof(n=(0,c.m9)(n))){if(""===n)throw new ds(us.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pa(e)&&-1!==n.indexOf("/"))throw new ds(us.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Os.fromString(n));if(!Ds.isDocumentKey(i))throw new ds(us.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return go(t,new Ds(i))}if(n instanceof Ep)return go(t,n._key);throw new ds(us.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xp(n)}.`)}function Qg(t,e){if(!Array.isArray(t)||0===t.length)throw new ds(us.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jg(t,e){if(e.isInequality()){const n=fa(t),i=e.field;if(null!==n&&!n.isEqual(i))throw new ds(us.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const s=da(t);null!==s&&Zg(t,i,s)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new ds(us.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ds(us.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Zg(t,e,n){if(!n.isEqual(e))throw new ds(us.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class tm{convertValue(t,e="none"){switch(ao(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw as()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return jr(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new eg(Jr(t.latitude),Jr(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=eo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(no(t));default:return null}}convertTimestamp(t){const e=Qr(t);return new Es(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Os.fromString(t);cs(kl(n));const i=new so(n.get(1),n.get(3)),s=new Ds(n.popFirst(5));return i.isEqual(e)||ss(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class nm extends tm{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jp(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ep(this.firestore,null,e)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class im{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sm extends Cg{constructor(t,e,n,i,s,r){super(t,e,n,i,r),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Og("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class rm extends sm{data(t={}){return super.data(t)}}class om{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new im(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new rm(this._firestore,this._userDataWriter,n.key,n,new im(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ds(us.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new rm(t._firestore,t._userDataWriter,n.doc.key,n.doc,new im(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new rm(t._firestore,t._userDataWriter,e.doc.key,e.doc,new im(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let s=-1,r=-1;return 0!==e.type&&(s=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:am(e.type),doc:i,oldIndex:s,newIndex:r}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function am(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return as()}}function cm(t,e){return t instanceof sm&&e instanceof sm?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof om&&e instanceof om&&t._firestore===e._firestore&&Lp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t){t=_p(t,Ep);const e=_p(t.firestore,Bp);return lp(Up(e),t._key).then((n=>Tm(e,t,n)))}class hm extends tm{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jp(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ep(this.firestore,null,e)}}function um(t){t=_p(t,Ep);const e=_p(t.firestore,Bp),n=Up(e),i=new hm(e);return cp(n,t._key).then((n=>new sm(e,i,t._key,n,new im(null!==n&&n.hasLocalMutations,!0),t.converter)))}function dm(t){t=_p(t,Ep);const e=_p(t.firestore,Bp);return lp(Up(e),t._key,{source:"server"}).then((n=>Tm(e,t,n)))}function fm(t){t=_p(t,Cp);const e=_p(t.firestore,Bp),n=Up(e),i=new hm(e);return Pg(t._query),up(n,t._query).then((n=>new om(e,i,t,n)))}function pm(t){t=_p(t,Cp);const e=_p(t.firestore,Bp),n=Up(e),i=new hm(e);return hp(n,t._query).then((n=>new om(e,i,t,n)))}function gm(t){t=_p(t,Cp);const e=_p(t.firestore,Bp),n=Up(e),i=new hm(e);return up(n,t._query,{source:"server"}).then((n=>new om(e,i,t,n)))}function mm(t,e,n){t=_p(t,Ep);const i=_p(t.firestore,Bp),s=em(t.converter,e,n);return _m(i,[lg(cg(i),"setDoc",t._key,s,null!==t.converter,n).toMutation(t._key,sc.none())])}function ym(t,e,n,...i){t=_p(t,Ep);const s=_p(t.firestore,Bp),r=cg(s);let o;return o="string"==typeof(e=(0,c.m9)(e))||e instanceof Zp?yg(r,"updateDoc",t._key,e,n,i):mg(r,"updateDoc",t._key,e),_m(s,[o.toMutation(t._key,sc.exists(!0))])}function vm(t){return _m(_p(t.firestore,Bp),[new yc(t._key,sc.none())])}function bm(t,e){const n=_p(t.firestore,Bp),i=Mp(t),s=em(t.converter,e);return _m(n,[lg(cg(t.firestore),"addDoc",i._key,s,null!==t.converter,{}).toMutation(i._key,sc.exists(!1))]).then((()=>i))}function wm(t,...e){var n,i,s;t=(0,c.m9)(t);let r={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||Rp(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(Rp(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[o+2]=null===(s=t.complete)||void 0===s?void 0:s.bind(t)}let l,h,u;if(t instanceof Ep)h=_p(t.firestore,Bp),u=ha(t._key.path),l={next:n=>{e[o]&&e[o](Tm(h,t,n))},error:e[o+1],complete:e[o+2]};else{const n=_p(t,Cp);h=_p(n.firestore,Bp),u=n._query;const i=new hm(h);l={next:t=>{e[o]&&e[o](new om(h,i,n,t))},error:e[o+1],complete:e[o+2]},Pg(t._query)}return function(t,e,n,i){const s=new $f(i),r=new Xd(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>$d(await rp(t),r))),()=>{s.Dc(),t.asyncQueue.enqueueAndForget((async()=>qd(await rp(t),r)))}}(Up(h),u,a,l)}function xm(t,e){return dp(Up(t=_p(t,Bp)),Rp(e)?e:{next:e})}function _m(t,e){return function(t,e){const n=new fs;return t.asyncQueue.enqueueAndForget((async()=>hf(await ip(t),e,n))),n.promise}(Up(t),e)}function Tm(t,e,n){const i=n.docs.get(e._key),s=new hm(t);return new sm(t,s,e._key,i,new im(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sm={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=cg(t)}set(t,e,n){this._verifyNotCommitted();const i=km(t,this._firestore),s=em(i.converter,e,n),r=lg(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,n);return this._mutations.push(r.toMutation(i._key,sc.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const s=km(t,this._firestore);let r;return r="string"==typeof(e=(0,c.m9)(e))||e instanceof Zp?yg(this._dataReader,"WriteBatch.update",s._key,e,n,i):mg(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(r.toMutation(s._key,sc.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=km(t,this._firestore);return this._mutations=this._mutations.concat(new yc(e._key,sc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ds(us.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function km(t,e){if((t=(0,c.m9)(t)).firestore!==e)throw new ds(us.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=cg(t)}get(t){const e=km(t,this._firestore),n=new nm(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return as();const i=t[0];if(i.isFoundDocument())return new Cg(this._firestore,n,i.key,i,e.converter);if(i.isNoDocument())return new Cg(this._firestore,n,e._key,null,e.converter);throw as()}))}set(t,e,n){const i=km(t,this._firestore),s=em(i.converter,e,n),r=lg(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,n);return this._transaction.set(i._key,r),this}update(t,e,n,...i){const s=km(t,this._firestore);let r;return r="string"==typeof(e=(0,c.m9)(e))||e instanceof Zp?yg(this._dataReader,"Transaction.update",s._key,e,n,i):mg(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,r),this}delete(t){const e=km(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=km(t,this._firestore),n=new hm(this._firestore);return super.get(t).then((t=>new sm(this._firestore,n,e._key,t._document,new im(!1,!1),e.converter)))}}function Cm(t,e,n){t=_p(t,Bp);const i=Object.assign(Object.assign({},Sm),n);return function(t){if(t.maxAttempts<1)throw new ds(us.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(t,e,n){const i=new fs;return t.asyncQueue.enqueueAndForget((async()=>{const s=await sp(t);new Hf(t.asyncQueue,s,n,e,i).run()})),i.promise}(Up(t),(n=>e(new Em(t,n))),i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){return new hg("deleteField")}function Om(){return new dg("serverTimestamp")}function Pm(...t){return new fg("arrayUnion",t)}function Mm(...t){return new pg("arrayRemove",t)}function Dm(t){return new gg("increment",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,e=!0){!function(t){Zi=t}(r.SDK_VERSION),(0,r._registerComponent)(new o.wA("firestore",((t,{instanceIdentifier:n,options:i})=>{const s=t.getProvider("app").getImmediate(),r=new Bp(new ys(t.getProvider("auth-internal")),new xs(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ds(us.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new so(t.options.projectId,e)}(s,n),s);return i=Object.assign({useFetchStreams:e},i),r._setSettings(i),r}),"PUBLIC").setMultipleInstances(!0)),(0,r.registerVersion)(Qi,"3.12.0",t),(0,r.registerVersion)(Qi,"3.12.0","esm2017")}();const Lm="@firebase/firestore-compat",Nm="0.3.9";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Rm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ds("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(){if("undefined"===typeof Uint8Array)throw new ds("unimplemented","Uint8Arrays are not available in this environment.")}function jm(){if(!Kr())throw new ds("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Bm{constructor(t){this._delegate=t}static fromBase64String(t){return jm(),new Bm(Jp.fromBase64String(t))}static fromUint8Array(t){return Fm(),new Bm(Jp.fromUint8Array(t))}toBase64(){return jm(),this._delegate.toBase64()}toUint8Array(){return Fm(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){return Vm(t,["next","error","complete"])}function Vm(t,e){if("object"!==typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"===typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{enableIndexedDbPersistence(t,e){return zp(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return Gp(t._delegate)}clearIndexedDbPersistence(t){return qp(t._delegate)}}class Gm{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof so||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();t.merge||e.host===t.host||rs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,n={}){kp(this._delegate,t,e,n)}enableNetwork(){return Hp(this._delegate)}disableNetwork(){return Kp(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,vp("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Wp(this._delegate)}onSnapshotsInSync(t){return xm(this._delegate,t)}get app(){if(!this._appCompat)throw new ds("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new sy(this,Op(this._delegate,t))}catch(e){throw Ym(e,"collection()","Firestore.collection()")}}doc(t){try{return new Xm(this,Mp(this._delegate,t))}catch(e){throw Ym(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ey(this,Pp(this._delegate,t))}catch(e){throw Ym(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return Cm(this._delegate,(e=>t(new Wm(this,e))))}batch(){return Up(this._delegate),new Hm(new Im(this._delegate,(t=>_m(this._delegate,t))))}loadBundle(t){return Xp(this._delegate,t)}namedQuery(t){return Yp(this._delegate,t).then((t=>t?new ey(this,t):null))}}class $m extends tm{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bm(new Jp(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Xm.forKey(e,this.firestore,null)}}function qm(t){ns(t)}class Wm{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new $m(t)}get(t){const e=ry(t);return this._delegate.get(e).then((t=>new Zm(this._firestore,new sm(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter))))}set(t,e,n){const i=ry(t);return n?(Rm("Transaction.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const s=ry(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,n,...i),this}delete(t){const e=ry(t);return this._delegate.delete(e),this}}class Hm{constructor(t){this._delegate=t}set(t,e,n){const i=ry(t);return n?(Rm("WriteBatch.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const s=ry(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,n,...i),this}delete(t){const e=ry(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Km{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new rm(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ty(this._firestore,n),null!==e&&void 0!==e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=Km.INSTANCES;let i=n.get(t);i||(i=new WeakMap,n.set(t,i));let s=i.get(e);return s||(s=new Km(t,new $m(t),e),i.set(e,s)),s}}Km.INSTANCES=new WeakMap;class Xm{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new $m(t)}static forPath(t,e,n){if(t.length%2!==0)throw new ds("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Xm(e,new Ep(e._delegate,n,new Ds(t)))}static forKey(t,e,n){return new Xm(e,new Ep(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new sy(this.firestore,Op(this._delegate,t))}catch(e){throw Ym(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=(0,c.m9)(t),t instanceof Ep&&Dp(this._delegate,t)}set(t,e){e=Rm("DocumentReference.set",e);try{return e?mm(this._delegate,t,e):mm(this._delegate,t)}catch(n){throw Ym(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?ym(this._delegate,t):ym(this._delegate,t,e,...n)}catch(i){throw Ym(i,"updateDoc()","DocumentReference.update()")}}delete(){return vm(this._delegate)}onSnapshot(...t){const e=Qm(t),n=Jm(t,(t=>new Zm(this.firestore,new sm(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))));return wm(this._delegate,e,n)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?um(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?dm(this._delegate):lm(this._delegate),e.then((t=>new Zm(this.firestore,new sm(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))))}withConverter(t){return new Xm(this.firestore,t?this._delegate.withConverter(Km.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Ym(t,e,n){return t.message=t.message.replace(e,n),t}function Qm(t){for(const e of t)if("object"===typeof e&&!Um(e))return e;return{}}function Jm(t,e){var n,i;let s;return s=Um(t[0])?t[0]:Um(t[1])?t[1]:"function"===typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{s.next&&s.next(e(t))},error:null===(n=s.error)||void 0===n?void 0:n.bind(s),complete:null===(i=s.complete)||void 0===i?void 0:i.bind(s)}}class Zm{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Xm(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return cm(this._delegate,t._delegate)}}class ty extends Zm{data(t){const e=this._delegate.data(t);return ls(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e}}class ey{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new $m(t)}where(t,e,n){try{return new ey(this.firestore,Lg(this._delegate,Rg(t,e,n)))}catch(i){throw Ym(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new ey(this.firestore,Lg(this._delegate,Bg(t,e)))}catch(n){throw Ym(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new ey(this.firestore,Lg(this._delegate,Vg(t)))}catch(e){throw Ym(e,"limit()","Query.limit()")}}limitToLast(t){try{return new ey(this.firestore,Lg(this._delegate,zg(t)))}catch(e){throw Ym(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new ey(this.firestore,Lg(this._delegate,$g(...t)))}catch(e){throw Ym(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new ey(this.firestore,Lg(this._delegate,qg(...t)))}catch(e){throw Ym(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new ey(this.firestore,Lg(this._delegate,Hg(...t)))}catch(e){throw Ym(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new ey(this.firestore,Lg(this._delegate,Kg(...t)))}catch(e){throw Ym(e,"endAt()","Query.endAt()")}}isEqual(t){return Lp(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?pm(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?gm(this._delegate):fm(this._delegate),e.then((t=>new iy(this.firestore,new om(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))))}onSnapshot(...t){const e=Qm(t),n=Jm(t,(t=>new iy(this.firestore,new om(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))));return wm(this._delegate,e,n)}withConverter(t){return new ey(this.firestore,t?this._delegate.withConverter(Km.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class ny{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new ty(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iy{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new ey(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((t=>new ty(this._firestore,t)))}docChanges(t){return this._delegate.docChanges(t).map((t=>new ny(this._firestore,t)))}forEach(t,e){this._delegate.forEach((n=>{t.call(e,new ty(this._firestore,n))}))}isEqual(t){return cm(this._delegate,t._delegate)}}class sy extends ey{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Xm(this.firestore,t):null}doc(t){try{return new Xm(this.firestore,void 0===t?Mp(this._delegate):Mp(this._delegate,t))}catch(e){throw Ym(e,"doc()","CollectionReference.doc()")}}add(t){return bm(this._delegate,t).then((t=>new Xm(this.firestore,t)))}isEqual(t){return Dp(this._delegate,t._delegate)}withConverter(t){return new sy(this.firestore,t?this._delegate.withConverter(Km.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function ry(t){return _p(t,Ep)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(...t){this._delegate=new Zp(...t)}static documentId(){return new oy(Ms.keyField().canonicalString())}isEqual(t){return t=(0,c.m9)(t),t instanceof Zp&&this._delegate._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t){this._delegate=t}static serverTimestamp(){const t=Om();return t._methodName="FieldValue.serverTimestamp",new ay(t)}static delete(){const t=Am();return t._methodName="FieldValue.delete",new ay(t)}static arrayUnion(...t){const e=Pm(...t);return e._methodName="FieldValue.arrayUnion",new ay(e)}static arrayRemove(...t){const e=Mm(...t);return e._methodName="FieldValue.arrayRemove",new ay(e)}static increment(t){const e=Dm(t);return e._methodName="FieldValue.increment",new ay(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy={Firestore:Gm,GeoPoint:eg,Timestamp:Es,Blob:Bm,Transaction:Wm,WriteBatch:Hm,DocumentReference:Xm,DocumentSnapshot:Zm,Query:ey,QueryDocumentSnapshot:ty,QuerySnapshot:iy,CollectionReference:sy,FieldPath:oy,FieldValue:ay,setLogLevel:qm,CACHE_SIZE_UNLIMITED:jp};function ly(t,e){t.INTERNAL.registerComponent(new o.wA("firestore-compat",(t=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(n,i)}),"PUBLIC").setServiceProps(Object.assign({},cy)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){ly(t,((t,e)=>new Gm(t,e,new zm))),t.registerVersion(Lm,Nm)}hy(s.Z)},2201:function(t,e,n){"use strict";n.d(e,{PO:function(){return B},p7:function(){return ee}});var i=n(6252),s=n(2262);
/*!
  * vue-router v4.2.0
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const r="undefined"!==typeof window;function o(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function c(t,e){const n={};for(const i in e){const s=e[i];n[i]=h(s)?s.map(t):t(s)}return n}const l=()=>{},h=Array.isArray;const u=/\/$/,d=t=>t.replace(u,"");function f(t,e,n="/"){let i,s={},r="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(i=e.slice(0,c),r=e.slice(c+1,a>-1?a:e.length),s=t(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=x(null!=i?i:e,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function m(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&y(e.matched[i],n.matched[s])&&v(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function y(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function v(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!b(t[n],e[n]))return!1;return!0}function b(t,e){return h(t)?w(t,e):h(e)?w(e,t):t===e}function w(t,e){return h(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function x(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),s=i[i.length-1];".."!==s&&"."!==s||i.push("");let r,o,a=n.length-1;for(r=0;r<i.length;r++)if(o=i[r],"."!==o){if(".."!==o)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var _,T;(function(t){t["pop"]="pop",t["push"]="push"})(_||(_={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(T||(T={}));function S(t){if(!t)if(r){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),d(t)}const I=/^[^#]+#/;function k(t,e){return t.replace(I,"#")+e}function E(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const C=()=>({left:window.pageXOffset,top:window.pageYOffset});function A(t){let e;if("el"in t){const n=t.el,i="string"===typeof n&&n.startsWith("#");0;const s="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=E(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function O(t,e){const n=history.state?history.state.position-e:-1;return n+t}const P=new Map;function M(t,e){P.set(t,e)}function D(t){const e=P.get(t);return P.delete(t),e}let L=()=>location.protocol+"//"+location.host;function N(t,e){const{pathname:n,search:i,hash:s}=e,r=t.indexOf("#");if(r>-1){let e=s.includes(t.slice(r))?t.slice(r).length:1,n=s.slice(e);return"/"!==n[0]&&(n="/"+n),g(n,"")}const o=g(n,t);return o+i+s}function R(t,e,n,i){let s=[],r=[],o=null;const c=({state:r})=>{const a=N(t,location),c=n.value,l=e.value;let h=0;if(r){if(n.value=a,e.value=r,o&&o===c)return void(o=null);h=l?r.position-l.position:0}else i(a);s.forEach((t=>{t(n.value,c,{delta:h,type:_.pop,direction:h?h>0?T.forward:T.back:T.unknown})}))};function l(){o=n.value}function h(t){s.push(t);const e=()=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)};return r.push(e),e}function u(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:C()}),"")}function d(){for(const t of r)t();r=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:h,destroy:d}}function F(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?C():null}}function j(t){const{history:e,location:n}=window,i={value:N(t,n)},s={value:e.state};function r(i,r,o){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+i:L()+t+i;try{e[o?"replaceState":"pushState"](r,"",c),s.value=r}catch(l){console.error(l),n[o?"replace":"assign"](c)}}function o(t,n){const o=a({},e.state,F(s.value.back,t,s.value.forward,!0),n,{position:s.value.position});r(t,o,!0),i.value=t}function c(t,n){const o=a({},s.value,e.state,{forward:t,scroll:C()});r(o.current,o,!0);const c=a({},F(i.value,t,null),{position:o.position+1},n);r(t,c,!1),i.value=t}return s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:i,state:s,push:c,replace:o}}function B(t){t=S(t);const e=j(t),n=R(t,e.state,e.location,e.replace);function i(t,e=!0){e||n.pauseListeners(),history.go(t)}const s=a({location:"",base:t,go:i,createHref:k.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function U(t){return"string"===typeof t||t&&"object"===typeof t}function V(t){return"string"===typeof t||"symbol"===typeof t}const z={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},G=Symbol("");var $;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})($||($={}));function q(t,e){return a(new Error,{type:t,[G]:!0},e)}function W(t,e){return t instanceof Error&&G in t&&(null==e||!!(t.type&e))}const H="[^/]+?",K={sensitive:!1,strict:!1,start:!0,end:!0},X=/[.+*?^${}()[\]/\\]/g;function Y(t,e){const n=a({},K,e),i=[];let s=n.start?"^":"";const r=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(s+="/");for(let e=0;e<a.length;e++){const i=a[e];let o=40+(n.sensitive?.25:0);if(0===i.type)e||(s+="/"),s+=i.value.replace(X,"\\$&"),o+=40;else if(1===i.type){const{value:t,repeatable:n,optional:c,regexp:l}=i;r.push({name:t,repeatable:n,optional:c});const h=l||H;if(h!==H){o+=10;try{new RegExp(`(${h})`)}catch(u){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+u.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(d=c&&a.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),s+=d,o+=20,c&&(o+=-8),n&&(o+=-20),".*"===h&&(o+=-50)}t.push(o)}i.push(t)}if(n.strict&&n.end){const t=i.length-1;i[t][i[t].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(t){const e=t.match(o),n={};if(!e)return null;for(let i=1;i<e.length;i++){const t=e[i]||"",s=r[i-1];n[s.name]=t&&s.repeatable?t.split("/"):t}return n}function l(e){let n="",i=!1;for(const s of t){i&&n.endsWith("/")||(n+="/"),i=!1;for(const t of s)if(0===t.type)n+=t.value;else if(1===t.type){const{value:r,repeatable:o,optional:a}=t,c=r in e?e[r]:"";if(h(c)&&!o)throw new Error(`Provided param "${r}" is an array but it is not repeatable (* or + modifiers)`);const l=h(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${r}"`);s.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=l}}return n||"/"}return{re:o,score:i,keys:r,parse:c,stringify:l}}function Q(t,e){let n=0;while(n<t.length&&n<e.length){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function J(t,e){let n=0;const i=t.score,s=e.score;while(n<i.length&&n<s.length){const t=Q(i[n],s[n]);if(t)return t;n++}if(1===Math.abs(s.length-i.length)){if(Z(i))return 1;if(Z(s))return-1}return s.length-i.length}function Z(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function nt(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${l}": ${t}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a,c=0,l="",h="";function u(){l&&(0===n?r.push({type:0,value:l}):1===n||2===n||3===n?(r.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:l,regexp:h,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),l="")}function d(){l+=a}while(c<t.length)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&u(),o()):":"===a?(u(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:et.test(a)?d():(u(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==h[h.length-1]?h=h.slice(0,-1)+a:n=3:h+=a;break;case 3:u(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,h="";break;default:e("Unknown state");break}else i=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${l}"`),u(),o(),s}function it(t,e,n){const i=Y(nt(t.path),n);const s=a(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf===!e.record.aliasOf&&e.children.push(s),s}function st(t,e){const n=[],i=new Map;function s(t){return i.get(t)}function r(t,n,i){const s=!i,c=ot(t);c.aliasOf=i&&i.record;const u=ht(e,t),d=[c];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(a({},c,{components:i?i.record.components:c.components,path:t,aliasOf:i?i.record:c}))}let f,p;for(const e of d){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,i="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&i+a)}if(f=it(e,n,u),i?i.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),s&&t.name&&!ct(f)&&o(t.name)),c.children){const t=c.children;for(let e=0;e<t.length;e++)r(t[e],f,i&&i.children[e])}i=i||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&h(f)}return p?()=>{o(p)}:l}function o(t){if(V(t)){const e=i.get(t);e&&(i.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&i.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function c(){return n}function h(t){let e=0;while(e<n.length&&J(t,n[e])>=0&&(t.record.path!==n[e].record.path||!ut(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!ct(t)&&i.set(t.record.name,t)}function u(t,e){let s,r,o,c={};if("name"in t&&t.name){if(s=i.get(t.name),!s)throw q(1,{location:t});0,o=s.record.name,c=a(rt(e.params,s.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&rt(t.params,s.keys.map((t=>t.name)))),r=s.stringify(c)}else if("path"in t)r=t.path,s=n.find((t=>t.re.test(r))),s&&(c=s.parse(r),o=s.record.name);else{if(s=e.name?i.get(e.name):n.find((t=>t.re.test(e.path))),!s)throw q(1,{location:t,currentLocation:e});o=s.record.name,c=a({},e.params,t.params),r=s.stringify(c)}const l=[];let h=s;while(h)l.unshift(h.record),h=h.parent;return{name:o,path:r,params:c,matched:l,meta:lt(l)}}return e=ht({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>r(t))),{addRoute:r,resolve:u,removeRoute:o,getRoutes:c,getRecordMatcher:s}}function rt(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function ot(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]="boolean"===typeof n?n:n[i];return e}function ct(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function lt(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ht(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function ut(t,e){return e.children.some((e=>e===t||ut(t,e)))}const dt=/#/g,ft=/&/g,pt=/\//g,gt=/=/g,mt=/\?/g,yt=/\+/g,vt=/%5B/g,bt=/%5D/g,wt=/%5E/g,xt=/%60/g,_t=/%7B/g,Tt=/%7C/g,St=/%7D/g,It=/%20/g;function kt(t){return encodeURI(""+t).replace(Tt,"|").replace(vt,"[").replace(bt,"]")}function Et(t){return kt(t).replace(_t,"{").replace(St,"}").replace(wt,"^")}function Ct(t){return kt(t).replace(yt,"%2B").replace(It,"+").replace(dt,"%23").replace(ft,"%26").replace(xt,"`").replace(_t,"{").replace(St,"}").replace(wt,"^")}function At(t){return Ct(t).replace(gt,"%3D")}function Ot(t){return kt(t).replace(dt,"%23").replace(mt,"%3F")}function Pt(t){return null==t?"":Ot(t).replace(pt,"%2F")}function Mt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Dt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],i=(n?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const t=i[s].replace(yt," "),n=t.indexOf("="),r=Mt(n<0?t:t.slice(0,n)),o=n<0?null:Mt(t.slice(n+1));if(r in e){let t=e[r];h(t)||(t=e[r]=[t]),t.push(o)}else e[r]=o}return e}function Lt(t){let e="";for(let n in t){const i=t[n];if(n=At(n),null==i){void 0!==i&&(e+=(e.length?"&":"")+n);continue}const s=h(i)?i.map((t=>t&&Ct(t))):[i&&Ct(i)];s.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Nt(t){const e={};for(const n in t){const i=t[n];void 0!==i&&(e[n]=h(i)?i.map((t=>null==t?null:""+t)):null==i?i:""+i)}return e}const Rt=Symbol(""),Ft=Symbol(""),jt=Symbol(""),Bt=Symbol(""),Ut=Symbol("");function Vt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function zt(t,e,n,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise(((o,a)=>{const c=t=>{!1===t?a(q(4,{from:n,to:e})):t instanceof Error?a(t):U(t)?a(q(2,{from:e,to:t})):(r&&i.enterCallbacks[s]===r&&"function"===typeof t&&r.push(t),o())},l=t.call(i&&i.instances[s],e,n,c);let h=Promise.resolve(l);t.length<3&&(h=h.then(c)),h.catch((t=>a(t)))}))}function Gt(t,e,n,i){const s=[];for(const r of t){0;for(const t in r.components){let a=r.components[t];if("beforeRouteEnter"===e||r.instances[t])if($t(a)){const o=a.__vccOpts||a,c=o[e];c&&s.push(zt(c,n,i,r,t))}else{let c=a();0,s.push((()=>c.then((s=>{if(!s)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${r.path}"`));const a=o(s)?s.default:s;r.components[t]=a;const c=a.__vccOpts||a,l=c[e];return l&&zt(l,n,i,r,t)()}))))}}}return s}function $t(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function qt(t){const e=(0,i.f3)(jt),n=(0,i.f3)(Bt),r=(0,i.Fl)((()=>e.resolve((0,s.SU)(t.to)))),o=(0,i.Fl)((()=>{const{matched:t}=r.value,{length:e}=t,i=t[e-1],s=n.matched;if(!i||!s.length)return-1;const o=s.findIndex(y.bind(null,i));if(o>-1)return o;const a=Yt(t[e-2]);return e>1&&Yt(i)===a&&s[s.length-1].path!==a?s.findIndex(y.bind(null,t[e-2])):o})),a=(0,i.Fl)((()=>o.value>-1&&Xt(n.params,r.value.params))),c=(0,i.Fl)((()=>o.value>-1&&o.value===n.matched.length-1&&v(n.params,r.value.params)));function h(n={}){return Kt(n)?e[(0,s.SU)(t.replace)?"replace":"push"]((0,s.SU)(t.to)).catch(l):Promise.resolve()}return{route:r,href:(0,i.Fl)((()=>r.value.href)),isActive:a,isExactActive:c,navigate:h}}const Wt=(0,i.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qt,setup(t,{slots:e}){const n=(0,s.qj)(qt(t)),{options:r}=(0,i.f3)(jt),o=(0,i.Fl)((()=>({[Qt(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qt(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const s=e.default&&e.default(n);return t.custom?s:(0,i.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},s)}}}),Ht=Wt;function Kt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Xt(t,e){for(const n in e){const i=e[n],s=t[n];if("string"===typeof i){if(i!==s)return!1}else if(!h(s)||s.length!==i.length||i.some(((t,e)=>t!==s[e])))return!1}return!0}function Yt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qt=(t,e,n)=>null!=t?t:null!=e?e:n,Jt=(0,i.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=(0,i.f3)(Ut),o=(0,i.Fl)((()=>t.route||r.value)),c=(0,i.f3)(Ft,0),l=(0,i.Fl)((()=>{let t=(0,s.SU)(c);const{matched:e}=o.value;let n;while((n=e[t])&&!n.components)t++;return t})),h=(0,i.Fl)((()=>o.value.matched[l.value]));(0,i.JJ)(Ft,(0,i.Fl)((()=>l.value+1))),(0,i.JJ)(Rt,h),(0,i.JJ)(Ut,o);const u=(0,s.iH)();return(0,i.YP)((()=>[u.value,h.value,t.name]),(([t,e,n],[i,s,r])=>{e&&(e.instances[n]=t,s&&s!==e&&t&&t===i&&(e.leaveGuards.size||(e.leaveGuards=s.leaveGuards),e.updateGuards.size||(e.updateGuards=s.updateGuards))),!t||!e||s&&y(e,s)&&i||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const s=o.value,r=t.name,c=h.value,l=c&&c.components[r];if(!l)return Zt(n.default,{Component:l,route:s});const d=c.props[r],f=d?!0===d?s.params:"function"===typeof d?d(s):d:null,p=t=>{t.component.isUnmounted&&(c.instances[r]=null)},g=(0,i.h)(l,a({},f,e,{onVnodeUnmounted:p,ref:u}));return Zt(n.default,{Component:g,route:s})||g}}});function Zt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Jt;function ee(t){const e=st(t.routes,t),n=t.parseQuery||Dt,o=t.stringifyQuery||Lt,u=t.history;const d=Vt(),g=Vt(),y=Vt(),v=(0,s.XI)(z);let b=z;r&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=c.bind(null,(t=>""+t)),x=c.bind(null,Pt),T=c.bind(null,Mt);function S(t,n){let i,s;return V(t)?(i=e.getRecordMatcher(t),s=n):s=t,e.addRoute(s,i)}function I(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function k(){return e.getRoutes().map((t=>t.record))}function E(t){return!!e.getRecordMatcher(t)}function P(t,i){if(i=a({},i||v.value),"string"===typeof t){const s=f(n,t,i.path),r=e.resolve({path:s.path},i),o=u.createHref(s.fullPath);return a(s,r,{params:T(r.params),hash:Mt(s.hash),redirectedFrom:void 0,href:o})}let s;if("path"in t)s=a({},t,{path:f(n,t.path,i.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];s=a({},t,{params:x(e)}),i.params=x(i.params)}const r=e.resolve(s,i),c=t.hash||"";r.params=w(T(r.params));const l=p(o,a({},t,{hash:Et(c),path:r.path})),h=u.createHref(l);return a({fullPath:l,hash:c,query:o===Lt?Nt(t.query):t.query||{}},r,{redirectedFrom:void 0,href:h})}function L(t){return"string"===typeof t?f(n,t,v.value.path):a({},t)}function N(t,e){if(b!==t)return q(8,{from:e,to:t})}function R(t){return B(t)}function F(t){return R(a(L(t),{replace:!0}))}function j(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let i="function"===typeof n?n(t):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=L(i):{path:i},i.params={}),a({query:t.query,hash:t.hash,params:"path"in i?{}:t.params},i)}}function B(t,e){const n=b=P(t),i=v.value,s=t.state,r=t.force,c=!0===t.replace,l=j(n);if(l)return B(a(L(l),{state:"object"===typeof l?a({},s,l.state):s,force:r,replace:c}),e||n);const h=n;let u;return h.redirectedFrom=e,!r&&m(o,i,n)&&(u=q(16,{to:h,from:i}),it(i,i,!0,!1)),(u?Promise.resolve(u):$(h,i)).catch((t=>W(t)?W(t,2)?t:nt(t):tt(t,h,i))).then((t=>{if(t){if(W(t,2))return B(a({replace:c},L(t.to),{state:"object"===typeof t.to?a({},s,t.to.state):s,force:r}),e||h)}else t=K(h,i,!0,c,s);return H(h,i,t),t}))}function U(t,e){const n=N(t,e);return n?Promise.reject(n):Promise.resolve()}function G(t){const e=at.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function $(t,e){let n;const[i,s,r]=ne(t,e);n=Gt(i.reverse(),"beforeRouteLeave",t,e);for(const a of i)a.leaveGuards.forEach((i=>{n.push(zt(i,t,e))}));const o=U.bind(null,t,e);return n.push(o),lt(n).then((()=>{n=[];for(const i of d.list())n.push(zt(i,t,e));return n.push(o),lt(n)})).then((()=>{n=Gt(s,"beforeRouteUpdate",t,e);for(const i of s)i.updateGuards.forEach((i=>{n.push(zt(i,t,e))}));return n.push(o),lt(n)})).then((()=>{n=[];for(const i of t.matched)if(i.beforeEnter&&!e.matched.includes(i))if(h(i.beforeEnter))for(const s of i.beforeEnter)n.push(zt(s,t,e));else n.push(zt(i.beforeEnter,t,e));return n.push(o),lt(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Gt(r,"beforeRouteEnter",t,e),n.push(o),lt(n)))).then((()=>{n=[];for(const i of g.list())n.push(zt(i,t,e));return n.push(o),lt(n)})).catch((t=>W(t,8)?t:Promise.reject(t)))}function H(t,e,n){for(const i of y.list())G((()=>i(t,e,n)))}function K(t,e,n,i,s){const o=N(t,e);if(o)return o;const c=e===z,l=r?history.state:{};n&&(i||c?u.replace(t.fullPath,a({scroll:c&&l&&l.scroll},s)):u.push(t.fullPath,s)),v.value=t,it(t,e,n,c),nt()}let X;function Y(){X||(X=u.listen(((t,e,n)=>{if(!ct.listening)return;const i=P(t),s=j(i);if(s)return void B(a(s,{replace:!0}),i).catch(l);b=i;const o=v.value;r&&M(O(o.fullPath,n.delta),C()),$(i,o).catch((t=>W(t,12)?t:W(t,2)?(B(t.to,i).then((t=>{W(t,20)&&!n.delta&&n.type===_.pop&&u.go(-1,!1)})).catch(l),Promise.reject()):(n.delta&&u.go(-n.delta,!1),tt(t,i,o)))).then((t=>{t=t||K(i,o,!1),t&&(n.delta&&!W(t,8)?u.go(-n.delta,!1):n.type===_.pop&&W(t,20)&&u.go(-1,!1)),H(i,o,t)})).catch(l)})))}let Q,J=Vt(),Z=Vt();function tt(t,e,n){nt(t);const i=Z.list();return i.length?i.forEach((i=>i(t,e,n))):console.error(t),Promise.reject(t)}function et(){return Q&&v.value!==z?Promise.resolve():new Promise(((t,e)=>{J.add([t,e])}))}function nt(t){return Q||(Q=!t,Y(),J.list().forEach((([e,n])=>t?n(t):e())),J.reset()),t}function it(e,n,s,o){const{scrollBehavior:a}=t;if(!r||!a)return Promise.resolve();const c=!s&&D(O(e.fullPath,0))||(o||!s)&&history.state&&history.state.scroll||null;return(0,i.Y3)().then((()=>a(e,n,c))).then((t=>t&&A(t))).catch((t=>tt(t,e,n)))}const rt=t=>u.go(t);let ot;const at=new Set,ct={currentRoute:v,listening:!0,addRoute:S,removeRoute:I,hasRoute:E,getRoutes:k,resolve:P,options:t,push:R,replace:F,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:d.add,beforeResolve:g.add,afterEach:y.add,onError:Z.add,isReady:et,install(t){const e=this;t.component("RouterLink",Ht),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,s.SU)(v)}),r&&!ot&&v.value===z&&(ot=!0,R(u.location).catch((t=>{0})));const n={};for(const s in z)n[s]=(0,i.Fl)((()=>v.value[s]));t.provide(jt,e),t.provide(Bt,(0,s.qj)(n)),t.provide(Ut,v);const o=t.unmount;at.add(t),t.unmount=function(){at.delete(t),at.size<1&&(b=z,X&&X(),X=null,v.value=z,ot=!1,Q=!1),o()}}};function lt(t){return t.reduce(((t,e)=>t.then((()=>G(e)))),Promise.resolve())}return ct}function ne(t,e){const n=[],i=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const r=e.matched[o];r&&(t.matched.find((t=>y(t,r)))?i.push(r):n.push(r));const a=t.matched[o];a&&(e.matched.find((t=>y(t,a)))||s.push(a))}return[n,i,s]}}}]);
//# sourceMappingURL=chunk-vendors.c756ad2d.js.map