{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Dashboard\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"table\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"Name\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"Amount\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"Category\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  scope: \"col\"\n}, \"Date\")])], -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_IncomeForm = _resolveComponent(\"IncomeForm\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"p\", null, \"Total Income: \" + _toDisplayString($options.totalIncome), 1 /* TEXT */), _createElementVNode(\"table\", _hoisted_3, [_hoisted_4, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.income, incomeItem => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: incomeItem.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(incomeItem.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(incomeItem.amount), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(incomeItem.category), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(incomeItem.date), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createVNode(_component_IncomeForm, {\n    onIncomeAdded: $options.incomeAddedHandler\n  }, null, 8 /* PROPS */, [\"onIncomeAdded\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","scope","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","$options","totalIncome","_hoisted_3","_hoisted_4","_Fragment","_renderList","$data","income","incomeItem","key","id","name","amount","category","date","_createVNode","_component_IncomeForm","onIncomeAdded","incomeAddedHandler"],"sources":["C:\\Users\\jabri\\Desktop\\expense-tracker2\\src\\components\\DashboardPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h1>Dashboard</h1>\r\n    <p>Total Income: {{totalIncome}}</p>\r\n    <table class=\"table\">\r\n      <thead>\r\n        <tr>\r\n          <th scope=\"col\">Name</th>\r\n          <th scope=\"col\">Amount</th>\r\n          <th scope=\"col\">Category</th>\r\n          <th scope=\"col\">Date</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"incomeItem in income\" :key=\"incomeItem.id\">\r\n          <td>{{incomeItem.name}}</td>\r\n          <td>{{incomeItem.amount}}</td>\r\n          <td>{{incomeItem.category}}</td>\r\n          <td>{{incomeItem.date}}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <IncomeForm @income-added=\"incomeAddedHandler\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { db, auth } from '@/firebase.js';\r\nimport 'firebase/firestore';\r\nimport IncomeForm from '@/components/IncomeForm.vue';\r\n\r\nexport default {\r\n  name: 'DashboardPage',\r\n  components: {\r\n    IncomeForm\r\n  },\r\n  data() {\r\n    return {\r\n      expenses: [],\r\n      income: []\r\n    }\r\n  },\r\n  computed: {\r\n    totalExpenses() {\r\n      return this.expenses.reduce((total, expense) => total + parseFloat(expense.amount), 0).toFixed(2)\r\n    },\r\n    totalIncome() {\r\n      return this.income.reduce((total, income) => total + parseFloat(income.amount), 0).toFixed(2)\r\n    },\r\n    recentTransactions() {\r\n      const transactions = [...this.expenses, ...this.income]\r\n      transactions.sort((a, b) => new Date(b.date) - new Date(a.date))\r\n      return transactions.slice(0, 5)\r\n    }\r\n  },\r\n  created() {\r\n    auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        this.fetchExpenses(user.uid)\r\n        this.fetchIncome(user.uid)\r\n      } else {\r\n        // Handle unauthenticated user\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    fetchExpenses(uid) {\r\n      db.collection('expenses').where('user_id', '==', uid).get()\r\n        .then(querySnapshot => {\r\n          const expenses = []\r\n          querySnapshot.forEach(doc => {\r\n            expenses.push({ id: doc.id, ...doc.data() })\r\n          })\r\n          this.expenses = expenses\r\n        })\r\n        .catch(error => console.log(error))\r\n    },\r\n    fetchIncome(uid) {\r\n      db.collection('income').where('user_id', '==', uid).get()\r\n        .then(querySnapshot => {\r\n          const income = []\r\n          querySnapshot.forEach(doc => {\r\n            income.push({ id: doc.id, ...doc.data() })\r\n          })\r\n          this.income = income\r\n        })\r\n        .catch(error => console.log(error))\r\n    },\r\n    incomeAddedHandler(incomeData) {\r\n      this.income.push(incomeData);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;gCACpBC,mBAAA,CAAkB,YAAd,WAAS;;EAEND,KAAK,EAAC;AAAO;gCAClBC,mBAAA,CAOQ,gB,aANNA,mBAAA,CAKK,a,aAJHA,mBAAA,CAAyB;EAArBC,KAAK,EAAC;AAAK,GAAC,MAAI,G,aACpBD,mBAAA,CAA2B;EAAvBC,KAAK,EAAC;AAAK,GAAC,QAAM,G,aACtBD,mBAAA,CAA6B;EAAzBC,KAAK,EAAC;AAAK,GAAC,UAAQ,G,aACxBD,mBAAA,CAAyB;EAArBC,KAAK,EAAC;AAAK,GAAC,MAAI,E;;;;uBAT5BC,mBAAA,CAsBM,OAtBNC,UAsBM,GArBJC,UAAkB,EAClBJ,mBAAA,CAAoC,WAAjC,gBAAc,GAAAK,gBAAA,CAAEC,QAAA,CAAAC,WAAW,kBAC9BP,mBAAA,CAiBQ,SAjBRQ,UAiBQ,GAhBNC,UAOQ,EACRT,mBAAA,CAOQ,iB,kBANNE,mBAAA,CAKKQ,SAAA,QAAAC,WAAA,CALoBC,KAAA,CAAAC,MAAM,EAApBC,UAAU;yBAArBZ,mBAAA,CAKK;MAL6Ba,GAAG,EAAED,UAAU,CAACE;QAChDhB,mBAAA,CAA4B,YAAAK,gBAAA,CAAtBS,UAAU,CAACG,IAAI,kBACrBjB,mBAAA,CAA8B,YAAAK,gBAAA,CAAxBS,UAAU,CAACI,MAAM,kBACvBlB,mBAAA,CAAgC,YAAAK,gBAAA,CAA1BS,UAAU,CAACK,QAAQ,kBACzBnB,mBAAA,CAA4B,YAAAK,gBAAA,CAAtBS,UAAU,CAACM,IAAI,iB;sCAI3BC,YAAA,CAAiDC,qBAAA;IAApCC,aAAY,EAAEjB,QAAA,CAAAkB;EAAkB,2C"},"metadata":{},"sourceType":"module","externalDependencies":[]}