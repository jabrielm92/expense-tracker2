{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as d3 from 'd3';\nimport { db, auth } from '@/firebase.js';\nexport default {\n  name: 'ChartComponent',\n  data() {\n    return {\n      data: []\n    };\n  },\n  created() {\n    this.fetchData();\n  },\n  methods: {\n    fetchData() {\n      const userId = auth.currentUser.uid;\n      let data = [];\n      db.collection(`users/${userId}/income`).get().then(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          let transaction = doc.data();\n          transaction.id = doc.id;\n          transaction.type = 'income';\n          data.push(transaction);\n        });\n      }).catch(error => {\n        console.error('Error fetching income transactions:', error);\n      });\n      db.collection(`users/${userId}/expenses`).get().then(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          let transaction = doc.data();\n          transaction.id = doc.id;\n          transaction.type = 'expense';\n          data.push(transaction);\n        });\n      }).catch(error => {\n        console.error('Error fetching expense transactions:', error);\n      });\n      this.data = data;\n    },\n    drawChart() {\n      const width = 400;\n      const height = 400;\n      const radius = Math.min(width, height) / 2;\n      const svg = d3.select('#chart').append('svg').attr('width', width).attr('height', height).append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n      const color = d3.scaleOrdinal().domain(['income', 'expense']).range(['#98abc5', '#8a89a6']);\n      const pie = d3.pie().value(d => d.amount).sort(null);\n      const data = pie(this.data);\n      const arc = d3.arc().innerRadius(0).outerRadius(radius);\n      const path = svg.selectAll('path').data(data).enter().append('path').attr('d', arc).attr('fill', d => color(d.data.type));\n      const legend = svg.selectAll('.legend').data(color.domain()).enter().append('g').attr('class', 'legend').attr('transform', (d, i) => `translate(${i * 100 - 50}, 200)`);\n      legend.append('rect').attr('x', 0).attr('y', 0).attr('width', 20).attr('height', 20).style('fill', color);\n      legend.append('text').attr('x', 30).attr('y', 15).text(d => d);\n    }\n  },\n  mounted() {\n    this.drawChart();\n  }\n};","map":{"version":3,"names":["d3","db","auth","name","data","created","fetchData","methods","userId","currentUser","uid","collection","get","then","querySnapshot","forEach","doc","transaction","id","type","push","catch","error","console","drawChart","width","height","radius","Math","min","svg","select","append","attr","color","scaleOrdinal","domain","range","pie","value","d","amount","sort","arc","innerRadius","outerRadius","path","selectAll","enter","legend","i","style","text","mounted"],"sources":["C:\\Users\\jabri\\Desktop\\expense-tracker2\\src\\components\\ChartComponent.vue"],"sourcesContent":["<script>\r\nimport * as d3 from 'd3';\r\nimport { db, auth } from '@/firebase.js';\r\n\r\nexport default {\r\n  name: 'ChartComponent',\r\n  data() {\r\n    return {\r\n      data: []\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchData();\r\n  },\r\n  methods: {\r\n    fetchData() {\r\n      const userId = auth.currentUser.uid;\r\n      let data = [];\r\n\r\n      db.collection(`users/${userId}/income`).get()\r\n        .then((querySnapshot) => {\r\n          querySnapshot.forEach((doc) => {\r\n            let transaction = doc.data();\r\n            transaction.id = doc.id;\r\n            transaction.type = 'income';\r\n            data.push(transaction);\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error fetching income transactions:', error);\r\n        });\r\n        \r\n      db.collection(`users/${userId}/expenses`).get()\r\n        .then((querySnapshot) => {\r\n          querySnapshot.forEach((doc) => {\r\n            let transaction = doc.data();\r\n            transaction.id = doc.id;\r\n            transaction.type = 'expense';\r\n            data.push(transaction);\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error fetching expense transactions:', error);\r\n        });\r\n\r\n      this.data = data;\r\n    },\r\n    drawChart() {\r\n      const width = 400;\r\n      const height = 400;\r\n      const radius = Math.min(width, height) / 2;\r\n\r\n      const svg = d3.select('#chart')\r\n        .append('svg')\r\n        .attr('width', width)\r\n        .attr('height', height)\r\n        .append('g')\r\n        .attr('transform', `translate(${width / 2}, ${height / 2})`);\r\n\r\n      const color = d3.scaleOrdinal()\r\n        .domain(['income', 'expense'])\r\n        .range(['#98abc5', '#8a89a6']);\r\n\r\n      const pie = d3.pie()\r\n        .value((d) => d.amount)\r\n        .sort(null);\r\n\r\n      const data = pie(this.data);\r\n\r\n      const arc = d3.arc()\r\n        .innerRadius(0)\r\n        .outerRadius(radius);\r\n\r\n      const path = svg.selectAll('path')\r\n        .data(data)\r\n        .enter()\r\n        .append('path')\r\n        .attr('d', arc)\r\n        .attr('fill', (d) => color(d.data.type));\r\n\r\n      const legend = svg.selectAll('.legend')\r\n        .data(color.domain())\r\n        .enter()\r\n        .append('g')\r\n        .attr('class', 'legend')\r\n        .attr('transform', (d, i) => `translate(${i * 100 - 50}, 200)`);\r\n\r\n      legend.append('rect')\r\n        .attr('x', 0)\r\n        .attr('y', 0)\r\n        .attr('width', 20)\r\n        .attr('height', 20)\r\n        .style('fill', color);\r\n\r\n      legend.append('text')\r\n        .attr('x', 30)\r\n        .attr('y', 15)\r\n        .text((d) => d);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.drawChart();\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div id=\"chart\"></div>\r\n</template>\r\n\r\n  \r\n  \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}