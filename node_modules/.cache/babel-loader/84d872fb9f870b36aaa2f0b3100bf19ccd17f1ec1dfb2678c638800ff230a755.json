{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { db, auth } from '@/firebase.js';\nimport * as d3 from 'd3';\nexport default {\n  name: 'ChartComponent',\n  data() {\n    return {\n      data: []\n    };\n  },\n  mounted() {\n    this.fetchData();\n  },\n  methods: {\n    async fetchTransactions() {\n      const userId = auth.currentUser.uid;\n      const incomeData = [];\n      const expenseData = [];\n      const incomeQuerySnapshot = await db.collection(`users/${userId}/income`).get();\n      incomeQuerySnapshot.forEach(doc => {\n        let transaction = doc.data();\n        transaction.id = doc.id;\n        incomeData.push(transaction);\n      });\n      const expenseQuerySnapshot = await db.collection(`users/${userId}/expenses`).get();\n      expenseQuerySnapshot.forEach(doc => {\n        let transaction = doc.data();\n        transaction.id = doc.id;\n        expenseData.push(transaction);\n      });\n      const incomeTotal = incomeData.reduce((total, d) => total + d.amount, 0);\n      const expenseTotal = expenseData.reduce((total, d) => total + d.amount, 0);\n      const data = [{\n        label: 'Income',\n        value: incomeTotal\n      }, {\n        label: 'Expenses',\n        value: expenseTotal\n      }];\n      const width = 400;\n      const height = 400;\n      const radius = Math.min(width, height) / 2;\n      const svg = d3.select(this.$refs.chart).append('svg').attr('width', width).attr('height', height).append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n      const pie = d3.pie().value(d => d.value);\n      const path = d3.arc().outerRadius(radius - 10).innerRadius(0);\n      const label = d3.arc().outerRadius(radius - 40).innerRadius(radius - 40);\n      const arc = svg.selectAll('arc').data(pie(data)).enter().append('g').attr('class', 'arc');\n      arc.append('path').attr('d', path).attr('fill', d => d.data.color);\n      arc.append('text').attr('transform', d => `translate(${label.centroid(d)})`).attr('dy', '0.35em').text(d => d.data.label);\n    }\n  }\n};","map":{"version":3,"names":["db","auth","d3","name","data","mounted","fetchData","methods","fetchTransactions","userId","currentUser","uid","incomeData","expenseData","incomeQuerySnapshot","collection","get","forEach","doc","transaction","id","push","expenseQuerySnapshot","incomeTotal","reduce","total","d","amount","expenseTotal","label","value","width","height","radius","Math","min","svg","select","$refs","chart","append","attr","pie","path","arc","outerRadius","innerRadius","selectAll","enter","color","centroid","text"],"sources":["C:\\Users\\jabri\\Desktop\\expense-tracker2\\src\\components\\ChartComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"chart\">\r\n      <h2>Transactions Breakdown</h2>\r\n      <svg></svg>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { db, auth } from '@/firebase.js';\r\n  import * as d3 from 'd3';\r\n  \r\n  export default {\r\n    name: 'ChartComponent',\r\n    data() {\r\n      return {\r\n        data: [],\r\n      };\r\n    },\r\n    mounted() {\r\n      this.fetchData();\r\n    },\r\n    methods: {\r\n  async fetchTransactions() {\r\n    const userId = auth.currentUser.uid;\r\n    const incomeData = [];\r\n    const expenseData = [];\r\n\r\n    const incomeQuerySnapshot = await db.collection(`users/${userId}/income`).get();\r\n    incomeQuerySnapshot.forEach((doc) => {\r\n      let transaction = doc.data();\r\n      transaction.id = doc.id;\r\n      incomeData.push(transaction);\r\n    });\r\n\r\n    const expenseQuerySnapshot = await db.collection(`users/${userId}/expenses`).get();\r\n    expenseQuerySnapshot.forEach((doc) => {\r\n      let transaction = doc.data();\r\n      transaction.id = doc.id;\r\n      expenseData.push(transaction);\r\n    });\r\n\r\n    const incomeTotal = incomeData.reduce((total, d) => total + d.amount, 0);\r\n    const expenseTotal = expenseData.reduce((total, d) => total + d.amount, 0);\r\n\r\n    const data = [\r\n      { label: 'Income', value: incomeTotal },\r\n      { label: 'Expenses', value: expenseTotal },\r\n    ];\r\n\r\n    const width = 400;\r\n    const height = 400;\r\n    const radius = Math.min(width, height) / 2;\r\n\r\n    const svg = d3.select(this.$refs.chart)\r\n      .append('svg')\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .append('g')\r\n      .attr('transform', `translate(${width / 2}, ${height / 2})`);\r\n\r\n    const pie = d3.pie()\r\n      .value((d) => d.value);\r\n\r\n    const path = d3.arc()\r\n      .outerRadius(radius - 10)\r\n      .innerRadius(0);\r\n\r\n    const label = d3.arc()\r\n      .outerRadius(radius - 40)\r\n      .innerRadius(radius - 40);\r\n\r\n    const arc = svg.selectAll('arc')\r\n      .data(pie(data))\r\n      .enter()\r\n      .append('g')\r\n      .attr('class', 'arc');\r\n\r\n    arc.append('path')\r\n      .attr('d', path)\r\n      .attr('fill', (d) => d.data.color);\r\n\r\n    arc.append('text')\r\n      .attr('transform', (d) => `translate(${label.centroid(d)})`)\r\n      .attr('dy', '0.35em')\r\n      .text((d) => d.data.label);\r\n  },\r\n},\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .chart {\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n  }\r\n  </style>\r\n  \r\n  \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}