{"ast":null,"code":"import { db, auth } from '@/firebase.js';\nimport * as d3 from 'd3';\nexport default {\n  name: 'ChartComponent',\n  data() {\n    return {\n      incomeTotal: 0,\n      expenseTotal: 0\n    };\n  },\n  created() {\n    this.fetchIncomeTotal();\n    this.fetchExpenseTotal();\n  },\n  methods: {\n    fetchIncomeTotal() {\n      const userId = auth.currentUser.uid;\n      db.collection(`users/${userId}/income`).get().then(querySnapshot => {\n        let total = 0;\n        querySnapshot.forEach(doc => {\n          total += doc.data().amount;\n        });\n        this.incomeTotal = total;\n        this.renderChart();\n      }).catch(error => {\n        console.error('Error fetching income total:', error);\n      });\n    },\n    fetchExpenseTotal() {\n      const userId = auth.currentUser.uid;\n      db.collection(`users/${userId}/expenses`).get().then(querySnapshot => {\n        let total = 0;\n        querySnapshot.forEach(doc => {\n          total += doc.data().amount;\n        });\n        this.expenseTotal = total;\n        this.renderChart();\n      }).catch(error => {\n        console.error('Error fetching expense total:', error);\n      });\n    },\n    renderChart() {\n      // Get data for the pie chart\n      const data = [{\n        name: 'Income',\n        value: this.incomeTotal\n      }, {\n        name: 'Expense',\n        value: this.expenseTotal\n      }];\n\n      // Set up the pie chart dimensions\n      const width = 300;\n      const height = 300;\n      const radius = Math.min(width, height) / 2;\n\n      // Set up the color scale for the chart\n      const color = d3.scaleOrdinal().range(['#98abc5', '#8a89a6']);\n\n      // Create the pie chart\n      const pie = d3.pie().value(d => d.value);\n      const arc = d3.arc().innerRadius(0).outerRadius(radius);\n      const svg = d3.select(this.$refs.chart).append('svg').attr('width', width).attr('height', height).append('g').attr('transform', `translate(${width / 2},${height / 2})`);\n      const path = svg.selectAll('path').data(pie(data)).enter().append('path').attr('d', arc).attr('fill', d => color(d.data.name));\n\n      // Add text labels to the chart\n      const text = svg.selectAll('text').data(pie(data)).enter().append('text').text(d => `${d.data.name}: ${d.data.value}`).attr('transform', d => `translate(${arc.centroid(d)})`).attr('text-anchor', 'middle');\n    }\n  }\n};","map":{"version":3,"names":["db","auth","d3","name","data","incomeTotal","expenseTotal","created","fetchIncomeTotal","fetchExpenseTotal","methods","userId","currentUser","uid","collection","get","then","querySnapshot","total","forEach","doc","amount","renderChart","catch","error","console","value","width","height","radius","Math","min","color","scaleOrdinal","range","pie","d","arc","innerRadius","outerRadius","svg","select","$refs","chart","append","attr","path","selectAll","enter","text","centroid"],"sources":["C:\\Users\\jabri\\Desktop\\expense-tracker2\\src\\components\\ChartComponent.vue"],"sourcesContent":["<template>\r\n    <div ref=\"chart\"></div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { db, auth } from '@/firebase.js';\r\n  import * as d3 from 'd3';\r\n  \r\n  export default {\r\n    name: 'ChartComponent',\r\n    data() {\r\n      return {\r\n        incomeTotal: 0,\r\n        expenseTotal: 0,\r\n      }\r\n    },\r\n    created() {\r\n      this.fetchIncomeTotal();\r\n      this.fetchExpenseTotal();\r\n    },\r\n    methods: {\r\n      fetchIncomeTotal() {\r\n        const userId = auth.currentUser.uid;\r\n        db.collection(`users/${userId}/income`).get()\r\n          .then((querySnapshot) => {\r\n            let total = 0;\r\n            querySnapshot.forEach((doc) => {\r\n              total += doc.data().amount;\r\n            });\r\n            this.incomeTotal = total;\r\n            this.renderChart();\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error fetching income total:', error);\r\n          });\r\n      },\r\n      fetchExpenseTotal() {\r\n        const userId = auth.currentUser.uid;\r\n        db.collection(`users/${userId}/expenses`).get()\r\n          .then((querySnapshot) => {\r\n            let total = 0;\r\n            querySnapshot.forEach((doc) => {\r\n              total += doc.data().amount;\r\n            });\r\n            this.expenseTotal = total;\r\n            this.renderChart();\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error fetching expense total:', error);\r\n          });\r\n      },\r\n      renderChart() {\r\n        // Get data for the pie chart\r\n        const data = [\r\n          { name: 'Income', value: this.incomeTotal },\r\n          { name: 'Expense', value: this.expenseTotal },\r\n        ];\r\n  \r\n        // Set up the pie chart dimensions\r\n        const width = 300;\r\n        const height = 300;\r\n        const radius = Math.min(width, height) / 2;\r\n  \r\n        // Set up the color scale for the chart\r\n        const color = d3.scaleOrdinal()\r\n          .range(['#98abc5', '#8a89a6']);\r\n  \r\n        // Create the pie chart\r\n        const pie = d3.pie()\r\n          .value((d) => d.value);\r\n  \r\n        const arc = d3.arc()\r\n          .innerRadius(0)\r\n          .outerRadius(radius);\r\n  \r\n        const svg = d3.select(this.$refs.chart)\r\n          .append('svg')\r\n          .attr('width', width)\r\n          .attr('height', height)\r\n          .append('g')\r\n          .attr('transform', `translate(${width / 2},${height / 2})`);\r\n  \r\n        const path = svg.selectAll('path')\r\n          .data(pie(data))\r\n          .enter()\r\n          .append('path')\r\n          .attr('d', arc)\r\n          .attr('fill', (d) => color(d.data.name));\r\n  \r\n        // Add text labels to the chart\r\n        const text = svg.selectAll('text')\r\n          .data(pie(data))\r\n          .enter()\r\n          .append('text')\r\n          .text((d) => `${d.data.name}: ${d.data.value}`)\r\n          .attr('transform', (d) => `translate(${arc.centroid(d)})`)\r\n          .attr('text-anchor', 'middle');\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  \r\n"],"mappings":"AAKE,SAASA,EAAE,EAAEC,IAAG,QAAS,eAAe;AACxC,OAAO,KAAKC,EAAC,MAAO,IAAI;AAExB,eAAe;EACbC,IAAI,EAAE,gBAAgB;EACtBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,YAAY,EAAE;IAChB;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,iBAAiB,CAAC,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACPF,gBAAgBA,CAAA,EAAG;MACjB,MAAMG,MAAK,GAAIV,IAAI,CAACW,WAAW,CAACC,GAAG;MACnCb,EAAE,CAACc,UAAU,CAAE,SAAQH,MAAO,SAAQ,CAAC,CAACI,GAAG,CAAC,EACzCC,IAAI,CAAEC,aAAa,IAAK;QACvB,IAAIC,KAAI,GAAI,CAAC;QACbD,aAAa,CAACE,OAAO,CAAEC,GAAG,IAAK;UAC7BF,KAAI,IAAKE,GAAG,CAAChB,IAAI,CAAC,CAAC,CAACiB,MAAM;QAC5B,CAAC,CAAC;QACF,IAAI,CAAChB,WAAU,GAAIa,KAAK;QACxB,IAAI,CAACI,WAAW,CAAC,CAAC;MACpB,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChBC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD,CAAC,CAAC;IACN,CAAC;IACDf,iBAAiBA,CAAA,EAAG;MAClB,MAAME,MAAK,GAAIV,IAAI,CAACW,WAAW,CAACC,GAAG;MACnCb,EAAE,CAACc,UAAU,CAAE,SAAQH,MAAO,WAAU,CAAC,CAACI,GAAG,CAAC,EAC3CC,IAAI,CAAEC,aAAa,IAAK;QACvB,IAAIC,KAAI,GAAI,CAAC;QACbD,aAAa,CAACE,OAAO,CAAEC,GAAG,IAAK;UAC7BF,KAAI,IAAKE,GAAG,CAAChB,IAAI,CAAC,CAAC,CAACiB,MAAM;QAC5B,CAAC,CAAC;QACF,IAAI,CAACf,YAAW,GAAIY,KAAK;QACzB,IAAI,CAACI,WAAW,CAAC,CAAC;MACpB,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAChBC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD,CAAC,CAAC;IACN,CAAC;IACDF,WAAWA,CAAA,EAAG;MACZ;MACA,MAAMlB,IAAG,GAAI,CACX;QAAED,IAAI,EAAE,QAAQ;QAAEuB,KAAK,EAAE,IAAI,CAACrB;MAAY,CAAC,EAC3C;QAAEF,IAAI,EAAE,SAAS;QAAEuB,KAAK,EAAE,IAAI,CAACpB;MAAa,CAAC,CAC9C;;MAED;MACA,MAAMqB,KAAI,GAAI,GAAG;MACjB,MAAMC,MAAK,GAAI,GAAG;MAClB,MAAMC,MAAK,GAAIC,IAAI,CAACC,GAAG,CAACJ,KAAK,EAAEC,MAAM,IAAI,CAAC;;MAE1C;MACA,MAAMI,KAAI,GAAI9B,EAAE,CAAC+B,YAAY,CAAC,EAC3BC,KAAK,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;;MAEhC;MACA,MAAMC,GAAE,GAAIjC,EAAE,CAACiC,GAAG,CAAC,EAChBT,KAAK,CAAEU,CAAC,IAAKA,CAAC,CAACV,KAAK,CAAC;MAExB,MAAMW,GAAE,GAAInC,EAAE,CAACmC,GAAG,CAAC,EAChBC,WAAW,CAAC,CAAC,EACbC,WAAW,CAACV,MAAM,CAAC;MAEtB,MAAMW,GAAE,GAAItC,EAAE,CAACuC,MAAM,CAAC,IAAI,CAACC,KAAK,CAACC,KAAK,EACnCC,MAAM,CAAC,KAAK,EACZC,IAAI,CAAC,OAAO,EAAElB,KAAK,EACnBkB,IAAI,CAAC,QAAQ,EAAEjB,MAAM,EACrBgB,MAAM,CAAC,GAAG,EACVC,IAAI,CAAC,WAAW,EAAG,aAAYlB,KAAI,GAAI,CAAE,IAAGC,MAAK,GAAI,CAAE,GAAE,CAAC;MAE7D,MAAMkB,IAAG,GAAIN,GAAG,CAACO,SAAS,CAAC,MAAM,EAC9B3C,IAAI,CAAC+B,GAAG,CAAC/B,IAAI,CAAC,EACd4C,KAAK,CAAC,EACNJ,MAAM,CAAC,MAAM,EACbC,IAAI,CAAC,GAAG,EAAER,GAAG,EACbQ,IAAI,CAAC,MAAM,EAAGT,CAAC,IAAKJ,KAAK,CAACI,CAAC,CAAChC,IAAI,CAACD,IAAI,CAAC,CAAC;;MAE1C;MACA,MAAM8C,IAAG,GAAIT,GAAG,CAACO,SAAS,CAAC,MAAM,EAC9B3C,IAAI,CAAC+B,GAAG,CAAC/B,IAAI,CAAC,EACd4C,KAAK,CAAC,EACNJ,MAAM,CAAC,MAAM,EACbK,IAAI,CAAEb,CAAC,IAAM,GAAEA,CAAC,CAAChC,IAAI,CAACD,IAAK,KAAIiC,CAAC,CAAChC,IAAI,CAACsB,KAAM,EAAC,EAC7CmB,IAAI,CAAC,WAAW,EAAGT,CAAC,IAAM,aAAYC,GAAG,CAACa,QAAQ,CAACd,CAAC,CAAE,GAAE,EACxDS,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC;IAClC;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}