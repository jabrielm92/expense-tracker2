{"ast":null,"code":"import { db, auth } from '@/firebase.js';\nimport * as d3 from 'd3';\nexport default {\n  name: 'ChartComponent',\n  data() {\n    return {\n      incomePercentage: 0,\n      expensePercentage: 0\n    };\n  },\n  created() {\n    this.fetchIncomeTotal();\n    this.fetchExpenseTotal();\n  },\n  methods: {\n    fetchIncomeTotal() {\n      const userId = auth.currentUser.uid;\n      db.collection(`users/${userId}/income`).get().then(querySnapshot => {\n        let total = 0;\n        querySnapshot.forEach(doc => {\n          total += doc.data().amount;\n        });\n        this.incomePercentage = total / (this.incomeTotal + this.expenseTotal) * 100;\n        this.createChart();\n      }).catch(error => {\n        console.error('Error fetching income total:', error);\n      });\n    },\n    fetchExpenseTotal() {\n      const userId = auth.currentUser.uid;\n      db.collection(`users/${userId}/expenses`).get().then(querySnapshot => {\n        let total = 0;\n        querySnapshot.forEach(doc => {\n          total += doc.data().amount;\n        });\n        this.expensePercentage = total / (this.incomeTotal + this.expenseTotal) * 100;\n        this.createChart();\n      }).catch(error => {\n        console.error('Error fetching expense total:', error);\n      });\n    },\n    createChart() {\n      const data = [{\n        label: 'Income',\n        value: this.incomePercentage\n      }, {\n        label: 'Expense',\n        value: this.expensePercentage\n      }];\n      const width = 300;\n      const height = 300;\n      const radius = Math.min(width, height) / 2;\n      const svg = d3.select('.chart-container').append('svg').attr('width', width).attr('height', height).append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n      const color = d3.scaleOrdinal().domain(data.map(d => d.label)).range(d3.schemeSet2);\n      const pie = d3.pie().value(d => d.value);\n      const data_ready = pie(data);\n      svg.selectAll('whatever').data(data_ready).enter().append('path').attr('d', d3.arc().innerRadius(0).outerRadius(radius)).attr('fill', d => color(d.data.label)).attr('stroke', 'black').style('stroke-width', '2px').style('opacity', 0.7);\n    }\n  }\n};","map":{"version":3,"names":["db","auth","d3","name","data","incomePercentage","expensePercentage","created","fetchIncomeTotal","fetchExpenseTotal","methods","userId","currentUser","uid","collection","get","then","querySnapshot","total","forEach","doc","amount","incomeTotal","expenseTotal","createChart","catch","error","console","label","value","width","height","radius","Math","min","svg","select","append","attr","color","scaleOrdinal","domain","map","d","range","schemeSet2","pie","data_ready","selectAll","enter","arc","innerRadius","outerRadius","style"],"sources":["C:\\Users\\jabri\\Desktop\\expense-tracker2\\src\\components\\ChartComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"chart-container\"></div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { db, auth } from '@/firebase.js';\r\n  import * as d3 from 'd3';\r\n  \r\n  export default {\r\n    name: 'ChartComponent',\r\n    data() {\r\n      return {\r\n        incomePercentage: 0,\r\n        expensePercentage: 0,\r\n      }\r\n    },\r\n    created() {\r\n      this.fetchIncomeTotal();\r\n      this.fetchExpenseTotal();\r\n    },\r\n    methods: {\r\n      fetchIncomeTotal() {\r\n        const userId = auth.currentUser.uid;\r\n        db.collection(`users/${userId}/income`).get()\r\n          .then((querySnapshot) => {\r\n            let total = 0;\r\n            querySnapshot.forEach((doc) => {\r\n              total += doc.data().amount;\r\n            });\r\n            this.incomePercentage = total / (this.incomeTotal + this.expenseTotal) * 100;\r\n            this.createChart();\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error fetching income total:', error);\r\n          });\r\n      },\r\n      fetchExpenseTotal() {\r\n        const userId = auth.currentUser.uid;\r\n        db.collection(`users/${userId}/expenses`).get()\r\n          .then((querySnapshot) => {\r\n            let total = 0;\r\n            querySnapshot.forEach((doc) => {\r\n              total += doc.data().amount;\r\n            });\r\n            this.expensePercentage = total / (this.incomeTotal + this.expenseTotal) * 100;\r\n            this.createChart();\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error fetching expense total:', error);\r\n          });\r\n      },\r\n      createChart() {\r\n        const data = [\r\n          { label: 'Income', value: this.incomePercentage },\r\n          { label: 'Expense', value: this.expensePercentage },\r\n        ];\r\n  \r\n        const width = 300;\r\n        const height = 300;\r\n        const radius = Math.min(width, height) / 2;\r\n  \r\n        const svg = d3.select('.chart-container')\r\n          .append('svg')\r\n          .attr('width', width)\r\n          .attr('height', height)\r\n          .append('g')\r\n          .attr('transform', `translate(${width / 2}, ${height / 2})`);\r\n  \r\n        const color = d3.scaleOrdinal()\r\n          .domain(data.map(d => d.label))\r\n          .range(d3.schemeSet2);\r\n  \r\n        const pie = d3.pie()\r\n          .value(d => d.value);\r\n  \r\n        const data_ready = pie(data);\r\n  \r\n        svg.selectAll('whatever')\r\n          .data(data_ready)\r\n          .enter()\r\n          .append('path')\r\n          .attr('d', d3.arc()\r\n            .innerRadius(0)\r\n            .outerRadius(radius)\r\n          )\r\n          .attr('fill', d => color(d.data.label))\r\n          .attr('stroke', 'black')\r\n          .style('stroke-width', '2px')\r\n          .style('opacity', 0.7);\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}