{"ast":null,"code":"import * as d3 from 'd3';\nimport { db } from '@/firebase.js';\nexport default {\n  name: 'ChartComponent',\n  mounted() {\n    this.fetchData();\n  },\n  methods: {\n    fetchData() {\n      const currentUser = firebase.auth().currentUser;\n      db.collection('income').where('userId', '==', currentUser.uid).get().then(querySnapshot => {\n        const incomeTotal = querySnapshot.docs.reduce((total, doc) => {\n          return total + doc.data().amount;\n        }, 0);\n        db.collection('expenses').where('userId', '==', currentUser.uid).get().then(querySnapshot => {\n          const expenseTotal = querySnapshot.docs.reduce((total, doc) => {\n            return total + doc.data().amount;\n          }, 0);\n          this.drawChart(incomeTotal, expenseTotal);\n        });\n      }).catch(error => {\n        console.error('Error fetching data:', error);\n      });\n    },\n    drawChart(incomeTotal, expenseTotal) {\n      const data = [{\n        label: 'Income',\n        value: incomeTotal\n      }, {\n        label: 'Expenses',\n        value: expenseTotal\n      }];\n      const margin = {\n        top: 10,\n        right: 10,\n        bottom: 10,\n        left: 10\n      };\n      const width = 400 - margin.left - margin.right;\n      const height = 400 - margin.top - margin.bottom;\n      const radius = Math.min(width, height) / 2;\n      const svg = d3.select(this.$refs.chart).append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${width / 2},${height / 2})`);\n      const color = d3.scaleOrdinal().domain(data.map(d => d.label)).range(['#4CAF50', '#F44336']);\n      const pie = d3.pie().value(d => d.value);\n      const arc = d3.arc().innerRadius(0).outerRadius(radius);\n      const arcs = svg.selectAll('arc').data(pie(data)).enter().append('g').attr('class', 'arc');\n      arcs.append('path').attr('fill', d => color(d.data.label)).attr('d', arc);\n      arcs.append('text').attr('transform', d => `translate(${arc.centroid(d)})`).attr('text-anchor', 'middle').attr('font-size', '1.5em').text(d => d.data.label);\n    }\n  }\n};","map":{"version":3,"names":["d3","db","name","mounted","fetchData","methods","currentUser","firebase","auth","collection","where","uid","get","then","querySnapshot","incomeTotal","docs","reduce","total","doc","data","amount","expenseTotal","drawChart","catch","error","console","label","value","margin","top","right","bottom","left","width","height","radius","Math","min","svg","select","$refs","chart","append","attr","color","scaleOrdinal","domain","map","d","range","pie","arc","innerRadius","outerRadius","arcs","selectAll","enter","centroid","text"],"sources":["C:\\Users\\jabri\\Desktop\\expense-tracker2\\src\\components\\ChartComponent.vue"],"sourcesContent":["<template>\r\n    <div ref=\"chart\"></div>\r\n  </template>\r\n  \r\n  <script>\r\n\r\n  import * as d3 from 'd3';\r\n  import { db } from '@/firebase.js';\r\n  \r\n  export default {\r\n    name: 'ChartComponent',\r\n    mounted() {\r\n      this.fetchData();\r\n    },\r\n    methods: {\r\n      fetchData() {\r\n        const currentUser = firebase.auth().currentUser;\r\n  \r\n        db.collection('income')\r\n          .where('userId', '==', currentUser.uid)\r\n          .get()\r\n          .then((querySnapshot) => {\r\n            const incomeTotal = querySnapshot.docs.reduce((total, doc) => {\r\n              return total + doc.data().amount;\r\n            }, 0);\r\n  \r\n            db.collection('expenses')\r\n              .where('userId', '==', currentUser.uid)\r\n              .get()\r\n              .then((querySnapshot) => {\r\n                const expenseTotal = querySnapshot.docs.reduce((total, doc) => {\r\n                  return total + doc.data().amount;\r\n                }, 0);\r\n  \r\n                this.drawChart(incomeTotal, expenseTotal);\r\n              });\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error fetching data:', error);\r\n          });\r\n      },\r\n      drawChart(incomeTotal, expenseTotal) {\r\n        const data = [\r\n          { label: 'Income', value: incomeTotal },\r\n          { label: 'Expenses', value: expenseTotal },\r\n        ];\r\n  \r\n        const margin = { top: 10, right: 10, bottom: 10, left: 10 };\r\n        const width = 400 - margin.left - margin.right;\r\n        const height = 400 - margin.top - margin.bottom;\r\n        const radius = Math.min(width, height) / 2;\r\n  \r\n        const svg = d3.select(this.$refs.chart)\r\n          .append('svg')\r\n          .attr('width', width + margin.left + margin.right)\r\n          .attr('height', height + margin.top + margin.bottom)\r\n          .append('g')\r\n          .attr('transform', `translate(${width / 2},${height / 2})`);\r\n  \r\n        const color = d3.scaleOrdinal()\r\n          .domain(data.map((d) => d.label))\r\n          .range(['#4CAF50', '#F44336']);\r\n  \r\n        const pie = d3.pie()\r\n          .value((d) => d.value);\r\n  \r\n        const arc = d3.arc()\r\n          .innerRadius(0)\r\n          .outerRadius(radius);\r\n  \r\n        const arcs = svg.selectAll('arc')\r\n          .data(pie(data))\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', 'arc');\r\n  \r\n        arcs.append('path')\r\n          .attr('fill', (d) => color(d.data.label))\r\n          .attr('d', arc);\r\n  \r\n        arcs.append('text')\r\n          .attr('transform', (d) => `translate(${arc.centroid(d)})`)\r\n          .attr('text-anchor', 'middle')\r\n          .attr('font-size', '1.5em')\r\n          .text((d) => d.data.label);\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}